<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/Fl__Native__File__Chooser__FLTK_8cxx_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:41:51 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SfR Fresh Dox - fltk: fltk-1.3.0rc3/src/Fl_Native_File_Chooser_FLTK.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fltk&#160;<span id="projectnumber">1.3.0rc3</span></div>
   <div id="projectbrief">About: <A HREF= http://www.fltk.org/>FLTK</A> (Fast Light Tool Kit) is a cross-platform C++ GUI toolkit for UNIX/Linux (X11), Microsoft Windows, and MacOS X. Release candidate.<BR><IMG SRC="../warix/forest1.gif" ALT="">&nbsp;&nbsp;<A HREF="http://www.sfr-fresh.com/" TITLE="SfR Fresh Home">SfR Fresh</A> <A HREF="http://www.sfr-fresh.com/warix/features.html#doxygen" TITLE="SfR Fresh Doxygen Support Info">Dox</A>: <A HREF="../fresh/unix/misc/fltk-1.3.0rc3-source.tar.gz/index.html" TITLE="SfR Fresh: fltk-1.3.0rc3-source.tar.gz Contents &amp; Download Page">fltk-1.3.0rc3-source.tar.gz</A> ("inofficial" and yet experimental doxygen-generated source code documentation)&nbsp;&nbsp;<IMG SRC="../warix/forest2.gif" ALT=""><P></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index-2.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('Fl__Native__File__Chooser__FLTK_8cxx.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Fl_Native_File_Chooser_FLTK.cxx</h1>  </div>
</div>
<div class="contents">
<a href="Fl__Native__File__Chooser__FLTK_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// &quot;$Id: Fl_Native_File_Chooser_FLTK.cxx 7913 2010-11-29 18:18:27Z greg.ercolano $&quot;</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">// FLTK native OS file chooser widget</span>
<a name="l00004"></a>00004 <span class="comment">//</span>
<a name="l00005"></a>00005 <span class="comment">// Copyright 1998-2010 by Bill Spitzak and others.</span>
<a name="l00006"></a>00006 <span class="comment">// Copyright 2004 Greg Ercolano.</span>
<a name="l00007"></a>00007 <span class="comment">// API changes + filter improvements by Nathan Vander Wilt 2005</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">// This library is free software; you can redistribute it and/or</span>
<a name="l00010"></a>00010 <span class="comment">// modify it under the terms of the GNU Library General Public</span>
<a name="l00011"></a>00011 <span class="comment">// License as published by the Free Software Foundation; either</span>
<a name="l00012"></a>00012 <span class="comment">// version 2 of the License, or (at your option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">// This library is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00017"></a>00017 <span class="comment">// Library General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment">//</span>
<a name="l00019"></a>00019 <span class="comment">// You should have received a copy of the GNU Library General Public</span>
<a name="l00020"></a>00020 <span class="comment">// License along with this library; if not, write to the Free Software</span>
<a name="l00021"></a>00021 <span class="comment">// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307</span>
<a name="l00022"></a>00022 <span class="comment">// USA.</span>
<a name="l00023"></a>00023 <span class="comment">//</span>
<a name="l00024"></a>00024 <span class="comment">// Please report all bugs and problems to:</span>
<a name="l00025"></a>00025 <span class="comment">//</span>
<a name="l00026"></a>00026 <span class="comment">//     http://www.fltk.org/str.php</span>
<a name="l00027"></a>00027 <span class="comment">//</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;FL/Fl_Native_File_Chooser.H&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;FL/Fl_File_Icon.H&gt;</span>
<a name="l00031"></a><a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a62582f9cc202ce24f8b93696b5339c2c">00031</a> <span class="preprocessor">#define FLTK_CHOOSER_SINGLE    Fl_File_Chooser::SINGLE</span>
<a name="l00032"></a><a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a18859138fbd6c1ca4c7bf2b9ca7c16fe">00032</a> <span class="preprocessor"></span><span class="preprocessor">#define FLTK_CHOOSER_DIRECTORY Fl_File_Chooser::DIRECTORY</span>
<a name="l00033"></a><a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a42d12fa9fd0632bd39c48c24ebec8b7c">00033</a> <span class="preprocessor"></span><span class="preprocessor">#define FLTK_CHOOSER_MULTI     Fl_File_Chooser::MULTI</span>
<a name="l00034"></a><a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a01920e176a08d59b256df1793a1cb9f1">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define FLTK_CHOOSER_CREATE    Fl_File_Chooser::CREATE</span>
<a name="l00035"></a>00035 <span class="preprocessor"></span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="Fl__Native__File__Chooser__common_8cxx.html">Fl_Native_File_Chooser_common.cxx</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00039"></a>00039 
<a name="l00045"></a><a class="code" href="classFl__Native__File__Chooser.html#ab62790b5d3cbc8ef757c8ca632a3675e">00045</a> <a class="code" href="classFl__Native__File__Chooser.html#ab62790b5d3cbc8ef757c8ca632a3675e">Fl_Native_File_Chooser::Fl_Native_File_Chooser</a>(<span class="keywordtype">int</span> <a class="code" href="jpeglib_8h.html#aa0ccb5ee6d882ee3605ff47745c6467b">val</a>) {
<a name="l00055"></a>00055   _btype       = <a class="code" href="jpeglib_8h.html#aa0ccb5ee6d882ee3605ff47745c6467b">val</a>;
<a name="l00056"></a>00056   _options     = <a class="code" href="classFl__Native__File__Chooser.html#ac848ddb74cf4f72cc61a308addb49caca61f9ae29a326cda91f807eea60c8cf0d" title="no options enabled">NO_OPTIONS</a>;
<a name="l00057"></a>00057   _filter      = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00058"></a>00058   _filtvalue   = 0;
<a name="l00059"></a>00059   _parsedfilt  = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00060"></a>00060   _preset_file = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00061"></a>00061   _prevvalue   = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00062"></a>00062   _directory   = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00063"></a>00063   _errmsg      = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00064"></a>00064   _file_chooser = <span class="keyword">new</span> <a class="code" href="classFl__File__Chooser.html">Fl_File_Chooser</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00065"></a>00065   <a class="code" href="classFl__Native__File__Chooser.html#a634bac6adc33b40e6bcd925cf7ecf2d3">type</a>(val);                    <span class="comment">// do this after _file_chooser created</span>
<a name="l00066"></a>00066   _nfilters    = 0;
<a name="l00067"></a>00067 
<a name="l00068"></a>00068   <span class="comment">// Added by MG</span>
<a name="l00069"></a>00069   <a class="code" href="classFl__Button.html" title="Buttons generate callbacks when they are clicked by the user.">Fl_Button</a> *<a class="code" href="jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a> = _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac48785ac0e5eee2a05ee7fb58410bcc3">previewButton</a>;
<a name="l00070"></a>00070   <a class="code" href="classFl__Window.html">Fl_Window</a> *<a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a> = b-&gt;<a class="code" href="classFl__Widget.html#af8834d376878616c66a094cad6fec9d2">window</a>();
<a name="l00071"></a>00071   <a class="code" href="classFl__Group.html#af48163bbf0a8d18844b5d751946897c0">Fl_Group::current</a>(w);         <span class="comment">// adds a &quot;Show hidden files&quot; check button in _file_chooser&#39;s window</span>
<a name="l00072"></a>00072   show_hidden = <span class="keyword">new</span> <a class="code" href="classFl__Check__Button.html" title="A button with an &amp;quot;checkmark&amp;quot; to show its status.">Fl_Check_Button</a>(b-&gt;<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>() + b-&gt;<a class="code" href="classFl__Widget.html#ad59ece778aaf15acc4dd01a8bf5f8012">w</a>() + 10, b-&gt;<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>(), 145, b-&gt;<a class="code" href="classFl__Widget.html#aeeabd61e2d10c76cd6600dbbfe951f71">h</a>(), <span class="stringliteral">&quot;Show hidden files&quot;</span>);
<a name="l00073"></a>00073   show_hidden-&gt;<a class="code" href="classFl__Widget.html#aa19d0dccbebc8aa2763af265c6597607">callback</a>((<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a>*)show_hidden_cb, <span class="keyword">this</span>);
<a name="l00074"></a>00074   my_fileList = _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#af8d5616e507020b3b06c57fdda27895f">browser</a>();
<a name="l00075"></a>00075   _old_dir = 0;                                         <span class="comment">// to detect directory changes</span>
<a name="l00076"></a>00076   prev_filtervalue = _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#a3975f481683dffa2b813e9a9d4ad218e">filter_value</a>();     <span class="comment">// to detect filter changes</span>
<a name="l00077"></a>00077 } 
<a name="l00078"></a>00078 
<a name="l00083"></a><a class="code" href="classFl__Native__File__Chooser.html#a7e7dbacc435c93f02d1313e8996021d2">00083</a> <a class="code" href="classFl__Native__File__Chooser.html#a7e7dbacc435c93f02d1313e8996021d2">Fl_Native_File_Chooser::~Fl_Native_File_Chooser</a>() {
<a name="l00084"></a>00084   <span class="keyword">delete</span> _file_chooser;
<a name="l00085"></a>00085   _filter      = strfree(_filter);
<a name="l00086"></a>00086   _parsedfilt  = strfree(_parsedfilt);
<a name="l00087"></a>00087   _preset_file = strfree(_preset_file);
<a name="l00088"></a>00088   _prevvalue   = strfree(_prevvalue);
<a name="l00089"></a>00089   _directory   = strfree(_directory);
<a name="l00090"></a>00090   _errmsg      = strfree(_errmsg);
<a name="l00091"></a>00091   _old_dir     = strfree(_old_dir);
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="comment">// PRIVATE: SET ERROR MESSAGE</span>
<a name="l00095"></a>00095 <span class="keywordtype">void</span> <a class="code" href="classFl__Native__File__Chooser.html#a590bbc7c3fa20a6ce77a617f54338523">Fl_Native_File_Chooser::errmsg</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *msg) {
<a name="l00096"></a>00096   _errmsg = strfree(_errmsg);
<a name="l00097"></a>00097   _errmsg = strnew(msg);
<a name="l00098"></a>00098 }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100 <span class="comment">// PRIVATE: translate Native types to Fl_File_Chooser types</span>
<a name="l00101"></a>00101 <span class="keywordtype">int</span> Fl_Native_File_Chooser::type_fl_file(<span class="keywordtype">int</span> <a class="code" href="jpeglib_8h.html#aa0ccb5ee6d882ee3605ff47745c6467b">val</a>) {
<a name="l00102"></a>00102   <span class="keywordflow">switch</span> (val) {
<a name="l00103"></a>00103     <span class="keywordflow">case</span> <a class="code" href="classFl__Native__File__Chooser.html#abd8d409b2f0d0114ac44eb34ba5b97dba2ef9c58b42e9658f2a488992c1823bf4" title="browse files (lets user choose one file)">BROWSE_FILE</a>:
<a name="l00104"></a>00104       <span class="keywordflow">return</span>(<a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a62582f9cc202ce24f8b93696b5339c2c">FLTK_CHOOSER_SINGLE</a>);
<a name="l00105"></a>00105     <span class="keywordflow">case</span> <a class="code" href="classFl__Native__File__Chooser.html#abd8d409b2f0d0114ac44eb34ba5b97dbaee5cf3c53879e06cbb8e2d37ab9c4d71" title="browse directories (lets user choose one directory)">BROWSE_DIRECTORY</a>:
<a name="l00106"></a>00106       <span class="keywordflow">return</span>(<a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a62582f9cc202ce24f8b93696b5339c2c">FLTK_CHOOSER_SINGLE</a> | <a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a18859138fbd6c1ca4c7bf2b9ca7c16fe">FLTK_CHOOSER_DIRECTORY</a>);
<a name="l00107"></a>00107     <span class="keywordflow">case</span> <a class="code" href="classFl__Native__File__Chooser.html#abd8d409b2f0d0114ac44eb34ba5b97dbaf7d8df59b9d3c4f1c140618913c0bf36" title="browse files (lets user choose multiple files)">BROWSE_MULTI_FILE</a>:
<a name="l00108"></a>00108       <span class="keywordflow">return</span>(<a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a42d12fa9fd0632bd39c48c24ebec8b7c">FLTK_CHOOSER_MULTI</a>);
<a name="l00109"></a>00109     <span class="keywordflow">case</span> <a class="code" href="classFl__Native__File__Chooser.html#abd8d409b2f0d0114ac44eb34ba5b97dba3054c88e5c60cab719f5b131b9e212bd" title="browse directories (lets user choose multiple directories)">BROWSE_MULTI_DIRECTORY</a>:
<a name="l00110"></a>00110       <span class="keywordflow">return</span>(<a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a18859138fbd6c1ca4c7bf2b9ca7c16fe">FLTK_CHOOSER_DIRECTORY</a> | <a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a42d12fa9fd0632bd39c48c24ebec8b7c">FLTK_CHOOSER_MULTI</a>);
<a name="l00111"></a>00111     <span class="keywordflow">case</span> <a class="code" href="classFl__Native__File__Chooser.html#abd8d409b2f0d0114ac44eb34ba5b97dbad47c8427f2f425a60d324e74b44f986b" title="browse to save a file">BROWSE_SAVE_FILE</a>:
<a name="l00112"></a>00112       <span class="keywordflow">return</span>(<a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a62582f9cc202ce24f8b93696b5339c2c">FLTK_CHOOSER_SINGLE</a> | <a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a01920e176a08d59b256df1793a1cb9f1">FLTK_CHOOSER_CREATE</a>);
<a name="l00113"></a>00113     <span class="keywordflow">case</span> <a class="code" href="classFl__Native__File__Chooser.html#abd8d409b2f0d0114ac44eb34ba5b97dba7f2157b0b18842840783537a1e245c85" title="browse to save a directory">BROWSE_SAVE_DIRECTORY</a>:
<a name="l00114"></a>00114       <span class="keywordflow">return</span>(<a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a18859138fbd6c1ca4c7bf2b9ca7c16fe">FLTK_CHOOSER_DIRECTORY</a> | <a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a42d12fa9fd0632bd39c48c24ebec8b7c">FLTK_CHOOSER_MULTI</a> | <a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a01920e176a08d59b256df1793a1cb9f1">FLTK_CHOOSER_CREATE</a>);
<a name="l00115"></a>00115     <span class="keywordflow">default</span>:
<a name="l00116"></a>00116       <span class="keywordflow">return</span>(<a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a62582f9cc202ce24f8b93696b5339c2c">FLTK_CHOOSER_SINGLE</a>);
<a name="l00117"></a>00117   }
<a name="l00118"></a>00118 }
<a name="l00119"></a>00119 
<a name="l00123"></a><a class="code" href="classFl__Native__File__Chooser.html#a2c4b73f85715ae08a6f2ea4c557d8356">00123</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Native__File__Chooser.html#a634bac6adc33b40e6bcd925cf7ecf2d3">Fl_Native_File_Chooser::type</a>(<span class="keywordtype">int</span> val) {
<a name="l00124"></a>00124   _btype = <a class="code" href="jpeglib_8h.html#aa0ccb5ee6d882ee3605ff47745c6467b">val</a>;
<a name="l00125"></a>00125   _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#aea6ac5b4c44fe77427384424d41b92d7">type</a>(type_fl_file(val));
<a name="l00126"></a>00126 }
<a name="l00127"></a>00127 
<a name="l00131"></a><a class="code" href="classFl__Native__File__Chooser.html#a634bac6adc33b40e6bcd925cf7ecf2d3">00131</a> <span class="keywordtype">int</span> <a class="code" href="classFl__Native__File__Chooser.html#a634bac6adc33b40e6bcd925cf7ecf2d3">Fl_Native_File_Chooser::type</a>()<span class="keyword"> const </span>{
<a name="l00132"></a>00132   <span class="keywordflow">return</span>(_btype);
<a name="l00133"></a>00133 }
<a name="l00134"></a>00134 
<a name="l00148"></a><a class="code" href="classFl__Native__File__Chooser.html#a33d21326b674264e3c292d1d0c13876e">00148</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Native__File__Chooser.html#a66c7c5c0ac6c0f8b4633fc048f3fe641">Fl_Native_File_Chooser::options</a>(<span class="keywordtype">int</span> val) {
<a name="l00149"></a>00149   _options = <a class="code" href="jpeglib_8h.html#aa0ccb5ee6d882ee3605ff47745c6467b">val</a>;
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00155"></a><a class="code" href="classFl__Native__File__Chooser.html#a66c7c5c0ac6c0f8b4633fc048f3fe641">00155</a> <span class="keywordtype">int</span> <a class="code" href="classFl__Native__File__Chooser.html#a66c7c5c0ac6c0f8b4633fc048f3fe641">Fl_Native_File_Chooser::options</a>()<span class="keyword"> const </span>{
<a name="l00156"></a>00156   <span class="keywordflow">return</span>(_options);
<a name="l00157"></a>00157 }
<a name="l00158"></a>00158 
<a name="l00166"></a><a class="code" href="classFl__Native__File__Chooser.html#ac3c1724eea8f9f74a257cc198d69deb4">00166</a> <span class="keywordtype">int</span> <a class="code" href="classFl__Native__File__Chooser.html#ac3c1724eea8f9f74a257cc198d69deb4">Fl_Native_File_Chooser::show</a>() {
<a name="l00167"></a>00167   <span class="comment">// FILTER</span>
<a name="l00168"></a>00168   <span class="keywordflow">if</span> ( _parsedfilt ) {
<a name="l00169"></a>00169     _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ad547bf13b074a625b92a81602a66d100">filter</a>(_parsedfilt);
<a name="l00170"></a>00170   }
<a name="l00171"></a>00171 
<a name="l00172"></a>00172   <span class="comment">// FILTER VALUE</span>
<a name="l00173"></a>00173   <span class="comment">//     Set this /after/ setting the filter</span>
<a name="l00174"></a>00174   <span class="comment">//</span>
<a name="l00175"></a>00175   _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#a3975f481683dffa2b813e9a9d4ad218e">filter_value</a>(_filtvalue);
<a name="l00176"></a>00176 
<a name="l00177"></a>00177   <span class="comment">// DIRECTORY</span>
<a name="l00178"></a>00178   <span class="keywordflow">if</span> ( _directory &amp;&amp; _directory[0] ) {
<a name="l00179"></a>00179     _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ab69c3992f9a311c6c592a805997dfa35">directory</a>(_directory);
<a name="l00180"></a>00180   } <span class="keywordflow">else</span> {
<a name="l00181"></a>00181     _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ab69c3992f9a311c6c592a805997dfa35">directory</a>(_prevvalue);
<a name="l00182"></a>00182   }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184   <span class="comment">// PRESET FILE</span>
<a name="l00185"></a>00185   <span class="keywordflow">if</span> ( _preset_file ) {
<a name="l00186"></a>00186     _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac03e71b2e2cf48fcb885f0ed546d8ec1">value</a>(_preset_file);
<a name="l00187"></a>00187   }
<a name="l00188"></a>00188 
<a name="l00189"></a>00189   <span class="comment">// OPTIONS: PREVIEW</span>
<a name="l00190"></a>00190   _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#af81a4ad0dd14ff1c601673586ee6a535">preview</a>( (<a class="code" href="classFl__Native__File__Chooser.html#a66c7c5c0ac6c0f8b4633fc048f3fe641">options</a>() &amp; <a class="code" href="classFl__Native__File__Chooser.html#ac848ddb74cf4f72cc61a308addb49caca2ead398542cdedde1bc052f24dc1e2f8" title="enable preview mode">PREVIEW</a>) ? 1 : 0);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="comment">// OPTIONS: NEW FOLDER</span>
<a name="l00193"></a>00193   <span class="keywordflow">if</span> ( <a class="code" href="classFl__Native__File__Chooser.html#a66c7c5c0ac6c0f8b4633fc048f3fe641">options</a>() &amp; <a class="code" href="classFl__Native__File__Chooser.html#ac848ddb74cf4f72cc61a308addb49caca31337d5d69770842a71ff0343d1ea2b7" title="Show &amp;#39;New Folder&amp;#39; icon (if supported)">NEW_FOLDER</a> )
<a name="l00194"></a>00194     _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#aea6ac5b4c44fe77427384424d41b92d7">type</a>(_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#aea6ac5b4c44fe77427384424d41b92d7">type</a>() | <a class="code" href="Fl__Native__File__Chooser__FLTK_8cxx.html#a01920e176a08d59b256df1793a1cb9f1">FLTK_CHOOSER_CREATE</a>);   <span class="comment">// on</span>
<a name="l00195"></a>00195 
<a name="l00196"></a>00196   <span class="comment">// SHOW</span>
<a name="l00197"></a>00197   _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#a2f58cce9eb3bfc34778a657f9e4ae36f">show</a>();
<a name="l00198"></a>00198 
<a name="l00199"></a>00199   <span class="comment">// BLOCK WHILE BROWSER SHOWN</span>
<a name="l00200"></a>00200   <span class="keywordflow">while</span> ( _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#a00f944df065d7dca16de8865d775aa31">shown</a>() ) {
<a name="l00201"></a>00201     <span class="keywordflow">if</span> (_old_dir==0 || strcmp(_old_dir, _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ab69c3992f9a311c6c592a805997dfa35">directory</a>()) != 0) {
<a name="l00202"></a>00202       _old_dir = strfree(_old_dir);
<a name="l00203"></a>00203       _old_dir = strnew(_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ab69c3992f9a311c6c592a805997dfa35">directory</a>());
<a name="l00204"></a>00204       <span class="keywordflow">if</span> (!show_hidden-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) remove_hidden_files(my_fileList);
<a name="l00205"></a>00205     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prev_filtervalue != _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#a3975f481683dffa2b813e9a9d4ad218e">filter_value</a>() ) {
<a name="l00206"></a>00206       prev_filtervalue = _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#a3975f481683dffa2b813e9a9d4ad218e">filter_value</a>();
<a name="l00207"></a>00207       <span class="keywordflow">if</span> (!show_hidden-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>() ) remove_hidden_files(my_fileList);
<a name="l00208"></a>00208     }
<a name="l00209"></a>00209     <a class="code" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait</a>();
<a name="l00210"></a>00210   }
<a name="l00211"></a>00211 
<a name="l00212"></a>00212   <span class="keywordflow">if</span> ( _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac03e71b2e2cf48fcb885f0ed546d8ec1">value</a>() &amp;&amp; _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac03e71b2e2cf48fcb885f0ed546d8ec1">value</a>()[0] ) {
<a name="l00213"></a>00213     _prevvalue = strfree(_prevvalue);
<a name="l00214"></a>00214     _prevvalue = strnew(_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac03e71b2e2cf48fcb885f0ed546d8ec1">value</a>());
<a name="l00215"></a>00215     _filtvalue = _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#a3975f481683dffa2b813e9a9d4ad218e">filter_value</a>(); <span class="comment">// update filter value</span>
<a name="l00216"></a>00216 
<a name="l00217"></a>00217     <span class="comment">// HANDLE SHOWING &#39;SaveAs&#39; CONFIRM</span>
<a name="l00218"></a>00218     <span class="keywordflow">if</span> ( <a class="code" href="classFl__Native__File__Chooser.html#a66c7c5c0ac6c0f8b4633fc048f3fe641">options</a>() &amp; <a class="code" href="classFl__Native__File__Chooser.html#ac848ddb74cf4f72cc61a308addb49caca52e6e01696740f1f13f77fd598e0df51" title="Show native &amp;#39;Save As&amp;#39; overwrite confirm dialog (if supported)">SAVEAS_CONFIRM</a> &amp;&amp; <a class="code" href="classFl__Native__File__Chooser.html#a634bac6adc33b40e6bcd925cf7ecf2d3">type</a>() == <a class="code" href="classFl__Native__File__Chooser.html#abd8d409b2f0d0114ac44eb34ba5b97dbad47c8427f2f425a60d324e74b44f986b" title="browse to save a file">BROWSE_SAVE_FILE</a> ) {
<a name="l00219"></a>00219       <span class="keyword">struct </span>stat buf;
<a name="l00220"></a>00220       <span class="keywordflow">if</span> ( stat(_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac03e71b2e2cf48fcb885f0ed546d8ec1">value</a>(), &amp;<a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>) != -1 ) {
<a name="l00221"></a>00221         <span class="keywordflow">if</span> ( buf.st_mode &amp; S_IFREG ) {          <span class="comment">// Regular file + exists?</span>
<a name="l00222"></a>00222           <span class="keywordflow">if</span> ( exist_dialog() == 0 ) {
<a name="l00223"></a>00223             <span class="keywordflow">return</span>(1);
<a name="l00224"></a>00224           }
<a name="l00225"></a>00225         }
<a name="l00226"></a>00226       }
<a name="l00227"></a>00227     }
<a name="l00228"></a>00228   }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230   <span class="keywordflow">if</span> ( _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac4da9a5cca9f63937b0c47fb7d95625a">count</a>() ) <span class="keywordflow">return</span>(0);
<a name="l00231"></a>00231   <span class="keywordflow">else</span> <span class="keywordflow">return</span>(1);
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00239"></a><a class="code" href="classFl__Native__File__Chooser.html#a590bbc7c3fa20a6ce77a617f54338523">00239</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classFl__Native__File__Chooser.html#a590bbc7c3fa20a6ce77a617f54338523">Fl_Native_File_Chooser::errmsg</a>()<span class="keyword"> const </span>{
<a name="l00240"></a>00240   <span class="keywordflow">return</span>(_errmsg ? _errmsg : <span class="stringliteral">&quot;No error&quot;</span>);
<a name="l00241"></a>00241 }
<a name="l00242"></a>00242 
<a name="l00249"></a><a class="code" href="classFl__Native__File__Chooser.html#a71ce19bf2cfe53ee571413551c4105f7">00249</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classFl__Native__File__Chooser.html#a71ce19bf2cfe53ee571413551c4105f7">Fl_Native_File_Chooser::filename</a>()<span class="keyword"> const </span>{
<a name="l00250"></a>00250   <span class="keywordflow">if</span> ( _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac4da9a5cca9f63937b0c47fb7d95625a">count</a>() &gt; 0 ) <span class="keywordflow">return</span>(_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac03e71b2e2cf48fcb885f0ed546d8ec1">value</a>());
<a name="l00251"></a>00251   <span class="keywordflow">return</span>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00268"></a><a class="code" href="classFl__Native__File__Chooser.html#a9e6c2aef1c74a043157117cc74bd83cc">00268</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classFl__Native__File__Chooser.html#a71ce19bf2cfe53ee571413551c4105f7">Fl_Native_File_Chooser::filename</a>(<span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>)<span class="keyword"> const </span>{
<a name="l00269"></a>00269   <span class="keywordflow">if</span> ( i &lt; _file_chooser-&gt;<a class="code" href="classFl__Native__File__Chooser.html#aae3f1dad1a0f2915de0455b78f8236ae">count</a>() )
<a name="l00270"></a>00270     <span class="keywordflow">return</span>(_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac03e71b2e2cf48fcb885f0ed546d8ec1">value</a>(i+1));  <span class="comment">// convert fltk 1 based to our 0 based</span>
<a name="l00271"></a>00271   <span class="keywordflow">return</span>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00279"></a><a class="code" href="classFl__Native__File__Chooser.html#ae2f401baef4aaf5f52cea8ec60a8dc2f">00279</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Native__File__Chooser.html#ab50d831d99de393836f22e0ad27482c8">Fl_Native_File_Chooser::title</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *val) {
<a name="l00280"></a>00280   _file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#afde5368b820d947238015d16af9b8fc1">label</a>(val);
<a name="l00281"></a>00281 }
<a name="l00282"></a>00282 
<a name="l00287"></a><a class="code" href="classFl__Native__File__Chooser.html#ab50d831d99de393836f22e0ad27482c8">00287</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classFl__Native__File__Chooser.html#ab50d831d99de393836f22e0ad27482c8">Fl_Native_File_Chooser::title</a>()<span class="keyword"> const </span>{
<a name="l00288"></a>00288   <span class="keywordflow">return</span>(_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#afde5368b820d947238015d16af9b8fc1">label</a>());
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00309"></a><a class="code" href="classFl__Native__File__Chooser.html#a6ee224b0a06eb17a1a9b33a6e2f237af">00309</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Native__File__Chooser.html#afacfffef42551d6887fa45ce91ffbfb7">Fl_Native_File_Chooser::filter</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *val) {
<a name="l00310"></a>00310   _filter = strfree(_filter);
<a name="l00311"></a>00311   _filter = strnew(val);
<a name="l00312"></a>00312   parse_filter();
<a name="l00313"></a>00313 }
<a name="l00314"></a>00314 
<a name="l00319"></a><a class="code" href="classFl__Native__File__Chooser.html#afacfffef42551d6887fa45ce91ffbfb7">00319</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classFl__Native__File__Chooser.html#afacfffef42551d6887fa45ce91ffbfb7">Fl_Native_File_Chooser::filter</a>()<span class="keyword"> const </span>{
<a name="l00320"></a>00320   <span class="keywordflow">return</span>(_filter);
<a name="l00321"></a>00321 }
<a name="l00322"></a>00322 
<a name="l00326"></a><a class="code" href="classFl__Native__File__Chooser.html#af060bdf48f304a43d286b8ba3988eaaf">00326</a> <span class="keywordtype">int</span> <a class="code" href="classFl__Native__File__Chooser.html#af060bdf48f304a43d286b8ba3988eaaf">Fl_Native_File_Chooser::filters</a>()<span class="keyword"> const </span>{
<a name="l00327"></a>00327   <span class="keywordflow">return</span>(_nfilters);
<a name="l00328"></a>00328 }
<a name="l00329"></a>00329 
<a name="l00337"></a><a class="code" href="classFl__Native__File__Chooser.html#adf59d8ade1328ab3b63bac8f838d05f0">00337</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Native__File__Chooser.html#ab184bfb0f8a171667f87cb78d5586cfd">Fl_Native_File_Chooser::filter_value</a>(<span class="keywordtype">int</span> val) {
<a name="l00338"></a>00338   _filtvalue = <a class="code" href="jpeglib_8h.html#aa0ccb5ee6d882ee3605ff47745c6467b">val</a>;
<a name="l00339"></a>00339 }
<a name="l00340"></a>00340 
<a name="l00345"></a><a class="code" href="classFl__Native__File__Chooser.html#ab184bfb0f8a171667f87cb78d5586cfd">00345</a> <span class="keywordtype">int</span> <a class="code" href="classFl__Native__File__Chooser.html#ab184bfb0f8a171667f87cb78d5586cfd">Fl_Native_File_Chooser::filter_value</a>()<span class="keyword"> const </span>{
<a name="l00346"></a>00346   <span class="keywordflow">return</span>(_filtvalue);
<a name="l00347"></a>00347 }
<a name="l00348"></a>00348 
<a name="l00362"></a><a class="code" href="classFl__Native__File__Chooser.html#aae3f1dad1a0f2915de0455b78f8236ae">00362</a> <span class="keywordtype">int</span> <a class="code" href="classFl__Native__File__Chooser.html#aae3f1dad1a0f2915de0455b78f8236ae">Fl_Native_File_Chooser::count</a>()<span class="keyword"> const </span>{
<a name="l00363"></a>00363   <span class="keywordflow">return</span>(_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ac4da9a5cca9f63937b0c47fb7d95625a">count</a>());
<a name="l00364"></a>00364 }
<a name="l00365"></a>00365 
<a name="l00371"></a><a class="code" href="classFl__Native__File__Chooser.html#a21d2ceccc5b47bbb5e70082d75f4aeb1">00371</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Native__File__Chooser.html#afe229a582d14d622ed129cd0bb9c5771">Fl_Native_File_Chooser::directory</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *val) {
<a name="l00372"></a>00372   _directory = strfree(_directory);
<a name="l00373"></a>00373   _directory = strnew(val);
<a name="l00374"></a>00374 }
<a name="l00375"></a>00375 
<a name="l00379"></a><a class="code" href="classFl__Native__File__Chooser.html#afe229a582d14d622ed129cd0bb9c5771">00379</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classFl__Native__File__Chooser.html#afe229a582d14d622ed129cd0bb9c5771">Fl_Native_File_Chooser::directory</a>()<span class="keyword"> const </span>{
<a name="l00380"></a>00380   <span class="keywordflow">return</span>(_directory);
<a name="l00381"></a>00381 }
<a name="l00382"></a>00382 
<a name="l00383"></a>00383 <span class="comment">// PRIVATE: Convert our filter format to fltk&#39;s chooser format</span>
<a name="l00384"></a>00384 <span class="comment">//     FROM                                     TO (FLTK)</span>
<a name="l00385"></a>00385 <span class="comment">//     -------------------------                --------------------------</span>
<a name="l00386"></a>00386 <span class="comment">//     &quot;*.cxx&quot;                                  &quot;*.cxx Files(*.cxx)&quot;</span>
<a name="l00387"></a>00387 <span class="comment">//     &quot;C Files\t*.{cxx,h}&quot;                     &quot;C Files(*.{cxx,h})&quot;</span>
<a name="l00388"></a>00388 <span class="comment">//     &quot;C Files\t*.{cxx,h}\nText Files\t*.txt&quot;  &quot;C Files(*.{cxx,h})\tText Files(*.txt)&quot;</span>
<a name="l00389"></a>00389 <span class="comment">//</span>
<a name="l00390"></a>00390 <span class="comment">//     Returns a modified version of the filter that the caller is responsible</span>
<a name="l00391"></a>00391 <span class="comment">//     for freeing with strfree().</span>
<a name="l00392"></a>00392 <span class="comment">//</span>
<a name="l00393"></a>00393 <span class="keywordtype">void</span> Fl_Native_File_Chooser::parse_filter() {
<a name="l00394"></a>00394   _parsedfilt = strfree(_parsedfilt);   <span class="comment">// clear previous parsed filter (if any)</span>
<a name="l00395"></a>00395   _nfilters = 0;
<a name="l00396"></a>00396   <span class="keywordtype">char</span> *in = _filter;
<a name="l00397"></a>00397   <span class="keywordflow">if</span> ( !in ) <span class="keywordflow">return</span>;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399   <span class="keywordtype">int</span> has_name = strchr(in, <span class="charliteral">&#39;\t&#39;</span>) ? 1 : 0;
<a name="l00400"></a>00400 
<a name="l00401"></a>00401   <span class="keywordtype">char</span> mode = has_name ? <span class="charliteral">&#39;n&#39;</span> : <span class="charliteral">&#39;w&#39;</span>;     <span class="comment">// parse mode: n=title, w=wildcard</span>
<a name="l00402"></a>00402   <span class="keywordtype">char</span> wildcard[1024] = <span class="stringliteral">&quot;&quot;</span>;             <span class="comment">// parsed wildcard</span>
<a name="l00403"></a>00403   <span class="keywordtype">char</span> <a class="code" href="png_8h.html#a90cd716fdb9b68c9661c3ba908a0ceff">name</a>[1024] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00404"></a>00404 
<a name="l00405"></a>00405   <span class="comment">// Parse filter user specified</span>
<a name="l00406"></a>00406   <span class="keywordflow">for</span> ( ; 1; in++ ) {
<a name="l00407"></a>00407     <span class="comment">/*** DEBUG</span>
<a name="l00408"></a>00408 <span class="comment">    printf(&quot;WORKING ON &#39;%c&#39;: mode=&lt;%c&gt; name=&lt;%s&gt; wildcard=&lt;%s&gt;\n&quot;,</span>
<a name="l00409"></a>00409 <span class="comment">                        *in, mode,     name,     wildcard);</span>
<a name="l00410"></a>00410 <span class="comment">    ***/</span>
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <span class="keywordflow">switch</span> (*in) {
<a name="l00413"></a>00413       <span class="comment">// FINISHED PARSING NAME?</span>
<a name="l00414"></a>00414       <span class="keywordflow">case</span> <span class="charliteral">&#39;\t&#39;</span>:
<a name="l00415"></a>00415         <span class="keywordflow">if</span> ( mode != <span class="charliteral">&#39;n&#39;</span> ) <span class="keywordflow">goto</span> regchar;
<a name="l00416"></a>00416         mode = <span class="charliteral">&#39;w&#39;</span>;
<a name="l00417"></a>00417         <span class="keywordflow">break</span>; 
<a name="l00418"></a>00418       <span class="comment">// ESCAPE NEXT CHAR</span>
<a name="l00419"></a>00419       <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:
<a name="l00420"></a>00420         ++in;
<a name="l00421"></a>00421         <span class="keywordflow">goto</span> regchar; 
<a name="l00422"></a>00422       <span class="comment">// FINISHED PARSING ONE OF POSSIBLY SEVERAL FILTERS?</span>
<a name="l00423"></a>00423       <span class="keywordflow">case</span> <span class="charliteral">&#39;\r&#39;</span>:
<a name="l00424"></a>00424       <span class="keywordflow">case</span> <span class="charliteral">&#39;\n&#39;</span>:
<a name="l00425"></a>00425       <span class="keywordflow">case</span> <span class="charliteral">&#39;\0&#39;</span>:
<a name="l00426"></a>00426         <span class="comment">// APPEND NEW FILTER TO LIST</span>
<a name="l00427"></a>00427         <span class="keywordflow">if</span> ( wildcard[0] ) {
<a name="l00428"></a>00428           <span class="comment">// OUT: &quot;name(wild)\tname(wild)&quot;</span>
<a name="l00429"></a>00429           <span class="keywordtype">char</span> comp[2048];
<a name="l00430"></a>00430           sprintf(comp, <span class="stringliteral">&quot;%s%.511s(%.511s)&quot;</span>, ((_parsedfilt)?<span class="stringliteral">&quot;\t&quot;</span>:<span class="stringliteral">&quot;&quot;</span>),
<a name="l00431"></a>00431                                             name, wildcard);
<a name="l00432"></a>00432           _parsedfilt = strapp(_parsedfilt, comp);
<a name="l00433"></a>00433           _nfilters++;
<a name="l00434"></a>00434           <span class="comment">//DEBUG printf(&quot;DEBUG: PARSED FILT NOW &lt;%s&gt;\n&quot;, _parsedfilt);</span>
<a name="l00435"></a>00435         }
<a name="l00436"></a>00436         <span class="comment">// RESET</span>
<a name="l00437"></a>00437         wildcard[0] = name[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00438"></a>00438         mode = strchr(in, <span class="charliteral">&#39;\t&#39;</span>) ? <span class="charliteral">&#39;n&#39;</span> : <span class="charliteral">&#39;w&#39;</span>;
<a name="l00439"></a>00439         <span class="comment">// DONE?</span>
<a name="l00440"></a>00440         <span class="keywordflow">if</span> ( *in == <span class="charliteral">&#39;\0&#39;</span> ) <span class="keywordflow">return</span>;      <span class="comment">// done</span>
<a name="l00441"></a>00441         <span class="keywordflow">else</span> <span class="keywordflow">continue</span>;                  <span class="comment">// not done yet, more filters</span>
<a name="l00442"></a>00442 
<a name="l00443"></a>00443       <span class="comment">// Parse all other chars</span>
<a name="l00444"></a>00444       <span class="keywordflow">default</span>:                          <span class="comment">// handle all non-special chars</span>
<a name="l00445"></a>00445       regchar:                          <span class="comment">// handle regular char</span>
<a name="l00446"></a>00446         <span class="keywordflow">switch</span> ( mode ) {
<a name="l00447"></a>00447           <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>: chrcat(name, *in);     <span class="keywordflow">continue</span>;
<a name="l00448"></a>00448           <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span>: chrcat(wildcard, *in); <span class="keywordflow">continue</span>;
<a name="l00449"></a>00449         }
<a name="l00450"></a>00450         <span class="keywordflow">break</span>;
<a name="l00451"></a>00451     }
<a name="l00452"></a>00452   }
<a name="l00453"></a>00453   <span class="comment">//NOTREACHED</span>
<a name="l00454"></a>00454 }
<a name="l00455"></a>00455 
<a name="l00462"></a><a class="code" href="classFl__Native__File__Chooser.html#ab0a35d50e8990ab6eea4e48c8929d893">00462</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Native__File__Chooser.html#a2c6575218073da310196bc09f5bc60cd">Fl_Native_File_Chooser::preset_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* val) {
<a name="l00463"></a>00463   _preset_file = strfree(_preset_file);
<a name="l00464"></a>00464   _preset_file = strnew(val);
<a name="l00465"></a>00465 }
<a name="l00466"></a>00466 
<a name="l00470"></a><a class="code" href="classFl__Native__File__Chooser.html#a2c6575218073da310196bc09f5bc60cd">00470</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classFl__Native__File__Chooser.html#a2c6575218073da310196bc09f5bc60cd">Fl_Native_File_Chooser::preset_file</a>()<span class="keyword"> const </span>{
<a name="l00471"></a>00471   <span class="keywordflow">return</span>(_preset_file);
<a name="l00472"></a>00472 }
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 <span class="keywordtype">void</span> Fl_Native_File_Chooser::show_hidden_cb(<a class="code" href="classFl__Check__Button.html" title="A button with an &amp;quot;checkmark&amp;quot; to show its status.">Fl_Check_Button</a> *o, <span class="keywordtype">void</span> *<a class="code" href="jpeglib_8h.html#ae5784a8f4db42de0ffacd0cbd08dc6ad">data</a>)
<a name="l00475"></a>00475 {
<a name="l00476"></a>00476   <a class="code" href="classFl__Native__File__Chooser.html">Fl_Native_File_Chooser</a> *mychooser = (<a class="code" href="classFl__Native__File__Chooser.html">Fl_Native_File_Chooser</a> *)data;
<a name="l00477"></a>00477   <span class="keywordflow">if</span> (o-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l00478"></a>00478     mychooser-&gt;my_fileList-&gt;<a class="code" href="classFl__File__Browser.html#a5999b749fe1d6102362e573cdb6ae32d">load</a>(mychooser-&gt;_file_chooser-&gt;<a class="code" href="classFl__File__Chooser.html#ab69c3992f9a311c6c592a805997dfa35">directory</a>());
<a name="l00479"></a>00479   } <span class="keywordflow">else</span> {
<a name="l00480"></a>00480     remove_hidden_files(mychooser-&gt;my_fileList);
<a name="l00481"></a>00481     mychooser-&gt;my_fileList-&gt;<a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>();
<a name="l00482"></a>00482   }
<a name="l00483"></a>00483 }
<a name="l00484"></a>00484 
<a name="l00485"></a>00485 <span class="comment">// PRIVATE: Don&#39;t show hidden files</span>
<a name="l00486"></a>00486 <span class="keywordtype">void</span> Fl_Native_File_Chooser::remove_hidden_files(<a class="code" href="classFl__File__Browser.html">Fl_File_Browser</a> *my_fileList)
<a name="l00487"></a>00487 {
<a name="l00488"></a>00488   <span class="keywordtype">int</span> <a class="code" href="classFl__Native__File__Chooser.html#aae3f1dad1a0f2915de0455b78f8236ae">count</a> = my_fileList-&gt;<a class="code" href="classFl__Browser.html#a01843a2d4f73b9b6929b192d06f7b5f0">size</a>();
<a name="l00489"></a>00489   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac2d0018d5ab0817c8a1c83c69746a799">num</a> = count; <a class="code" href="png_8h.html#ac2d0018d5ab0817c8a1c83c69746a799">num</a> &gt;= 1; <a class="code" href="png_8h.html#ac2d0018d5ab0817c8a1c83c69746a799">num</a>--) {
<a name="l00490"></a>00490     <span class="keyword">const</span> <span class="keywordtype">char</span> *p = my_fileList-&gt;<a class="code" href="classFl__Browser.html#a3bc77d1cca44cf59348bdb52c4d95632">text</a>(<a class="code" href="png_8h.html#ac2d0018d5ab0817c8a1c83c69746a799">num</a>);
<a name="l00491"></a>00491     <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; strcmp(p, <span class="stringliteral">&quot;../&quot;</span>) != 0) my_fileList-&gt;<a class="code" href="classFl__Browser.html#acd72281ddbd70f23025a9f155fe89f93">remove</a>(<a class="code" href="png_8h.html#ac2d0018d5ab0817c8a1c83c69746a799">num</a>);
<a name="l00492"></a>00492   }
<a name="l00493"></a>00493   my_fileList-&gt;<a class="code" href="classFl__Browser.html#ad532b5cd2ed17957dd3f7cf7779fe162">topline</a>(1);
<a name="l00494"></a>00494 }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 <span class="comment">// PRIVATE: Don&#39;t show hidden files</span>
<a name="l00497"></a>00497 <span class="keywordtype">int</span> Fl_Native_File_Chooser::exist_dialog() {
<a name="l00498"></a>00498   <span class="keywordflow">return</span>(<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;File exists. Are you sure you want to overwrite?&quot;</span>, 
<a name="l00499"></a>00499                    <span class="stringliteral">&quot;Cancel&quot;</span>, <span class="stringliteral">&quot;   OK   &quot;</span>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>));
<a name="l00500"></a>00500 }
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 <span class="comment">//</span>
<a name="l00503"></a>00503 <span class="comment">// End of &quot;$Id: Fl_Native_File_Chooser_FLTK.cxx 7913 2010-11-29 18:18:27Z greg.ercolano $&quot;.</span>
<a name="l00504"></a>00504 <span class="comment">//</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="Fl__Native__File__Chooser__FLTK_8cxx.html">Fl_Native_File_Chooser_FLTK.cxx</a>      </li>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="#" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3</small></address>
</body>

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/Fl__Native__File__Chooser__FLTK_8cxx_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:41:51 GMT -->
</html>
