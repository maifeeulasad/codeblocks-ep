<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/Fl__Menu_8cxx_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:41:41 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SfR Fresh Dox - fltk: fltk-1.3.0rc3/src/Fl_Menu.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fltk&#160;<span id="projectnumber">1.3.0rc3</span></div>
   <div id="projectbrief">About: <A HREF= http://www.fltk.org/>FLTK</A> (Fast Light Tool Kit) is a cross-platform C++ GUI toolkit for UNIX/Linux (X11), Microsoft Windows, and MacOS X. Release candidate.<BR><IMG SRC="../warix/forest1.gif" ALT="">&nbsp;&nbsp;<A HREF="http://www.sfr-fresh.com/" TITLE="SfR Fresh Home">SfR Fresh</A> <A HREF="http://www.sfr-fresh.com/warix/features.html#doxygen" TITLE="SfR Fresh Doxygen Support Info">Dox</A>: <A HREF="../fresh/unix/misc/fltk-1.3.0rc3-source.tar.gz/index.html" TITLE="SfR Fresh: fltk-1.3.0rc3-source.tar.gz Contents &amp; Download Page">fltk-1.3.0rc3-source.tar.gz</A> ("inofficial" and yet experimental doxygen-generated source code documentation)&nbsp;&nbsp;<IMG SRC="../warix/forest2.gif" ALT=""><P></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index-2.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('Fl__Menu_8cxx.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Fl_Menu.cxx</h1>  </div>
</div>
<div class="contents">
<a href="Fl__Menu_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// &quot;$Id: Fl_Menu.cxx 8076 2010-12-20 13:59:09Z matt $&quot;</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// Menu code for the Fast Light Tool Kit (FLTK).</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// Copyright 1998-2010 by Bill Spitzak and others.</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// This library is free software; you can redistribute it and/or</span>
<a name="l00009"></a>00009 <span class="comment">// modify it under the terms of the GNU Library General Public</span>
<a name="l00010"></a>00010 <span class="comment">// License as published by the Free Software Foundation; either</span>
<a name="l00011"></a>00011 <span class="comment">// version 2 of the License, or (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// This library is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00016"></a>00016 <span class="comment">// Library General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">// You should have received a copy of the GNU Library General Public</span>
<a name="l00019"></a>00019 <span class="comment">// License along with this library; if not, write to the Free Software</span>
<a name="l00020"></a>00020 <span class="comment">// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307</span>
<a name="l00021"></a>00021 <span class="comment">// USA.</span>
<a name="l00022"></a>00022 <span class="comment">//</span>
<a name="l00023"></a>00023 <span class="comment">// Please report all bugs and problems on the following page:</span>
<a name="l00024"></a>00024 <span class="comment">//</span>
<a name="l00025"></a>00025 <span class="comment">//     http://www.fltk.org/str.php</span>
<a name="l00026"></a>00026 <span class="comment">//</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">// Warning: this menu code is quite a mess!</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="comment">// This file contains code for implementing Fl_Menu_Item, and for</span>
<a name="l00031"></a>00031 <span class="comment">// methods for bringing up popup menu hierarchies without using the</span>
<a name="l00032"></a>00032 <span class="comment">// Fl_Menu_ widget.</span>
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;FL/Fl.H&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;FL/Fl_Menu_Window.H&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;FL/Fl_Menu_.H&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;FL/fl_draw.H&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="flstring_8h.html">flstring.h</a>&quot;</span>
<a name="l00040"></a>00040 
<a name="l00042"></a><a class="code" href="structFl__Menu__Item.html#a80468ed0460e5e2ba6537e223865dc31">00042</a> <span class="keywordtype">int</span> <a class="code" href="structFl__Menu__Item.html#a80468ed0460e5e2ba6537e223865dc31">Fl_Menu_Item::size</a>()<span class="keyword"> const </span>{
<a name="l00043"></a>00043   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a> = <span class="keyword">this</span>;
<a name="l00044"></a>00044   <span class="keywordtype">int</span> nest = 0;
<a name="l00045"></a>00045   <span class="keywordflow">for</span> (;;) {
<a name="l00046"></a>00046     <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>) {
<a name="l00047"></a>00047       <span class="keywordflow">if</span> (!nest) <span class="keywordflow">return</span> (m-<span class="keyword">this</span>+1);
<a name="l00048"></a>00048       nest--;
<a name="l00049"></a>00049     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> &amp; <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>) {
<a name="l00050"></a>00050       nest++;
<a name="l00051"></a>00051     }
<a name="l00052"></a>00052     m++;
<a name="l00053"></a>00053   }
<a name="l00054"></a>00054 }
<a name="l00055"></a>00055 
<a name="l00061"></a><a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">00061</a> <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">Fl_Menu_Item::next</a>(<span class="keywordtype">int</span> n)<span class="keyword"> const </span>{
<a name="l00062"></a>00062   <span class="keywordflow">if</span> (n &lt; 0) <span class="keywordflow">return</span> 0; <span class="comment">// this is so selected==-1 returns NULL</span>
<a name="l00063"></a>00063   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a> = <span class="keyword">this</span>;
<a name="l00064"></a>00064   <span class="keywordtype">int</span> nest = 0;
<a name="l00065"></a>00065   <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structFl__Menu__Item.html#a356f4382087ca705eb0051e7a5682f07">visible</a>()) n++;
<a name="l00066"></a>00066   <span class="keywordflow">while</span> (n&gt;0) {
<a name="l00067"></a>00067     <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>) {
<a name="l00068"></a>00068       <span class="keywordflow">if</span> (!nest) <span class="keywordflow">return</span> <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l00069"></a>00069       nest--;
<a name="l00070"></a>00070     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a>&amp;<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>) {
<a name="l00071"></a>00071       nest++;
<a name="l00072"></a>00072     }
<a name="l00073"></a>00073     m++;
<a name="l00074"></a>00074     <span class="keywordflow">if</span> (!nest &amp;&amp; m-&gt;<a class="code" href="structFl__Menu__Item.html#a356f4382087ca705eb0051e7a5682f07">visible</a>()) n--;
<a name="l00075"></a>00075   }
<a name="l00076"></a>00076   <span class="keywordflow">return</span> <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l00077"></a>00077 }
<a name="l00078"></a>00078 
<a name="l00079"></a>00079 <span class="comment">// appearance of current menus are pulled from this parent widget:</span>
<a name="l00080"></a>00080 <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classFl__Menu__.html">Fl_Menu_</a>* button=0;
<a name="l00081"></a>00081 
<a name="l00083"></a>00083 
<a name="l00084"></a>00084 <span class="comment">// tiny window for title of menu:</span>
<a name="l00085"></a><a class="code" href="classmenutitle.html">00085</a> <span class="keyword">class </span><a class="code" href="classmenutitle.html">menutitle</a> : <span class="keyword">public</span> <a class="code" href="classFl__Menu__Window.html">Fl_Menu_Window</a> {
<a name="l00086"></a>00086   <span class="keywordtype">void</span> draw();
<a name="l00087"></a>00087 <span class="keyword">public</span>:
<a name="l00088"></a><a class="code" href="classmenutitle.html#a7ae02ddf7baea030a8c67fc587c88a6a">00088</a>   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="classmenutitle.html#a7ae02ddf7baea030a8c67fc587c88a6a">menu</a>;
<a name="l00089"></a>00089   <a class="code" href="classmenutitle.html#a306832ffb1b34cd02ef81a49d1c23cc2">menutitle</a>(<span class="keywordtype">int</span> X, <span class="keywordtype">int</span> Y, <span class="keywordtype">int</span> W, <span class="keywordtype">int</span> <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a>, <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>*);
<a name="l00090"></a>00090 };
<a name="l00091"></a>00091 
<a name="l00092"></a>00092 <span class="comment">// each vertical menu has one of these:</span>
<a name="l00093"></a><a class="code" href="classmenuwindow.html">00093</a> <span class="keyword">class </span><a class="code" href="classmenuwindow.html">menuwindow</a> : <span class="keyword">public</span> <a class="code" href="classFl__Menu__Window.html">Fl_Menu_Window</a> {
<a name="l00094"></a>00094   <span class="keywordtype">void</span> draw();
<a name="l00095"></a>00095   <span class="keywordtype">void</span> drawentry(<span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>*, <span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>, <span class="keywordtype">int</span> <a class="code" href="classFl__Menu__Window.html#ab3a2d56987528c00ce2dd60589aaca21">erase</a>);
<a name="l00096"></a>00096 <span class="keyword">public</span>:
<a name="l00097"></a><a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">00097</a>   <a class="code" href="classmenutitle.html">menutitle</a>* <a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>;
<a name="l00098"></a>00098   <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#aa5b284e1542e37024d9ee5c871fc136c">handle</a>(<span class="keywordtype">int</span>);
<a name="l00099"></a>00099 <span class="preprocessor">#if defined (__APPLE__) || defined (USE_X11)</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span>  <span class="keywordtype">int</span> early_hide_handle(<span class="keywordtype">int</span>);
<a name="l00101"></a>00101 <span class="preprocessor">#endif</span>
<a name="l00102"></a><a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">00102</a> <span class="preprocessor"></span>  <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>;       <span class="comment">// zero == menubar</span>
<a name="l00103"></a><a class="code" href="classmenuwindow.html#a7687c951125a57b28ea28df364350e0d">00103</a>   <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#a7687c951125a57b28ea28df364350e0d">numitems</a>;
<a name="l00104"></a><a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">00104</a>   <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>;
<a name="l00105"></a><a class="code" href="classmenuwindow.html#a81ad82b17f1dfeb66f7e3c74414f066d">00105</a>   <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#a81ad82b17f1dfeb66f7e3c74414f066d">drawn_selected</a>;   <span class="comment">// last redraw has this selected</span>
<a name="l00106"></a><a class="code" href="classmenuwindow.html#afafb332584f636a29542c8549cd0ce1c">00106</a>   <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#afafb332584f636a29542c8549cd0ce1c">shortcutWidth</a>;
<a name="l00107"></a><a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">00107</a>   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>;
<a name="l00108"></a>00108   <a class="code" href="classmenuwindow.html#a509d305641108a9c27a5fd90ea722ae5">menuwindow</a>(<span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>, <span class="keywordtype">int</span> X, <span class="keywordtype">int</span> Y, <span class="keywordtype">int</span> W, <span class="keywordtype">int</span> <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a>,
<a name="l00109"></a>00109              <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* picked, <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>,
<a name="l00110"></a>00110              <span class="keywordtype">int</span> menubar = 0, <span class="keywordtype">int</span> menubar_title = 0, <span class="keywordtype">int</span> right_edge = 0);
<a name="l00111"></a>00111   <a class="code" href="classmenuwindow.html#aff6bc5848d4d2068ff4005fdcd554b0b">~menuwindow</a>();
<a name="l00112"></a>00112   <span class="keywordtype">void</span> <a class="code" href="classmenuwindow.html#aaddc4927471c88bdf82d1d8c47c02f66">set_selected</a>(<span class="keywordtype">int</span>);
<a name="l00113"></a>00113   <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#a7439baeafaebd411082b92d20c3e549c">find_selected</a>(<span class="keywordtype">int</span> mx, <span class="keywordtype">int</span> my);
<a name="l00114"></a>00114   <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#a9a4e13c5241168e15187f036bb7724f2">titlex</a>(<span class="keywordtype">int</span>);
<a name="l00115"></a>00115   <span class="keywordtype">void</span> <a class="code" href="classmenuwindow.html#af31d899f529a0d554ece547a791e4bf0">autoscroll</a>(<span class="keywordtype">int</span>);
<a name="l00116"></a>00116   <span class="keywordtype">void</span> <a class="code" href="classmenuwindow.html#a318277465f419c9b719b3ddfd0659eb2">position</a>(<span class="keywordtype">int</span> <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>, <span class="keywordtype">int</span> <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>);
<a name="l00117"></a>00117   <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#ab651bbecb58ab07219986365537e0449">is_inside</a>(<span class="keywordtype">int</span> <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>, <span class="keywordtype">int</span> <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>);
<a name="l00118"></a>00118 };
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="Fl__Menu_8cxx.html#a06450e9e3b7452d96f4f585be77059f0">00120</a> <span class="preprocessor">#define LEADING 4 // extra vertical leading</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span>
<a name="l00122"></a>00122 <span class="keyword">extern</span> <span class="keywordtype">char</span> <a class="code" href="fl__draw_8H.html#a0b98e339d7c7e11b4de992cbff4a4990">fl_draw_shortcut</a>;
<a name="l00123"></a>00123 
<a name="l00128"></a><a class="code" href="structFl__Menu__Item.html#a8156770e85f23bccd1805583712658ac">00128</a> <span class="keywordtype">int</span> <a class="code" href="structFl__Menu__Item.html#a8156770e85f23bccd1805583712658ac">Fl_Menu_Item::measure</a>(<span class="keywordtype">int</span>* hp, <span class="keyword">const</span> <a class="code" href="classFl__Menu__.html">Fl_Menu_</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>)<span class="keyword"> const </span>{
<a name="l00129"></a>00129   <a class="code" href="structFl__Label.html">Fl_Label</a> l;
<a name="l00130"></a>00130   l.<a class="code" href="structFl__Label.html#a7061f748221b91736fa7cc4dbdaa9adc">value</a>   = <a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>;
<a name="l00131"></a>00131   l.<a class="code" href="structFl__Label.html#ac82178559994ffa5102c35bbb68f7e5b">image</a>   = 0;
<a name="l00132"></a>00132   l.<a class="code" href="structFl__Label.html#a2bff314c295248d94c2918a2ca53006d">deimage</a> = 0;
<a name="l00133"></a>00133   l.<a class="code" href="structFl__Label.html#a26d6e87dbf601f7a38d4c0f391b48558">type</a>    = <a class="code" href="structFl__Menu__Item.html#ac4aadd19ae4889935c5f8a8a3da381d3" title="how the menu item text looks like">labeltype_</a>;
<a name="l00134"></a>00134   l.<a class="code" href="structFl__Label.html#ac9b449b770124edddd9adf10dff12da4">font</a>    = <a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> || <a class="code" href="structFl__Menu__Item.html#ad82ab3107c63ed28bda8749fe3f14f32" title="which font for this menu item text">labelfont_</a> ? <a class="code" href="structFl__Menu__Item.html#ad82ab3107c63ed28bda8749fe3f14f32" title="which font for this menu item text">labelfont_</a> : (m ? m-&gt;<a class="code" href="classFl__Menu__.html#a5a4ff7e9d8784332e04dbb88012f3899">textfont</a>() : <a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>);
<a name="l00135"></a>00135   l.<a class="code" href="structFl__Label.html#a391e859f1c1bafa283b8b04981d1f173">size</a>    = <a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> ? <a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> : m ? m-&gt;<a class="code" href="classFl__Menu__.html#a6c275dfa1108c9c12ea9759a8bb0f551">textsize</a>() : <a class="code" href="Enumerations_8H.html#a200c616eb9f1a5d32a0b79847cef8cc8" title="normal font size">FL_NORMAL_SIZE</a>;
<a name="l00136"></a>00136   l.<a class="code" href="structFl__Label.html#aad739e4362e531cd8cc6007ee17af06b">color</a>   = <a class="code" href="Enumerations_8H.html#a8c67b74501f259f9bcfbf55415cfc162" title="the default foreground color (0) used for labels and text">FL_FOREGROUND_COLOR</a>; <span class="comment">// this makes no difference?</span>
<a name="l00137"></a>00137   <a class="code" href="fl__draw_8H.html#a0b98e339d7c7e11b4de992cbff4a4990">fl_draw_shortcut</a> = 1;
<a name="l00138"></a>00138   <span class="keywordtype">int</span> <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a> = 0; <span class="keywordtype">int</span> <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a> = 0;
<a name="l00139"></a>00139   l.<a class="code" href="structFl__Label.html#a8b1c6199bffef222db7f82f44f710052">measure</a>(w, hp ? *hp : h);
<a name="l00140"></a>00140   <a class="code" href="fl__draw_8H.html#a0b98e339d7c7e11b4de992cbff4a4990">fl_draw_shortcut</a> = 0;
<a name="l00141"></a>00141   <span class="keywordflow">if</span> (<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> &amp; (<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7425ae185af0bdbf04dbadaaa9413574" title="Item is a checkbox toggle (shows checkbox for on/off state)">FL_MENU_TOGGLE</a>|<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a11aab33bbffb20feac97c9b9979638bf" title="Item is a radio button (one checkbox of many can be on)">FL_MENU_RADIO</a>)) w += 14;
<a name="l00142"></a>00142   <span class="keywordflow">return</span> <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>;
<a name="l00143"></a>00143 }
<a name="l00144"></a>00144 
<a name="l00146"></a><a class="code" href="structFl__Menu__Item.html#adfe11fcd24cfee62ef1c7317b27da6ae">00146</a> <span class="keywordtype">void</span> <a class="code" href="structFl__Menu__Item.html#adfe11fcd24cfee62ef1c7317b27da6ae">Fl_Menu_Item::draw</a>(<span class="keywordtype">int</span> <a class="code" href="test_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <span class="keywordtype">int</span> <a class="code" href="test_8c.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a>, <span class="keywordtype">int</span> <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>, <span class="keywordtype">int</span> <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>, <span class="keyword">const</span> <a class="code" href="classFl__Menu__.html">Fl_Menu_</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>,
<a name="l00147"></a>00147                         <span class="keywordtype">int</span> selected)<span class="keyword"> const </span>{
<a name="l00148"></a>00148   <a class="code" href="structFl__Label.html">Fl_Label</a> l;
<a name="l00149"></a>00149   l.<a class="code" href="structFl__Label.html#a7061f748221b91736fa7cc4dbdaa9adc">value</a>   = <a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>;
<a name="l00150"></a>00150   l.<a class="code" href="structFl__Label.html#ac82178559994ffa5102c35bbb68f7e5b">image</a>   = 0;
<a name="l00151"></a>00151   l.<a class="code" href="structFl__Label.html#a2bff314c295248d94c2918a2ca53006d">deimage</a> = 0;
<a name="l00152"></a>00152   l.<a class="code" href="structFl__Label.html#a26d6e87dbf601f7a38d4c0f391b48558">type</a>    = <a class="code" href="structFl__Menu__Item.html#ac4aadd19ae4889935c5f8a8a3da381d3" title="how the menu item text looks like">labeltype_</a>;
<a name="l00153"></a>00153   l.<a class="code" href="structFl__Label.html#ac9b449b770124edddd9adf10dff12da4">font</a>    = <a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> || <a class="code" href="structFl__Menu__Item.html#ad82ab3107c63ed28bda8749fe3f14f32" title="which font for this menu item text">labelfont_</a> ? <a class="code" href="structFl__Menu__Item.html#ad82ab3107c63ed28bda8749fe3f14f32" title="which font for this menu item text">labelfont_</a> : (m ? m-&gt;<a class="code" href="classFl__Menu__.html#a5a4ff7e9d8784332e04dbb88012f3899">textfont</a>() : <a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>);
<a name="l00154"></a>00154   l.<a class="code" href="structFl__Label.html#a391e859f1c1bafa283b8b04981d1f173">size</a>    = <a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> ? <a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> : m ? m-&gt;<a class="code" href="classFl__Menu__.html#a6c275dfa1108c9c12ea9759a8bb0f551">textsize</a>() : <a class="code" href="Enumerations_8H.html#a200c616eb9f1a5d32a0b79847cef8cc8" title="normal font size">FL_NORMAL_SIZE</a>;
<a name="l00155"></a>00155   l.<a class="code" href="structFl__Label.html#aad739e4362e531cd8cc6007ee17af06b">color</a>   = <a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a> ? <a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a> : m ? m-&gt;<a class="code" href="classFl__Menu__.html#add340d9589169fdbe087bf2fcab90d08">textcolor</a>() : <a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>(<a class="code" href="Enumerations_8H.html#a8c67b74501f259f9bcfbf55415cfc162" title="the default foreground color (0) used for labels and text">FL_FOREGROUND_COLOR</a>);
<a name="l00156"></a>00156   <span class="keywordflow">if</span> (!<a class="code" href="structFl__Menu__Item.html#a76fd28951e3654cdd783566b4354420e">active</a>()) l.<a class="code" href="structFl__Label.html#aad739e4362e531cd8cc6007ee17af06b">color</a> = <a class="code" href="group__fl__attributes.html#ga1480e5317934bbd43d401f00ab3eba8b">fl_inactive</a>((<a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>)l.<a class="code" href="structFl__Label.html#aad739e4362e531cd8cc6007ee17af06b">color</a>);
<a name="l00157"></a>00157   <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a> <a class="code" href="gl2opengl_8h.html#a321f1e32cd01131a4f0e10f60a8fcc13">color</a> = m ? m-&gt;<a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>() : <a class="code" href="Enumerations_8H.html#aabb3b3628ea5baa2ba176201ed5d2aba">FL_GRAY</a>;
<a name="l00158"></a>00158   <span class="keywordflow">if</span> (selected) {
<a name="l00159"></a>00159     <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a> r = m ? m-&gt;<a class="code" href="classFl__Widget.html#a437f8c2faa16f9811f544b46372cbbc2">selection_color</a>() : <a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>;
<a name="l00160"></a>00160     <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bc">Fl_Boxtype</a> <a class="code" href="jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a> = m &amp;&amp; m-&gt;<a class="code" href="classFl__Menu__.html#ab3a61424c9ecca3dce9b3e40e38e43b0">down_box</a>() ? m-&gt;<a class="code" href="classFl__Menu__.html#ab3a61424c9ecca3dce9b3e40e38e43b0">down_box</a>() : <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca6ab2938fe5cb8e5c1ac67da87b6153e6" title="a flat box">FL_FLAT_BOX</a>;
<a name="l00161"></a>00161     <span class="keywordflow">if</span> (<a class="code" href="group__fl__attributes.html#ga54d75920c0484916cd6b2101937ec5ff">fl_contrast</a>(r,color)!=r) { <span class="comment">// back compatibility boxtypes</span>
<a name="l00162"></a>00162       <span class="keywordflow">if</span> (selected == 2) { <span class="comment">// menu title</span>
<a name="l00163"></a>00163         r = <a class="code" href="gl2opengl_8h.html#a321f1e32cd01131a4f0e10f60a8fcc13">color</a>;
<a name="l00164"></a>00164         b = m ? m-&gt;<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() : <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bcab3d71abcebd73ad40dd258f3cdfcfd22" title="see figure 1">FL_UP_BOX</a>;
<a name="l00165"></a>00165       } <span class="keywordflow">else</span> {
<a name="l00166"></a>00166         r = (<a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>)(<a class="code" href="Enumerations_8H.html#aa7c78133d1b30447471ac02feb40c553">FL_COLOR_CUBE</a>-1); <span class="comment">// white</span>
<a name="l00167"></a>00167         l.<a class="code" href="structFl__Label.html#aad739e4362e531cd8cc6007ee17af06b">color</a> = <a class="code" href="group__fl__attributes.html#ga54d75920c0484916cd6b2101937ec5ff">fl_contrast</a>((<a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>)<a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a>, r);
<a name="l00168"></a>00168       }
<a name="l00169"></a>00169     } <span class="keywordflow">else</span> {
<a name="l00170"></a>00170       l.<a class="code" href="structFl__Label.html#aad739e4362e531cd8cc6007ee17af06b">color</a> = <a class="code" href="group__fl__attributes.html#ga54d75920c0484916cd6b2101937ec5ff">fl_contrast</a>((<a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>)<a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a>, r);
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172     <span class="keywordflow">if</span> (selected == 2) { <span class="comment">// menu title</span>
<a name="l00173"></a>00173       <a class="code" href="group__fl__drawings.html#ga475ff2bbcafeb30d4551f635e42d6259">fl_draw_box</a>(b, x, y, w, h, r);
<a name="l00174"></a>00174       x += 3;
<a name="l00175"></a>00175       w -= 8;
<a name="l00176"></a>00176     } <span class="keywordflow">else</span> {
<a name="l00177"></a>00177       <a class="code" href="group__fl__drawings.html#ga475ff2bbcafeb30d4551f635e42d6259">fl_draw_box</a>(b, x+1, y-(<a class="code" href="Fl__Menu_8cxx.html#a06450e9e3b7452d96f4f585be77059f0">LEADING</a>-2)/2, w-2, h+(<a class="code" href="Fl__Menu_8cxx.html#a06450e9e3b7452d96f4f585be77059f0">LEADING</a>-2), r);
<a name="l00178"></a>00178     }
<a name="l00179"></a>00179   }
<a name="l00180"></a>00180 
<a name="l00181"></a>00181   <span class="keywordflow">if</span> (<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> &amp; (<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7425ae185af0bdbf04dbadaaa9413574" title="Item is a checkbox toggle (shows checkbox for on/off state)">FL_MENU_TOGGLE</a>|<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a11aab33bbffb20feac97c9b9979638bf" title="Item is a radio button (one checkbox of many can be on)">FL_MENU_RADIO</a>)) {
<a name="l00182"></a>00182     <span class="keywordtype">int</span> d = (h - <a class="code" href="Enumerations_8H.html#a200c616eb9f1a5d32a0b79847cef8cc8" title="normal font size">FL_NORMAL_SIZE</a> + 1) / 2;
<a name="l00183"></a>00183     <span class="keywordtype">int</span> W = h - 2 * d;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185     <span class="keywordflow">if</span> (<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> &amp; <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a11aab33bbffb20feac97c9b9979638bf" title="Item is a radio button (one checkbox of many can be on)">FL_MENU_RADIO</a>) {
<a name="l00186"></a>00186       <a class="code" href="group__fl__drawings.html#ga475ff2bbcafeb30d4551f635e42d6259">fl_draw_box</a>(<a class="code" href="Enumerations_8H.html#a792a19a6999cf43f93a7895e891d40a9">FL_ROUND_DOWN_BOX</a>, x+2, y+d, W, W, <a class="code" href="Enumerations_8H.html#a5c5704ed2ec5eb9c964d6dcb51474055" title="the default background color for text, list, and valuator widgets">FL_BACKGROUND2_COLOR</a>);
<a name="l00187"></a>00187       <span class="keywordflow">if</span> (<a class="code" href="structFl__Menu__Item.html#a644eb4028b7c8caa48bc6e1222a461b7">value</a>()) {
<a name="l00188"></a>00188         <span class="keywordtype">int</span> tW = (W - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(<a class="code" href="Enumerations_8H.html#a792a19a6999cf43f93a7895e891d40a9">FL_ROUND_DOWN_BOX</a>)) / 2 + 1;
<a name="l00189"></a>00189         <span class="keywordflow">if</span> ((W - tW) &amp; 1) tW++; <span class="comment">// Make sure difference is even to center</span>
<a name="l00190"></a>00190         <span class="keywordtype">int</span> td = <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(<a class="code" href="Enumerations_8H.html#a792a19a6999cf43f93a7895e891d40a9">FL_ROUND_DOWN_BOX</a>) + 1;
<a name="l00191"></a>00191         <span class="keywordflow">if</span> (<a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>()) {
<a name="l00192"></a>00192           <span class="comment">// Offset the radio circle...</span>
<a name="l00193"></a>00193           td ++;
<a name="l00194"></a>00194 
<a name="l00195"></a>00195           <span class="keywordflow">if</span> (!strcmp(<a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>(), <span class="stringliteral">&quot;gtk+&quot;</span>)) {
<a name="l00196"></a>00196             <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>);
<a name="l00197"></a>00197             tW --;
<a name="l00198"></a>00198             <a class="code" href="group__fl__drawings.html#gab4085aba3817a699ad98e1c80f91b69a">fl_pie</a>(x + td + 1, y + d + td - 1, tW + 3, tW + 3, 0.0, 360.0);
<a name="l00199"></a>00199             <a class="code" href="group__fl__drawings.html#ga3c1216fb40b6274acff72cca64b86a69">fl_arc</a>(x + td + 1, y + d + td - 1, tW + 3, tW + 3, 0.0, 360.0);
<a name="l00200"></a>00200             <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="group__fl__attributes.html#gaad12eb8d8495f7238bd3d0960f264be8">fl_color_average</a>(<a class="code" href="Enumerations_8H.html#ac1600c6c32be996f90f133cdc4135292">FL_WHITE</a>, <a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>, 0.2<a class="code" href="fl__boxtype_8cxx.html#ac406db58651c10e8f67ed432c66db0d6">f</a>));
<a name="l00201"></a>00201           } <span class="keywordflow">else</span> <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a>);
<a name="l00202"></a>00202         } <span class="keywordflow">else</span> <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a>);
<a name="l00203"></a>00203 
<a name="l00204"></a>00204         <span class="keywordflow">switch</span> (tW) {
<a name="l00205"></a>00205           <span class="comment">// Larger circles draw fine...</span>
<a name="l00206"></a>00206           <span class="keywordflow">default</span> :
<a name="l00207"></a>00207             <a class="code" href="group__fl__drawings.html#gab4085aba3817a699ad98e1c80f91b69a">fl_pie</a>(x + td + 2, y + d + td, tW, tW, 0.0, 360.0);
<a name="l00208"></a>00208             <span class="keywordflow">break</span>;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210           <span class="comment">// Small circles don&#39;t draw well on many systems...</span>
<a name="l00211"></a>00211           <span class="keywordflow">case</span> 6 :
<a name="l00212"></a>00212             <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + td + 4, y + d + td, tW - 4, tW);
<a name="l00213"></a>00213             <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + td + 3, y + d + td + 1, tW - 2, tW - 2);
<a name="l00214"></a>00214             <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + td + 2, y + d + td + 2, tW, tW - 4);
<a name="l00215"></a>00215             <span class="keywordflow">break</span>;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217           <span class="keywordflow">case</span> 5 :
<a name="l00218"></a>00218           <span class="keywordflow">case</span> 4 :
<a name="l00219"></a>00219           <span class="keywordflow">case</span> 3 :
<a name="l00220"></a>00220             <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + td + 3, y + d + td, tW - 2, tW);
<a name="l00221"></a>00221             <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + td + 2, y + d + td + 1, tW, tW - 2);
<a name="l00222"></a>00222             <span class="keywordflow">break</span>;
<a name="l00223"></a>00223 
<a name="l00224"></a>00224           <span class="keywordflow">case</span> 2 :
<a name="l00225"></a>00225           <span class="keywordflow">case</span> 1 :
<a name="l00226"></a>00226             <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + td + 2, y + d + td, tW, tW);
<a name="l00227"></a>00227             <span class="keywordflow">break</span>;
<a name="l00228"></a>00228         }
<a name="l00229"></a>00229 
<a name="l00230"></a>00230         <span class="keywordflow">if</span> (<a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>() &amp;&amp; !strcmp(<a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>(), <span class="stringliteral">&quot;gtk+&quot;</span>)) {
<a name="l00231"></a>00231           <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="group__fl__attributes.html#gaad12eb8d8495f7238bd3d0960f264be8">fl_color_average</a>(<a class="code" href="Enumerations_8H.html#ac1600c6c32be996f90f133cdc4135292">FL_WHITE</a>, <a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>, 0.5));
<a name="l00232"></a>00232           <a class="code" href="group__fl__drawings.html#ga3c1216fb40b6274acff72cca64b86a69">fl_arc</a>(x + td + 2, y + d + td, tW + 1, tW + 1, 60.0, 180.0);
<a name="l00233"></a>00233         }
<a name="l00234"></a>00234       }
<a name="l00235"></a>00235     } <span class="keywordflow">else</span> {
<a name="l00236"></a>00236       <a class="code" href="group__fl__drawings.html#ga475ff2bbcafeb30d4551f635e42d6259">fl_draw_box</a>(<a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca9374077c9b546ed69f6592c246ba80ad" title="see figure 1">FL_DOWN_BOX</a>, x+2, y+d, W, W, <a class="code" href="Enumerations_8H.html#a5c5704ed2ec5eb9c964d6dcb51474055" title="the default background color for text, list, and valuator widgets">FL_BACKGROUND2_COLOR</a>);
<a name="l00237"></a>00237       <span class="keywordflow">if</span> (<a class="code" href="structFl__Menu__Item.html#a644eb4028b7c8caa48bc6e1222a461b7">value</a>()) {
<a name="l00238"></a>00238         <span class="keywordflow">if</span> (<a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>() &amp;&amp; !strcmp(<a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>(), <span class="stringliteral">&quot;gtk+&quot;</span>)) {
<a name="l00239"></a>00239           <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>);
<a name="l00240"></a>00240         } <span class="keywordflow">else</span> {
<a name="l00241"></a>00241           <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a>);
<a name="l00242"></a>00242         }
<a name="l00243"></a>00243         <span class="keywordtype">int</span> tx = x + 5;
<a name="l00244"></a>00244         <span class="keywordtype">int</span> tw = W - 6;
<a name="l00245"></a>00245         <span class="keywordtype">int</span> d1 = tw/3;
<a name="l00246"></a>00246         <span class="keywordtype">int</span> d2 = tw-d1;
<a name="l00247"></a>00247         <span class="keywordtype">int</span> ty = y + d + (W+d2)/2-d1-2;
<a name="l00248"></a>00248         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n = 0; n &lt; 3; n++, ty++) {
<a name="l00249"></a>00249           <a class="code" href="group__fl__drawings.html#gaecc374f163a97ef67c4e58be11c47047">fl_line</a>(tx, ty, tx+d1, ty+d1);
<a name="l00250"></a>00250           <a class="code" href="group__fl__drawings.html#gaecc374f163a97ef67c4e58be11c47047">fl_line</a>(tx+d1, ty+d1, tx+tw-1, ty+d1-d2+1);
<a name="l00251"></a>00251         }
<a name="l00252"></a>00252       }
<a name="l00253"></a>00253     }
<a name="l00254"></a>00254     x += W + 3;
<a name="l00255"></a>00255     w -= W + 3;
<a name="l00256"></a>00256   }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258   <span class="keywordflow">if</span> (!<a class="code" href="fl__draw_8H.html#a0b98e339d7c7e11b4de992cbff4a4990">fl_draw_shortcut</a>) <a class="code" href="fl__draw_8H.html#a0b98e339d7c7e11b4de992cbff4a4990">fl_draw_shortcut</a> = 1;
<a name="l00259"></a>00259   l.<a class="code" href="structFl__Label.html#ace21d56cf7366c6ab0d683f81930f134">draw</a>(x+3, y, w&gt;6 ? w-6 : 0, h, <a class="code" href="Enumerations_8H.html#aee67f09771b16bc5da1f1ee860681be5">FL_ALIGN_LEFT</a>);
<a name="l00260"></a>00260   <a class="code" href="fl__draw_8H.html#a0b98e339d7c7e11b4de992cbff4a4990">fl_draw_shortcut</a> = 0;
<a name="l00261"></a>00261 }
<a name="l00262"></a>00262 
<a name="l00263"></a><a class="code" href="classmenutitle.html#a306832ffb1b34cd02ef81a49d1c23cc2">00263</a> <a class="code" href="classmenutitle.html#a306832ffb1b34cd02ef81a49d1c23cc2">menutitle::menutitle</a>(<span class="keywordtype">int</span> X, <span class="keywordtype">int</span> Y, <span class="keywordtype">int</span> W, <span class="keywordtype">int</span> <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a>, <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* L) :
<a name="l00264"></a>00264   <a class="code" href="classFl__Menu__Window.html">Fl_Menu_Window</a>(X, Y, W, H, 0) {
<a name="l00265"></a>00265   <a class="code" href="classFl__Group.html#a029653337efa0cb2ec52852519293ba8">end</a>();
<a name="l00266"></a>00266   <a class="code" href="classFl__Window.html#adbcee49a29aaeaef961b235035a127a5">set_modal</a>();
<a name="l00267"></a>00267   <a class="code" href="classFl__Window.html#ab1f6119abc21b6636a13651b89bef1da">clear_border</a>();
<a name="l00268"></a>00268   <a class="code" href="classFl__Window.html#a3236b2a68a20b3ad84133576955a8527">set_menu_window</a>();
<a name="l00269"></a>00269   <a class="code" href="classmenutitle.html#a7ae02ddf7baea030a8c67fc587c88a6a">menu</a> = L;
<a name="l00270"></a>00270   <span class="keywordflow">if</span> (L-&gt;<a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a> || <a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>() || L-&gt;<a class="code" href="structFl__Menu__Item.html#ac4aadd19ae4889935c5f8a8a3da381d3" title="how the menu item text looks like">labeltype_</a> &gt; <a class="code" href="Enumerations_8H.html#ad5774781d33328b82990ff9e25dfd61bac7e2de1d28830fe78743126eebcbe13b" title="does nothing">FL_NO_LABEL</a>) <a class="code" href="classFl__Menu__Window.html#a61a3440f5b418dc6c4a28a8e10b896eb">clear_overlay</a>();
<a name="l00271"></a>00271 }
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="classmenuwindow.html#a509d305641108a9c27a5fd90ea722ae5">00273</a> <a class="code" href="classmenuwindow.html#a509d305641108a9c27a5fd90ea722ae5">menuwindow::menuwindow</a>(<span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>, <span class="keywordtype">int</span> X, <span class="keywordtype">int</span> Y, <span class="keywordtype">int</span> Wp, <span class="keywordtype">int</span> Hp,
<a name="l00274"></a>00274                        <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* picked, <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* t, 
<a name="l00275"></a>00275                        <span class="keywordtype">int</span> menubar, <span class="keywordtype">int</span> menubar_title, <span class="keywordtype">int</span> right_edge)
<a name="l00276"></a>00276   : <a class="code" href="classFl__Menu__Window.html">Fl_Menu_Window</a>(X, Y, Wp, Hp, 0)
<a name="l00277"></a>00277 {
<a name="l00278"></a>00278   <span class="keywordtype">int</span> scr_x, scr_y, scr_w, scr_h;
<a name="l00279"></a>00279   <span class="keywordtype">int</span> tx = X, ty = Y;
<a name="l00280"></a>00280 
<a name="l00281"></a>00281   <a class="code" href="group__fl__screen.html#ga510d26cb2d6ec0688cf1eb8c5d9e5a1e">Fl::screen_xywh</a>(scr_x, scr_y, scr_w, scr_h);
<a name="l00282"></a>00282   <span class="keywordflow">if</span> (!right_edge || right_edge &gt; scr_x+scr_w) right_edge = scr_x+scr_w;
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <a class="code" href="classFl__Group.html#a029653337efa0cb2ec52852519293ba8">end</a>();
<a name="l00285"></a>00285   <a class="code" href="classFl__Window.html#adbcee49a29aaeaef961b235035a127a5">set_modal</a>();
<a name="l00286"></a>00286   <a class="code" href="classFl__Window.html#ab1f6119abc21b6636a13651b89bef1da">clear_border</a>();
<a name="l00287"></a>00287   <a class="code" href="classFl__Window.html#a3236b2a68a20b3ad84133576955a8527">set_menu_window</a>();
<a name="l00288"></a>00288   <a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a> = <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l00289"></a>00289   <span class="keywordflow">if</span> (m) m = m-&gt;<a class="code" href="structFl__Menu__Item.html#a1ee3f91630cfcceeef893fe1bfe2fa51">first</a>(); <span class="comment">// find the first item that needs to be rendered</span>
<a name="l00290"></a>00290   <a class="code" href="classmenuwindow.html#a81ad82b17f1dfeb66f7e3c74414f066d">drawn_selected</a> = -1;
<a name="l00291"></a>00291   <span class="keywordflow">if</span> (button) {
<a name="l00292"></a>00292     <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>(button-&gt;<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>());
<a name="l00293"></a>00293     <span class="keywordflow">if</span> (<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() == <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca48e3b4ff6e390359376e79a8a6bc05c1" title="nothing is drawn at all, this box is invisible">FL_NO_BOX</a> || <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() == <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca6ab2938fe5cb8e5c1ac67da87b6153e6" title="a flat box">FL_FLAT_BOX</a>) <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>(<a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bcab3d71abcebd73ad40dd258f3cdfcfd22" title="see figure 1">FL_UP_BOX</a>);
<a name="l00294"></a>00294   } <span class="keywordflow">else</span> {
<a name="l00295"></a>00295     <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>(<a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bcab3d71abcebd73ad40dd258f3cdfcfd22" title="see figure 1">FL_UP_BOX</a>);
<a name="l00296"></a>00296   }
<a name="l00297"></a>00297   <a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>(button &amp;&amp; !<a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>() ? button-&gt;<a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>() : <a class="code" href="Enumerations_8H.html#aabb3b3628ea5baa2ba176201ed5d2aba">FL_GRAY</a>);
<a name="l00298"></a>00298   <a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a> = -1;
<a name="l00299"></a>00299   {
<a name="l00300"></a>00300     <span class="keywordtype">int</span> j = 0;
<a name="l00301"></a>00301     <span class="keywordflow">if</span> (m) <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m1=m; ; m1 = m1-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>(), j++) {
<a name="l00302"></a>00302       <span class="keywordflow">if</span> (picked) {
<a name="l00303"></a>00303         <span class="keywordflow">if</span> (m1 == picked) {selected = j; picked = 0;}
<a name="l00304"></a>00304         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m1 &gt; picked) {selected = j-1; picked = 0; Wp = Hp = 0;}
<a name="l00305"></a>00305     }
<a name="l00306"></a>00306     <span class="keywordflow">if</span> (!m1-&gt;text) <span class="keywordflow">break</span>;
<a name="l00307"></a>00307   }
<a name="l00308"></a>00308   <a class="code" href="classmenuwindow.html#a7687c951125a57b28ea28df364350e0d">numitems</a> = j;}
<a name="l00309"></a>00309 
<a name="l00310"></a>00310   <span class="keywordflow">if</span> (menubar) {
<a name="l00311"></a>00311     <a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a> = 0;
<a name="l00312"></a>00312     <a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a> = 0;
<a name="l00313"></a>00313     <span class="keywordflow">return</span>;
<a name="l00314"></a>00314   }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316   <a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a> = 1;
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <span class="keywordtype">int</span> hotKeysw = 0;
<a name="l00319"></a>00319   <span class="keywordtype">int</span> hotModsw = 0;
<a name="l00320"></a>00320   <span class="keywordtype">int</span> Wtitle = 0;
<a name="l00321"></a>00321   <span class="keywordtype">int</span> Htitle = 0;
<a name="l00322"></a>00322   <span class="keywordflow">if</span> (t) Wtitle = t-&gt;<a class="code" href="structFl__Menu__Item.html#a8156770e85f23bccd1805583712658ac">measure</a>(&amp;Htitle, button) + 12;
<a name="l00323"></a>00323   <span class="keywordtype">int</span> W = 0;
<a name="l00324"></a>00324   <span class="keywordflow">if</span> (m) <span class="keywordflow">for</span> (; m-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>; m = m-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>()) {
<a name="l00325"></a>00325     <span class="keywordtype">int</span> hh; 
<a name="l00326"></a>00326     <span class="keywordtype">int</span> w1 = m-&gt;<a class="code" href="structFl__Menu__Item.html#a8156770e85f23bccd1805583712658ac">measure</a>(&amp;hh, button);
<a name="l00327"></a>00327     <span class="keywordflow">if</span> (hh+<a class="code" href="Fl__Menu_8cxx.html#a06450e9e3b7452d96f4f585be77059f0">LEADING</a>&gt;<a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>) <a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a> = hh+<a class="code" href="Fl__Menu_8cxx.html#a06450e9e3b7452d96f4f585be77059f0">LEADING</a>;
<a name="l00328"></a>00328     <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a>&amp;(<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>|<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa6dad0dc73339fdb1a9ae9d3079f8659" title="Indicates user_data() is a pointer to another menu array.">FL_SUBMENU_POINTER</a>)) w1 += 14;
<a name="l00329"></a>00329     <span class="keywordflow">if</span> (w1 &gt; W) W = w1;
<a name="l00330"></a>00330     <span class="comment">// calculate the maximum width of all shortcuts</span>
<a name="l00331"></a>00331     <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#a996db6347b53fc0ea8ab6ae763a44a2c" title="menu item shortcut">shortcut_</a>) {
<a name="l00332"></a>00332       <span class="comment">// s is a pointerto the utf8 string for the entire shortcut</span>
<a name="l00333"></a>00333       <span class="comment">// k points only to the key part (minus the modifier keys)</span>
<a name="l00334"></a>00334       <span class="keyword">const</span> <span class="keywordtype">char</span> *k, *s = <a class="code" href="group__fl__drawings.html#gadfd8bd4a9143e4238da84d031bfd1815">fl_shortcut_label</a>(m-&gt;<a class="code" href="structFl__Menu__Item.html#a996db6347b53fc0ea8ab6ae763a44a2c" title="menu item shortcut">shortcut_</a>, &amp;k);
<a name="l00335"></a>00335       <span class="keywordflow">if</span> (<a class="code" href="group__fl__unicode.html#gaff5ccdf22c2cb46125cc9a152542e63b">fl_utf_nb_char</a>((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)k, strlen(k))&lt;=4) {
<a name="l00336"></a>00336         <span class="comment">// a regular shortcut has a right-justified modifier followed by a left-justified key</span>
<a name="l00337"></a>00337         w1 = <a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>(<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(s, k-s));
<a name="l00338"></a>00338         <span class="keywordflow">if</span> (w1 &gt; hotModsw) hotModsw = w1;
<a name="l00339"></a>00339         w1 = <a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>(<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(k))+4;
<a name="l00340"></a>00340         <span class="keywordflow">if</span> (w1 &gt; hotKeysw) hotKeysw = w1;
<a name="l00341"></a>00341       } <span class="keywordflow">else</span> {
<a name="l00342"></a>00342         <span class="comment">// a shortcut with a long modifier is right-justified to the menu</span>
<a name="l00343"></a>00343         w1 = <a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>(<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(s))+4;
<a name="l00344"></a>00344         <span class="keywordflow">if</span> (w1 &gt; (hotModsw+hotKeysw)) {
<a name="l00345"></a>00345           hotModsw = w1-hotKeysw;
<a name="l00346"></a>00346         }
<a name="l00347"></a>00347       }
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349     <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#a859fe109e269f057d4b216e5188f5e6e" title="menu item text color">labelcolor_</a> || <a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>() || m-&gt;<a class="code" href="structFl__Menu__Item.html#ac4aadd19ae4889935c5f8a8a3da381d3" title="how the menu item text looks like">labeltype_</a> &gt; <a class="code" href="Enumerations_8H.html#ad5774781d33328b82990ff9e25dfd61bac7e2de1d28830fe78743126eebcbe13b" title="does nothing">FL_NO_LABEL</a>) <a class="code" href="classFl__Menu__Window.html#a61a3440f5b418dc6c4a28a8e10b896eb">clear_overlay</a>();
<a name="l00350"></a>00350   }
<a name="l00351"></a>00351   <a class="code" href="classmenuwindow.html#afafb332584f636a29542c8549cd0ce1c">shortcutWidth</a> = hotKeysw;
<a name="l00352"></a>00352   <span class="keywordflow">if</span> (selected &gt;= 0 &amp;&amp; !Wp) X -= W/2;
<a name="l00353"></a>00353   <span class="keywordtype">int</span> <a class="code" href="fl__rounded__box_8cxx.html#a84909b16209480034c40276c4f84f975">BW</a> = <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>());
<a name="l00354"></a>00354   W += hotKeysw+hotModsw+2*BW+7;
<a name="l00355"></a>00355   <span class="keywordflow">if</span> (Wp &gt; W) W = Wp;
<a name="l00356"></a>00356   <span class="keywordflow">if</span> (Wtitle &gt; W) W = Wtitle;
<a name="l00357"></a>00357 
<a name="l00358"></a>00358   <span class="keywordflow">if</span> (X &lt; scr_x) X = scr_x; <span class="keywordflow">if</span> (X &gt; scr_x+scr_w-W) X = right_edge-W; <span class="comment">//X= scr_x+scr_w-W;</span>
<a name="l00359"></a>00359   <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>(X); <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>(W);
<a name="l00360"></a>00360   <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>((<a class="code" href="classmenuwindow.html#a7687c951125a57b28ea28df364350e0d">numitems</a> ? <a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>*<a class="code" href="classmenuwindow.html#a7687c951125a57b28ea28df364350e0d">numitems</a>-<a class="code" href="Fl__Menu_8cxx.html#a06450e9e3b7452d96f4f585be77059f0">LEADING</a> : 0)+2*BW+3);
<a name="l00361"></a>00361   <span class="keywordflow">if</span> (selected &gt;= 0) {
<a name="l00362"></a>00362     Y = Y+(Hp-<a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>)/2-selected*<a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>-BW;
<a name="l00363"></a>00363   } <span class="keywordflow">else</span> {
<a name="l00364"></a>00364     Y = Y+Hp;
<a name="l00365"></a>00365     <span class="comment">// if the menu hits the bottom of the screen, we try to draw</span>
<a name="l00366"></a>00366     <span class="comment">// it above the menubar instead. We will not adjust any menu</span>
<a name="l00367"></a>00367     <span class="comment">// that has a selected item.</span>
<a name="l00368"></a>00368     <span class="keywordflow">if</span> (Y+<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>()&gt;scr_y+scr_h &amp;&amp; Y-<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>()&gt;=scr_y) {
<a name="l00369"></a>00369       <span class="keywordflow">if</span> (Hp&gt;1) {
<a name="l00370"></a>00370         <span class="comment">// if we know the height of the Fl_Menu_, use it</span>
<a name="l00371"></a>00371         Y = Y-Hp-<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>();
<a name="l00372"></a>00372       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (t) {
<a name="l00373"></a>00373         <span class="comment">// assume that the menubar item height relates to the first</span>
<a name="l00374"></a>00374         <span class="comment">// menuitem as well</span>
<a name="l00375"></a>00375         Y = Y-<a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>-<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>()-<a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>());
<a name="l00376"></a>00376       } <span class="keywordflow">else</span> {
<a name="l00377"></a>00377         <span class="comment">// draw the menu to the right</span>
<a name="l00378"></a>00378         Y = Y-<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>()+<a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>+<a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>());
<a name="l00379"></a>00379       }
<a name="l00380"></a>00380     }
<a name="l00381"></a>00381   }
<a name="l00382"></a>00382   <span class="keywordflow">if</span> (m) <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>(Y); <span class="keywordflow">else</span> {<a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>(Y-2); <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>(1); <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>(1);}
<a name="l00383"></a>00383 
<a name="l00384"></a>00384   <span class="keywordflow">if</span> (t) {
<a name="l00385"></a>00385     <span class="keywordflow">if</span> (menubar_title) {
<a name="l00386"></a>00386       <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#a4cffdba1345d329bb97e76579d57fa21">dy</a> = <a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(button-&gt;<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>())+1;
<a name="l00387"></a>00387       <span class="keywordtype">int</span> ht = button-&gt;<a class="code" href="classFl__Widget.html#aeeabd61e2d10c76cd6600dbbfe951f71">h</a>()-dy*2;
<a name="l00388"></a>00388       <a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a> = <span class="keyword">new</span> <a class="code" href="classmenutitle.html">menutitle</a>(tx, ty-ht-dy, Wtitle, ht, t);
<a name="l00389"></a>00389     } <span class="keywordflow">else</span> {
<a name="l00390"></a>00390       <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#a4cffdba1345d329bb97e76579d57fa21">dy</a> = 2;
<a name="l00391"></a>00391       <span class="keywordtype">int</span> ht = Htitle+2*BW+3;
<a name="l00392"></a>00392       <a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a> = <span class="keyword">new</span> <a class="code" href="classmenutitle.html">menutitle</a>(X, Y-ht-dy, Wtitle, ht, t);
<a name="l00393"></a>00393     }
<a name="l00394"></a>00394   } <span class="keywordflow">else</span> {
<a name="l00395"></a>00395     <a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a> = 0;
<a name="l00396"></a>00396   }
<a name="l00397"></a>00397 }
<a name="l00398"></a>00398 
<a name="l00399"></a><a class="code" href="classmenuwindow.html#aff6bc5848d4d2068ff4005fdcd554b0b">00399</a> <a class="code" href="classmenuwindow.html#aff6bc5848d4d2068ff4005fdcd554b0b">menuwindow::~menuwindow</a>() {
<a name="l00400"></a>00400   <a class="code" href="classFl__Menu__Window.html#aadca68c365aea60fcb2841b756fa235a">hide</a>();
<a name="l00401"></a>00401   <span class="keyword">delete</span> <a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>;
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 
<a name="l00404"></a><a class="code" href="classmenuwindow.html#a318277465f419c9b719b3ddfd0659eb2">00404</a> <span class="keywordtype">void</span> <a class="code" href="classmenuwindow.html#a318277465f419c9b719b3ddfd0659eb2">menuwindow::position</a>(<span class="keywordtype">int</span> X, <span class="keywordtype">int</span> Y) {
<a name="l00405"></a>00405   <span class="keywordflow">if</span> (<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>) {<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>-&gt;<a class="code" href="classFl__Widget.html#ac45bdb80c3e66c571d0420ebefd4aaa5">position</a>(X, <a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>-&gt;<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>()+Y-<a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());}
<a name="l00406"></a>00406   <a class="code" href="classmenuwindow.html#a318277465f419c9b719b3ddfd0659eb2">Fl_Menu_Window::position</a>(X, Y);
<a name="l00407"></a>00407   <span class="comment">// x(X); y(Y); // don&#39;t wait for response from X</span>
<a name="l00408"></a>00408 }
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="comment">// scroll so item i is visible on screen</span>
<a name="l00411"></a><a class="code" href="classmenuwindow.html#af31d899f529a0d554ece547a791e4bf0">00411</a> <span class="keywordtype">void</span> <a class="code" href="classmenuwindow.html#af31d899f529a0d554ece547a791e4bf0">menuwindow::autoscroll</a>(<span class="keywordtype">int</span> n) {
<a name="l00412"></a>00412   <span class="keywordtype">int</span> scr_x, scr_y, scr_w, scr_h;
<a name="l00413"></a>00413   <span class="keywordtype">int</span> Y = <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>()+<a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>())+2+n*<a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415   <a class="code" href="group__fl__screen.html#ga510d26cb2d6ec0688cf1eb8c5d9e5a1e">Fl::screen_xywh</a>(scr_x, scr_y, scr_w, scr_h);
<a name="l00416"></a>00416   <span class="keywordflow">if</span> (Y &lt;= scr_y) Y = scr_y-Y+10;
<a name="l00417"></a>00417   <span class="keywordflow">else</span> {
<a name="l00418"></a>00418     Y = Y+itemheight-scr_h-scr_y;
<a name="l00419"></a>00419     <span class="keywordflow">if</span> (Y &lt; 0) <span class="keywordflow">return</span>;
<a name="l00420"></a>00420     Y = -Y-10;
<a name="l00421"></a>00421   }
<a name="l00422"></a>00422   <a class="code" href="classmenuwindow.html#a318277465f419c9b719b3ddfd0659eb2">Fl_Menu_Window::position</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>(), <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>()+Y);
<a name="l00423"></a>00423   <span class="comment">// y(y()+Y); // don&#39;t wait for response from X</span>
<a name="l00424"></a>00424 }
<a name="l00425"></a>00425 
<a name="l00427"></a>00427 
<a name="l00428"></a>00428 <span class="keywordtype">void</span> menuwindow::drawentry(<span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> eraseit) {
<a name="l00429"></a>00429   <span class="keywordflow">if</span> (!m) <span class="keywordflow">return</span>; <span class="comment">// this happens if -1 is selected item and redrawn</span>
<a name="l00430"></a>00430 
<a name="l00431"></a>00431   <span class="keywordtype">int</span> <a class="code" href="fl__rounded__box_8cxx.html#a84909b16209480034c40276c4f84f975">BW</a> = <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>());
<a name="l00432"></a>00432   <span class="keywordtype">int</span> xx = <a class="code" href="fl__rounded__box_8cxx.html#a84909b16209480034c40276c4f84f975">BW</a>;
<a name="l00433"></a>00433   <span class="keywordtype">int</span> W = <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>();
<a name="l00434"></a>00434   <span class="keywordtype">int</span> ww = W-2*BW-1;
<a name="l00435"></a>00435   <span class="keywordtype">int</span> yy = BW+1+n*<a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>;
<a name="l00436"></a>00436   <span class="keywordtype">int</span> hh = itemheight - <a class="code" href="Fl__Menu_8cxx.html#a06450e9e3b7452d96f4f585be77059f0">LEADING</a>;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438   <span class="keywordflow">if</span> (eraseit &amp;&amp; n != <a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>) {
<a name="l00439"></a>00439     <a class="code" href="group__fl__drawings.html#gabe60242ba3b975800717b95cb6bc06d2">fl_push_clip</a>(xx+1, yy-(LEADING-2)/2, ww-2, hh+(LEADING-2));
<a name="l00440"></a>00440     <a class="code" href="classFl__Widget.html#ac55bdb496a01fcbcad924f1cec506798">draw_box</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>(), 0, 0, <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>(), <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>(), button ? button-&gt;<a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>() : <a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>());
<a name="l00441"></a>00441     <a class="code" href="group__fl__drawings.html#ga7abb216a9a87408c8926126cc9efce22">fl_pop_clip</a>();
<a name="l00442"></a>00442   }
<a name="l00443"></a>00443 
<a name="l00444"></a>00444   m-&gt;<a class="code" href="structFl__Menu__Item.html#adfe11fcd24cfee62ef1c7317b27da6ae">draw</a>(xx, yy, ww, hh, button, n==<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>);
<a name="l00445"></a>00445 
<a name="l00446"></a>00446   <span class="comment">// the shortcuts and arrows assume fl_color() was left set by draw():</span>
<a name="l00447"></a>00447   <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#af47e96f964e91776f8be4dcbf1608f6f">submenu</a>()) {
<a name="l00448"></a>00448     <span class="keywordtype">int</span> sz = (hh-7)&amp;-2;
<a name="l00449"></a>00449     <span class="keywordtype">int</span> y1 = yy+(hh-sz)/2;
<a name="l00450"></a>00450     <span class="keywordtype">int</span> x1 = xx+ww-sz-3;
<a name="l00451"></a>00451     <a class="code" href="group__fl__drawings.html#ga821e9db88f1ff6a8d348c80babd7b49c">fl_polygon</a>(x1+2, y1, x1+2, y1+sz, x1+sz/2+2, y1+sz/2);
<a name="l00452"></a>00452   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#a996db6347b53fc0ea8ab6ae763a44a2c" title="menu item shortcut">shortcut_</a>) {
<a name="l00453"></a>00453     <a class="code" href="Enumerations_8H.html#a2ac46d9f082834b969fffe490a03a709">Fl_Font</a> <a class="code" href="fl__boxtype_8cxx.html#ac406db58651c10e8f67ed432c66db0d6">f</a> = m-&gt;<a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> || m-&gt;<a class="code" href="structFl__Menu__Item.html#ad82ab3107c63ed28bda8749fe3f14f32" title="which font for this menu item text">labelfont_</a> ? (<a class="code" href="Enumerations_8H.html#a2ac46d9f082834b969fffe490a03a709">Fl_Font</a>)m-&gt;<a class="code" href="structFl__Menu__Item.html#ad82ab3107c63ed28bda8749fe3f14f32" title="which font for this menu item text">labelfont_</a> :
<a name="l00454"></a>00454                     button ? button-&gt;<a class="code" href="classFl__Menu__.html#a5a4ff7e9d8784332e04dbb88012f3899">textfont</a>() : <a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>;
<a name="l00455"></a>00455     <a class="code" href="group__fl__attributes.html#ga1bdba1e2b321676da6b0b290f485bf27">fl_font</a>(f, m-&gt;<a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> ? m-&gt;<a class="code" href="structFl__Menu__Item.html#a286bd88b6597d557b6ebec29dea7a942" title="size of menu item text">labelsize_</a> :
<a name="l00456"></a>00456                    button ? button-&gt;<a class="code" href="classFl__Menu__.html#a6c275dfa1108c9c12ea9759a8bb0f551">textsize</a>() : <a class="code" href="Enumerations_8H.html#a200c616eb9f1a5d32a0b79847cef8cc8" title="normal font size">FL_NORMAL_SIZE</a>);
<a name="l00457"></a>00457     <span class="keyword">const</span> <span class="keywordtype">char</span> *k, *s = <a class="code" href="group__fl__drawings.html#gadfd8bd4a9143e4238da84d031bfd1815">fl_shortcut_label</a>(m-&gt;<a class="code" href="structFl__Menu__Item.html#a996db6347b53fc0ea8ab6ae763a44a2c" title="menu item shortcut">shortcut_</a>, &amp;k);
<a name="l00458"></a>00458     <span class="keywordflow">if</span> (<a class="code" href="group__fl__unicode.html#gaff5ccdf22c2cb46125cc9a152542e63b">fl_utf_nb_char</a>((<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)k, strlen(k))&lt;=4) {
<a name="l00459"></a>00459       <span class="comment">// righ-align the modifiers and left-align the key</span>
<a name="l00460"></a>00460       <span class="keywordtype">char</span> <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>[32]; strcpy(buf, s); buf[k-s] = 0;
<a name="l00461"></a>00461       <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(buf, xx, yy, ww-<a class="code" href="classmenuwindow.html#afafb332584f636a29542c8549cd0ce1c">shortcutWidth</a>, hh, <a class="code" href="Enumerations_8H.html#a16646615fa4863fae6f7975b36c3987e">FL_ALIGN_RIGHT</a>);
<a name="l00462"></a>00462       <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(  k, xx+ww-<a class="code" href="classmenuwindow.html#afafb332584f636a29542c8549cd0ce1c">shortcutWidth</a>, yy, <a class="code" href="classmenuwindow.html#afafb332584f636a29542c8549cd0ce1c">shortcutWidth</a>, hh, <a class="code" href="Enumerations_8H.html#aee67f09771b16bc5da1f1ee860681be5">FL_ALIGN_LEFT</a>);
<a name="l00463"></a>00463     } <span class="keywordflow">else</span> {
<a name="l00464"></a>00464       <span class="comment">// right-align to the menu</span>
<a name="l00465"></a>00465       <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(s, xx, yy, ww-4, hh, <a class="code" href="Enumerations_8H.html#a16646615fa4863fae6f7975b36c3987e">FL_ALIGN_RIGHT</a>);
<a name="l00466"></a>00466     }
<a name="l00467"></a>00467   }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469   <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> &amp; <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>) {
<a name="l00470"></a>00470     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="Enumerations_8H.html#ad723ee5e7504ff3c0f07dbe34e894b9f">FL_DARK3</a>);
<a name="l00471"></a>00471     <a class="code" href="group__fl__drawings.html#gacf46b232b6439424cc7f53656c5c2226">fl_xyline</a>(BW-1, yy+hh+(LEADING-2)/2, W-2*BW+2);
<a name="l00472"></a>00472     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="Enumerations_8H.html#a1195306dc5887618e4ddea48c14da4ef">FL_LIGHT3</a>);
<a name="l00473"></a>00473     <a class="code" href="group__fl__drawings.html#gacf46b232b6439424cc7f53656c5c2226">fl_xyline</a>(BW-1, yy+hh+((LEADING-2)/2+1), W-2*BW+2);
<a name="l00474"></a>00474   }
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00477"></a>00477 <span class="keywordtype">void</span> menutitle::draw() {
<a name="l00478"></a>00478   <a class="code" href="classmenutitle.html#a7ae02ddf7baea030a8c67fc587c88a6a">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#adfe11fcd24cfee62ef1c7317b27da6ae">draw</a>(0, 0, <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>(), <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>(), button, 2);
<a name="l00479"></a>00479 }
<a name="l00480"></a>00480 
<a name="l00481"></a>00481 <span class="keywordtype">void</span> menuwindow::draw() {
<a name="l00482"></a>00482   <span class="keywordflow">if</span> (<a class="code" href="classFl__Widget.html#a24aaceb4034489133926f53eb57aad23">damage</a>() != <a class="code" href="Enumerations_8H.html#a9a20351f841109b3d861e0c1248d146dad0cb406be09a7f40cbeadc398f63ce1e">FL_DAMAGE_CHILD</a>) {    <span class="comment">// complete redraw</span>
<a name="l00483"></a>00483     <a class="code" href="group__fl__drawings.html#ga475ff2bbcafeb30d4551f635e42d6259">fl_draw_box</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>(), 0, 0, <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>(), <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>(), button ? button-&gt;<a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>() : <a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>());
<a name="l00484"></a>00484     <span class="keywordflow">if</span> (<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>) {
<a name="l00485"></a>00485       <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>; <span class="keywordtype">int</span> j;
<a name="l00486"></a>00486       <span class="keywordflow">for</span> (m=<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#a1ee3f91630cfcceeef893fe1bfe2fa51">first</a>(), j=0; m-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>; j++, m = m-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>()) drawentry(m, j, 0);
<a name="l00487"></a>00487     }
<a name="l00488"></a>00488   } <span class="keywordflow">else</span> {
<a name="l00489"></a>00489     <span class="keywordflow">if</span> (<a class="code" href="classFl__Widget.html#a24aaceb4034489133926f53eb57aad23">damage</a>() &amp; <a class="code" href="Enumerations_8H.html#a9a20351f841109b3d861e0c1248d146dad0cb406be09a7f40cbeadc398f63ce1e">FL_DAMAGE_CHILD</a> &amp;&amp; <a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>!=<a class="code" href="classmenuwindow.html#a81ad82b17f1dfeb66f7e3c74414f066d">drawn_selected</a>) { <span class="comment">// change selection</span>
<a name="l00490"></a>00490       drawentry(<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>(<a class="code" href="classmenuwindow.html#a81ad82b17f1dfeb66f7e3c74414f066d">drawn_selected</a>), <a class="code" href="classmenuwindow.html#a81ad82b17f1dfeb66f7e3c74414f066d">drawn_selected</a>, 1);
<a name="l00491"></a>00491       drawentry(<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>(<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>), <a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>, 1);
<a name="l00492"></a>00492     }
<a name="l00493"></a>00493   }         
<a name="l00494"></a>00494   <a class="code" href="classmenuwindow.html#a81ad82b17f1dfeb66f7e3c74414f066d">drawn_selected</a> = <a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>;
<a name="l00495"></a>00495 }
<a name="l00496"></a>00496 
<a name="l00497"></a><a class="code" href="classmenuwindow.html#aaddc4927471c88bdf82d1d8c47c02f66">00497</a> <span class="keywordtype">void</span> <a class="code" href="classmenuwindow.html#aaddc4927471c88bdf82d1d8c47c02f66">menuwindow::set_selected</a>(<span class="keywordtype">int</span> n) {
<a name="l00498"></a>00498   <span class="keywordflow">if</span> (n != <a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>) {<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a> = n; <a class="code" href="classFl__Widget.html#a24aaceb4034489133926f53eb57aad23">damage</a>(<a class="code" href="Enumerations_8H.html#a9a20351f841109b3d861e0c1248d146dad0cb406be09a7f40cbeadc398f63ce1e">FL_DAMAGE_CHILD</a>);}
<a name="l00499"></a>00499 }
<a name="l00500"></a>00500 
<a name="l00502"></a>00502 
<a name="l00503"></a><a class="code" href="classmenuwindow.html#a7439baeafaebd411082b92d20c3e549c">00503</a> <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#a7439baeafaebd411082b92d20c3e549c">menuwindow::find_selected</a>(<span class="keywordtype">int</span> mx, <span class="keywordtype">int</span> my) {
<a name="l00504"></a>00504   <span class="keywordflow">if</span> (!<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a> || !<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>) <span class="keywordflow">return</span> -1;
<a name="l00505"></a>00505   mx -= <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>();
<a name="l00506"></a>00506   my -= <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>();
<a name="l00507"></a>00507   <span class="keywordflow">if</span> (my &lt; 0 || my &gt;= <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>()) <span class="keywordflow">return</span> -1;
<a name="l00508"></a>00508   <span class="keywordflow">if</span> (!itemheight) { <span class="comment">// menubar</span>
<a name="l00509"></a>00509     <span class="keywordtype">int</span> xx = 3; <span class="keywordtype">int</span> n = 0;
<a name="l00510"></a>00510     <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m = <a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a> ? <a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#a1ee3f91630cfcceeef893fe1bfe2fa51">first</a>() : 0;
<a name="l00511"></a>00511     <span class="keywordflow">for</span> (; ; m = m-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>(), n++) {
<a name="l00512"></a>00512       <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>) <span class="keywordflow">return</span> -1;
<a name="l00513"></a>00513       xx += m-&gt;<a class="code" href="structFl__Menu__Item.html#a8156770e85f23bccd1805583712658ac">measure</a>(0, button) + 16;
<a name="l00514"></a>00514       <span class="keywordflow">if</span> (xx &gt; mx) <span class="keywordflow">break</span>;
<a name="l00515"></a>00515     }
<a name="l00516"></a>00516     <span class="keywordflow">return</span> n;
<a name="l00517"></a>00517   }
<a name="l00518"></a>00518   <span class="keywordflow">if</span> (mx &lt; <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>()) || mx &gt;= <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>()) <span class="keywordflow">return</span> -1;
<a name="l00519"></a>00519   <span class="keywordtype">int</span> n = (my-<a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>())-1)/itemheight;
<a name="l00520"></a>00520   <span class="keywordflow">if</span> (n &lt; 0 || n&gt;=<a class="code" href="classmenuwindow.html#a7687c951125a57b28ea28df364350e0d">numitems</a>) <span class="keywordflow">return</span> -1;
<a name="l00521"></a>00521   <span class="keywordflow">return</span> n;
<a name="l00522"></a>00522 }
<a name="l00523"></a>00523 
<a name="l00524"></a>00524 <span class="comment">// return horizontal position for item n in a menubar:</span>
<a name="l00525"></a><a class="code" href="classmenuwindow.html#a9a4e13c5241168e15187f036bb7724f2">00525</a> <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#a9a4e13c5241168e15187f036bb7724f2">menuwindow::titlex</a>(<span class="keywordtype">int</span> n) {
<a name="l00526"></a>00526   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l00527"></a>00527   <span class="keywordtype">int</span> xx = 3;
<a name="l00528"></a>00528   <span class="keywordflow">for</span> (m=<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#a1ee3f91630cfcceeef893fe1bfe2fa51">first</a>(); n--; m = m-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>()) xx += m-&gt;<a class="code" href="structFl__Menu__Item.html#a8156770e85f23bccd1805583712658ac">measure</a>(0, button) + 16;
<a name="l00529"></a>00529   <span class="keywordflow">return</span> xx;
<a name="l00530"></a>00530 }
<a name="l00531"></a>00531 
<a name="l00532"></a>00532 <span class="comment">// return 1, if the given root coordinates are inside the window</span>
<a name="l00533"></a><a class="code" href="classmenuwindow.html#ab651bbecb58ab07219986365537e0449">00533</a> <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#ab651bbecb58ab07219986365537e0449">menuwindow::is_inside</a>(<span class="keywordtype">int</span> mx, <span class="keywordtype">int</span> my) {
<a name="l00534"></a>00534   <span class="keywordflow">if</span> ( mx &lt; <a class="code" href="classFl__Window.html#a47814b4ee2378c8c942eeddd569c13f2">x_root</a>() || mx &gt;= <a class="code" href="classFl__Window.html#a47814b4ee2378c8c942eeddd569c13f2">x_root</a>() + <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() ||
<a name="l00535"></a>00535        my &lt; <a class="code" href="classFl__Window.html#a746dbdcce3b6d6aaed215188fd47d54a">y_root</a>() || my &gt;= <a class="code" href="classFl__Window.html#a746dbdcce3b6d6aaed215188fd47d54a">y_root</a>() + <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>()) {
<a name="l00536"></a>00536     <span class="keywordflow">return</span> 0;
<a name="l00537"></a>00537   }
<a name="l00538"></a>00538   <span class="keywordflow">return</span> 1;
<a name="l00539"></a>00539 }
<a name="l00540"></a>00540 
<a name="l00542"></a>00542 <span class="comment">// Fl_Menu_Item::popup(...)</span>
<a name="l00543"></a>00543 
<a name="l00544"></a>00544 <span class="comment">// Because Fl::grab() is done, all events go to one of the menu windows.</span>
<a name="l00545"></a>00545 <span class="comment">// But the handle method needs to look at all of them to find out</span>
<a name="l00546"></a>00546 <span class="comment">// what item the user is pointing at.  And it needs a whole lot</span>
<a name="l00547"></a>00547 <span class="comment">// of other state variables to determine what is going on with</span>
<a name="l00548"></a>00548 <span class="comment">// the currently displayed menus.</span>
<a name="l00549"></a>00549 <span class="comment">// So the main loop (handlemenu()) puts all the state in a structure</span>
<a name="l00550"></a>00550 <span class="comment">// and puts a pointer to it in a static location, so the handle()</span>
<a name="l00551"></a>00551 <span class="comment">// on menus can refer to it and alter it.  The handle() method</span>
<a name="l00552"></a>00552 <span class="comment">// changes variables in this state to indicate what item is</span>
<a name="l00553"></a>00553 <span class="comment">// picked, but does not actually alter the display, instead the</span>
<a name="l00554"></a>00554 <span class="comment">// main loop does that.  This is because the X mapping and unmapping</span>
<a name="l00555"></a>00555 <span class="comment">// of windows is slow, and we don&#39;t want to fall behind the events.</span>
<a name="l00556"></a>00556 
<a name="l00557"></a>00557 <span class="comment">// values for menustate.state:</span>
<a name="l00558"></a><a class="code" href="Fl__Menu_8cxx.html#a20ea5dbb9b54c2279801b3160e32c48d">00558</a> <span class="preprocessor">#define INITIAL_STATE 0 // no mouse up or down since popup() called</span>
<a name="l00559"></a><a class="code" href="Fl__Menu_8cxx.html#a1481e20cc3d87a5580af59a15d76a3ef">00559</a> <span class="preprocessor"></span><span class="preprocessor">#define PUSH_STATE 1    // mouse has been pushed on a normal item</span>
<a name="l00560"></a><a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">00560</a> <span class="preprocessor"></span><span class="preprocessor">#define DONE_STATE 2    // exit the popup, the current item was picked</span>
<a name="l00561"></a><a class="code" href="Fl__Menu_8cxx.html#a0929d1d5d0e390e0583e766cd0f59b1c">00561</a> <span class="preprocessor"></span><span class="preprocessor">#define MENU_PUSH_STATE 3 // mouse has been pushed on a menu title</span>
<a name="l00562"></a>00562 <span class="preprocessor"></span>
<a name="l00563"></a><a class="code" href="structmenustate.html">00563</a> <span class="keyword">struct </span><a class="code" href="structmenustate.html">menustate</a> {
<a name="l00564"></a><a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">00564</a>   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>; <span class="comment">// what mouse is pointing at</span>
<a name="l00565"></a><a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">00565</a>   <span class="keywordtype">int</span> <a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>; <span class="comment">// which menu it is in</span>
<a name="l00566"></a><a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">00566</a>   <span class="keywordtype">int</span> <a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a>; <span class="comment">// which item in that menu, -1 if none</span>
<a name="l00567"></a><a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">00567</a>   <a class="code" href="classmenuwindow.html">menuwindow</a>* <a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[20]; <span class="comment">// pointers to menus</span>
<a name="l00568"></a><a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">00568</a>   <span class="keywordtype">int</span> <a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>;
<a name="l00569"></a><a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">00569</a>   <span class="keywordtype">int</span> <a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a>; <span class="comment">// if true p[0] is a menubar</span>
<a name="l00570"></a><a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">00570</a>   <span class="keywordtype">int</span> <a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a>;
<a name="l00571"></a><a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">00571</a>   <a class="code" href="classmenuwindow.html">menuwindow</a>* <a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>; <span class="comment">// kludge for buttons in menubar</span>
<a name="l00572"></a>00572   <span class="keywordtype">int</span> <a class="code" href="structmenustate.html#a5b046b26219516330a08c6ddac7107c3">is_inside</a>(<span class="keywordtype">int</span> mx, <span class="keywordtype">int</span> my);
<a name="l00573"></a>00573 };
<a name="l00574"></a>00574 <span class="keyword">static</span> <a class="code" href="structmenustate.html">menustate</a>* p=0;
<a name="l00575"></a>00575 
<a name="l00576"></a>00576 <span class="comment">// return 1 if the coordinates are inside any of the menuwindows</span>
<a name="l00577"></a><a class="code" href="structmenustate.html#a5b046b26219516330a08c6ddac7107c3">00577</a> <span class="keywordtype">int</span> <a class="code" href="structmenustate.html#a5b046b26219516330a08c6ddac7107c3">menustate::is_inside</a>(<span class="keywordtype">int</span> mx, <span class="keywordtype">int</span> my) {
<a name="l00578"></a>00578   <span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;
<a name="l00579"></a>00579   <span class="keywordflow">for</span> (i=<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>-1; i&gt;=0; i--) {
<a name="l00580"></a>00580     <span class="keywordflow">if</span> (p[i]-&gt;<a class="code" href="structmenustate.html#a5b046b26219516330a08c6ddac7107c3">is_inside</a>(mx, my))
<a name="l00581"></a>00581       <span class="keywordflow">return</span> 1;
<a name="l00582"></a>00582   }
<a name="l00583"></a>00583   <span class="keywordflow">return</span> 0;
<a name="l00584"></a>00584 }
<a name="l00585"></a>00585 
<a name="l00586"></a>00586 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> setitem(<span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>, <span class="keywordtype">int</span> m, <span class="keywordtype">int</span> n) {
<a name="l00587"></a>00587   p-&gt;<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a> = <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;
<a name="l00588"></a>00588   p-&gt;<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> = <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l00589"></a>00589   p-&gt;<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a> = n;
<a name="l00590"></a>00590 }
<a name="l00591"></a>00591 
<a name="l00592"></a>00592 <span class="keyword">static</span> <span class="keywordtype">void</span> setitem(<span class="keywordtype">int</span> m, <span class="keywordtype">int</span> n) {
<a name="l00593"></a>00593   <a class="code" href="structmenustate.html">menustate</a> &amp;pp = *p;
<a name="l00594"></a>00594   pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a> = (n &gt;= 0) ? pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[m]-&gt;<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>(n) : 0;
<a name="l00595"></a>00595   pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> = <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l00596"></a>00596   pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a> = n;
<a name="l00597"></a>00597 }
<a name="l00598"></a>00598 
<a name="l00599"></a>00599 <span class="keyword">static</span> <span class="keywordtype">int</span> forward(<span class="keywordtype">int</span> menu) { <span class="comment">// go to next item in menu menu if possible</span>
<a name="l00600"></a>00600   <a class="code" href="structmenustate.html">menustate</a> &amp;pp = *p;
<a name="l00601"></a>00601   <span class="comment">// Fl_Menu_Button can geberate menu=-1. This line fixes it and selectes the first item.</span>
<a name="l00602"></a>00602   <span class="keywordflow">if</span> (menu==-1) 
<a name="l00603"></a>00603     menu = 0;
<a name="l00604"></a>00604   <a class="code" href="classmenuwindow.html">menuwindow</a> &amp;m = *(pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[menu]);
<a name="l00605"></a>00605   <span class="keywordtype">int</span> item = (menu == pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>) ? pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a> : m.<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>;
<a name="l00606"></a>00606   while (++item &lt; m.<a class="code" href="classmenuwindow.html#a7687c951125a57b28ea28df364350e0d">numitems</a>) {
<a name="l00607"></a>00607     <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m1 = m.<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>(item);
<a name="l00608"></a>00608     <span class="keywordflow">if</span> (m1-&gt;<a class="code" href="structFl__Menu__Item.html#afa77fed0a8d3c822610f7585a9efe22b">activevisible</a>()) {setitem(m1, menu, item); <span class="keywordflow">return</span> 1;}
<a name="l00609"></a>00609   }
<a name="l00610"></a>00610   <span class="keywordflow">return</span> 0;
<a name="l00611"></a>00611 }
<a name="l00612"></a>00612 
<a name="l00613"></a>00613 <span class="keyword">static</span> <span class="keywordtype">int</span> backward(<span class="keywordtype">int</span> menu) { <span class="comment">// previous item in menu menu if possible</span>
<a name="l00614"></a>00614   <a class="code" href="structmenustate.html">menustate</a> &amp;pp = *p;
<a name="l00615"></a>00615   <a class="code" href="classmenuwindow.html">menuwindow</a> &amp;m = *(pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[menu]);
<a name="l00616"></a>00616   <span class="keywordtype">int</span> item = (menu == pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>) ? pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a> : m.<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>;
<a name="l00617"></a>00617   if (item &lt; 0) item = m.<a class="code" href="classmenuwindow.html#a7687c951125a57b28ea28df364350e0d">numitems</a>;
<a name="l00618"></a>00618   <span class="keywordflow">while</span> (--item &gt;= 0) {
<a name="l00619"></a>00619     <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m1 = m.<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>(item);
<a name="l00620"></a>00620     <span class="keywordflow">if</span> (m1-&gt;<a class="code" href="structFl__Menu__Item.html#afa77fed0a8d3c822610f7585a9efe22b">activevisible</a>()) {setitem(m1, menu, item); <span class="keywordflow">return</span> 1;}
<a name="l00621"></a>00621   }
<a name="l00622"></a>00622   <span class="keywordflow">return</span> 0;
<a name="l00623"></a>00623 }
<a name="l00624"></a>00624 
<a name="l00625"></a><a class="code" href="classmenuwindow.html#aa5b284e1542e37024d9ee5c871fc136c">00625</a> <span class="keywordtype">int</span> <a class="code" href="classmenuwindow.html#aa5b284e1542e37024d9ee5c871fc136c">menuwindow::handle</a>(<span class="keywordtype">int</span> e) {
<a name="l00626"></a>00626 <span class="preprocessor">#if defined (__APPLE__) || defined (USE_X11)</span>
<a name="l00627"></a>00627 <span class="preprocessor"></span>  <span class="comment">// This off-route takes care of the &quot;detached menu&quot; bug on OS X.</span>
<a name="l00628"></a>00628   <span class="comment">// Apple event handler requires that we hide all menu windows right</span>
<a name="l00629"></a>00629   <span class="comment">// now, so that Carbon can continue undisturbed with handling window</span>
<a name="l00630"></a>00630   <span class="comment">// manager events, like dragging the application window.</span>
<a name="l00631"></a>00631   <span class="keywordtype">int</span> ret = early_hide_handle(e);
<a name="l00632"></a>00632   <a class="code" href="structmenustate.html">menustate</a> &amp;pp = *p;
<a name="l00633"></a>00633   <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> == <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>) {
<a name="l00634"></a>00634     <a class="code" href="classFl__Menu__Window.html#aadca68c365aea60fcb2841b756fa235a">hide</a>();
<a name="l00635"></a>00635     <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>) {
<a name="l00636"></a>00636       pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>-&gt;<a class="code" href="classFl__Menu__Window.html#aadca68c365aea60fcb2841b756fa235a">hide</a>();
<a name="l00637"></a>00637       <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>-&gt;<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>)
<a name="l00638"></a>00638         pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>-&gt;<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>-&gt;<a class="code" href="classFl__Menu__Window.html#aadca68c365aea60fcb2841b756fa235a">hide</a>();
<a name="l00639"></a>00639     }
<a name="l00640"></a>00640     <span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>;
<a name="l00641"></a>00641     <span class="keywordflow">while</span> (i&gt;0) {
<a name="l00642"></a>00642       <a class="code" href="classmenuwindow.html">menuwindow</a> *mw = pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[--i];
<a name="l00643"></a>00643       <span class="keywordflow">if</span> (mw) {
<a name="l00644"></a>00644         mw-&gt;<a class="code" href="classFl__Menu__Window.html#aadca68c365aea60fcb2841b756fa235a">hide</a>();
<a name="l00645"></a>00645         <span class="keywordflow">if</span> (mw-&gt;<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>) 
<a name="l00646"></a>00646           mw-&gt;<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>-&gt;<a class="code" href="classFl__Menu__Window.html#aadca68c365aea60fcb2841b756fa235a">hide</a>();
<a name="l00647"></a>00647       }
<a name="l00648"></a>00648     }
<a name="l00649"></a>00649   }
<a name="l00650"></a>00650   <span class="keywordflow">return</span> ret;
<a name="l00651"></a>00651 }
<a name="l00652"></a>00652 
<a name="l00653"></a>00653 <span class="keywordtype">int</span> menuwindow::early_hide_handle(<span class="keywordtype">int</span> e) {
<a name="l00654"></a>00654 <span class="preprocessor">#endif</span>
<a name="l00655"></a>00655 <span class="preprocessor"></span>  <a class="code" href="structmenustate.html">menustate</a> &amp;pp = *p;
<a name="l00656"></a>00656   <span class="keywordflow">switch</span> (e) {
<a name="l00657"></a>00657   <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a1387c0430ec873aa44704954a369143b">FL_KEYBOARD</a>:
<a name="l00658"></a>00658     <span class="keywordflow">switch</span> (<a class="code" href="group__fl__events.html#ga1ac131e3cd5ca674cc022b1f77233449">Fl::event_key</a>()) {
<a name="l00659"></a>00659     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#a20dc86e7758a88b4d1f06323e2de9896" title="The backspace key.">FL_BackSpace</a>:
<a name="l00660"></a>00660     BACKTAB:
<a name="l00661"></a>00661       <span class="keywordflow">if</span> (!backward(pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>)) {pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a> = -1;backward(pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>);}
<a name="l00662"></a>00662       <span class="keywordflow">return</span> 1;
<a name="l00663"></a>00663     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#a050700391ba0940ca16b0e5dbf4644f0" title="The up arrow key.">FL_Up</a>:
<a name="l00664"></a>00664       <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a> &amp;&amp; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> == 0) {
<a name="l00665"></a>00665         <span class="comment">// Do nothing...</span>
<a name="l00666"></a>00666       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (backward(pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>)) {
<a name="l00667"></a>00667         <span class="comment">// Do nothing...</span>
<a name="l00668"></a>00668       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a> &amp;&amp; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>==1) {
<a name="l00669"></a>00669         setitem(0, pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[0]-&gt;<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>);
<a name="l00670"></a>00670       }
<a name="l00671"></a>00671       <span class="keywordflow">return</span> 1;
<a name="l00672"></a>00672     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#aa6e3e7f377cecb30c77f112ce54c3753" title="The tab key.">FL_Tab</a>:
<a name="l00673"></a>00673       <span class="keywordflow">if</span> (<a class="code" href="group__fl__events.html#gabd68dc8a592e9a2a41b42cb7e3a30060">Fl::event_shift</a>()) <span class="keywordflow">goto</span> BACKTAB;
<a name="l00674"></a>00674     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#a7b70dabd5fc84d90552442584a0e8b91" title="The down arrow key.">FL_Down</a>:
<a name="l00675"></a>00675       <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> || !pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a>) {
<a name="l00676"></a>00676         <span class="keywordflow">if</span> (!forward(pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>) &amp;&amp; <a class="code" href="group__fl__events.html#ga1ac131e3cd5ca674cc022b1f77233449">Fl::event_key</a>()==<a class="code" href="Enumerations_8H.html#aa6e3e7f377cecb30c77f112ce54c3753" title="The tab key.">FL_Tab</a>) {
<a name="l00677"></a>00677           pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a> = -1;
<a name="l00678"></a>00678           forward(pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>);
<a name="l00679"></a>00679         }
<a name="l00680"></a>00680       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> &lt; pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>-1) {
<a name="l00681"></a>00681         forward(pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>+1);
<a name="l00682"></a>00682       }
<a name="l00683"></a>00683       <span class="keywordflow">return</span> 1;
<a name="l00684"></a>00684     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#a45679ed656e6b248319719719e894f13" title="The right arrow key.">FL_Right</a>:
<a name="l00685"></a>00685       <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a> &amp;&amp; (pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>&lt;=0 || (pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>==1 &amp;&amp; pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>==2)))
<a name="l00686"></a>00686         forward(0);
<a name="l00687"></a>00687       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> &lt; pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>-1) forward(pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>+1);
<a name="l00688"></a>00688       <span class="keywordflow">return</span> 1;
<a name="l00689"></a>00689     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#afe89caa1c5019809095a6129156f7c5a" title="The left arrow key.">FL_Left</a>:
<a name="l00690"></a>00690       <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a> &amp;&amp; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>&lt;=1) backward(0);
<a name="l00691"></a>00691       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>&gt;0)
<a name="l00692"></a>00692         setitem(pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>-1, pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>-1]-&gt;<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>);
<a name="l00693"></a>00693       <span class="keywordflow">return</span> 1;
<a name="l00694"></a>00694     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ab4a527fe4d93303976de2fbfec05e19b" title="The enter key.">FL_Enter</a>:
<a name="l00695"></a>00695     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#af6ac160165f8c2747488175321f45a63" title="The enter key on the keypad, same as Fl_KP+&amp;#39;\r&amp;#39;.">FL_KP_Enter</a>:
<a name="l00696"></a>00696     <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>:
<a name="l00697"></a>00697       pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>;
<a name="l00698"></a>00698       <span class="keywordflow">return</span> 1;
<a name="l00699"></a>00699     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#a91b983ebe4cd86393e2addb8ab40a326" title="The escape key.">FL_Escape</a>:
<a name="l00700"></a>00700       setitem(0, -1, 0);
<a name="l00701"></a>00701       pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>;
<a name="l00702"></a>00702       <span class="keywordflow">return</span> 1;
<a name="l00703"></a>00703     }
<a name="l00704"></a>00704     <span class="keywordflow">break</span>;
<a name="l00705"></a>00705   <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a6161f0e91cc6b2947200323e3bda8156">FL_SHORTCUT</a>: 
<a name="l00706"></a>00706     {
<a name="l00707"></a>00707       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mymenu = pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>; mymenu--;) {
<a name="l00708"></a>00708         <a class="code" href="classmenuwindow.html">menuwindow</a> &amp;mw = *(pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[mymenu]);
<a name="l00709"></a>00709         <span class="keywordtype">int</span> item; <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m = mw.<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a>-&gt;<a class="code" href="structFl__Menu__Item.html#ae6451c552395f5465d6d67bc31fe93d2">find_shortcut</a>(&amp;item);
<a name="l00710"></a>00710         <span class="keywordflow">if</span> (m) {
<a name="l00711"></a>00711           setitem(m, mymenu, item);
<a name="l00712"></a>00712           <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structFl__Menu__Item.html#af47e96f964e91776f8be4dcbf1608f6f">submenu</a>()) pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>;
<a name="l00713"></a>00713           <span class="keywordflow">return</span> 1;
<a name="l00714"></a>00714         }
<a name="l00715"></a>00715       }
<a name="l00716"></a>00716     }
<a name="l00717"></a>00717     <span class="keywordflow">break</span>;
<a name="l00718"></a>00718   <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a29b256ac93d443dd33a8c610c24e7af5">FL_ENTER</a>:
<a name="l00719"></a>00719   <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3acd57cae091eb27c9a52c446bdd0c164d">FL_MOVE</a>:
<a name="l00720"></a>00720   <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a44972d76423f3e380ae12c36827944e3">FL_PUSH</a>:
<a name="l00721"></a>00721   <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3aaad5c7b2302d7bfe6c6d37b50b4c70f0">FL_DRAG</a>:
<a name="l00722"></a>00722     {
<a name="l00723"></a>00723 <span class="preprocessor">#ifdef __QNX__</span>
<a name="l00724"></a>00724 <span class="preprocessor"></span>      <span class="comment">// STR 704: workaround QNX X11 bug - in QNX a FL_MOVE event is sent</span>
<a name="l00725"></a>00725       <span class="comment">// right after FL_RELEASE...</span>
<a name="l00726"></a>00726       <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> == <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>) <span class="keywordflow">return</span> 1;
<a name="l00727"></a>00727 <span class="preprocessor">#endif // __QNX__</span>
<a name="l00728"></a>00728 <span class="preprocessor"></span>      <span class="keywordtype">int</span> mx = <a class="code" href="group__fl__events.html#ga4c40bd0d2960354c9778fdb65a2b720d">Fl::event_x_root</a>();
<a name="l00729"></a>00729       <span class="keywordtype">int</span> my = <a class="code" href="group__fl__events.html#ga9801003f911eae0e49bf52b875dcaaa5">Fl::event_y_root</a>();
<a name="l00730"></a>00730       <span class="keywordtype">int</span> item=0; <span class="keywordtype">int</span> mymenu = pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>-1;
<a name="l00731"></a>00731       <span class="comment">// Clicking or dragging outside menu cancels it...</span>
<a name="l00732"></a>00732       <span class="keywordflow">if</span> ((!pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a> || mymenu) &amp;&amp; !pp.<a class="code" href="structmenustate.html#a5b046b26219516330a08c6ddac7107c3">is_inside</a>(mx, my)) {
<a name="l00733"></a>00733         setitem(0, -1, 0);
<a name="l00734"></a>00734         <span class="keywordflow">if</span> (e==<a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a44972d76423f3e380ae12c36827944e3">FL_PUSH</a>)
<a name="l00735"></a>00735           pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>;
<a name="l00736"></a>00736         <span class="keywordflow">return</span> 1;
<a name="l00737"></a>00737       }
<a name="l00738"></a>00738       <span class="keywordflow">for</span> (mymenu = pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>-1; ; mymenu--) {
<a name="l00739"></a>00739         item = pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[mymenu]-&gt;<a class="code" href="classmenuwindow.html#a7439baeafaebd411082b92d20c3e549c">find_selected</a>(mx, my);
<a name="l00740"></a>00740         <span class="keywordflow">if</span> (item &gt;= 0) 
<a name="l00741"></a>00741           <span class="keywordflow">break</span>;
<a name="l00742"></a>00742         <span class="keywordflow">if</span> (mymenu &lt;= 0) {
<a name="l00743"></a>00743           <span class="comment">// buttons in menubars must be deselected if we move outside of them!</span>
<a name="l00744"></a>00744           <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>==-1 &amp;&amp; e==<a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a44972d76423f3e380ae12c36827944e3">FL_PUSH</a>) {
<a name="l00745"></a>00745             pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>;
<a name="l00746"></a>00746             <span class="keywordflow">return</span> 1;
<a name="l00747"></a>00747           }
<a name="l00748"></a>00748           <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a> &amp;&amp; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>==0 &amp;&amp; !pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>-&gt;<a class="code" href="structFl__Menu__Item.html#af47e96f964e91776f8be4dcbf1608f6f">submenu</a>()) {
<a name="l00749"></a>00749             <span class="keywordflow">if</span> (e==<a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a44972d76423f3e380ae12c36827944e3">FL_PUSH</a>)
<a name="l00750"></a>00750               pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>;
<a name="l00751"></a>00751             setitem(0, -1, 0);
<a name="l00752"></a>00752             <span class="keywordflow">return</span> 1;
<a name="l00753"></a>00753           }
<a name="l00754"></a>00754           <span class="comment">// all others can stay selected</span>
<a name="l00755"></a>00755           <span class="keywordflow">return</span> 0;
<a name="l00756"></a>00756         }
<a name="l00757"></a>00757       }
<a name="l00758"></a>00758       <span class="keywordflow">if</span> (my == 0 &amp;&amp; item &gt; 0) setitem(mymenu, item - 1);
<a name="l00759"></a>00759       <span class="keywordflow">else</span> setitem(mymenu, item);
<a name="l00760"></a>00760       <span class="keywordflow">if</span> (e == <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a44972d76423f3e380ae12c36827944e3">FL_PUSH</a>) {
<a name="l00761"></a>00761         <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a> &amp;&amp; pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>-&gt;<a class="code" href="structFl__Menu__Item.html#af47e96f964e91776f8be4dcbf1608f6f">submenu</a>() <span class="comment">// this is a menu title</span>
<a name="l00762"></a>00762             &amp;&amp; item != pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[mymenu]-&gt;<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a> <span class="comment">// and it is not already on</span>
<a name="l00763"></a>00763             &amp;&amp; !pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>-&gt;<a class="code" href="structFl__Menu__Item.html#a0824161a9850d4a239b6332ca6cd5125" title="menu item callback">callback_</a>) <span class="comment">// and it does not have a callback</span>
<a name="l00764"></a>00764           pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a0929d1d5d0e390e0583e766cd0f59b1c">MENU_PUSH_STATE</a>;
<a name="l00765"></a>00765         <span class="keywordflow">else</span>
<a name="l00766"></a>00766           pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a1481e20cc3d87a5580af59a15d76a3ef">PUSH_STATE</a>;
<a name="l00767"></a>00767       }
<a name="l00768"></a>00768     }
<a name="l00769"></a>00769     <span class="keywordflow">return</span> 1;
<a name="l00770"></a>00770   <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a5949b5ff170a8236d2745eddb1e9fd9a">FL_RELEASE</a>:
<a name="l00771"></a>00771     <span class="comment">// Mouse must either be held down/dragged some, or this must be</span>
<a name="l00772"></a>00772     <span class="comment">// the second click (not the one that popped up the menu):</span>
<a name="l00773"></a>00773     <span class="keywordflow">if</span> (   !<a class="code" href="group__fl__events.html#gae4f3bafeb9fbae98c3b7cc6f5326e582">Fl::event_is_click</a>() 
<a name="l00774"></a>00774         || pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> == <a class="code" href="Fl__Menu_8cxx.html#a1481e20cc3d87a5580af59a15d76a3ef">PUSH_STATE</a> 
<a name="l00775"></a>00775         || (pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a> &amp;&amp; pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a> &amp;&amp; !pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>-&gt;<a class="code" href="structFl__Menu__Item.html#af47e96f964e91776f8be4dcbf1608f6f">submenu</a>()) <span class="comment">// button</span>
<a name="l00776"></a>00776         ) {
<a name="l00777"></a>00777 <span class="preprocessor">#if 0 // makes the check/radio items leave the menu up</span>
<a name="l00778"></a>00778 <span class="preprocessor"></span>      <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m = pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>;
<a name="l00779"></a>00779       <span class="keywordflow">if</span> (m &amp;&amp; button &amp;&amp; (m-&gt;<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> &amp; (<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a7425ae185af0bdbf04dbadaaa9413574" title="Item is a checkbox toggle (shows checkbox for on/off state)">FL_MENU_TOGGLE</a>|<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a11aab33bbffb20feac97c9b9979638bf" title="Item is a radio button (one checkbox of many can be on)">FL_MENU_RADIO</a>))) {
<a name="l00780"></a>00780         ((<a class="code" href="classFl__Menu__.html">Fl_Menu_</a>*)button)-&gt;picked(m);
<a name="l00781"></a>00781         pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>]-&gt;<a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>();
<a name="l00782"></a>00782       } <span class="keywordflow">else</span>
<a name="l00783"></a>00783 <span class="preprocessor">#endif</span>
<a name="l00784"></a>00784 <span class="preprocessor"></span>      <span class="comment">// do nothing if they try to pick inactive items</span>
<a name="l00785"></a>00785       <span class="keywordflow">if</span> (!pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a> || pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>-&gt;<a class="code" href="structFl__Menu__Item.html#afa77fed0a8d3c822610f7585a9efe22b">activevisible</a>())
<a name="l00786"></a>00786         pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>;
<a name="l00787"></a>00787     }
<a name="l00788"></a>00788     <span class="keywordflow">return</span> 1;
<a name="l00789"></a>00789   }
<a name="l00790"></a>00790   <span class="keywordflow">return</span> <a class="code" href="classmenuwindow.html#aa5b284e1542e37024d9ee5c871fc136c">Fl_Window::handle</a>(e);
<a name="l00791"></a>00791 }
<a name="l00792"></a>00792 
<a name="l00803"></a><a class="code" href="structFl__Menu__Item.html#aa33a156318e20f7bd96bc0fa1a9d905e">00803</a> <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="structFl__Menu__Item.html#aa33a156318e20f7bd96bc0fa1a9d905e">Fl_Menu_Item::pulldown</a>(
<a name="l00804"></a>00804     <span class="keywordtype">int</span> X, <span class="keywordtype">int</span> Y, <span class="keywordtype">int</span> W, <span class="keywordtype">int</span> <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a>,
<a name="l00805"></a>00805     <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* initial_item,
<a name="l00806"></a>00806     <span class="keyword">const</span> <a class="code" href="classFl__Menu__.html">Fl_Menu_</a>* pbutton,
<a name="l00807"></a>00807     <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* t,
<a name="l00808"></a>00808     <span class="keywordtype">int</span> menubar)<span class="keyword"> const </span>{
<a name="l00809"></a>00809   <a class="code" href="classFl__Group.html#af48163bbf0a8d18844b5d751946897c0">Fl_Group::current</a>(0); <span class="comment">// fix possible user error...</span>
<a name="l00810"></a>00810 
<a name="l00811"></a>00811   button = pbutton;
<a name="l00812"></a>00812   <span class="keywordflow">if</span> (pbutton) {
<a name="l00813"></a>00813     <span class="keywordflow">for</span> (<a class="code" href="classFl__Window.html">Fl_Window</a>* <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a> = pbutton-&gt;<a class="code" href="classFl__Widget.html#af8834d376878616c66a094cad6fec9d2">window</a>(); <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>; <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a> = <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>-&gt;window()) {
<a name="l00814"></a>00814       X += <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>-&gt;x();
<a name="l00815"></a>00815       Y += <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>-&gt;y();
<a name="l00816"></a>00816     }
<a name="l00817"></a>00817   } <span class="keywordflow">else</span> {
<a name="l00818"></a>00818     X += <a class="code" href="group__fl__events.html#ga4c40bd0d2960354c9778fdb65a2b720d">Fl::event_x_root</a>()-<a class="code" href="group__fl__events.html#ga91585fcbaa1e79f7452fd2d16a82136e">Fl::event_x</a>();
<a name="l00819"></a>00819     Y += <a class="code" href="group__fl__events.html#ga9801003f911eae0e49bf52b875dcaaa5">Fl::event_y_root</a>()-<a class="code" href="group__fl__events.html#ga192a0c5a37f33b9d117a69f20977c2a1">Fl::event_y</a>();
<a name="l00820"></a>00820   }
<a name="l00821"></a>00821   <a class="code" href="classmenuwindow.html">menuwindow</a> mw(<span class="keyword">this</span>, X, Y, W, H, initial_item, t, menubar);
<a name="l00822"></a>00822   <a class="code" href="group__fl__windows.html#ga100705a8107397cfde7318aa34019739">Fl::grab</a>(mw);
<a name="l00823"></a>00823   <a class="code" href="structmenustate.html">menustate</a> pp; p = &amp;pp;
<a name="l00824"></a>00824   pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[0] = &amp;mw;
<a name="l00825"></a>00825   pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a> = 1;
<a name="l00826"></a>00826   pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a> = menubar;
<a name="l00827"></a>00827   pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> = <a class="code" href="Fl__Menu_8cxx.html#a20ea5dbb9b54c2279801b3160e32c48d">INITIAL_STATE</a>;
<a name="l00828"></a>00828   pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a> = 0; <span class="comment">// kludge for buttons in menubar</span>
<a name="l00829"></a>00829 
<a name="l00830"></a>00830   <span class="comment">// preselected item, pop up submenus if necessary:</span>
<a name="l00831"></a>00831   <span class="keywordflow">if</span> (initial_item &amp;&amp; mw.<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a> &gt;= 0) {
<a name="l00832"></a>00832     setitem(0, mw.<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>);
<a name="l00833"></a>00833     <span class="keywordflow">goto</span> STARTUP;
<a name="l00834"></a>00834   }
<a name="l00835"></a>00835 
<a name="l00836"></a>00836   pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a> = 0; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> = 0; pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a> = -1;
<a name="l00837"></a>00837   <span class="keywordflow">if</span> (menubar) {
<a name="l00838"></a>00838     <span class="comment">// find the initial menu</span>
<a name="l00839"></a>00839     <span class="keywordflow">if</span> (!mw.<a class="code" href="classmenuwindow.html#aa5b284e1542e37024d9ee5c871fc136c">handle</a>(<a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3aaad5c7b2302d7bfe6c6d37b50b4c70f0">FL_DRAG</a>)) {
<a name="l00840"></a>00840       <a class="code" href="group__fl__windows.html#ga100705a8107397cfde7318aa34019739">Fl::grab</a>(0);
<a name="l00841"></a>00841       <span class="keywordflow">return</span> 0;
<a name="l00842"></a>00842     }
<a name="l00843"></a>00843   }
<a name="l00844"></a>00844   initial_item = pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>;
<a name="l00845"></a>00845   <span class="keywordflow">if</span> (initial_item) <span class="keywordflow">goto</span> STARTUP;
<a name="l00846"></a>00846 
<a name="l00847"></a>00847   <span class="comment">// the main loop, runs until p.state goes to DONE_STATE:</span>
<a name="l00848"></a>00848   <span class="keywordflow">for</span> (;;) {
<a name="l00849"></a>00849 
<a name="l00850"></a>00850     <span class="comment">// make sure all the menus are shown:</span>
<a name="l00851"></a>00851     {
<a name="l00852"></a>00852       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = menubar; k &lt; pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>; k++) {
<a name="l00853"></a>00853         <span class="keywordflow">if</span> (!pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[k]-&gt;<a class="code" href="classFl__Window.html#aa09300542b2d8b49fc69a037bdd3b742">shown</a>()) {
<a name="l00854"></a>00854           <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[k]-&gt;<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>) pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[k]-&gt;<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>-&gt;<a class="code" href="classFl__Menu__Window.html#a5658ae8d0587eeb640c44da3b2587441">show</a>();
<a name="l00855"></a>00855           pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[k]-&gt;<a class="code" href="classFl__Menu__Window.html#a5658ae8d0587eeb640c44da3b2587441">show</a>();
<a name="l00856"></a>00856         }
<a name="l00857"></a>00857       }
<a name="l00858"></a>00858     }
<a name="l00859"></a>00859 
<a name="l00860"></a>00860     <span class="comment">// get events:</span>
<a name="l00861"></a>00861     {
<a name="l00862"></a>00862       <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* oldi = pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>;
<a name="l00863"></a>00863       <a class="code" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait</a>();
<a name="l00864"></a>00864       <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a2e7f69519239e056878d8a11cc02b9e5">state</a> == <a class="code" href="Fl__Menu_8cxx.html#a9978c7b4a7e2104282aad46efe969ae0">DONE_STATE</a>) <span class="keywordflow">break</span>; <span class="comment">// done.</span>
<a name="l00865"></a>00865       <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a> == oldi) <span class="keywordflow">continue</span>;
<a name="l00866"></a>00866     }
<a name="l00867"></a>00867 
<a name="l00868"></a>00868     <span class="comment">// only do rest if item changes:</span>
<a name="l00869"></a>00869     <span class="keywordflow">if</span>(pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>) {<span class="keyword">delete</span> pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>; pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a> = 0;} <span class="comment">// turn off &quot;menubar button&quot;</span>
<a name="l00870"></a>00870 
<a name="l00871"></a>00871     <span class="keywordflow">if</span> (!pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>) { <span class="comment">// pointing at nothing</span>
<a name="l00872"></a>00872       <span class="comment">// turn off selection in deepest menu, but don&#39;t erase other menus:</span>
<a name="l00873"></a>00873       pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>-1]-&gt;<a class="code" href="classmenuwindow.html#aaddc4927471c88bdf82d1d8c47c02f66">set_selected</a>(-1);
<a name="l00874"></a>00874       <span class="keywordflow">continue</span>;
<a name="l00875"></a>00875     }
<a name="l00876"></a>00876 
<a name="l00877"></a>00877     <span class="keywordflow">if</span>(pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>) {<span class="keyword">delete</span> pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>; pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a> = 0;}
<a name="l00878"></a>00878     initial_item = 0; <span class="comment">// stop the startup code</span>
<a name="l00879"></a>00879     pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>]-&gt;<a class="code" href="classmenuwindow.html#af31d899f529a0d554ece547a791e4bf0">autoscroll</a>(pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a>);
<a name="l00880"></a>00880 
<a name="l00881"></a>00881   STARTUP:
<a name="l00882"></a>00882     <a class="code" href="classmenuwindow.html">menuwindow</a>&amp; cw = *pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>];
<a name="l00883"></a>00883     <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m = pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>;
<a name="l00884"></a>00884     <span class="keywordflow">if</span> (!m-&gt;<a class="code" href="structFl__Menu__Item.html#afa77fed0a8d3c822610f7585a9efe22b">activevisible</a>()) { <span class="comment">// pointing at inactive item</span>
<a name="l00885"></a>00885       cw.<a class="code" href="classmenuwindow.html#aaddc4927471c88bdf82d1d8c47c02f66">set_selected</a>(-1);
<a name="l00886"></a>00886       initial_item = 0; <span class="comment">// turn off startup code</span>
<a name="l00887"></a>00887       <span class="keywordflow">continue</span>;
<a name="l00888"></a>00888     }
<a name="l00889"></a>00889     cw.<a class="code" href="classmenuwindow.html#aaddc4927471c88bdf82d1d8c47c02f66">set_selected</a>(pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a>);
<a name="l00890"></a>00890 
<a name="l00891"></a>00891     <span class="keywordflow">if</span> (m==initial_item) initial_item=0; <span class="comment">// stop the startup code if item found</span>
<a name="l00892"></a>00892     <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#af47e96f964e91776f8be4dcbf1608f6f">submenu</a>()) {
<a name="l00893"></a>00893       <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* title = <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l00894"></a>00894       <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* menutable;
<a name="l00895"></a>00895       <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a>&amp;<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>) menutable = m+1;
<a name="l00896"></a>00896       <span class="keywordflow">else</span> menutable = (<a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>*)(m)-&gt;<a class="code" href="structFl__Menu__Item.html#aa4cb1e7f8eaa56b2535218ecde9c1d37" title="menu item user_data for the menu&amp;#39;s callback">user_data_</a>;
<a name="l00897"></a>00897       <span class="comment">// figure out where new menu goes:</span>
<a name="l00898"></a>00898       <span class="keywordtype">int</span> nX, nY;
<a name="l00899"></a>00899       <span class="keywordflow">if</span> (!pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> &amp;&amp; pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a>) {      <span class="comment">// menu off a menubar:</span>
<a name="l00900"></a>00900         nX = cw.<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>() + cw.<a class="code" href="classmenuwindow.html#a9a4e13c5241168e15187f036bb7724f2">titlex</a>(pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a>);
<a name="l00901"></a>00901         nY = cw.<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>() + cw.<a class="code" href="classFl__Widget.html#aeeabd61e2d10c76cd6600dbbfe951f71">h</a>();
<a name="l00902"></a>00902         initial_item = 0;
<a name="l00903"></a>00903       } <span class="keywordflow">else</span> {
<a name="l00904"></a>00904         nX = cw.<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>() + cw.<a class="code" href="classFl__Widget.html#ad59ece778aaf15acc4dd01a8bf5f8012">w</a>();
<a name="l00905"></a>00905         nY = cw.<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>() + pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a> * cw.<a class="code" href="classmenuwindow.html#a8a21c710f7b9af429d87a85d6b2526a1">itemheight</a>;
<a name="l00906"></a>00906         title = 0;
<a name="l00907"></a>00907       }
<a name="l00908"></a>00908       <span class="keywordflow">if</span> (initial_item) { <span class="comment">// bring up submenu containing initial item:</span>
<a name="l00909"></a>00909         <a class="code" href="classmenuwindow.html">menuwindow</a>* n = <span class="keyword">new</span> <a class="code" href="classmenuwindow.html">menuwindow</a>(menutable,X,Y,W,H,initial_item,title,0,0,cw.<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>());
<a name="l00910"></a>00910         pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>++] = n;
<a name="l00911"></a>00911         <span class="comment">// move all earlier menus to line up with this new one:</span>
<a name="l00912"></a>00912         <span class="keywordflow">if</span> (n-&gt;<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>&gt;=0) {
<a name="l00913"></a>00913           <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#a4cffdba1345d329bb97e76579d57fa21">dy</a> = n-&gt;<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>()-nY;
<a name="l00914"></a>00914           <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#acafd1211381c8640d68a685ac2eea5d2">dx</a> = n-&gt;<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>()-nX;
<a name="l00915"></a>00915           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> menu = 0; menu &lt;= pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>; menu++) {
<a name="l00916"></a>00916             <a class="code" href="classmenuwindow.html">menuwindow</a>* tt = pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[menu];
<a name="l00917"></a>00917             <span class="keywordtype">int</span> nx = tt-&gt;<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>()+<a class="code" href="fl__boxtype_8cxx.html#acafd1211381c8640d68a685ac2eea5d2">dx</a>; <span class="keywordflow">if</span> (nx &lt; 0) {nx = 0; dx = -tt-&gt;<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>();}
<a name="l00918"></a>00918             <span class="keywordtype">int</span> ny = tt-&gt;<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>()+<a class="code" href="fl__boxtype_8cxx.html#a4cffdba1345d329bb97e76579d57fa21">dy</a>; <span class="keywordflow">if</span> (ny &lt; 0) {ny = 0; dy = -tt-&gt;<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>();}
<a name="l00919"></a>00919             tt-&gt;<a class="code" href="classmenuwindow.html#a318277465f419c9b719b3ddfd0659eb2">position</a>(nx, ny);
<a name="l00920"></a>00920           }
<a name="l00921"></a>00921           setitem(pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>-1, n-&gt;<a class="code" href="classmenuwindow.html#a41eb7bc8315f76152fcf978687d78959">selected</a>);
<a name="l00922"></a>00922           <span class="keywordflow">goto</span> STARTUP;
<a name="l00923"></a>00923         }
<a name="l00924"></a>00924       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a> &gt; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>+1 &amp;&amp;
<a name="l00925"></a>00925                  pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>+1]-&gt;<a class="code" href="classmenuwindow.html#aff18e73bfc709fb8eb3676c246fed760">menu</a> == menutable) {
<a name="l00926"></a>00926         <span class="comment">// the menu is already up:</span>
<a name="l00927"></a>00927         <span class="keywordflow">while</span> (pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a> &gt; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>+2) <span class="keyword">delete</span> pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[--pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>];
<a name="l00928"></a>00928         pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>-1]-&gt;<a class="code" href="classmenuwindow.html#aaddc4927471c88bdf82d1d8c47c02f66">set_selected</a>(-1);
<a name="l00929"></a>00929       } <span class="keywordflow">else</span> {
<a name="l00930"></a>00930         <span class="comment">// delete all the old menus and create new one:</span>
<a name="l00931"></a>00931         <span class="keywordflow">while</span> (pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a> &gt; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>+1) <span class="keyword">delete</span> pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[--pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>];
<a name="l00932"></a>00932         pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>++]= <span class="keyword">new</span> <a class="code" href="classmenuwindow.html">menuwindow</a>(menutable, nX, nY,
<a name="l00933"></a>00933                                           title?1:0, 0, 0, title, 0, menubar, cw.<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>());
<a name="l00934"></a>00934       }
<a name="l00935"></a>00935     } <span class="keywordflow">else</span> { <span class="comment">// !m-&gt;submenu():</span>
<a name="l00936"></a>00936       <span class="keywordflow">while</span> (pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a> &gt; pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a>+1) <span class="keyword">delete</span> pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[--pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>];
<a name="l00937"></a>00937       <span class="keywordflow">if</span> (!pp.<a class="code" href="structmenustate.html#ab0a70152c7859787d01ffe9baa6dedad">menu_number</a> &amp;&amp; pp.<a class="code" href="structmenustate.html#a193da2bd5b804df996c9a5667a5b62b8">menubar</a>) {
<a name="l00938"></a>00938         <span class="comment">// kludge so &quot;menubar buttons&quot; turn &quot;on&quot; by using menu title:</span>
<a name="l00939"></a>00939         pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a> = <span class="keyword">new</span> <a class="code" href="classmenuwindow.html">menuwindow</a>(0,
<a name="l00940"></a>00940                                   cw.<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>()+cw.<a class="code" href="classmenuwindow.html#a9a4e13c5241168e15187f036bb7724f2">titlex</a>(pp.<a class="code" href="structmenustate.html#ab505199ca2f1d5511cd103a316672a95">item_number</a>),
<a name="l00941"></a>00941                                   cw.<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>()+cw.<a class="code" href="classFl__Widget.html#aeeabd61e2d10c76cd6600dbbfe951f71">h</a>(), 0, 0,
<a name="l00942"></a>00942                                   0, <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>, 0, 1);
<a name="l00943"></a>00943         pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>-&gt;<a class="code" href="classmenuwindow.html#a143306a2c70fa9c51eabbd432e90e91f">title</a>-&gt;<a class="code" href="classFl__Menu__Window.html#a5658ae8d0587eeb640c44da3b2587441">show</a>();
<a name="l00944"></a>00944       }
<a name="l00945"></a>00945     }
<a name="l00946"></a>00946   }
<a name="l00947"></a>00947   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m = pp.<a class="code" href="structmenustate.html#aeb7835bf17dfc16e23eb44668964884e">current_item</a>;
<a name="l00948"></a>00948   <a class="code" href="group__fl__windows.html#ga100705a8107397cfde7318aa34019739">Fl::grab</a>(0);
<a name="l00949"></a>00949   <span class="keyword">delete</span> pp.<a class="code" href="structmenustate.html#a2bd482f37cd02456409e85653667b68b">fakemenu</a>;
<a name="l00950"></a>00950   <span class="keywordflow">while</span> (pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>&gt;1) <span class="keyword">delete</span> pp.<a class="code" href="structmenustate.html#a0059638d651f253776db54f835739ecd">p</a>[--pp.<a class="code" href="structmenustate.html#a4fb3213e3d64687efd119fa431defe50">nummenus</a>];
<a name="l00951"></a>00951   mw.<a class="code" href="classFl__Menu__Window.html#aadca68c365aea60fcb2841b756fa235a">hide</a>();
<a name="l00952"></a>00952   <span class="keywordflow">return</span> <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l00953"></a>00953 }
<a name="l00954"></a>00954 
<a name="l00977"></a><a class="code" href="structFl__Menu__Item.html#a71d36b602a718507831a238820576ae6">00977</a> <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="structFl__Menu__Item.html#a71d36b602a718507831a238820576ae6">Fl_Menu_Item::popup</a>(
<a name="l00978"></a>00978   <span class="keywordtype">int</span> X, <span class="keywordtype">int</span> Y,
<a name="l00979"></a>00979   <span class="keyword">const</span> <span class="keywordtype">char</span>* title,
<a name="l00980"></a>00980   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* picked,
<a name="l00981"></a>00981   <span class="keyword">const</span> <a class="code" href="classFl__Menu__.html">Fl_Menu_</a>* button
<a name="l00982"></a>00982   )<span class="keyword"> const </span>{
<a name="l00983"></a>00983   <span class="keyword">static</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a> dummy; <span class="comment">// static so it is all zeros</span>
<a name="l00984"></a>00984   dummy.<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a> = title;
<a name="l00985"></a>00985   <span class="keywordflow">return</span> <a class="code" href="structFl__Menu__Item.html#aa33a156318e20f7bd96bc0fa1a9d905e">pulldown</a>(X, Y, 0, 0, picked, button, title ? &amp;dummy : 0);
<a name="l00986"></a>00986 }
<a name="l00987"></a>00987 
<a name="l01000"></a><a class="code" href="structFl__Menu__Item.html#ae6451c552395f5465d6d67bc31fe93d2">01000</a> <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="structFl__Menu__Item.html#ae6451c552395f5465d6d67bc31fe93d2">Fl_Menu_Item::find_shortcut</a>(<span class="keywordtype">int</span>* ip, <span class="keyword">const</span> <span class="keywordtype">bool</span> require_alt)<span class="keyword"> const </span>{
<a name="l01001"></a>01001   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m = <a class="code" href="structFl__Menu__Item.html#a1ee3f91630cfcceeef893fe1bfe2fa51">first</a>();
<a name="l01002"></a>01002   <span class="keywordflow">if</span> (m) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii = 0; m-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>; m = m-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>(), ii++) {
<a name="l01003"></a>01003     <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#afa77fed0a8d3c822610f7585a9efe22b">activevisible</a>()) {
<a name="l01004"></a>01004       <span class="keywordflow">if</span> (<a class="code" href="group__fl__events.html#gab8b767183ac691d4249f599b94dafe78">Fl::test_shortcut</a>(m-&gt;<a class="code" href="structFl__Menu__Item.html#a996db6347b53fc0ea8ab6ae763a44a2c" title="menu item shortcut">shortcut_</a>)
<a name="l01005"></a>01005          || <a class="code" href="structFl__Menu__Item.html#aaf0b521b5b596e2cfc23cfa3792e0f8b">Fl_Widget::test_shortcut</a>(m-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>, require_alt)) {
<a name="l01006"></a>01006         <span class="keywordflow">if</span> (ip) *ip=ii;
<a name="l01007"></a>01007         <span class="keywordflow">return</span> <a class="code" href="forms_8H-2.html#af3b42f864d9945cbdea4abf952e2412e">m</a>;
<a name="l01008"></a>01008       }
<a name="l01009"></a>01009     }
<a name="l01010"></a>01010   }
<a name="l01011"></a>01011   <span class="keywordflow">return</span> 0;
<a name="l01012"></a>01012 }
<a name="l01013"></a>01013 
<a name="l01014"></a>01014 <span class="comment">// Recursive search of all submenus for anything with this key as a</span>
<a name="l01015"></a>01015 <span class="comment">// shortcut.  Only uses the shortcut field, ignores &amp;x in the labels:</span>
<a name="l01024"></a><a class="code" href="structFl__Menu__Item.html#aaf0b521b5b596e2cfc23cfa3792e0f8b">01024</a> <span class="comment"></span><span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* <a class="code" href="structFl__Menu__Item.html#aaf0b521b5b596e2cfc23cfa3792e0f8b">Fl_Menu_Item::test_shortcut</a>()<span class="keyword"> const </span>{
<a name="l01025"></a>01025   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* m = <a class="code" href="structFl__Menu__Item.html#a1ee3f91630cfcceeef893fe1bfe2fa51">first</a>();
<a name="l01026"></a>01026   <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* ret = 0;
<a name="l01027"></a>01027   <span class="keywordflow">if</span> (m) <span class="keywordflow">for</span> (; m-&gt;<a class="code" href="structFl__Menu__Item.html#a0b46c8823d3d47b430b9ed58c5d57b44" title="menu item text, returned by label()">text</a>; m = m-&gt;<a class="code" href="structFl__Menu__Item.html#ae404ca8174809fb9808e1e77652b482c">next</a>()) {
<a name="l01028"></a>01028     <span class="keywordflow">if</span> (m-&gt;<a class="code" href="structFl__Menu__Item.html#afa77fed0a8d3c822610f7585a9efe22b">activevisible</a>()) {
<a name="l01029"></a>01029       <span class="comment">// return immediately any match of an item in top level menu:</span>
<a name="l01030"></a>01030       <span class="keywordflow">if</span> (<a class="code" href="group__fl__events.html#gab8b767183ac691d4249f599b94dafe78">Fl::test_shortcut</a>(m-&gt;<a class="code" href="structFl__Menu__Item.html#a996db6347b53fc0ea8ab6ae763a44a2c" title="menu item shortcut">shortcut_</a>)) <span class="keywordflow">return</span> m;
<a name="l01031"></a>01031       <span class="comment">// if (Fl_Widget::test_shortcut(m-&gt;text)) return m;</span>
<a name="l01032"></a>01032       <span class="comment">// only return matches from lower menu if nothing found in top menu:</span>
<a name="l01033"></a>01033       <span class="keywordflow">if</span> (!ret &amp;&amp; m-&gt;<a class="code" href="structFl__Menu__Item.html#af47e96f964e91776f8be4dcbf1608f6f">submenu</a>()) {
<a name="l01034"></a>01034         <span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>* s =
<a name="l01035"></a>01035           (m-&gt;<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a>&amp;<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>) ? m+1:(<span class="keyword">const</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>*)m-&gt;<a class="code" href="structFl__Menu__Item.html#aa4cb1e7f8eaa56b2535218ecde9c1d37" title="menu item user_data for the menu&amp;#39;s callback">user_data_</a>;
<a name="l01036"></a>01036         ret = s-&gt;<a class="code" href="structFl__Menu__Item.html#aaf0b521b5b596e2cfc23cfa3792e0f8b">test_shortcut</a>();
<a name="l01037"></a>01037       }
<a name="l01038"></a>01038     }
<a name="l01039"></a>01039   }
<a name="l01040"></a>01040   <span class="keywordflow">return</span> ret;
<a name="l01041"></a>01041 }
<a name="l01042"></a>01042 
<a name="l01043"></a>01043 <span class="comment">//</span>
<a name="l01044"></a>01044 <span class="comment">// End of &quot;$Id: Fl_Menu.cxx 8076 2010-12-20 13:59:09Z matt $&quot;.</span>
<a name="l01045"></a>01045 <span class="comment">//</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="Fl__Menu_8cxx.html">Fl_Menu.cxx</a>      </li>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="#" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3</small></address>
</body>

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/Fl__Menu_8cxx_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:41:41 GMT -->
</html>
