<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/group__fl__del__widget.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:23:55 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SfR Fresh Dox - fltk: Safe widget deletion support functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fltk&#160;<span id="projectnumber">1.3.0rc3</span></div>
   <div id="projectbrief">About: <A HREF= http://www.fltk.org/>FLTK</A> (Fast Light Tool Kit) is a cross-platform C++ GUI toolkit for UNIX/Linux (X11), Microsoft Windows, and MacOS X. Release candidate.<BR><IMG SRC="../warix/forest1.gif" ALT="">&nbsp;&nbsp;<A HREF="http://www.sfr-fresh.com/" TITLE="SfR Fresh Home">SfR Fresh</A> <A HREF="http://www.sfr-fresh.com/warix/features.html#doxygen" TITLE="SfR Fresh Doxygen Support Info">Dox</A>: <A HREF="../fresh/unix/misc/fltk-1.3.0rc3-source.tar.gz/index.html" TITLE="SfR Fresh: fltk-1.3.0rc3-source.tar.gz Contents &amp; Download Page">fltk-1.3.0rc3-source.tar.gz</A> ("inofficial" and yet experimental doxygen-generated source code documentation)&nbsp;&nbsp;<IMG SRC="../warix/forest2.gif" ALT=""><P></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index-2.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group__fl__del__widget.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Safe widget deletion support functions</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fl__del__widget.html#ga609413ac47ba433d1e7da8678a27164f">Fl::delete_widget</a> (<a class="el" href="classFl__Widget.html">Fl_Widget</a> *<a class="el" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fl__del__widget.html#ga838010444986ae57301d6e8289d2dfbb">Fl::do_widget_deletion</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fl__del__widget.html#ga16ecd6d20b793fd0f3081eaab369caa9">Fl::watch_widget_pointer</a> (<a class="el" href="classFl__Widget.html">Fl_Widget</a> *&amp;<a class="el" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fl__del__widget.html#ga1426329d09de561319d4555018d9d1a2">Fl::release_widget_pointer</a> (<a class="el" href="classFl__Widget.html">Fl_Widget</a> *&amp;<a class="el" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__fl__del__widget.html#gad3cbd31083b47836cbe00ffb7006a4d4">Fl::clear_widget_pointer</a> (<a class="el" href="classFl__Widget.html">Fl_Widget</a> const *<a class="el" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>These functions, declared in &lt;FL/Fl.H&gt;, support deletion of widgets inside callbacks.</p>
<p>Fl::delete_widget() should be called when deleting widgets or complete widget trees (<a class="el" href="classFl__Group.html">Fl_Group</a>, <a class="el" href="classFl__Window.html">Fl_Window</a>, ...) inside callbacks.</p>
<p>The other functions are intended for internal use. The preferred way to use them is by using the helper class <a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a>.</p>
<p>The following is to show how it works ...</p>
<p>There are three groups of related methods:</p>
<ol type="1">
<li>scheduled widget deletion<ul>
<li>Fl::delete_widget() schedules widgets for deletion</li>
<li>Fl::do_widget_deletion() deletes all scheduled widgets</li>
</ul>
</li>
<li>widget watch list ("smart pointers")<ul>
<li>Fl::watch_widget_pointer() adds a widget pointer to the watch list</li>
<li>Fl::release_widget_pointer() removes a widget pointer from the watch list</li>
<li>Fl::clear_widget_pointer() clears a widget pointer <em>in</em> the watch list</li>
</ul>
</li>
<li>the class <a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a>:<ul>
<li>the constructor calls Fl::watch_widget_pointer()</li>
<li>the destructor calls Fl::release_widget_pointer()</li>
<li>the access methods can be used to test, if a widget has been deleted <dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a>. </dd></dl>
</li>
</ul>
</li>
</ol>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gad3cbd31083b47836cbe00ffb7006a4d4"></a><!-- doxytag: member="Fl::clear_widget_pointer" ref="gad3cbd31083b47836cbe00ffb7006a4d4" args="(Fl_Widget const *w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fl::clear_widget_pointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFl__Widget.html">Fl_Widget</a> const *&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Clears a widget pointer <em>in</em> the watch list.</p>
<p>This is called when a widget is destroyed (by its destructor). You should never call this directly.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Internal use only !</dd></dl>
<p>This method searches the widget watch list for pointers to the widget and clears each pointer that points to it. Widget pointers can be added to the widget watch list by calling Fl::watch_widget_pointer() or by using the helper class <a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a> (recommended).</p>
<dl class="see"><dt><b>See also:</b></dt><dd>Fl::watch_widget_pointer() </dd>
<dd>
class <a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a> </dd></dl>

<p>Definition at line <a class="el" href="Fl_8cxx_source.html#l01739">1739</a> of file <a class="el" href="Fl_8cxx_source.html">Fl.cxx</a>.</p>

<p>References <a class="el" href="png_8h_source.html#l02850">i</a>.</p>

<p>Referenced by <a class="el" href="Fl__Widget_8cxx_source.html#l00168">Fl_Widget::~Fl_Widget()</a>.</p>

</div>
</div>
<a class="anchor" id="ga609413ac47ba433d1e7da8678a27164f"></a><!-- doxytag: member="Fl::delete_widget" ref="ga609413ac47ba433d1e7da8678a27164f" args="(Fl_Widget *w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fl::delete_widget </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFl__Widget.html">Fl_Widget</a> *&#160;</td>
          <td class="paramname"><em>wi</em></td><td>)</td>
          <td><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Schedules a widget for deletion at the next call to the event loop. Use this method to delete a widget inside a callback function.</p>
<p>To avoid early deletion of widgets, this function should be called toward the end of a callback and only after any call to the event loop (<a class="el" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait()</a>, <a class="el" href="classFl.html#a08d29d807ea3874b8bb16f7457f64bdc">Fl::flush()</a>, <a class="el" href="classFl.html#a1dbb83f1d52001c152ccf8415e3ee6f0">Fl::check()</a>, <a class="el" href="fl__ask_8H.html#a55f3def771c667e8c8f05c617bc410a2">fl_ask()</a>, etc.).</p>
<p>When deleting groups or windows, you must only delete the group or window widget and not the individual child widgets.</p>
<dl class="since"><dt><b>Since:</b></dt><dd>FLTK 1.3 it is not necessary to remove widgets from their parent groups or windows before calling this, because it will be done in the widget's destructor, but it is not a failure to do this nevertheless.</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>In FLTK 1.1 you <b>must</b> remove widgets from their parent group (or window) before deleting them.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="classFl__Widget.html#aca0164a60a96b07007cc1f78bd6d2140">Fl_Widget::~Fl_Widget()</a> </dd></dl>

<p>Definition at line <a class="el" href="Fl_8cxx_source.html#l01582">1582</a> of file <a class="el" href="Fl_8cxx_source.html">Fl.cxx</a>.</p>

<p>References <a class="el" href="Fl_8cxx_source.html#l01559">alloc_dwidgets</a>.</p>

<p>Referenced by <a class="el" href="Fl__Widget__Type_8cxx_source.html#l01790">live_mode_cb()</a>.</p>

</div>
</div>
<a class="anchor" id="ga838010444986ae57301d6e8289d2dfbb"></a><!-- doxytag: member="Fl::do_widget_deletion" ref="ga838010444986ae57301d6e8289d2dfbb" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fl::do_widget_deletion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deletes widgets previously scheduled for deletion.</p>
<p>This is for internal use only. You should never call this directly.</p>
<p>Fl::do_widget_deletion() is called from the FLTK event loop or whenever you call <a class="el" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait()</a>. The previously scheduled widgets are deleted in the same order they were scheduled by calling Fl::delete_widget().</p>
<dl class="see"><dt><b>See also:</b></dt><dd>Fl::delete_widget(Fl_Widget *wi) </dd></dl>

<p>Definition at line <a class="el" href="Fl_8cxx_source.html#l01613">1613</a> of file <a class="el" href="Fl_8cxx_source.html">Fl.cxx</a>.</p>

<p>References <a class="el" href="png_8h_source.html#l02850">i</a>.</p>

<p>Referenced by <a class="el" href="Fl_8cxx_source.html#l00401">Fl::wait()</a>.</p>

</div>
</div>
<a class="anchor" id="ga1426329d09de561319d4555018d9d1a2"></a><!-- doxytag: member="Fl::release_widget_pointer" ref="ga1426329d09de561319d4555018d9d1a2" args="(Fl_Widget *&amp;w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fl::release_widget_pointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFl__Widget.html">Fl_Widget</a> *&amp;&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Releases a widget pointer from the watch list.</p>
<p>This is used to remove a widget pointer that has been added to the watch list with Fl::watch_widget_pointer(), when it is not needed anymore.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Internal use only, please use class <a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a> instead.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd>Fl::watch_widget_pointer() </dd></dl>

<p>Definition at line <a class="el" href="Fl_8cxx_source.html#l01700">1700</a> of file <a class="el" href="Fl_8cxx_source.html">Fl.cxx</a>.</p>

<p>References <a class="el" href="png_8h_source.html#l02850">i</a>, and <a class="el" href="Fl__mac_8cxx_source.html#l01600">Fl::w()</a>.</p>

<p>Referenced by <a class="el" href="Fl_8cxx_source.html#l01849">Fl_Widget_Tracker::~Fl_Widget_Tracker()</a>.</p>

</div>
</div>
<a class="anchor" id="ga16ecd6d20b793fd0f3081eaab369caa9"></a><!-- doxytag: member="Fl::watch_widget_pointer" ref="ga16ecd6d20b793fd0f3081eaab369caa9" args="(Fl_Widget *&amp;w)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Fl::watch_widget_pointer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classFl__Widget.html">Fl_Widget</a> *&amp;&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Adds a widget pointer to the widget watch list.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Internal use only, please use class <a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a> instead.</dd></dl>
<p>This can be used, if it is possible that a widget might be deleted during a callback or similar function. The widget pointer must be added to the watch list before calling the callback. After the callback the widget pointer can be queried, if it is NULL. <em>If</em> it is NULL, then the widget has been deleted during the callback and must not be accessed anymore. If the widget pointer is <em>not</em> NULL, then the widget has not been deleted and can be accessed safely.</p>
<p>After accessing the widget, the widget pointer must be released from the watch list by calling Fl::release_widget_pointer().</p>
<p>Example for a button that is clicked (from its handle() method): </p>
<div class="fragment"><pre class="fragment">    <a class="code" href="classFl__Widget.html">Fl_Widget</a> *wp = <span class="keyword">this</span>;               <span class="comment">// save &#39;this&#39; in a pointer variable</span>
    <a class="code" href="group__fl__del__widget.html#ga16ecd6d20b793fd0f3081eaab369caa9">Fl::watch_widget_pointer</a>(wp);       <span class="comment">// add the pointer to the watch list</span>
    set_changed();                      <span class="comment">// set the changed flag</span>
    do_callback();                      <span class="comment">// call the callback</span>
    <span class="keywordflow">if</span> (!wp) {                          <span class="comment">// the widget has been deleted</span>

      <span class="comment">// DO NOT ACCESS THE DELETED WIDGET !</span>

    } <span class="keywordflow">else</span> {                            <span class="comment">// the widget still exists</span>
      clear_changed();                  <span class="comment">// reset the changed flag</span>
    }

    <a class="code" href="group__fl__del__widget.html#ga1426329d09de561319d4555018d9d1a2">Fl::release_widget_pointer</a>(wp);     <span class="comment">// remove the pointer from the watch list</span>
</pre></div><p>This works, because all widgets call Fl::clear_widget_pointer() in their destructors.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>Fl::release_widget_pointer() </dd>
<dd>
Fl::clear_widget_pointer()</dd></dl>
<p>An easier and more convenient method to control widget deletion during callbacks is to use the class <a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a> with a local (automatic) variable.</p>
<dl class="see"><dt><b>See also:</b></dt><dd>class <a class="el" href="classFl__Widget__Tracker.html">Fl_Widget_Tracker</a> </dd></dl>

<p>Definition at line <a class="el" href="Fl_8cxx_source.html#l01671">1671</a> of file <a class="el" href="Fl_8cxx_source.html">Fl.cxx</a>.</p>

<p>References <a class="el" href="png_8h_source.html#l02850">i</a>, and <a class="el" href="Fl__mac_8cxx_source.html#l01600">Fl::w()</a>.</p>

<p>Referenced by <a class="el" href="Fl_8cxx_source.html#l01840">Fl_Widget_Tracker::Fl_Widget_Tracker()</a>.</p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="#" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3</small></address>
</body>

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/group__fl__del__widget.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:23:55 GMT -->
</html>
