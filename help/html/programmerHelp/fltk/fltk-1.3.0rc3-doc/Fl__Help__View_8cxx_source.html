<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/Fl__Help__View_8cxx_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:41:29 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SfR Fresh Dox - fltk: fltk-1.3.0rc3/src/Fl_Help_View.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fltk&#160;<span id="projectnumber">1.3.0rc3</span></div>
   <div id="projectbrief">About: <A HREF= http://www.fltk.org/>FLTK</A> (Fast Light Tool Kit) is a cross-platform C++ GUI toolkit for UNIX/Linux (X11), Microsoft Windows, and MacOS X. Release candidate.<BR><IMG SRC="../warix/forest1.gif" ALT="">&nbsp;&nbsp;<A HREF="http://www.sfr-fresh.com/" TITLE="SfR Fresh Home">SfR Fresh</A> <A HREF="http://www.sfr-fresh.com/warix/features.html#doxygen" TITLE="SfR Fresh Doxygen Support Info">Dox</A>: <A HREF="../fresh/unix/misc/fltk-1.3.0rc3-source.tar.gz/index.html" TITLE="SfR Fresh: fltk-1.3.0rc3-source.tar.gz Contents &amp; Download Page">fltk-1.3.0rc3-source.tar.gz</A> ("inofficial" and yet experimental doxygen-generated source code documentation)&nbsp;&nbsp;<IMG SRC="../warix/forest2.gif" ALT=""><P></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index-2.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('Fl__Help__View_8cxx.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>Fl_Help_View.cxx</h1>  </div>
</div>
<div class="contents">
<a href="Fl__Help__View_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// &quot;$Id: Fl_Help_View.cxx 8063 2010-12-19 21:20:10Z matt $&quot;</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// Fl_Help_View widget routines.</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// Copyright 1997-2010 by Easy Software Products.</span>
<a name="l00007"></a>00007 <span class="comment">// Image support by Matthias Melcher, Copyright 2000-2009.</span>
<a name="l00008"></a>00008 <span class="comment">//</span>
<a name="l00009"></a>00009 <span class="comment">// This library is free software; you can redistribute it and/or</span>
<a name="l00010"></a>00010 <span class="comment">// modify it under the terms of the GNU Library General Public</span>
<a name="l00011"></a>00011 <span class="comment">// License as published by the Free Software Foundation; either</span>
<a name="l00012"></a>00012 <span class="comment">// version 2 of the License, or (at your option) any later version.</span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">// This library is distributed in the hope that it will be useful,</span>
<a name="l00015"></a>00015 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00016"></a>00016 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00017"></a>00017 <span class="comment">// Library General Public License for more details.</span>
<a name="l00018"></a>00018 <span class="comment">//</span>
<a name="l00019"></a>00019 <span class="comment">// You should have received a copy of the GNU Library General Public</span>
<a name="l00020"></a>00020 <span class="comment">// License along with this library; if not, write to the Free Software</span>
<a name="l00021"></a>00021 <span class="comment">// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307</span>
<a name="l00022"></a>00022 <span class="comment">// USA.</span>
<a name="l00023"></a>00023 <span class="comment">//</span>
<a name="l00024"></a>00024 <span class="comment">// Please report all bugs and problems on the following page:</span>
<a name="l00025"></a>00025 <span class="comment">//</span>
<a name="l00026"></a>00026 <span class="comment">//     http://www.fltk.org/str.php</span>
<a name="l00027"></a>00027 <span class="comment">//</span>
<a name="l00028"></a>00028 <span class="comment">// Contents:</span>
<a name="l00029"></a>00029 <span class="comment">//</span>
<a name="l00030"></a>00030 <span class="comment">//   Fl_Help_View::add_block()       - Add a text block to the list.</span>
<a name="l00031"></a>00031 <span class="comment">//   Fl_Help_View::add_link()        - Add a new link to the list.</span>
<a name="l00032"></a>00032 <span class="comment">//   Fl_Help_View::add_target()      - Add a new target to the list.</span>
<a name="l00033"></a>00033 <span class="comment">//   Fl_Help_View::compare_targets() - Compare two targets.</span>
<a name="l00034"></a>00034 <span class="comment">//   Fl_Help_View::do_align()        - Compute the alignment for a line in</span>
<a name="l00035"></a>00035 <span class="comment">//                                     a block.</span>
<a name="l00036"></a>00036 <span class="comment">//   Fl_Help_View::draw()            - Draw the Fl_Help_View widget.</span>
<a name="l00037"></a>00037 <span class="comment">//   Fl_Help_View::format()          - Format the help text.</span>
<a name="l00038"></a>00038 <span class="comment">//   Fl_Help_View::format_table()    - Format a table...</span>
<a name="l00039"></a>00039 <span class="comment">//   Fl_Help_View::free_data()       - Free memory used for the document.</span>
<a name="l00040"></a>00040 <span class="comment">//   Fl_Help_View::get_align()       - Get an alignment attribute.</span>
<a name="l00041"></a>00041 <span class="comment">//   Fl_Help_View::get_attr()        - Get an attribute value from the string.</span>
<a name="l00042"></a>00042 <span class="comment">//   Fl_Help_View::get_color()       - Get an alignment attribute.</span>
<a name="l00043"></a>00043 <span class="comment">//   Fl_Help_View::handle()          - Handle events in the widget.</span>
<a name="l00044"></a>00044 <span class="comment">//   Fl_Help_View::Fl_Help_View()    - Build a Fl_Help_View widget.</span>
<a name="l00045"></a>00045 <span class="comment">//   Fl_Help_View::~Fl_Help_View()   - Destroy a Fl_Help_View widget.</span>
<a name="l00046"></a>00046 <span class="comment">//   Fl_Help_View::load()            - Load the specified file.</span>
<a name="l00047"></a>00047 <span class="comment">//   Fl_Help_View::resize()          - Resize the help widget.</span>
<a name="l00048"></a>00048 <span class="comment">//   Fl_Help_View::topline()         - Set the top line to the named target.</span>
<a name="l00049"></a>00049 <span class="comment">//   Fl_Help_View::topline()         - Set the top line by number.</span>
<a name="l00050"></a>00050 <span class="comment">//   Fl_Help_View::value()           - Set the help text directly.</span>
<a name="l00051"></a>00051 <span class="comment">//   scrollbar_callback()            - A callback for the scrollbar.</span>
<a name="l00052"></a>00052 <span class="comment">//</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="comment">//</span>
<a name="l00055"></a>00055 <span class="comment">// Include necessary header files...</span>
<a name="l00056"></a>00056 <span class="comment">//</span>
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="preprocessor">#include &lt;FL/Fl_Help_View.H&gt;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#include &lt;FL/Fl_Window.H&gt;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#include &lt;FL/Fl_Pixmap.H&gt;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include &lt;FL/x.H&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &lt;FL/fl_utf8.h&gt;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &lt;FL/filename.H&gt;</span>        <span class="comment">// fl_open_uri()</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &quot;<a class="code" href="flstring_8h.html">flstring.h</a>&quot;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &lt;ctype.h&gt;</span>
<a name="l00068"></a>00068 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00069"></a>00069 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 <span class="preprocessor">#if defined(WIN32) &amp;&amp; ! defined(__CYGWIN__)</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;io.h&gt;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#  include &lt;direct.h&gt;</span>
<a name="l00074"></a>00074 <span class="preprocessor">#else</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;unistd.h&gt;</span>
<a name="l00076"></a>00076 <span class="preprocessor">#endif // WIN32</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="Fl__Help__View_8cxx.html#a2cc6f39fc4594f0e734b2588129fba03">00078</a> <span class="preprocessor">#define MAX_COLUMNS     200</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment">//</span>
<a name="l00082"></a>00082 <span class="comment">// Typedef the C API sort function type the only way I know how...</span>
<a name="l00083"></a>00083 <span class="comment">//</span>
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span>
<a name="l00086"></a>00086 {
<a name="l00087"></a><a class="code" href="Fl__Help__View_8cxx.html#a8b9be097479980ff6481d99f34c666e8">00087</a>   <span class="keyword">typedef</span> <a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a> (*<a class="code" href="Fl__Help__View_8cxx.html#a8b9be097479980ff6481d99f34c666e8">compare_func_t</a>)(<span class="keyword">const</span> <span class="keywordtype">void</span> *, <span class="keyword">const</span> <span class="keywordtype">void</span> *);
<a name="l00088"></a>00088 }
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">//</span>
<a name="l00092"></a>00092 <span class="comment">// Local functions...</span>
<a name="l00093"></a>00093 <span class="comment">//</span>
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="keyword">static</span> <span class="keywordtype">int</span>      quote_char(<span class="keyword">const</span> <span class="keywordtype">char</span> *);
<a name="l00096"></a>00096 <span class="keyword">static</span> <span class="keywordtype">void</span>     scrollbar_callback(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *s, <span class="keywordtype">void</span> *);
<a name="l00097"></a>00097 <span class="keyword">static</span> <span class="keywordtype">void</span>     hscrollbar_callback(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *s, <span class="keywordtype">void</span> *);
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="comment">//</span>
<a name="l00100"></a>00100 <span class="comment">// global flag for image loading (see get_image).</span>
<a name="l00101"></a>00101 <span class="comment">//</span>
<a name="l00102"></a>00102 
<a name="l00103"></a>00103 <span class="keyword">static</span> <span class="keywordtype">char</span> initial_load = 0;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="comment">//</span>
<a name="l00106"></a>00106 <span class="comment">// Broken image...</span>
<a name="l00107"></a>00107 <span class="comment">//</span>
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *broken_xpm[] =
<a name="l00110"></a>00110                 {
<a name="l00111"></a>00111                   <span class="stringliteral">&quot;16 24 4 1&quot;</span>,
<a name="l00112"></a>00112                   <span class="stringliteral">&quot;@ c #000000&quot;</span>,
<a name="l00113"></a>00113                   <span class="stringliteral">&quot;  c #ffffff&quot;</span>,
<a name="l00114"></a>00114                   <span class="stringliteral">&quot;+ c none&quot;</span>,
<a name="l00115"></a>00115                   <span class="stringliteral">&quot;x c #ff0000&quot;</span>,
<a name="l00116"></a>00116                   <span class="comment">// pixels</span>
<a name="l00117"></a>00117                   <span class="stringliteral">&quot;@@@@@@@+++++++++&quot;</span>,
<a name="l00118"></a>00118                   <span class="stringliteral">&quot;@    @++++++++++&quot;</span>,
<a name="l00119"></a>00119                   <span class="stringliteral">&quot;@   @+++++++++++&quot;</span>,
<a name="l00120"></a>00120                   <span class="stringliteral">&quot;@   @++@++++++++&quot;</span>,
<a name="l00121"></a>00121                   <span class="stringliteral">&quot;@    @@+++++++++&quot;</span>,
<a name="l00122"></a>00122                   <span class="stringliteral">&quot;@     @+++@+++++&quot;</span>,
<a name="l00123"></a>00123                   <span class="stringliteral">&quot;@     @++@@++++@&quot;</span>,
<a name="l00124"></a>00124                   <span class="stringliteral">&quot;@ xxx  @@  @++@@&quot;</span>,
<a name="l00125"></a>00125                   <span class="stringliteral">&quot;@  xxx    xx@@ @&quot;</span>,
<a name="l00126"></a>00126                   <span class="stringliteral">&quot;@   xxx  xxx   @&quot;</span>,
<a name="l00127"></a>00127                   <span class="stringliteral">&quot;@    xxxxxx    @&quot;</span>,
<a name="l00128"></a>00128                   <span class="stringliteral">&quot;@     xxxx     @&quot;</span>,
<a name="l00129"></a>00129                   <span class="stringliteral">&quot;@    xxxxxx    @&quot;</span>,
<a name="l00130"></a>00130                   <span class="stringliteral">&quot;@   xxx  xxx   @&quot;</span>,
<a name="l00131"></a>00131                   <span class="stringliteral">&quot;@  xxx    xxx  @&quot;</span>,
<a name="l00132"></a>00132                   <span class="stringliteral">&quot;@ xxx      xxx @&quot;</span>,
<a name="l00133"></a>00133                   <span class="stringliteral">&quot;@              @&quot;</span>,
<a name="l00134"></a>00134                   <span class="stringliteral">&quot;@              @&quot;</span>,
<a name="l00135"></a>00135                   <span class="stringliteral">&quot;@              @&quot;</span>,
<a name="l00136"></a>00136                   <span class="stringliteral">&quot;@              @&quot;</span>,
<a name="l00137"></a>00137                   <span class="stringliteral">&quot;@              @&quot;</span>,
<a name="l00138"></a>00138                   <span class="stringliteral">&quot;@              @&quot;</span>,
<a name="l00139"></a>00139                   <span class="stringliteral">&quot;@              @&quot;</span>,
<a name="l00140"></a>00140                   <span class="stringliteral">&quot;@@@@@@@@@@@@@@@@&quot;</span>,
<a name="l00141"></a>00141                   <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>
<a name="l00142"></a>00142                 };
<a name="l00143"></a>00143 
<a name="l00144"></a>00144 <span class="keyword">static</span> <a class="code" href="classFl__Pixmap.html">Fl_Pixmap</a> broken_image(broken_xpm);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146 <span class="comment">//</span>
<a name="l00147"></a>00147 <span class="comment">// Simple margin stack for Fl_Help_View::format()...</span>
<a name="l00148"></a>00148 <span class="comment">//</span>
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="structfl__margins.html">00150</a> <span class="keyword">struct </span><a class="code" href="structfl__margins.html">fl_margins</a> {
<a name="l00151"></a><a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">00151</a>   <span class="keywordtype">int</span> <a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a>;
<a name="l00152"></a><a class="code" href="structfl__margins.html#aea4b345f9886c33f9a36161d72eb60de">00152</a>   <span class="keywordtype">int</span> <a class="code" href="structfl__margins.html#aea4b345f9886c33f9a36161d72eb60de">margins_</a>[100];
<a name="l00153"></a>00153 
<a name="l00154"></a><a class="code" href="structfl__margins.html#a8cc9b9b63e54abc279e4bc20ca3e5da1">00154</a>   <a class="code" href="structfl__margins.html#a8cc9b9b63e54abc279e4bc20ca3e5da1">fl_margins</a>() { <a class="code" href="structfl__margins.html#af94a095009598b6585d4e328f371b1a6">clear</a>();  }
<a name="l00155"></a>00155 
<a name="l00156"></a><a class="code" href="structfl__margins.html#af94a095009598b6585d4e328f371b1a6">00156</a>   <span class="keywordtype">int</span> <a class="code" href="structfl__margins.html#af94a095009598b6585d4e328f371b1a6">clear</a>() {
<a name="l00157"></a>00157 <span class="comment">//    puts(&quot;fl_margins::clear()&quot;);</span>
<a name="l00158"></a>00158 
<a name="l00159"></a>00159     <a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a> = 0;
<a name="l00160"></a>00160     <span class="keywordflow">return</span> <a class="code" href="structfl__margins.html#aea4b345f9886c33f9a36161d72eb60de">margins_</a>[0] = 4;
<a name="l00161"></a>00161   }
<a name="l00162"></a>00162 
<a name="l00163"></a><a class="code" href="structfl__margins.html#abd7aefc498760766248e8825dceda5a3">00163</a>   <span class="keywordtype">int</span> <a class="code" href="structfl__margins.html#abd7aefc498760766248e8825dceda5a3">current</a>() { <span class="keywordflow">return</span> <a class="code" href="structfl__margins.html#aea4b345f9886c33f9a36161d72eb60de">margins_</a>[<a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a>]; }
<a name="l00164"></a>00164 
<a name="l00165"></a><a class="code" href="structfl__margins.html#a7872c5a229f50f2e9559852340143070">00165</a>   <span class="keywordtype">int</span> <a class="code" href="structfl__margins.html#a7872c5a229f50f2e9559852340143070">pop</a>() {
<a name="l00166"></a>00166 <span class="comment">//    printf(&quot;fl_margins::pop(): depth_=%d, xx=%d\n&quot;, depth_,</span>
<a name="l00167"></a>00167 <span class="comment">//           depth_ &gt; 0 ? margins_[depth_ - 1] : 4);</span>
<a name="l00168"></a>00168 
<a name="l00169"></a>00169     <span class="keywordflow">if</span> (<a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a> &gt; 0) {
<a name="l00170"></a>00170       <a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a> --;
<a name="l00171"></a>00171       <span class="keywordflow">return</span> <a class="code" href="structfl__margins.html#aea4b345f9886c33f9a36161d72eb60de">margins_</a>[<a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a>];
<a name="l00172"></a>00172     } <span class="keywordflow">else</span> <span class="keywordflow">return</span> 4;
<a name="l00173"></a>00173   }
<a name="l00174"></a>00174 
<a name="l00175"></a><a class="code" href="structfl__margins.html#ab56b4519c0ba5f62ee8370692ddb09eb">00175</a>   <span class="keywordtype">int</span> <a class="code" href="structfl__margins.html#ab56b4519c0ba5f62ee8370692ddb09eb">push</a>(<span class="keywordtype">int</span> <a class="code" href="code_8cxx.html#ae62f5d1501196b7ef3aed9d865196185">indent</a>) {
<a name="l00176"></a>00176     <span class="keywordtype">int</span> xx;
<a name="l00177"></a>00177 
<a name="l00178"></a>00178     xx = <a class="code" href="structfl__margins.html#aea4b345f9886c33f9a36161d72eb60de">margins_</a>[<a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a>] + <a class="code" href="code_8cxx.html#ae62f5d1501196b7ef3aed9d865196185">indent</a>;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180 <span class="comment">//    printf(&quot;fl_margins::push(indent=%d): depth_=%d, xx=%d\n&quot;, indent,</span>
<a name="l00181"></a>00181 <span class="comment">//           depth_ + 1, xx);</span>
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="keywordflow">if</span> (<a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a> &lt; 99) {
<a name="l00184"></a>00184       <a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a> ++;
<a name="l00185"></a>00185       <a class="code" href="structfl__margins.html#aea4b345f9886c33f9a36161d72eb60de">margins_</a>[<a class="code" href="structfl__margins.html#a05544eba0d234bdb50a63c675523be52">depth_</a>] = xx;
<a name="l00186"></a>00186     }
<a name="l00187"></a>00187 
<a name="l00188"></a>00188     <span class="keywordflow">return</span> xx;
<a name="l00189"></a>00189   }
<a name="l00190"></a>00190 };
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 <span class="comment">//</span>
<a name="l00193"></a>00193 <span class="comment">// All the stuff needed to implement text selection in Fl_Help_View</span>
<a name="l00194"></a>00194 <span class="comment">//</span>
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">/* matt:</span>
<a name="l00197"></a>00197 <span class="comment"> * We are trying to keep binary compatibility with previous versions</span>
<a name="l00198"></a>00198 <span class="comment"> * of FLTK. This means that we are limited to adding static variables</span>
<a name="l00199"></a>00199 <span class="comment"> * only to not enlarge the Fl_Help_View class. Lucky for us, only one</span>
<a name="l00200"></a>00200 <span class="comment"> * text can be selected system wide, so we can remember the selection</span>
<a name="l00201"></a>00201 <span class="comment"> * in a single set of variables.</span>
<a name="l00202"></a>00202 <span class="comment"> *</span>
<a name="l00203"></a>00203 <span class="comment"> * Still to do:</span>
<a name="l00204"></a>00204 <span class="comment"> * - &amp;word; style characters mess up our count inside a word boundary</span>
<a name="l00205"></a>00205 <span class="comment"> * - we can only select words, no individual characters</span>
<a name="l00206"></a>00206 <span class="comment"> * - no dragging of the selection into another widget</span>
<a name="l00207"></a>00207 <span class="comment"> * - selection must be cleared if another widget get focus!</span>
<a name="l00208"></a>00208 <span class="comment"> * - write a comment for every new function</span>
<a name="l00209"></a>00209 <span class="comment"> */</span>
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="comment">/*</span>
<a name="l00212"></a>00212 <span class="comment">The following functions are also used to draw stuff and should be replaced with</span>
<a name="l00213"></a>00213 <span class="comment">local copies that are much faster when merely counting:</span>
<a name="l00214"></a>00214 <span class="comment"></span>
<a name="l00215"></a>00215 <span class="comment">fl_color(Fl_Color);</span>
<a name="l00216"></a>00216 <span class="comment">fl_rectf(int, int, int, int);</span>
<a name="l00217"></a>00217 <span class="comment">fl_push_clip(int, int, int, int);</span>
<a name="l00218"></a>00218 <span class="comment">fl_xyline(int, int, int);</span>
<a name="l00219"></a>00219 <span class="comment">fl_rect()</span>
<a name="l00220"></a>00220 <span class="comment">fl_line()</span>
<a name="l00221"></a>00221 <span class="comment">img-&gt;draw()</span>
<a name="l00222"></a>00222 <span class="comment">*/</span>
<a name="l00223"></a>00223 
<a name="l00224"></a>00224 <span class="comment">// We don&#39;t put the offscreen buffer in the help view class because</span>
<a name="l00225"></a>00225 <span class="comment">// we&#39;d need to include x.H in the header...</span>
<a name="l00226"></a>00226 <span class="keyword">static</span> <a class="code" href="mac_8H.html#a73ca2fde79c397d91d1147fde9cccc39">Fl_Offscreen</a> fl_help_view_buffer;
<a name="l00227"></a>00227 <span class="keywordtype">int</span> Fl_Help_View::selection_first = 0;
<a name="l00228"></a>00228 <span class="keywordtype">int</span> Fl_Help_View::selection_last = 0;
<a name="l00229"></a>00229 <span class="keywordtype">int</span> Fl_Help_View::selection_push_first = 0;
<a name="l00230"></a>00230 <span class="keywordtype">int</span> Fl_Help_View::selection_push_last = 0;
<a name="l00231"></a>00231 <span class="keywordtype">int</span> Fl_Help_View::selection_drag_first = 0;
<a name="l00232"></a>00232 <span class="keywordtype">int</span> Fl_Help_View::selection_drag_last = 0;
<a name="l00233"></a>00233 <span class="keywordtype">int</span> Fl_Help_View::selected = 0;
<a name="l00234"></a>00234 <span class="keywordtype">int</span> Fl_Help_View::draw_mode = 0;
<a name="l00235"></a>00235 <span class="keywordtype">int</span> Fl_Help_View::mouse_x = 0;
<a name="l00236"></a>00236 <span class="keywordtype">int</span> Fl_Help_View::mouse_y = 0;
<a name="l00237"></a>00237 <span class="keywordtype">int</span> Fl_Help_View::current_pos = 0;
<a name="l00238"></a>00238 <a class="code" href="classFl__Help__View.html">Fl_Help_View</a> *Fl_Help_View::current_view = 0L;
<a name="l00239"></a>00239 <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a> Fl_Help_View::hv_selection_color;
<a name="l00240"></a>00240 <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a> Fl_Help_View::hv_selection_text_color;
<a name="l00241"></a>00241 
<a name="l00242"></a>00242 <span class="comment">/*</span>
<a name="l00243"></a>00243 <span class="comment"> * Limitation: if a word contains &amp;code; notations, we will calculate a wrong length.</span>
<a name="l00244"></a>00244 <span class="comment"> *</span>
<a name="l00245"></a>00245 <span class="comment"> * This function must be optimized for speed!</span>
<a name="l00246"></a>00246 <span class="comment"> */</span>
<a name="l00247"></a>00247 <span class="keywordtype">void</span> Fl_Help_View::hv_draw(<span class="keyword">const</span> <span class="keywordtype">char</span> *t, <span class="keywordtype">int</span> <a class="code" href="test_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <span class="keywordtype">int</span> <a class="code" href="test_8c.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a>)
<a name="l00248"></a>00248 {
<a name="l00249"></a>00249   <span class="keywordflow">if</span> (selected &amp;&amp; current_view==<span class="keyword">this</span> &amp;&amp; current_pos&lt;selection_last &amp;&amp; current_pos&gt;=selection_first) {
<a name="l00250"></a>00250     <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a> c = <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>();
<a name="l00251"></a>00251     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(hv_selection_color);
<a name="l00252"></a>00252     <span class="keywordtype">int</span> <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a> = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(t);
<a name="l00253"></a>00253     <span class="keywordflow">if</span> (current_pos+(<span class="keywordtype">int</span>)strlen(t)&lt;selection_last) 
<a name="l00254"></a>00254       w += (<span class="keywordtype">int</span>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l00255"></a>00255     <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x, y+<a class="code" href="group__fl__attributes.html#gaaaa4616966cb9b014a07764bcff14476">fl_descent</a>()-<a class="code" href="group__fl__attributes.html#ga1c7f56648cfc21431f30b1fa0f2d22ff">fl_height</a>(), w, <a class="code" href="group__fl__attributes.html#ga1c7f56648cfc21431f30b1fa0f2d22ff">fl_height</a>());
<a name="l00256"></a>00256     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(hv_selection_text_color);
<a name="l00257"></a>00257     <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(t, x, y);
<a name="l00258"></a>00258     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(c);
<a name="l00259"></a>00259   } <span class="keywordflow">else</span> {
<a name="l00260"></a>00260     <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(t, x, y);
<a name="l00261"></a>00261   }
<a name="l00262"></a>00262   <span class="keywordflow">if</span> (draw_mode) {
<a name="l00263"></a>00263     <span class="keywordtype">int</span> w = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(t);
<a name="l00264"></a>00264     <span class="keywordflow">if</span> (mouse_x&gt;=x &amp;&amp; mouse_x&lt;x+w) {
<a name="l00265"></a>00265       <span class="keywordflow">if</span> (mouse_y&gt;=y-<a class="code" href="group__fl__attributes.html#ga1c7f56648cfc21431f30b1fa0f2d22ff">fl_height</a>()+<a class="code" href="group__fl__attributes.html#gaaaa4616966cb9b014a07764bcff14476">fl_descent</a>()&amp;&amp;mouse_y&lt;=y+<a class="code" href="group__fl__attributes.html#gaaaa4616966cb9b014a07764bcff14476">fl_descent</a>()) {
<a name="l00266"></a>00266         <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#ac406db58651c10e8f67ed432c66db0d6">f</a> = current_pos;
<a name="l00267"></a>00267         <span class="keywordtype">int</span> l = f+strlen(t); <span class="comment">// use &#39;quote_char&#39; to calculate the true length of the HTML string</span>
<a name="l00268"></a>00268         <span class="keywordflow">if</span> (draw_mode==1) {
<a name="l00269"></a>00269           selection_push_first = <a class="code" href="fl__boxtype_8cxx.html#ac406db58651c10e8f67ed432c66db0d6">f</a>;
<a name="l00270"></a>00270           selection_push_last = l;
<a name="l00271"></a>00271         } <span class="keywordflow">else</span> {
<a name="l00272"></a>00272           selection_drag_first = <a class="code" href="fl__boxtype_8cxx.html#ac406db58651c10e8f67ed432c66db0d6">f</a>;
<a name="l00273"></a>00273           selection_drag_last = l;
<a name="l00274"></a>00274         }
<a name="l00275"></a>00275       }
<a name="l00276"></a>00276     }
<a name="l00277"></a>00277   }
<a name="l00278"></a>00278 }
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 
<a name="l00282"></a>00282 <a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a> *                                 <span class="comment">// O - Pointer to new block</span>
<a name="l00283"></a>00283 Fl_Help_View::add_block(<span class="keyword">const</span> <span class="keywordtype">char</span>   *s,        <span class="comment">// I - Pointer to start of block text</span>
<a name="l00284"></a>00284                         <span class="keywordtype">int</span>           xx,       <span class="comment">// I - X position of block</span>
<a name="l00285"></a>00285                         <span class="keywordtype">int</span>           yy,       <span class="comment">// I - Y position of block</span>
<a name="l00286"></a>00286                         <span class="keywordtype">int</span>           ww,       <span class="comment">// I - Right margin of block</span>
<a name="l00287"></a>00287                         <span class="keywordtype">int</span>           hh,       <span class="comment">// I - Height of block</span>
<a name="l00288"></a>00288                         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> border)   <span class="comment">// I - Draw border?</span>
<a name="l00289"></a>00289 {
<a name="l00290"></a>00290   <a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a> *temp;                          <span class="comment">// New block</span>
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 <span class="comment">//  printf(&quot;add_block(s = %p, xx = %d, yy = %d, ww = %d, hh = %d, border = %d)\n&quot;,</span>
<a name="l00294"></a>00294 <span class="comment">//         s, xx, yy, ww, hh, border);</span>
<a name="l00295"></a>00295 
<a name="l00296"></a>00296   <span class="keywordflow">if</span> (nblocks_ &gt;= ablocks_)
<a name="l00297"></a>00297   {
<a name="l00298"></a>00298     ablocks_ += 16;
<a name="l00299"></a>00299 
<a name="l00300"></a>00300     <span class="keywordflow">if</span> (ablocks_ == 16)
<a name="l00301"></a>00301       blocks_ = (<a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a>) * ablocks_);
<a name="l00302"></a>00302     <span class="keywordflow">else</span>
<a name="l00303"></a>00303       blocks_ = (<a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a> *)realloc(blocks_, <span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a>) * ablocks_);
<a name="l00304"></a>00304   }
<a name="l00305"></a>00305 
<a name="l00306"></a>00306   temp = blocks_ + nblocks_;
<a name="l00307"></a>00307   memset(temp, 0, <span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a>));
<a name="l00308"></a>00308   temp-&gt;<a class="code" href="structFl__Help__Block.html#a23f1387b478bdff467b4ca9e401d816d">start</a>   = s;
<a name="l00309"></a>00309   temp-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a>     = s;
<a name="l00310"></a>00310   temp-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>       = xx;
<a name="l00311"></a>00311   temp-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a>       = yy;
<a name="l00312"></a>00312   temp-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>       = ww;
<a name="l00313"></a>00313   temp-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>       = hh;
<a name="l00314"></a>00314   temp-&gt;<a class="code" href="structFl__Help__Block.html#a48c67cf01a7005eddd309e9072996f31">border</a>  = border;
<a name="l00315"></a>00315   temp-&gt;<a class="code" href="structFl__Help__Block.html#a484152cb6382fbf499917ca3cc9a4243">bgcolor</a> = bgcolor_;
<a name="l00316"></a>00316   nblocks_ ++;
<a name="l00317"></a>00317 
<a name="l00318"></a>00318   <span class="keywordflow">return</span> (temp);
<a name="l00319"></a>00319 }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 
<a name="l00323"></a>00323 <span class="keywordtype">void</span> Fl_Help_View::add_link(<span class="keyword">const</span> <span class="keywordtype">char</span> *n,      <span class="comment">// I - Name of link</span>
<a name="l00324"></a>00324                       <span class="keywordtype">int</span>        xx,    <span class="comment">// I - X position of link</span>
<a name="l00325"></a>00325                       <span class="keywordtype">int</span>        yy,    <span class="comment">// I - Y position of link</span>
<a name="l00326"></a>00326                       <span class="keywordtype">int</span>        ww,    <span class="comment">// I - Width of link text</span>
<a name="l00327"></a>00327                       <span class="keywordtype">int</span>        hh)    <span class="comment">// I - Height of link text</span>
<a name="l00328"></a>00328 {
<a name="l00329"></a>00329   <a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a>  *temp;                  <span class="comment">// New link</span>
<a name="l00330"></a>00330   <span class="keywordtype">char</span>          *target;                <span class="comment">// Pointer to target name</span>
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   <span class="keywordflow">if</span> (nlinks_ &gt;= alinks_)
<a name="l00334"></a>00334   {
<a name="l00335"></a>00335     alinks_ += 16;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337     <span class="keywordflow">if</span> (alinks_ == 16)
<a name="l00338"></a>00338       links_ = (<a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a>) * alinks_);
<a name="l00339"></a>00339     <span class="keywordflow">else</span>
<a name="l00340"></a>00340       links_ = (<a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a> *)realloc(links_, <span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a>) * alinks_);
<a name="l00341"></a>00341   }
<a name="l00342"></a>00342 
<a name="l00343"></a>00343   temp = links_ + nlinks_;
<a name="l00344"></a>00344 
<a name="l00345"></a>00345   temp-&gt;<a class="code" href="structFl__Help__Link.html#ae4779c7f0291c60fdeb00eb088133fe2" title="X offset of link text.">x</a>       = xx;
<a name="l00346"></a>00346   temp-&gt;<a class="code" href="structFl__Help__Link.html#ad77f7b9105f689fe2fb5847d5b7e8ae5" title="Y offset of link text.">y</a>       = yy;
<a name="l00347"></a>00347   temp-&gt;<a class="code" href="structFl__Help__Link.html#ab9e2ffc56e2357b281229a4e93828339" title="Width of link text.">w</a>       = xx + ww;
<a name="l00348"></a>00348   temp-&gt;<a class="code" href="structFl__Help__Link.html#ab162e790bea66ffc898f000fdc1e20d2" title="Height of link text.">h</a>       = yy + hh;
<a name="l00349"></a>00349 
<a name="l00350"></a>00350   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(temp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>, n, <span class="keyword">sizeof</span>(temp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>));
<a name="l00351"></a>00351 
<a name="l00352"></a>00352   <span class="keywordflow">if</span> ((target = strrchr(temp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>, <span class="charliteral">&#39;#&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00353"></a>00353   {
<a name="l00354"></a>00354     *target++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00355"></a>00355     <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(temp-&gt;<a class="code" href="structFl__Help__Link.html#a0ccda15c03d1015cb2846c66d65213c8" title="Link target (blank if none)">name</a>, target, <span class="keyword">sizeof</span>(temp-&gt;<a class="code" href="structFl__Help__Link.html#a0ccda15c03d1015cb2846c66d65213c8" title="Link target (blank if none)">name</a>));
<a name="l00356"></a>00356   }
<a name="l00357"></a>00357   <span class="keywordflow">else</span>
<a name="l00358"></a>00358     temp-&gt;<a class="code" href="structFl__Help__Link.html#a0ccda15c03d1015cb2846c66d65213c8" title="Link target (blank if none)">name</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00359"></a>00359 
<a name="l00360"></a>00360   nlinks_ ++;
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 
<a name="l00365"></a>00365 <span class="keywordtype">void</span> Fl_Help_View::add_target(<span class="keyword">const</span> <span class="keywordtype">char</span> *n,    <span class="comment">// I - Name of target</span>
<a name="l00366"></a>00366                               <span class="keywordtype">int</span>        yy)    <span class="comment">// I - Y position of target</span>
<a name="l00367"></a>00367 {
<a name="l00368"></a>00368   <a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a>        *temp;                  <span class="comment">// New target</span>
<a name="l00369"></a>00369 
<a name="l00370"></a>00370 
<a name="l00371"></a>00371   <span class="keywordflow">if</span> (ntargets_ &gt;= atargets_)
<a name="l00372"></a>00372   {
<a name="l00373"></a>00373     atargets_ += 16;
<a name="l00374"></a>00374 
<a name="l00375"></a>00375     <span class="keywordflow">if</span> (atargets_ == 16)
<a name="l00376"></a>00376       targets_ = (<a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a> *)malloc(<span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a>) * atargets_);
<a name="l00377"></a>00377     <span class="keywordflow">else</span>
<a name="l00378"></a>00378       targets_ = (<a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a> *)realloc(targets_, <span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a>) * atargets_);
<a name="l00379"></a>00379   }
<a name="l00380"></a>00380 
<a name="l00381"></a>00381   temp = targets_ + ntargets_;
<a name="l00382"></a>00382 
<a name="l00383"></a>00383   temp-&gt;<a class="code" href="structFl__Help__Target.html#af7bb97b0dfc3e302d1a4afa7408d0d99" title="Y offset of target.">y</a> = yy;
<a name="l00384"></a>00384   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(temp-&gt;<a class="code" href="structFl__Help__Target.html#af278961a4d3d04fab6e52c2ea623bd1e" title="Target name.">name</a>, n, <span class="keyword">sizeof</span>(temp-&gt;<a class="code" href="structFl__Help__Target.html#af278961a4d3d04fab6e52c2ea623bd1e" title="Target name.">name</a>));
<a name="l00385"></a>00385 
<a name="l00386"></a>00386   ntargets_ ++;
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 
<a name="l00390"></a>00390 <span class="keywordtype">int</span>                                                     <span class="comment">// O - Result of comparison</span>
<a name="l00391"></a>00391 Fl_Help_View::compare_targets(<span class="keyword">const</span> <a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a> *t0, <span class="comment">// I - First target</span>
<a name="l00392"></a>00392                              <span class="keyword">const</span> <a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a> *t1)  <span class="comment">// I - Second target</span>
<a name="l00393"></a>00393 {
<a name="l00394"></a>00394   <span class="keywordflow">return</span> (strcasecmp(t0-&gt;<a class="code" href="structFl__Help__Target.html#af278961a4d3d04fab6e52c2ea623bd1e" title="Target name.">name</a>, t1-&gt;<a class="code" href="structFl__Help__Target.html#af278961a4d3d04fab6e52c2ea623bd1e" title="Target name.">name</a>));
<a name="l00395"></a>00395 }
<a name="l00396"></a>00396 
<a name="l00398"></a>00398 <span class="keywordtype">int</span>                                             <span class="comment">// O - New line</span>
<a name="l00399"></a>00399 Fl_Help_View::do_align(<a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a> *block,    <span class="comment">// I - Block to add to</span>
<a name="l00400"></a>00400                       <span class="keywordtype">int</span>          line,        <span class="comment">// I - Current line</span>
<a name="l00401"></a>00401                       <span class="keywordtype">int</span>          xx,          <span class="comment">// I - Current X position</span>
<a name="l00402"></a>00402                       <span class="keywordtype">int</span>          a,           <span class="comment">// I - Current alignment</span>
<a name="l00403"></a>00403                       <span class="keywordtype">int</span>          &amp;l)          <span class="comment">// IO - Starting link</span>
<a name="l00404"></a>00404 {
<a name="l00405"></a>00405   <span class="keywordtype">int</span>   offset;                                 <span class="comment">// Alignment offset</span>
<a name="l00406"></a>00406 
<a name="l00407"></a>00407 
<a name="l00408"></a>00408   <span class="keywordflow">switch</span> (a)
<a name="l00409"></a>00409   {
<a name="l00410"></a>00410     <span class="keywordflow">case</span> RIGHT :        <span class="comment">// Right align</span>
<a name="l00411"></a>00411         offset = block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a> - xx;
<a name="l00412"></a>00412         <span class="keywordflow">break</span>;
<a name="l00413"></a>00413     <span class="keywordflow">case</span> CENTER :       <span class="comment">// Center</span>
<a name="l00414"></a>00414         offset = (block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a> - xx) / 2;
<a name="l00415"></a>00415         <span class="keywordflow">break</span>;
<a name="l00416"></a>00416     <span class="keywordflow">default</span> :           <span class="comment">// Left align</span>
<a name="l00417"></a>00417         offset = 0;
<a name="l00418"></a>00418         <span class="keywordflow">break</span>;
<a name="l00419"></a>00419   }
<a name="l00420"></a>00420 
<a name="l00421"></a>00421   block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line] = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a> + offset;
<a name="l00422"></a>00422 
<a name="l00423"></a>00423   <span class="keywordflow">if</span> (line &lt; 31)
<a name="l00424"></a>00424     line ++;
<a name="l00425"></a>00425 
<a name="l00426"></a>00426   <span class="keywordflow">while</span> (l &lt; nlinks_)
<a name="l00427"></a>00427   {
<a name="l00428"></a>00428     links_[l].<a class="code" href="structFl__Help__Link.html#ae4779c7f0291c60fdeb00eb088133fe2" title="X offset of link text.">x</a> += offset;
<a name="l00429"></a>00429     links_[l].<a class="code" href="structFl__Help__Link.html#ab9e2ffc56e2357b281229a4e93828339" title="Width of link text.">w</a> += offset;
<a name="l00430"></a>00430     l ++;
<a name="l00431"></a>00431   }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433   <span class="keywordflow">return</span> (line);
<a name="l00434"></a>00434 }
<a name="l00435"></a>00435 
<a name="l00437"></a>00437 <span class="keywordtype">void</span>
<a name="l00438"></a>00438 Fl_Help_View::draw()
<a name="l00439"></a>00439 {
<a name="l00440"></a>00440   <span class="keywordtype">int</span>                   <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;              <span class="comment">// Looping var</span>
<a name="l00441"></a>00441   <span class="keyword">const</span> <a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a>   *block;         <span class="comment">// Pointer to current block</span>
<a name="l00442"></a>00442   <span class="keyword">const</span> <span class="keywordtype">char</span>            *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>,           <span class="comment">// Pointer to text in block</span>
<a name="l00443"></a>00443                         *attrs;         <span class="comment">// Pointer to start of element attributes</span>
<a name="l00444"></a>00444   <span class="keywordtype">char</span>                  *s,             <span class="comment">// Pointer into buffer</span>
<a name="l00445"></a>00445                         <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>[1024],      <span class="comment">// Text buffer</span>
<a name="l00446"></a>00446                         attr[1024];     <span class="comment">// Attribute buffer</span>
<a name="l00447"></a>00447   <span class="keywordtype">int</span>                   xx, yy, ww, hh; <span class="comment">// Current positions and sizes</span>
<a name="l00448"></a>00448   <span class="keywordtype">int</span>                   line;           <span class="comment">// Current line</span>
<a name="l00449"></a>00449   <a class="code" href="Enumerations_8H.html#a2ac46d9f082834b969fffe490a03a709">Fl_Font</a>               font;
<a name="l00450"></a>00450   <a class="code" href="Enumerations_8H.html#ad58927f5c691454480f7cd28362502f1">Fl_Fontsize</a>           fsize;          <span class="comment">// Current font and size</span>
<a name="l00451"></a>00451   <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>              fcolor;         <span class="comment">// current font color </span>
<a name="l00452"></a>00452   <span class="keywordtype">int</span>                   head, pre,      <span class="comment">// Flags for text</span>
<a name="l00453"></a>00453                         needspace;      <span class="comment">// Do we need whitespace?</span>
<a name="l00454"></a>00454   <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bc">Fl_Boxtype</a>            <a class="code" href="jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a> = <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() ? <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() : <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca9374077c9b546ed69f6592c246ba80ad" title="see figure 1">FL_DOWN_BOX</a>;
<a name="l00455"></a>00455                                         <span class="comment">// Box to draw...</span>
<a name="l00456"></a>00456   <span class="keywordtype">int</span>                   underline,      <span class="comment">// Underline text?</span>
<a name="l00457"></a>00457                         xtra_ww;        <span class="comment">// Extra width for underlined space between words</span>
<a name="l00458"></a>00458 
<a name="l00459"></a>00459   <span class="comment">// Draw the scrollbar(s) and box first...</span>
<a name="l00460"></a>00460   ww = <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>();
<a name="l00461"></a>00461   hh = <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>();
<a name="l00462"></a>00462   i  = 0;
<a name="l00463"></a>00463 
<a name="l00464"></a>00464   <a class="code" href="classFl__Widget.html#ac55bdb496a01fcbcad924f1cec506798">draw_box</a>(b, <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>(), <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>(), ww, hh, bgcolor_);
<a name="l00465"></a>00465 
<a name="l00466"></a>00466   <span class="keywordflow">if</span> ( hscrollbar_.<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>() || scrollbar_.<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>() ) {
<a name="l00467"></a>00467     <span class="keywordtype">int</span> scrollsize = scrollbar_size_ ? scrollbar_size_ : <a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">Fl::scrollbar_size</a>();
<a name="l00468"></a>00468     <span class="keywordtype">int</span> hor_vis = hscrollbar_.<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>();
<a name="l00469"></a>00469     <span class="keywordtype">int</span> ver_vis = scrollbar_.<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>();
<a name="l00470"></a>00470     <span class="comment">// Scrollbar corner</span>
<a name="l00471"></a>00471     <span class="keywordtype">int</span> scorn_x = <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + ww - (ver_vis?scrollsize:0) - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b) + <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(b);
<a name="l00472"></a>00472     <span class="keywordtype">int</span> scorn_y = <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + hh - (hor_vis?scrollsize:0) - <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b) + <a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(b);
<a name="l00473"></a>00473     <span class="keywordflow">if</span> ( hor_vis ) {
<a name="l00474"></a>00474       <span class="keywordflow">if</span> ( hscrollbar_.<a class="code" href="classFl__Widget.html#aeeabd61e2d10c76cd6600dbbfe951f71">h</a>() != scrollsize ) {            <span class="comment">// scrollsize changed?</span>
<a name="l00475"></a>00475         hscrollbar_.<a class="code" href="classFl__Widget.html#aca98267e7a9b94f699ebd27d9f59e8bb">resize</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>(), scorn_y, scorn_x - <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>(), scrollsize);
<a name="l00476"></a>00476         <a class="code" href="classFl__Group.html#ad6b50dddf8f0914dc6a7b89ab3663930">init_sizes</a>();
<a name="l00477"></a>00477       }
<a name="l00478"></a>00478       <a class="code" href="classFl__Group.html#a787f7703ae29c19e8a160221fe2f8ffd">draw_child</a>(hscrollbar_);
<a name="l00479"></a>00479       hh -= scrollsize;
<a name="l00480"></a>00480     }
<a name="l00481"></a>00481     <span class="keywordflow">if</span> ( ver_vis ) {
<a name="l00482"></a>00482       <span class="keywordflow">if</span> ( scrollbar_.<a class="code" href="classFl__Widget.html#ad59ece778aaf15acc4dd01a8bf5f8012">w</a>() != scrollsize ) {             <span class="comment">// scrollsize changed?</span>
<a name="l00483"></a>00483         scrollbar_.<a class="code" href="classFl__Widget.html#aca98267e7a9b94f699ebd27d9f59e8bb">resize</a>(scorn_x, <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>(), scrollsize, scorn_y - <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());
<a name="l00484"></a>00484         <a class="code" href="classFl__Group.html#ad6b50dddf8f0914dc6a7b89ab3663930">init_sizes</a>();
<a name="l00485"></a>00485       }
<a name="l00486"></a>00486       <a class="code" href="classFl__Group.html#a787f7703ae29c19e8a160221fe2f8ffd">draw_child</a>(scrollbar_);
<a name="l00487"></a>00487       ww -= scrollsize;
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489     <span class="keywordflow">if</span> ( hor_vis &amp;&amp; ver_vis ) {
<a name="l00490"></a>00490       <span class="comment">// Both scrollbars visible? Draw little gray box in corner</span>
<a name="l00491"></a>00491       <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(<a class="code" href="Enumerations_8H.html#aabb3b3628ea5baa2ba176201ed5d2aba">FL_GRAY</a>);
<a name="l00492"></a>00492       <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(scorn_x, scorn_y, scrollsize, scrollsize);
<a name="l00493"></a>00493     }
<a name="l00494"></a>00494   }
<a name="l00495"></a>00495 
<a name="l00496"></a>00496   <span class="keywordflow">if</span> (!value_)
<a name="l00497"></a>00497     <span class="keywordflow">return</span>;
<a name="l00498"></a>00498 
<a name="l00499"></a>00499   <span class="keywordflow">if</span> (current_view == <span class="keyword">this</span> &amp;&amp; selected) {
<a name="l00500"></a>00500     hv_selection_color      = <a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>;
<a name="l00501"></a>00501     hv_selection_text_color = <a class="code" href="group__fl__attributes.html#ga54d75920c0484916cd6b2101937ec5ff">fl_contrast</a>(textcolor_, <a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>);
<a name="l00502"></a>00502   }
<a name="l00503"></a>00503   current_pos = 0;
<a name="l00504"></a>00504 
<a name="l00505"></a>00505   <span class="comment">// Clip the drawing to the inside of the box...</span>
<a name="l00506"></a>00506   <a class="code" href="group__fl__drawings.html#gabe60242ba3b975800717b95cb6bc06d2">fl_push_clip</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(b), <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + <a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(b),
<a name="l00507"></a>00507                ww - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b), hh - <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b));
<a name="l00508"></a>00508   <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(textcolor_);
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   <span class="comment">// Draw all visible blocks...</span>
<a name="l00511"></a>00511   <span class="keywordflow">for</span> (i = 0, block = blocks_; i &lt; nblocks_; i ++, block ++)
<a name="l00512"></a>00512     <span class="keywordflow">if</span> ((block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>) &gt;= topline_ &amp;&amp; block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> &lt; (topline_ + <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>()))
<a name="l00513"></a>00513     {
<a name="l00514"></a>00514       line      = 0;
<a name="l00515"></a>00515       xx        = block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line];
<a name="l00516"></a>00516       yy        = block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> - topline_;
<a name="l00517"></a>00517       hh        = 0;
<a name="l00518"></a>00518       pre       = 0;
<a name="l00519"></a>00519       head      = 0;
<a name="l00520"></a>00520       needspace = 0;
<a name="l00521"></a>00521       underline = 0;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523       initfont(font, fsize, fcolor);
<a name="l00524"></a>00524 
<a name="l00525"></a>00525       <span class="keywordflow">for</span> (ptr = block-&gt;<a class="code" href="structFl__Help__Block.html#a23f1387b478bdff467b4ca9e401d816d">start</a>, s = buf; ptr &lt; block-&gt;<a class="code" href="classFl__Group.html#a029653337efa0cb2ec52852519293ba8">end</a>;)
<a name="l00526"></a>00526       {
<a name="l00527"></a>00527         <span class="keywordflow">if</span> ((*ptr == <span class="charliteral">&#39;&lt;&#39;</span> || isspace((*ptr)&amp;255)) &amp;&amp; s &gt; buf)
<a name="l00528"></a>00528         {
<a name="l00529"></a>00529           <span class="keywordflow">if</span> (!head &amp;&amp; !pre)
<a name="l00530"></a>00530           {
<a name="l00531"></a>00531             <span class="comment">// Check width...</span>
<a name="l00532"></a>00532             *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00533"></a>00533             s  = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l00534"></a>00534             ww = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(buf);
<a name="l00535"></a>00535 
<a name="l00536"></a>00536             <span class="keywordflow">if</span> (needspace &amp;&amp; xx &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>)
<a name="l00537"></a>00537               xx += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l00538"></a>00538 
<a name="l00539"></a>00539             <span class="keywordflow">if</span> ((xx + ww) &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>)
<a name="l00540"></a>00540             {
<a name="l00541"></a>00541               <span class="keywordflow">if</span> (line &lt; 31)
<a name="l00542"></a>00542                 line ++;
<a name="l00543"></a>00543               xx = block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line];
<a name="l00544"></a>00544               yy += hh;
<a name="l00545"></a>00545               hh = 0;
<a name="l00546"></a>00546             }
<a name="l00547"></a>00547 
<a name="l00548"></a>00548             hv_draw(buf, xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());
<a name="l00549"></a>00549             <span class="keywordflow">if</span> (underline) {
<a name="l00550"></a>00550               xtra_ww = isspace((*ptr)&amp;255)?(<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>):0;
<a name="l00551"></a>00551               <a class="code" href="group__fl__drawings.html#gacf46b232b6439424cc7f53656c5c2226">fl_xyline</a>(xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + 1,
<a name="l00552"></a>00552                         xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_ + ww + xtra_ww);
<a name="l00553"></a>00553             }
<a name="l00554"></a>00554             current_pos = ptr-value_;
<a name="l00555"></a>00555 
<a name="l00556"></a>00556             xx += ww;
<a name="l00557"></a>00557             <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l00558"></a>00558               hh = fsize + 2;
<a name="l00559"></a>00559 
<a name="l00560"></a>00560             needspace = 0;
<a name="l00561"></a>00561           }
<a name="l00562"></a>00562           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pre)
<a name="l00563"></a>00563           {
<a name="l00564"></a>00564             <span class="keywordflow">while</span> (isspace((*ptr)&amp;255))
<a name="l00565"></a>00565             {
<a name="l00566"></a>00566               <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;\n&#39;</span>)
<a name="l00567"></a>00567               {
<a name="l00568"></a>00568                 *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00569"></a>00569                 s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l00570"></a>00570 
<a name="l00571"></a>00571                 hv_draw(buf, xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());
<a name="l00572"></a>00572                 <span class="keywordflow">if</span> (underline) <a class="code" href="group__fl__drawings.html#gacf46b232b6439424cc7f53656c5c2226">fl_xyline</a>(xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + 1,
<a name="l00573"></a>00573                                          xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_ +
<a name="l00574"></a>00574                                              (<span class="keywordtype">int</span>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(buf));
<a name="l00575"></a>00575 
<a name="l00576"></a>00576                 current_pos = ptr-value_;
<a name="l00577"></a>00577                 <span class="keywordflow">if</span> (line &lt; 31)
<a name="l00578"></a>00578                   line ++;
<a name="l00579"></a>00579                 xx = block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line];
<a name="l00580"></a>00580                 yy += hh;
<a name="l00581"></a>00581                 hh = fsize + 2;
<a name="l00582"></a>00582               }
<a name="l00583"></a>00583               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;\t&#39;</span>)
<a name="l00584"></a>00584               {
<a name="l00585"></a>00585                 <span class="comment">// Do tabs every 8 columns...</span>
<a name="l00586"></a>00586                 <span class="keywordflow">while</span> (((s - buf) &amp; 7))
<a name="l00587"></a>00587                   *s++ = <span class="charliteral">&#39; &#39;</span>;
<a name="l00588"></a>00588               }
<a name="l00589"></a>00589               <span class="keywordflow">else</span>
<a name="l00590"></a>00590                 *s++ = <span class="charliteral">&#39; &#39;</span>;
<a name="l00591"></a>00591 
<a name="l00592"></a>00592               <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l00593"></a>00593                 hh = fsize + 2;
<a name="l00594"></a>00594 
<a name="l00595"></a>00595               ptr ++;
<a name="l00596"></a>00596             }
<a name="l00597"></a>00597 
<a name="l00598"></a>00598             <span class="keywordflow">if</span> (s &gt; buf)
<a name="l00599"></a>00599             {
<a name="l00600"></a>00600               *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00601"></a>00601               s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603               hv_draw(buf, xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());
<a name="l00604"></a>00604               ww = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(buf);
<a name="l00605"></a>00605               <span class="keywordflow">if</span> (underline) <a class="code" href="group__fl__drawings.html#gacf46b232b6439424cc7f53656c5c2226">fl_xyline</a>(xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + 1,
<a name="l00606"></a>00606                                        xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_ + ww);
<a name="l00607"></a>00607               xx += ww;
<a name="l00608"></a>00608               current_pos = ptr-value_;
<a name="l00609"></a>00609             }
<a name="l00610"></a>00610 
<a name="l00611"></a>00611             needspace = 0;
<a name="l00612"></a>00612           }
<a name="l00613"></a>00613           <span class="keywordflow">else</span>
<a name="l00614"></a>00614           {
<a name="l00615"></a>00615             s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617             <span class="keywordflow">while</span> (isspace((*ptr)&amp;255))
<a name="l00618"></a>00618               ptr ++;
<a name="l00619"></a>00619             current_pos = ptr-value_;
<a name="l00620"></a>00620           }
<a name="l00621"></a>00621         }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623         <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&lt;&#39;</span>)
<a name="l00624"></a>00624         {
<a name="l00625"></a>00625           ptr ++;
<a name="l00626"></a>00626 
<a name="l00627"></a>00627           <span class="keywordflow">if</span> (strncmp(ptr, <span class="stringliteral">&quot;!--&quot;</span>, 3) == 0)
<a name="l00628"></a>00628           {
<a name="l00629"></a>00629             <span class="comment">// Comment...</span>
<a name="l00630"></a>00630             ptr += 3;
<a name="l00631"></a>00631             <span class="keywordflow">if</span> ((ptr = strstr(ptr, <span class="stringliteral">&quot;--&gt;&quot;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00632"></a>00632             {
<a name="l00633"></a>00633               ptr += 3;
<a name="l00634"></a>00634               <span class="keywordflow">continue</span>;
<a name="l00635"></a>00635             }
<a name="l00636"></a>00636             <span class="keywordflow">else</span>
<a name="l00637"></a>00637               <span class="keywordflow">break</span>;
<a name="l00638"></a>00638           }
<a name="l00639"></a>00639 
<a name="l00640"></a>00640           <span class="keywordflow">while</span> (*ptr &amp;&amp; *ptr != <span class="charliteral">&#39;&gt;&#39;</span> &amp;&amp; !isspace((*ptr)&amp;255))
<a name="l00641"></a>00641             <span class="keywordflow">if</span> (s &lt; (buf + <span class="keyword">sizeof</span>(buf) - 1))
<a name="l00642"></a>00642               *s++ = *ptr++;
<a name="l00643"></a>00643             <span class="keywordflow">else</span>
<a name="l00644"></a>00644               ptr ++;
<a name="l00645"></a>00645 
<a name="l00646"></a>00646           *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00647"></a>00647           s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l00648"></a>00648 
<a name="l00649"></a>00649           attrs = <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;
<a name="l00650"></a>00650           <span class="keywordflow">while</span> (*ptr &amp;&amp; *ptr != <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l00651"></a>00651             ptr ++;
<a name="l00652"></a>00652 
<a name="l00653"></a>00653           <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l00654"></a>00654             ptr ++;
<a name="l00655"></a>00655 
<a name="l00656"></a>00656           <span class="comment">// end of command reached, set the supposed start of printed eord here</span>
<a name="l00657"></a>00657           current_pos = ptr-value_;
<a name="l00658"></a>00658           <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;HEAD&quot;</span>) == 0)
<a name="l00659"></a>00659             head = 1;
<a name="l00660"></a>00660           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;BR&quot;</span>) == 0)
<a name="l00661"></a>00661           {
<a name="l00662"></a>00662             <span class="keywordflow">if</span> (line &lt; 31)
<a name="l00663"></a>00663               line ++;
<a name="l00664"></a>00664             xx = block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line];
<a name="l00665"></a>00665             yy += hh;
<a name="l00666"></a>00666             hh = 0;
<a name="l00667"></a>00667           }
<a name="l00668"></a>00668           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;HR&quot;</span>) == 0)
<a name="l00669"></a>00669           {
<a name="l00670"></a>00670             <a class="code" href="group__fl__drawings.html#gaecc374f163a97ef67c4e58be11c47047">fl_line</a>(block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a> + x(), yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>(), block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a> + x(),
<a name="l00671"></a>00671                     yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());
<a name="l00672"></a>00672 
<a name="l00673"></a>00673             <span class="keywordflow">if</span> (line &lt; 31)
<a name="l00674"></a>00674               line ++;
<a name="l00675"></a>00675             xx = block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line];
<a name="l00676"></a>00676             yy += 2 * hh;
<a name="l00677"></a>00677             hh = 0;
<a name="l00678"></a>00678           }
<a name="l00679"></a>00679           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;CENTER&quot;</span>) == 0 ||
<a name="l00680"></a>00680                    strcasecmp(buf, <span class="stringliteral">&quot;P&quot;</span>) == 0 ||
<a name="l00681"></a>00681                    strcasecmp(buf, <span class="stringliteral">&quot;H1&quot;</span>) == 0 ||
<a name="l00682"></a>00682                    strcasecmp(buf, <span class="stringliteral">&quot;H2&quot;</span>) == 0 ||
<a name="l00683"></a>00683                    strcasecmp(buf, <span class="stringliteral">&quot;H3&quot;</span>) == 0 ||
<a name="l00684"></a>00684                    strcasecmp(buf, <span class="stringliteral">&quot;H4&quot;</span>) == 0 ||
<a name="l00685"></a>00685                    strcasecmp(buf, <span class="stringliteral">&quot;H5&quot;</span>) == 0 ||
<a name="l00686"></a>00686                    strcasecmp(buf, <span class="stringliteral">&quot;H6&quot;</span>) == 0 ||
<a name="l00687"></a>00687                    strcasecmp(buf, <span class="stringliteral">&quot;UL&quot;</span>) == 0 ||
<a name="l00688"></a>00688                    strcasecmp(buf, <span class="stringliteral">&quot;OL&quot;</span>) == 0 ||
<a name="l00689"></a>00689                    strcasecmp(buf, <span class="stringliteral">&quot;DL&quot;</span>) == 0 ||
<a name="l00690"></a>00690                    strcasecmp(buf, <span class="stringliteral">&quot;LI&quot;</span>) == 0 ||
<a name="l00691"></a>00691                    strcasecmp(buf, <span class="stringliteral">&quot;DD&quot;</span>) == 0 ||
<a name="l00692"></a>00692                    strcasecmp(buf, <span class="stringliteral">&quot;DT&quot;</span>) == 0 ||
<a name="l00693"></a>00693                    strcasecmp(buf, <span class="stringliteral">&quot;PRE&quot;</span>) == 0)
<a name="l00694"></a>00694           {
<a name="l00695"></a>00695             <span class="keywordflow">if</span> (tolower(buf[0]) == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00696"></a>00696             {
<a name="l00697"></a>00697               font  = <a class="code" href="Enumerations_8H.html#ae52b5d98292bf142ea1c7468d7d732cd" title="Helvetica (or Arial) bold.">FL_HELVETICA_BOLD</a>;
<a name="l00698"></a>00698               fsize = textsize_ + <span class="charliteral">&#39;7&#39;</span> - buf[1];
<a name="l00699"></a>00699             }
<a name="l00700"></a>00700             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;DT&quot;</span>) == 0)
<a name="l00701"></a>00701             {
<a name="l00702"></a>00702               font  = textfont_ | <a class="code" href="Enumerations_8H.html#abdc8e2cce930b923594df50760299776" title="add this to helvetica, courier, or times">FL_ITALIC</a>;
<a name="l00703"></a>00703               fsize = textsize_;
<a name="l00704"></a>00704             }
<a name="l00705"></a>00705             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;PRE&quot;</span>) == 0)
<a name="l00706"></a>00706             {
<a name="l00707"></a>00707               font  = <a class="code" href="Enumerations_8H.html#ae722fe030bd9bcba33f045098295579d" title="Courier normal.">FL_COURIER</a>;
<a name="l00708"></a>00708               fsize = textsize_;
<a name="l00709"></a>00709               pre   = 1;
<a name="l00710"></a>00710             }
<a name="l00711"></a>00711 
<a name="l00712"></a>00712             <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;LI&quot;</span>) == 0)
<a name="l00713"></a>00713             {
<a name="l00714"></a>00714 <span class="comment">//            fl_font(FL_SYMBOL, fsize); // The default SYMBOL font on my XP box is not Unicode...</span>
<a name="l00715"></a>00715               <span class="keywordtype">char</span> buf[8];
<a name="l00716"></a>00716               <span class="keywordtype">wchar_t</span> b[] = {0x2022, 0x0};
<a name="l00717"></a>00717 <span class="comment">//            buf[fl_unicode2utf(b, 1, buf)] = 0;</span>
<a name="l00718"></a>00718               <span class="keywordtype">unsigned</span> dstlen = <a class="code" href="group__fl__unicode.html#ga56a6296024debb49690b81addda7589b">fl_utf8fromwc</a>(buf, 8, b, 1);
<a name="l00719"></a>00719               buf[dstlen] = 0;
<a name="l00720"></a>00720               hv_draw(buf, xx - fsize + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());
<a name="l00721"></a>00721             }
<a name="l00722"></a>00722 
<a name="l00723"></a>00723             pushfont(font, fsize);
<a name="l00724"></a>00724           }
<a name="l00725"></a>00725           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;A&quot;</span>) == 0 &amp;&amp;
<a name="l00726"></a>00726                    get_attr(attrs, <span class="stringliteral">&quot;HREF&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00727"></a>00727           {
<a name="l00728"></a>00728             <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(linkcolor_);
<a name="l00729"></a>00729             underline = 1;
<a name="l00730"></a>00730           }
<a name="l00731"></a>00731           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/A&quot;</span>) == 0)
<a name="l00732"></a>00732           {
<a name="l00733"></a>00733             <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(textcolor_);
<a name="l00734"></a>00734             underline = 0;
<a name="l00735"></a>00735           }
<a name="l00736"></a>00736           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;FONT&quot;</span>) == 0)
<a name="l00737"></a>00737           {
<a name="l00738"></a>00738             <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;COLOR&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00739"></a>00739               textcolor_ = get_color(attr, textcolor_);
<a name="l00740"></a>00740             }
<a name="l00741"></a>00741 
<a name="l00742"></a>00742             <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;FACE&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00743"></a>00743               <span class="keywordflow">if</span> (!strncasecmp(attr, <span class="stringliteral">&quot;helvetica&quot;</span>, 9) ||
<a name="l00744"></a>00744                   !strncasecmp(attr, <span class="stringliteral">&quot;arial&quot;</span>, 5) ||
<a name="l00745"></a>00745                   !strncasecmp(attr, <span class="stringliteral">&quot;sans&quot;</span>, 4)) font = <a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>;
<a name="l00746"></a>00746               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(attr, <span class="stringliteral">&quot;times&quot;</span>, 5) ||
<a name="l00747"></a>00747                        !strncasecmp(attr, <span class="stringliteral">&quot;serif&quot;</span>, 5)) font = <a class="code" href="Enumerations_8H.html#a35fe64b07a0f270411dfbcbcc109033c" title="Times roman.">FL_TIMES</a>;
<a name="l00748"></a>00748               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(attr, <span class="stringliteral">&quot;symbol&quot;</span>, 6)) font = <a class="code" href="Enumerations_8H.html#a2b2df61e619d3e6658b2fbb5cef5dc8e" title="Standard symbol font.">FL_SYMBOL</a>;
<a name="l00749"></a>00749               <span class="keywordflow">else</span> font = <a class="code" href="Enumerations_8H.html#ae722fe030bd9bcba33f045098295579d" title="Courier normal.">FL_COURIER</a>;
<a name="l00750"></a>00750             }
<a name="l00751"></a>00751 
<a name="l00752"></a>00752             <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;SIZE&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00753"></a>00753               <span class="keywordflow">if</span> (isdigit(attr[0] &amp; 255)) {
<a name="l00754"></a>00754                 <span class="comment">// Absolute size</span>
<a name="l00755"></a>00755                 fsize = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)(textsize_ * pow(1.2, atof(attr) - 3.0));
<a name="l00756"></a>00756               } <span class="keywordflow">else</span> {
<a name="l00757"></a>00757                 <span class="comment">// Relative size</span>
<a name="l00758"></a>00758                 fsize = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)(fsize * pow(1.2, atof(attr) - 3.0));
<a name="l00759"></a>00759               }
<a name="l00760"></a>00760             }
<a name="l00761"></a>00761 
<a name="l00762"></a>00762             pushfont(font, fsize);
<a name="l00763"></a>00763           }
<a name="l00764"></a>00764           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/FONT&quot;</span>) == 0)
<a name="l00765"></a>00765           {
<a name="l00766"></a>00766             popfont(font, fsize, textcolor_);
<a name="l00767"></a>00767           }
<a name="l00768"></a>00768           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;U&quot;</span>) == 0)
<a name="l00769"></a>00769             underline = 1;
<a name="l00770"></a>00770           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/U&quot;</span>) == 0)
<a name="l00771"></a>00771             underline = 0;
<a name="l00772"></a>00772           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;B&quot;</span>) == 0 ||
<a name="l00773"></a>00773                    strcasecmp(buf, <span class="stringliteral">&quot;STRONG&quot;</span>) == 0)
<a name="l00774"></a>00774             pushfont(font |= <a class="code" href="Enumerations_8H.html#a5b4c5d04c411d4c086101f5b955c556a" title="add this to helvetica, courier, or times">FL_BOLD</a>, fsize);
<a name="l00775"></a>00775           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TD&quot;</span>) == 0 ||
<a name="l00776"></a>00776                    strcasecmp(buf, <span class="stringliteral">&quot;TH&quot;</span>) == 0)
<a name="l00777"></a>00777           {
<a name="l00778"></a>00778             <span class="keywordtype">int</span> tx, ty, tw, th;
<a name="l00779"></a>00779 
<a name="l00780"></a>00780             <span class="keywordflow">if</span> (tolower(buf[1]) == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00781"></a>00781               pushfont(font |= <a class="code" href="Enumerations_8H.html#a5b4c5d04c411d4c086101f5b955c556a" title="add this to helvetica, courier, or times">FL_BOLD</a>, fsize);
<a name="l00782"></a>00782             <span class="keywordflow">else</span>
<a name="l00783"></a>00783               pushfont(font = textfont_, fsize);
<a name="l00784"></a>00784 
<a name="l00785"></a>00785             tx = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a> - 4 - leftline_;
<a name="l00786"></a>00786             ty = block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> - topline_ - fsize - 3;
<a name="l00787"></a>00787             tw = block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a> - block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a> + 7;
<a name="l00788"></a>00788             th = block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> + fsize - 5;
<a name="l00789"></a>00789 
<a name="l00790"></a>00790             <span class="keywordflow">if</span> (tx &lt; 0)
<a name="l00791"></a>00791             {
<a name="l00792"></a>00792               tw += tx;
<a name="l00793"></a>00793               tx  = 0;
<a name="l00794"></a>00794             }
<a name="l00795"></a>00795 
<a name="l00796"></a>00796             <span class="keywordflow">if</span> (ty &lt; 0)
<a name="l00797"></a>00797             {
<a name="l00798"></a>00798               th += ty;
<a name="l00799"></a>00799               ty  = 0;
<a name="l00800"></a>00800             }
<a name="l00801"></a>00801 
<a name="l00802"></a>00802             tx += <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>();
<a name="l00803"></a>00803             ty += <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>();
<a name="l00804"></a>00804 
<a name="l00805"></a>00805             <span class="keywordflow">if</span> (block-&gt;<a class="code" href="structFl__Help__Block.html#a484152cb6382fbf499917ca3cc9a4243">bgcolor</a> != bgcolor_)
<a name="l00806"></a>00806             {
<a name="l00807"></a>00807               <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(block-&gt;<a class="code" href="structFl__Help__Block.html#a484152cb6382fbf499917ca3cc9a4243">bgcolor</a>);
<a name="l00808"></a>00808               <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(tx, ty, tw, th);
<a name="l00809"></a>00809               <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(textcolor_);
<a name="l00810"></a>00810             }
<a name="l00811"></a>00811 
<a name="l00812"></a>00812             <span class="keywordflow">if</span> (block-&gt;<a class="code" href="structFl__Help__Block.html#a48c67cf01a7005eddd309e9072996f31">border</a>)
<a name="l00813"></a>00813               <a class="code" href="group__fl__drawings.html#ga690c83e11f49fa837b563f4c0bc4fd1b">fl_rect</a>(tx, ty, tw, th);
<a name="l00814"></a>00814           }
<a name="l00815"></a>00815           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;I&quot;</span>) == 0 ||
<a name="l00816"></a>00816                    strcasecmp(buf, <span class="stringliteral">&quot;EM&quot;</span>) == 0)
<a name="l00817"></a>00817             pushfont(font |= <a class="code" href="Enumerations_8H.html#abdc8e2cce930b923594df50760299776" title="add this to helvetica, courier, or times">FL_ITALIC</a>, fsize);
<a name="l00818"></a>00818           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;CODE&quot;</span>) == 0 ||
<a name="l00819"></a>00819                    strcasecmp(buf, <span class="stringliteral">&quot;TT&quot;</span>) == 0)
<a name="l00820"></a>00820             pushfont(font = <a class="code" href="Enumerations_8H.html#ae722fe030bd9bcba33f045098295579d" title="Courier normal.">FL_COURIER</a>, fsize);
<a name="l00821"></a>00821           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;KBD&quot;</span>) == 0)
<a name="l00822"></a>00822             pushfont(font = <a class="code" href="Enumerations_8H.html#a311479135f085f16d2a7432af8f482eb" title="Courier bold.">FL_COURIER_BOLD</a>, fsize);
<a name="l00823"></a>00823           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;VAR&quot;</span>) == 0)
<a name="l00824"></a>00824             pushfont(font = <a class="code" href="Enumerations_8H.html#afc9d9ab48f1f9ff634c30fd2af4bb8ad" title="Courier italic.">FL_COURIER_ITALIC</a>, fsize);
<a name="l00825"></a>00825           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/HEAD&quot;</span>) == 0)
<a name="l00826"></a>00826             head = 0;
<a name="l00827"></a>00827           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/H1&quot;</span>) == 0 ||
<a name="l00828"></a>00828                    strcasecmp(buf, <span class="stringliteral">&quot;/H2&quot;</span>) == 0 ||
<a name="l00829"></a>00829                    strcasecmp(buf, <span class="stringliteral">&quot;/H3&quot;</span>) == 0 ||
<a name="l00830"></a>00830                    strcasecmp(buf, <span class="stringliteral">&quot;/H4&quot;</span>) == 0 ||
<a name="l00831"></a>00831                    strcasecmp(buf, <span class="stringliteral">&quot;/H5&quot;</span>) == 0 ||
<a name="l00832"></a>00832                    strcasecmp(buf, <span class="stringliteral">&quot;/H6&quot;</span>) == 0 ||
<a name="l00833"></a>00833                    strcasecmp(buf, <span class="stringliteral">&quot;/B&quot;</span>) == 0 ||
<a name="l00834"></a>00834                    strcasecmp(buf, <span class="stringliteral">&quot;/STRONG&quot;</span>) == 0 ||
<a name="l00835"></a>00835                    strcasecmp(buf, <span class="stringliteral">&quot;/I&quot;</span>) == 0 ||
<a name="l00836"></a>00836                    strcasecmp(buf, <span class="stringliteral">&quot;/EM&quot;</span>) == 0 ||
<a name="l00837"></a>00837                    strcasecmp(buf, <span class="stringliteral">&quot;/CODE&quot;</span>) == 0 ||
<a name="l00838"></a>00838                    strcasecmp(buf, <span class="stringliteral">&quot;/TT&quot;</span>) == 0 ||
<a name="l00839"></a>00839                    strcasecmp(buf, <span class="stringliteral">&quot;/KBD&quot;</span>) == 0 ||
<a name="l00840"></a>00840                    strcasecmp(buf, <span class="stringliteral">&quot;/VAR&quot;</span>) == 0)
<a name="l00841"></a>00841             popfont(font, fsize, fcolor);
<a name="l00842"></a>00842           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/PRE&quot;</span>) == 0)
<a name="l00843"></a>00843           {
<a name="l00844"></a>00844             popfont(font, fsize, fcolor);
<a name="l00845"></a>00845             pre = 0;
<a name="l00846"></a>00846           }
<a name="l00847"></a>00847           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;IMG&quot;</span>) == 0)
<a name="l00848"></a>00848           {
<a name="l00849"></a>00849             <a class="code" href="classFl__Shared__Image.html">Fl_Shared_Image</a> *img = 0;
<a name="l00850"></a>00850             <span class="keywordtype">int</span>         <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>, <a class="code" href="png_8h.html#aabca0b2ed5d849f535861a33f2b3cf61">height</a>;
<a name="l00851"></a>00851             <span class="keywordtype">char</span>        wattr[8], hattr[8];
<a name="l00852"></a>00852 
<a name="l00853"></a>00853 
<a name="l00854"></a>00854             get_attr(attrs, <span class="stringliteral">&quot;WIDTH&quot;</span>, wattr, <span class="keyword">sizeof</span>(wattr));
<a name="l00855"></a>00855             get_attr(attrs, <span class="stringliteral">&quot;HEIGHT&quot;</span>, hattr, <span class="keyword">sizeof</span>(hattr));
<a name="l00856"></a>00856             width  = get_length(wattr);
<a name="l00857"></a>00857             height = get_length(hattr);
<a name="l00858"></a>00858 
<a name="l00859"></a>00859             <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;SRC&quot;</span>, attr, <span class="keyword">sizeof</span>(attr))) {
<a name="l00860"></a>00860               img = get_image(attr, width, height);
<a name="l00861"></a>00861               <span class="keywordflow">if</span> (!width) width = img-&gt;<a class="code" href="classFl__Image.html#ac99df85a5ccd161b2b39042231aa2985">w</a>();
<a name="l00862"></a>00862               <span class="keywordflow">if</span> (!height) height = img-&gt;<a class="code" href="classFl__Image.html#a64dbb6fe30e3080a24f718231b371a17">h</a>();
<a name="l00863"></a>00863             }
<a name="l00864"></a>00864 
<a name="l00865"></a>00865             <span class="keywordflow">if</span> (!width || !height) {
<a name="l00866"></a>00866               <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;ALT&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00867"></a>00867                 strcpy(attr, <span class="stringliteral">&quot;IMG&quot;</span>);
<a name="l00868"></a>00868               }
<a name="l00869"></a>00869             }
<a name="l00870"></a>00870 
<a name="l00871"></a>00871             ww = <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l00872"></a>00872 
<a name="l00873"></a>00873             <span class="keywordflow">if</span> (needspace &amp;&amp; xx &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>)
<a name="l00874"></a>00874               xx += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l00875"></a>00875 
<a name="l00876"></a>00876             <span class="keywordflow">if</span> ((xx + ww) &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>)
<a name="l00877"></a>00877             {
<a name="l00878"></a>00878               <span class="keywordflow">if</span> (line &lt; 31)
<a name="l00879"></a>00879                 line ++;
<a name="l00880"></a>00880 
<a name="l00881"></a>00881               xx = block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line];
<a name="l00882"></a>00882               yy += hh;
<a name="l00883"></a>00883               hh = 0;
<a name="l00884"></a>00884             }
<a name="l00885"></a>00885 
<a name="l00886"></a>00886             <span class="keywordflow">if</span> (img) {
<a name="l00887"></a>00887               img-&gt;<a class="code" href="classFl__Shared__Image.html#a316ff45bd569d7331de4406dc1887eec">draw</a>(xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_,
<a name="l00888"></a>00888                         yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() - <a class="code" href="group__fl__attributes.html#ga1c7f56648cfc21431f30b1fa0f2d22ff">fl_height</a>() + <a class="code" href="group__fl__attributes.html#gaaaa4616966cb9b014a07764bcff14476">fl_descent</a>() + 2);
<a name="l00889"></a>00889             }
<a name="l00890"></a>00890 
<a name="l00891"></a>00891             xx += ww;
<a name="l00892"></a>00892             <span class="keywordflow">if</span> ((height + 2) &gt; hh)
<a name="l00893"></a>00893               hh = height + 2;
<a name="l00894"></a>00894 
<a name="l00895"></a>00895             needspace = 0;
<a name="l00896"></a>00896           }
<a name="l00897"></a>00897         }
<a name="l00898"></a>00898         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; pre)
<a name="l00899"></a>00899         {
<a name="l00900"></a>00900           *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00901"></a>00901           s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l00902"></a>00902 
<a name="l00903"></a>00903           hv_draw(buf, xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());
<a name="l00904"></a>00904 
<a name="l00905"></a>00905           <span class="keywordflow">if</span> (line &lt; 31)
<a name="l00906"></a>00906             line ++;
<a name="l00907"></a>00907           xx = block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line];
<a name="l00908"></a>00908           yy += hh;
<a name="l00909"></a>00909           hh = fsize + 2;
<a name="l00910"></a>00910           needspace = 0;
<a name="l00911"></a>00911 
<a name="l00912"></a>00912           ptr ++;
<a name="l00913"></a>00913           current_pos = ptr-value_;
<a name="l00914"></a>00914         }
<a name="l00915"></a>00915         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isspace((*ptr)&amp;255))
<a name="l00916"></a>00916         {
<a name="l00917"></a>00917           <span class="keywordflow">if</span> (pre)
<a name="l00918"></a>00918           {
<a name="l00919"></a>00919             <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39; &#39;</span>)
<a name="l00920"></a>00920               *s++ = <span class="charliteral">&#39; &#39;</span>;
<a name="l00921"></a>00921             <span class="keywordflow">else</span>
<a name="l00922"></a>00922             {
<a name="l00923"></a>00923               <span class="comment">// Do tabs every 8 columns...</span>
<a name="l00924"></a>00924               <span class="keywordflow">while</span> (((s - buf) &amp; 7))
<a name="l00925"></a>00925                 *s++ = <span class="charliteral">&#39; &#39;</span>;
<a name="l00926"></a>00926             }
<a name="l00927"></a>00927           }
<a name="l00928"></a>00928 
<a name="l00929"></a>00929           ptr ++;
<a name="l00930"></a>00930           <span class="keywordflow">if</span> (!pre) current_pos = ptr-value_;
<a name="l00931"></a>00931           needspace = 1;
<a name="l00932"></a>00932         }
<a name="l00933"></a>00933         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&amp;&#39;</span>)
<a name="l00934"></a>00934         {
<a name="l00935"></a>00935           ptr ++;
<a name="l00936"></a>00936 
<a name="l00937"></a>00937           <span class="keywordtype">int</span> qch = quote_char(ptr);
<a name="l00938"></a>00938 
<a name="l00939"></a>00939           <span class="keywordflow">if</span> (qch &lt; 0)
<a name="l00940"></a>00940             *s++ = <span class="charliteral">&#39;&amp;&#39;</span>;
<a name="l00941"></a>00941           <span class="keywordflow">else</span> {
<a name="l00942"></a>00942             <span class="keywordtype">int</span> l;
<a name="l00943"></a>00943             l = <a class="code" href="group__fl__unicode.html#gae608a28bc43f10014343483ed3d5e99c">fl_utf8encode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) qch, s);
<a name="l00944"></a>00944             <span class="keywordflow">if</span> (l &lt; 1) l = 1;
<a name="l00945"></a>00945             s += l;
<a name="l00946"></a>00946             ptr = strchr(ptr, <span class="charliteral">&#39;;&#39;</span>) + 1;
<a name="l00947"></a>00947           }
<a name="l00948"></a>00948 
<a name="l00949"></a>00949           <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l00950"></a>00950             hh = fsize + 2;
<a name="l00951"></a>00951         }
<a name="l00952"></a>00952         <span class="keywordflow">else</span>
<a name="l00953"></a>00953         {
<a name="l00954"></a>00954           *s++ = *ptr++;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956           <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l00957"></a>00957             hh = fsize + 2;
<a name="l00958"></a>00958         }
<a name="l00959"></a>00959       }
<a name="l00960"></a>00960 
<a name="l00961"></a>00961       *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l00962"></a>00962 
<a name="l00963"></a>00963       <span class="keywordflow">if</span> (s &gt; buf &amp;&amp; !pre &amp;&amp; !head)
<a name="l00964"></a>00964       {
<a name="l00965"></a>00965         ww = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(buf);
<a name="l00966"></a>00966 
<a name="l00967"></a>00967         <span class="keywordflow">if</span> (needspace &amp;&amp; xx &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>)
<a name="l00968"></a>00968           xx += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l00969"></a>00969 
<a name="l00970"></a>00970         <span class="keywordflow">if</span> ((xx + ww) &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>)
<a name="l00971"></a>00971         {
<a name="l00972"></a>00972           <span class="keywordflow">if</span> (line &lt; 31)
<a name="l00973"></a>00973             line ++;
<a name="l00974"></a>00974           xx = block-&gt;<a class="code" href="structFl__Help__Block.html#a824cca3a663c9ebde9f8987ab58deada">line</a>[line];
<a name="l00975"></a>00975           yy += hh;
<a name="l00976"></a>00976           hh = 0;
<a name="l00977"></a>00977         }
<a name="l00978"></a>00978       }
<a name="l00979"></a>00979 
<a name="l00980"></a>00980       <span class="keywordflow">if</span> (s &gt; buf &amp;&amp; !head)
<a name="l00981"></a>00981       {
<a name="l00982"></a>00982         hv_draw(buf, xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>());
<a name="l00983"></a>00983         <span class="keywordflow">if</span> (underline) <a class="code" href="group__fl__drawings.html#gacf46b232b6439424cc7f53656c5c2226">fl_xyline</a>(xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_, yy + <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + 1,
<a name="l00984"></a>00984                                  xx + <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() - leftline_ + ww);
<a name="l00985"></a>00985         current_pos = ptr-value_;
<a name="l00986"></a>00986       }
<a name="l00987"></a>00987     }
<a name="l00988"></a>00988 
<a name="l00989"></a>00989   <a class="code" href="group__fl__drawings.html#ga7abb216a9a87408c8926126cc9efce22">fl_pop_clip</a>();
<a name="l00990"></a>00990 }
<a name="l00991"></a>00991 
<a name="l00992"></a>00992 
<a name="l00993"></a>00993 
<a name="l00998"></a>00998 <span class="keywordtype">int</span>                                             <span class="comment">// O - Matching position or -1 if not found</span>
<a name="l00999"></a><a class="code" href="classFl__Help__View.html#a50ad770ff85426da7eb7859f6b747187">00999</a> <a class="code" href="classFl__Help__View.html#a50ad770ff85426da7eb7859f6b747187">Fl_Help_View::find</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s,               <span class="comment">// I - String to find</span>
<a name="l01000"></a>01000                    <span class="keywordtype">int</span>        p)                <span class="comment">// I - Starting position</span>
<a name="l01001"></a>01001 {
<a name="l01002"></a>01002   <span class="keywordtype">int</span>           <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>,                              <span class="comment">// Looping var</span>
<a name="l01003"></a>01003                 c;                              <span class="comment">// Current character</span>
<a name="l01004"></a>01004   <a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a> *<a class="code" href="jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>;                             <span class="comment">// Current block</span>
<a name="l01005"></a>01005   <span class="keyword">const</span> <span class="keywordtype">char</span>    *bp,                            <span class="comment">// Block matching pointer</span>
<a name="l01006"></a>01006                 *bs,                            <span class="comment">// Start of current comparison</span>
<a name="l01007"></a>01007                 *sp;                            <span class="comment">// Search string pointer</span>
<a name="l01008"></a>01008 
<a name="l01009"></a>01009 
<a name="l01010"></a>01010   <span class="comment">// Range check input and value...</span>
<a name="l01011"></a>01011   <span class="keywordflow">if</span> (!s || !value_) <span class="keywordflow">return</span> -1;
<a name="l01012"></a>01012 
<a name="l01013"></a>01013   <span class="keywordflow">if</span> (p &lt; 0 || p &gt;= (<span class="keywordtype">int</span>)strlen(value_)) p = 0;
<a name="l01014"></a>01014   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &gt; 0) p ++;
<a name="l01015"></a>01015 
<a name="l01016"></a>01016   <span class="comment">// Look for the string...</span>
<a name="l01017"></a>01017   <span class="keywordflow">for</span> (i = nblocks_, b = blocks_; i &gt; 0; i --, b ++) {
<a name="l01018"></a>01018     <span class="keywordflow">if</span> (b-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> &lt; (value_ + p))
<a name="l01019"></a>01019       <span class="keywordflow">continue</span>;
<a name="l01020"></a>01020 
<a name="l01021"></a>01021     <span class="keywordflow">if</span> (b-&gt;<a class="code" href="structFl__Help__Block.html#a23f1387b478bdff467b4ca9e401d816d">start</a> &lt; (value_ + p)) bp = value_ + p;
<a name="l01022"></a>01022     <span class="keywordflow">else</span> bp = b-&gt;<a class="code" href="structFl__Help__Block.html#a23f1387b478bdff467b4ca9e401d816d">start</a>;
<a name="l01023"></a>01023 
<a name="l01024"></a>01024     <span class="keywordflow">for</span> (sp = s, bs = bp; *sp &amp;&amp; *bp &amp;&amp; bp &lt; b-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a>; bp ++) {
<a name="l01025"></a>01025       <span class="keywordflow">if</span> (*bp == <span class="charliteral">&#39;&lt;&#39;</span>) {
<a name="l01026"></a>01026         <span class="comment">// skip to end of element...</span>
<a name="l01027"></a>01027         <span class="keywordflow">while</span> (*bp &amp;&amp; bp &lt; b-&gt;end &amp;&amp; *bp != <span class="charliteral">&#39;&gt;&#39;</span>) bp ++;
<a name="l01028"></a>01028         <span class="keywordflow">continue</span>;
<a name="l01029"></a>01029       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*bp == <span class="charliteral">&#39;&amp;&#39;</span>) {
<a name="l01030"></a>01030         <span class="comment">// decode HTML entity...</span>
<a name="l01031"></a>01031         <span class="keywordflow">if</span> ((c = quote_char(bp + 1)) &lt; 0) c = <span class="charliteral">&#39;&amp;&#39;</span>;
<a name="l01032"></a>01032         <span class="keywordflow">else</span> bp = strchr(bp + 1, <span class="charliteral">&#39;;&#39;</span>) + 1;
<a name="l01033"></a>01033       } <span class="keywordflow">else</span> c = *bp;
<a name="l01034"></a>01034 
<a name="l01035"></a>01035       <span class="keywordflow">if</span> (tolower(*sp) == tolower(c)) sp ++;
<a name="l01036"></a>01036       <span class="keywordflow">else</span> {
<a name="l01037"></a>01037         <span class="comment">// No match, so reset to start of search...</span>
<a name="l01038"></a>01038         sp = s;
<a name="l01039"></a>01039         bs ++;
<a name="l01040"></a>01040         bp = bs;
<a name="l01041"></a>01041       }
<a name="l01042"></a>01042     }
<a name="l01043"></a>01043 
<a name="l01044"></a>01044     <span class="keywordflow">if</span> (!*sp) {
<a name="l01045"></a>01045       <span class="comment">// Found a match!</span>
<a name="l01046"></a>01046       <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(b-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> - b-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>);
<a name="l01047"></a>01047       <span class="keywordflow">return</span> (b-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> - value_);
<a name="l01048"></a>01048     }
<a name="l01049"></a>01049   }
<a name="l01050"></a>01050 
<a name="l01051"></a>01051   <span class="comment">// No match!</span>
<a name="l01052"></a>01052   <span class="keywordflow">return</span> (-1);
<a name="l01053"></a>01053 }
<a name="l01054"></a>01054 
<a name="l01056"></a>01056 <span class="keywordtype">void</span> Fl_Help_View::format() {
<a name="l01057"></a>01057   <span class="keywordtype">int</span>           <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;              <span class="comment">// Looping var</span>
<a name="l01058"></a>01058   <span class="keywordtype">int</span>           done;           <span class="comment">// Are we done yet?</span>
<a name="l01059"></a>01059   <a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a> *block,         <span class="comment">// Current block</span>
<a name="l01060"></a>01060                 *cell;          <span class="comment">// Current table cell</span>
<a name="l01061"></a>01061   <span class="keywordtype">int</span>           cells[<a class="code" href="Fl__Help__View_8cxx.html#a2cc6f39fc4594f0e734b2588129fba03">MAX_COLUMNS</a>],
<a name="l01062"></a>01062                                 <span class="comment">// Cells in the current row...</span>
<a name="l01063"></a>01063                 <a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>;            <span class="comment">// Current table row (block number)</span>
<a name="l01064"></a>01064   <span class="keyword">const</span> <span class="keywordtype">char</span>    *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>,           <span class="comment">// Pointer into block</span>
<a name="l01065"></a>01065                 *<a class="code" href="png_8h.html#a96c2a358dab02570791a4c9072aecf60">start</a>,         <span class="comment">// Pointer to start of element</span>
<a name="l01066"></a>01066                 *attrs;         <span class="comment">// Pointer to start of element attributes</span>
<a name="l01067"></a>01067   <span class="keywordtype">char</span>          *s,             <span class="comment">// Pointer into buffer</span>
<a name="l01068"></a>01068                 buf[1024],      <span class="comment">// Text buffer</span>
<a name="l01069"></a>01069                 attr[1024],     <span class="comment">// Attribute buffer</span>
<a name="l01070"></a>01070                 wattr[1024],    <span class="comment">// Width attribute buffer</span>
<a name="l01071"></a>01071                 hattr[1024],    <span class="comment">// Height attribute buffer</span>
<a name="l01072"></a>01072                 linkdest[1024]; <span class="comment">// Link destination</span>
<a name="l01073"></a>01073   <span class="keywordtype">int</span>           xx, yy, ww, hh; <span class="comment">// Size of current text fragment</span>
<a name="l01074"></a>01074   <span class="keywordtype">int</span>           line;           <span class="comment">// Current line in block</span>
<a name="l01075"></a>01075   <span class="keywordtype">int</span>           links;          <span class="comment">// Links for current line</span>
<a name="l01076"></a>01076   <a class="code" href="Enumerations_8H.html#a2ac46d9f082834b969fffe490a03a709">Fl_Font</a>       font;
<a name="l01077"></a>01077   <a class="code" href="Enumerations_8H.html#ad58927f5c691454480f7cd28362502f1">Fl_Fontsize</a>   fsize;          <span class="comment">// Current font and size</span>
<a name="l01078"></a>01078   <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>      fcolor;         <span class="comment">// Current font color</span>
<a name="l01079"></a>01079   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> border;         <span class="comment">// Draw border?</span>
<a name="l01080"></a>01080   <span class="keywordtype">int</span>           talign,         <span class="comment">// Current alignment</span>
<a name="l01081"></a>01081                 newalign,       <span class="comment">// New alignment</span>
<a name="l01082"></a>01082                 head,           <span class="comment">// In the &lt;HEAD&gt; section?</span>
<a name="l01083"></a>01083                 pre,            <span class="comment">// &lt;PRE&gt; text?</span>
<a name="l01084"></a>01084                 needspace;      <span class="comment">// Do we need whitespace?</span>
<a name="l01085"></a>01085   <span class="keywordtype">int</span>           table_width,    <span class="comment">// Width of table</span>
<a name="l01086"></a>01086                 table_offset;   <span class="comment">// Offset of table</span>
<a name="l01087"></a>01087   <span class="keywordtype">int</span>           column,         <span class="comment">// Current table column number</span>
<a name="l01088"></a>01088                 columns[<a class="code" href="Fl__Help__View_8cxx.html#a2cc6f39fc4594f0e734b2588129fba03">MAX_COLUMNS</a>];
<a name="l01089"></a>01089                                 <span class="comment">// Column widths</span>
<a name="l01090"></a>01090   <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>      tc, rc;         <span class="comment">// Table/row background color</span>
<a name="l01091"></a>01091   <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bc">Fl_Boxtype</a>    b = <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() ? <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() : <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca9374077c9b546ed69f6592c246ba80ad" title="see figure 1">FL_DOWN_BOX</a>;
<a name="l01092"></a>01092                                 <span class="comment">// Box to draw...</span>
<a name="l01093"></a>01093   <a class="code" href="structfl__margins.html">fl_margins</a>    margins;        <span class="comment">// Left margin stack...</span>
<a name="l01094"></a>01094 
<a name="l01095"></a>01095 
<a name="l01096"></a>01096   <span class="comment">// Reset document width...</span>
<a name="l01097"></a>01097   <span class="keywordtype">int</span> scrollsize = scrollbar_size_ ? scrollbar_size_ : <a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">Fl::scrollbar_size</a>();
<a name="l01098"></a>01098   hsize_ = <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - scrollsize - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b);
<a name="l01099"></a>01099 
<a name="l01100"></a>01100   done = 0;
<a name="l01101"></a>01101   <span class="keywordflow">while</span> (!done)
<a name="l01102"></a>01102   {
<a name="l01103"></a>01103     <span class="comment">// Reset state variables...</span>
<a name="l01104"></a>01104     done       = 1;
<a name="l01105"></a>01105     nblocks_   = 0;
<a name="l01106"></a>01106     nlinks_    = 0;
<a name="l01107"></a>01107     ntargets_  = 0;
<a name="l01108"></a>01108     size_      = 0;
<a name="l01109"></a>01109     bgcolor_   = <a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>();
<a name="l01110"></a>01110     textcolor_ = <a class="code" href="classFl__Help__View.html#a82d1507bc27eb91b4340a2668c0cdf9c">textcolor</a>();
<a name="l01111"></a>01111     linkcolor_ = <a class="code" href="group__fl__attributes.html#ga54d75920c0484916cd6b2101937ec5ff">fl_contrast</a>(<a class="code" href="Enumerations_8H.html#a9fab9562bef18bcf13f1b827b38a4ba9">FL_BLUE</a>, <a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>());
<a name="l01112"></a>01112 
<a name="l01113"></a>01113     tc = rc = bgcolor_;
<a name="l01114"></a>01114 
<a name="l01115"></a>01115     strcpy(title_, <span class="stringliteral">&quot;Untitled&quot;</span>);
<a name="l01116"></a>01116 
<a name="l01117"></a>01117     <span class="keywordflow">if</span> (!value_)
<a name="l01118"></a>01118       <span class="keywordflow">return</span>;
<a name="l01119"></a>01119 
<a name="l01120"></a>01120     <span class="comment">// Setup for formatting...</span>
<a name="l01121"></a>01121     initfont(font, fsize, fcolor);
<a name="l01122"></a>01122 
<a name="l01123"></a>01123     line         = 0;
<a name="l01124"></a>01124     links        = 0;
<a name="l01125"></a>01125     xx           = margins.<a class="code" href="structfl__margins.html#af94a095009598b6585d4e328f371b1a6">clear</a>();
<a name="l01126"></a>01126     yy           = fsize + 2;
<a name="l01127"></a>01127     ww           = 0;
<a name="l01128"></a>01128     column       = 0;
<a name="l01129"></a>01129     border       = 0;
<a name="l01130"></a>01130     hh           = 0;
<a name="l01131"></a>01131     block        = add_block(value_, xx, yy, hsize_, 0);
<a name="l01132"></a>01132     row          = 0;
<a name="l01133"></a>01133     head         = 0;
<a name="l01134"></a>01134     pre          = 0;
<a name="l01135"></a>01135     talign       = LEFT;
<a name="l01136"></a>01136     newalign     = LEFT;
<a name="l01137"></a>01137     needspace    = 0;
<a name="l01138"></a>01138     linkdest[0]  = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01139"></a>01139     table_offset = 0;
<a name="l01140"></a>01140 
<a name="l01141"></a>01141     <span class="comment">// Html text character loop</span>
<a name="l01142"></a>01142     <span class="keywordflow">for</span> (ptr = value_, s = buf; *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;)
<a name="l01143"></a>01143     {
<a name="l01144"></a>01144       <span class="comment">// End of word?</span>
<a name="l01145"></a>01145       <span class="keywordflow">if</span> ((*ptr == <span class="charliteral">&#39;&lt;&#39;</span> || isspace((*ptr)&amp;255)) &amp;&amp; s &gt; buf)
<a name="l01146"></a>01146       {
<a name="l01147"></a>01147         <span class="comment">// Get width of word parsed so far...</span>
<a name="l01148"></a>01148         *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01149"></a>01149         ww = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(buf);
<a name="l01150"></a>01150 
<a name="l01151"></a>01151         <span class="keywordflow">if</span> (!head &amp;&amp; !pre)
<a name="l01152"></a>01152         {
<a name="l01153"></a>01153           <span class="comment">// Check width...</span>
<a name="l01154"></a>01154           <span class="keywordflow">if</span> (ww &gt; hsize_) {
<a name="l01155"></a>01155             hsize_ = ww;
<a name="l01156"></a>01156             done   = 0;
<a name="l01157"></a>01157             <span class="keywordflow">break</span>;
<a name="l01158"></a>01158           }
<a name="l01159"></a>01159 
<a name="l01160"></a>01160           <span class="keywordflow">if</span> (needspace &amp;&amp; xx &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>)
<a name="l01161"></a>01161             ww += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l01162"></a>01162 
<a name="l01163"></a>01163   <span class="comment">//        printf(&quot;line = %d, xx = %d, ww = %d, block-&gt;x = %d, block-&gt;w = %d\n&quot;,</span>
<a name="l01164"></a>01164   <span class="comment">//           line, xx, ww, block-&gt;x, block-&gt;w);</span>
<a name="l01165"></a>01165 
<a name="l01166"></a>01166           <span class="keywordflow">if</span> ((xx + ww) &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>)
<a name="l01167"></a>01167           {
<a name="l01168"></a>01168             line     = do_align(block, line, xx, newalign, links);
<a name="l01169"></a>01169             xx       = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01170"></a>01170             yy       += hh;
<a name="l01171"></a>01171             block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += hh;
<a name="l01172"></a>01172             hh       = 0;
<a name="l01173"></a>01173           }
<a name="l01174"></a>01174 
<a name="l01175"></a>01175           <span class="keywordflow">if</span> (linkdest[0])
<a name="l01176"></a>01176             add_link(linkdest, xx, yy - fsize, ww, fsize);
<a name="l01177"></a>01177 
<a name="l01178"></a>01178           xx += ww;
<a name="l01179"></a>01179           <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l01180"></a>01180             hh = fsize + 2;
<a name="l01181"></a>01181 
<a name="l01182"></a>01182           needspace = 0;
<a name="l01183"></a>01183         }
<a name="l01184"></a>01184         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pre)
<a name="l01185"></a>01185         {
<a name="l01186"></a>01186           <span class="comment">// Add a link as needed...</span>
<a name="l01187"></a>01187           <span class="keywordflow">if</span> (linkdest[0])
<a name="l01188"></a>01188             add_link(linkdest, xx, yy - hh, ww, hh);
<a name="l01189"></a>01189 
<a name="l01190"></a>01190           xx += ww;
<a name="l01191"></a>01191           <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l01192"></a>01192             hh = fsize + 2;
<a name="l01193"></a>01193 
<a name="l01194"></a>01194           <span class="comment">// Handle preformatted text...</span>
<a name="l01195"></a>01195           <span class="keywordflow">while</span> (isspace((*ptr)&amp;255))
<a name="l01196"></a>01196           {
<a name="l01197"></a>01197             <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;\n&#39;</span>)
<a name="l01198"></a>01198             {
<a name="l01199"></a>01199               <span class="keywordflow">if</span> (xx &gt; hsize_) <span class="keywordflow">break</span>;
<a name="l01200"></a>01200 
<a name="l01201"></a>01201               line     = do_align(block, line, xx, newalign, links);
<a name="l01202"></a>01202               xx       = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01203"></a>01203               yy       += hh;
<a name="l01204"></a>01204               block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += hh;
<a name="l01205"></a>01205               hh       = fsize + 2;
<a name="l01206"></a>01206             }
<a name="l01207"></a>01207             <span class="keywordflow">else</span>
<a name="l01208"></a>01208               xx += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l01209"></a>01209 
<a name="l01210"></a>01210             <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l01211"></a>01211               hh = fsize + 2;
<a name="l01212"></a>01212 
<a name="l01213"></a>01213             ptr ++;
<a name="l01214"></a>01214           }
<a name="l01215"></a>01215 
<a name="l01216"></a>01216           <span class="keywordflow">if</span> (xx &gt; hsize_) {
<a name="l01217"></a>01217             hsize_ = xx;
<a name="l01218"></a>01218             done   = 0;
<a name="l01219"></a>01219             <span class="keywordflow">break</span>;
<a name="l01220"></a>01220           }
<a name="l01221"></a>01221 
<a name="l01222"></a>01222           needspace = 0;
<a name="l01223"></a>01223         }
<a name="l01224"></a>01224         <span class="keywordflow">else</span>
<a name="l01225"></a>01225         {
<a name="l01226"></a>01226           <span class="comment">// Handle normal text or stuff in the &lt;HEAD&gt; section...</span>
<a name="l01227"></a>01227           <span class="keywordflow">while</span> (isspace((*ptr)&amp;255))
<a name="l01228"></a>01228             ptr ++;
<a name="l01229"></a>01229         }
<a name="l01230"></a>01230 
<a name="l01231"></a>01231         s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l01232"></a>01232       }
<a name="l01233"></a>01233 
<a name="l01234"></a>01234       <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&lt;&#39;</span>)
<a name="l01235"></a>01235       {
<a name="l01236"></a>01236         <span class="comment">// Handle html tags..</span>
<a name="l01237"></a>01237         start = <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;
<a name="l01238"></a>01238         ptr ++;
<a name="l01239"></a>01239 
<a name="l01240"></a>01240         <span class="keywordflow">if</span> (strncmp(ptr, <span class="stringliteral">&quot;!--&quot;</span>, 3) == 0)
<a name="l01241"></a>01241         {
<a name="l01242"></a>01242           <span class="comment">// Comment...</span>
<a name="l01243"></a>01243           ptr += 3;
<a name="l01244"></a>01244           <span class="keywordflow">if</span> ((ptr = strstr(ptr, <span class="stringliteral">&quot;--&gt;&quot;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01245"></a>01245           {
<a name="l01246"></a>01246             ptr += 3;
<a name="l01247"></a>01247             <span class="keywordflow">continue</span>;
<a name="l01248"></a>01248           }
<a name="l01249"></a>01249           <span class="keywordflow">else</span>
<a name="l01250"></a>01250             <span class="keywordflow">break</span>;
<a name="l01251"></a>01251         }
<a name="l01252"></a>01252 
<a name="l01253"></a>01253         <span class="keywordflow">while</span> (*ptr &amp;&amp; *ptr != <span class="charliteral">&#39;&gt;&#39;</span> &amp;&amp; !isspace((*ptr)&amp;255))
<a name="l01254"></a>01254           <span class="keywordflow">if</span> (s &lt; (buf + <span class="keyword">sizeof</span>(buf) - 1))
<a name="l01255"></a>01255             *s++ = *ptr++;
<a name="l01256"></a>01256           <span class="keywordflow">else</span>
<a name="l01257"></a>01257             ptr ++;
<a name="l01258"></a>01258 
<a name="l01259"></a>01259         *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01260"></a>01260         s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l01261"></a>01261 
<a name="l01262"></a>01262 <span class="comment">//        puts(buf);</span>
<a name="l01263"></a>01263 
<a name="l01264"></a>01264         attrs = <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;
<a name="l01265"></a>01265         <span class="keywordflow">while</span> (*ptr &amp;&amp; *ptr != <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l01266"></a>01266           ptr ++;
<a name="l01267"></a>01267 
<a name="l01268"></a>01268         <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l01269"></a>01269           ptr ++;
<a name="l01270"></a>01270 
<a name="l01271"></a>01271         <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;HEAD&quot;</span>) == 0)
<a name="l01272"></a>01272           head = 1;
<a name="l01273"></a>01273         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/HEAD&quot;</span>) == 0)
<a name="l01274"></a>01274           head = 0;
<a name="l01275"></a>01275         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TITLE&quot;</span>) == 0)
<a name="l01276"></a>01276         {
<a name="l01277"></a>01277           <span class="comment">// Copy the title in the document...</span>
<a name="l01278"></a>01278           <span class="keywordflow">for</span> (s = title_;
<a name="l01279"></a>01279                *ptr != <span class="charliteral">&#39;&lt;&#39;</span> &amp;&amp; *ptr &amp;&amp; s &lt; (title_ + <span class="keyword">sizeof</span>(title_) - 1);
<a name="l01280"></a>01280                *s++ = *ptr++);
<a name="l01281"></a>01281 
<a name="l01282"></a>01282           *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01283"></a>01283           s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l01284"></a>01284         }
<a name="l01285"></a>01285         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;A&quot;</span>) == 0)
<a name="l01286"></a>01286         {
<a name="l01287"></a>01287           <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;NAME&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01288"></a>01288             add_target(attr, yy - fsize - 2);
<a name="l01289"></a>01289 
<a name="l01290"></a>01290           <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;HREF&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01291"></a>01291             <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(linkdest, attr, <span class="keyword">sizeof</span>(linkdest));
<a name="l01292"></a>01292         }
<a name="l01293"></a>01293         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/A&quot;</span>) == 0)
<a name="l01294"></a>01294           linkdest[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01295"></a>01295         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;BODY&quot;</span>) == 0)
<a name="l01296"></a>01296         {
<a name="l01297"></a>01297           bgcolor_   = get_color(get_attr(attrs, <span class="stringliteral">&quot;BGCOLOR&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)),
<a name="l01298"></a>01298                                  <a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>());
<a name="l01299"></a>01299           textcolor_ = get_color(get_attr(attrs, <span class="stringliteral">&quot;TEXT&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)),
<a name="l01300"></a>01300                                  <a class="code" href="classFl__Help__View.html#a82d1507bc27eb91b4340a2668c0cdf9c">textcolor</a>());
<a name="l01301"></a>01301           linkcolor_ = get_color(get_attr(attrs, <span class="stringliteral">&quot;LINK&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)),
<a name="l01302"></a>01302                                  <a class="code" href="group__fl__attributes.html#ga54d75920c0484916cd6b2101937ec5ff">fl_contrast</a>(<a class="code" href="Enumerations_8H.html#a9fab9562bef18bcf13f1b827b38a4ba9">FL_BLUE</a>, <a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>()));
<a name="l01303"></a>01303         }
<a name="l01304"></a>01304         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;BR&quot;</span>) == 0)
<a name="l01305"></a>01305         {
<a name="l01306"></a>01306           line     = do_align(block, line, xx, newalign, links);
<a name="l01307"></a>01307           xx       = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01308"></a>01308           block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += hh;
<a name="l01309"></a>01309           yy       += hh;
<a name="l01310"></a>01310           hh       = 0;
<a name="l01311"></a>01311         }
<a name="l01312"></a>01312         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;CENTER&quot;</span>) == 0 ||
<a name="l01313"></a>01313                  strcasecmp(buf, <span class="stringliteral">&quot;P&quot;</span>) == 0 ||
<a name="l01314"></a>01314                  strcasecmp(buf, <span class="stringliteral">&quot;H1&quot;</span>) == 0 ||
<a name="l01315"></a>01315                  strcasecmp(buf, <span class="stringliteral">&quot;H2&quot;</span>) == 0 ||
<a name="l01316"></a>01316                  strcasecmp(buf, <span class="stringliteral">&quot;H3&quot;</span>) == 0 ||
<a name="l01317"></a>01317                  strcasecmp(buf, <span class="stringliteral">&quot;H4&quot;</span>) == 0 ||
<a name="l01318"></a>01318                  strcasecmp(buf, <span class="stringliteral">&quot;H5&quot;</span>) == 0 ||
<a name="l01319"></a>01319                  strcasecmp(buf, <span class="stringliteral">&quot;H6&quot;</span>) == 0 ||
<a name="l01320"></a>01320                  strcasecmp(buf, <span class="stringliteral">&quot;UL&quot;</span>) == 0 ||
<a name="l01321"></a>01321                  strcasecmp(buf, <span class="stringliteral">&quot;OL&quot;</span>) == 0 ||
<a name="l01322"></a>01322                  strcasecmp(buf, <span class="stringliteral">&quot;DL&quot;</span>) == 0 ||
<a name="l01323"></a>01323                  strcasecmp(buf, <span class="stringliteral">&quot;LI&quot;</span>) == 0 ||
<a name="l01324"></a>01324                  strcasecmp(buf, <span class="stringliteral">&quot;DD&quot;</span>) == 0 ||
<a name="l01325"></a>01325                  strcasecmp(buf, <span class="stringliteral">&quot;DT&quot;</span>) == 0 ||
<a name="l01326"></a>01326                  strcasecmp(buf, <span class="stringliteral">&quot;HR&quot;</span>) == 0 ||
<a name="l01327"></a>01327                  strcasecmp(buf, <span class="stringliteral">&quot;PRE&quot;</span>) == 0 ||
<a name="l01328"></a>01328                  strcasecmp(buf, <span class="stringliteral">&quot;TABLE&quot;</span>) == 0)
<a name="l01329"></a>01329         {
<a name="l01330"></a>01330           block-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> = <a class="code" href="png_8h.html#a96c2a358dab02570791a4c9072aecf60">start</a>;
<a name="l01331"></a>01331           line       = do_align(block, line, xx, newalign, links);
<a name="l01332"></a>01332           newalign   = strcasecmp(buf, <span class="stringliteral">&quot;CENTER&quot;</span>) ? LEFT : CENTER;
<a name="l01333"></a>01333           xx         = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01334"></a>01334           block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>   += hh;
<a name="l01335"></a>01335 
<a name="l01336"></a>01336           <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;UL&quot;</span>) == 0 ||
<a name="l01337"></a>01337               strcasecmp(buf, <span class="stringliteral">&quot;OL&quot;</span>) == 0 ||
<a name="l01338"></a>01338               strcasecmp(buf, <span class="stringliteral">&quot;DL&quot;</span>) == 0)
<a name="l01339"></a>01339           {
<a name="l01340"></a>01340             block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += fsize + 2;
<a name="l01341"></a>01341             xx       = margins.<a class="code" href="structfl__margins.html#ab56b4519c0ba5f62ee8370692ddb09eb">push</a>(4 * fsize);
<a name="l01342"></a>01342           }
<a name="l01343"></a>01343           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TABLE&quot;</span>) == 0)
<a name="l01344"></a>01344           {
<a name="l01345"></a>01345             <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;BORDER&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)))
<a name="l01346"></a>01346               border = (<a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)atoi(attr);
<a name="l01347"></a>01347             <span class="keywordflow">else</span>
<a name="l01348"></a>01348               border = 0;
<a name="l01349"></a>01349 
<a name="l01350"></a>01350             tc = rc = get_color(get_attr(attrs, <span class="stringliteral">&quot;BGCOLOR&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)), bgcolor_);
<a name="l01351"></a>01351 
<a name="l01352"></a>01352             block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += fsize + 2;
<a name="l01353"></a>01353 
<a name="l01354"></a>01354             format_table(&amp;table_width, columns, start);
<a name="l01355"></a>01355 
<a name="l01356"></a>01356             <span class="keywordflow">if</span> ((xx + table_width) &gt; hsize_) {
<a name="l01357"></a>01357 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l01358"></a>01358 <span class="preprocessor"></span>              printf(<span class="stringliteral">&quot;xx=%d, table_width=%d, hsize_=%d\n&quot;</span>, xx, table_width,
<a name="l01359"></a>01359                      hsize_);
<a name="l01360"></a>01360 <span class="preprocessor">#endif // DEBUG</span>
<a name="l01361"></a>01361 <span class="preprocessor"></span>              hsize_ = xx + table_width;
<a name="l01362"></a>01362               done   = 0;
<a name="l01363"></a>01363               <span class="keywordflow">break</span>;
<a name="l01364"></a>01364             }
<a name="l01365"></a>01365 
<a name="l01366"></a>01366             <span class="keywordflow">switch</span> (get_align(attrs, talign))
<a name="l01367"></a>01367             {
<a name="l01368"></a>01368               <span class="keywordflow">default</span> :
<a name="l01369"></a>01369                   table_offset = 0;
<a name="l01370"></a>01370                   <span class="keywordflow">break</span>;
<a name="l01371"></a>01371 
<a name="l01372"></a>01372               <span class="keywordflow">case</span> CENTER :
<a name="l01373"></a>01373                   table_offset = (hsize_ - table_width) / 2 - textsize_;
<a name="l01374"></a>01374                   <span class="keywordflow">break</span>;
<a name="l01375"></a>01375 
<a name="l01376"></a>01376               <span class="keywordflow">case</span> RIGHT :
<a name="l01377"></a>01377                   table_offset = hsize_ - table_width - textsize_;
<a name="l01378"></a>01378                   <span class="keywordflow">break</span>;
<a name="l01379"></a>01379             }
<a name="l01380"></a>01380 
<a name="l01381"></a>01381             column = 0;
<a name="l01382"></a>01382           }
<a name="l01383"></a>01383 
<a name="l01384"></a>01384           <span class="keywordflow">if</span> (tolower(buf[0]) == <span class="charliteral">&#39;h&#39;</span> &amp;&amp; isdigit(buf[1]))
<a name="l01385"></a>01385           {
<a name="l01386"></a>01386             font  = <a class="code" href="Enumerations_8H.html#ae52b5d98292bf142ea1c7468d7d732cd" title="Helvetica (or Arial) bold.">FL_HELVETICA_BOLD</a>;
<a name="l01387"></a>01387             fsize = textsize_ + <span class="charliteral">&#39;7&#39;</span> - buf[1];
<a name="l01388"></a>01388           }
<a name="l01389"></a>01389           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;DT&quot;</span>) == 0)
<a name="l01390"></a>01390           {
<a name="l01391"></a>01391             font  = textfont_ | <a class="code" href="Enumerations_8H.html#abdc8e2cce930b923594df50760299776" title="add this to helvetica, courier, or times">FL_ITALIC</a>;
<a name="l01392"></a>01392             fsize = textsize_;
<a name="l01393"></a>01393           }
<a name="l01394"></a>01394           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;PRE&quot;</span>) == 0)
<a name="l01395"></a>01395           {
<a name="l01396"></a>01396             font  = <a class="code" href="Enumerations_8H.html#ae722fe030bd9bcba33f045098295579d" title="Courier normal.">FL_COURIER</a>;
<a name="l01397"></a>01397             fsize = textsize_;
<a name="l01398"></a>01398             pre   = 1;
<a name="l01399"></a>01399           }
<a name="l01400"></a>01400           <span class="keywordflow">else</span>
<a name="l01401"></a>01401           {
<a name="l01402"></a>01402             font  = textfont_;
<a name="l01403"></a>01403             fsize = textsize_;
<a name="l01404"></a>01404           }
<a name="l01405"></a>01405 
<a name="l01406"></a>01406           pushfont(font, fsize);
<a name="l01407"></a>01407 
<a name="l01408"></a>01408           yy = block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>;
<a name="l01409"></a>01409           hh = 0;
<a name="l01410"></a>01410 
<a name="l01411"></a>01411           <span class="keywordflow">if</span> ((tolower(buf[0]) == <span class="charliteral">&#39;h&#39;</span> &amp;&amp; isdigit(buf[1])) ||
<a name="l01412"></a>01412               strcasecmp(buf, <span class="stringliteral">&quot;DD&quot;</span>) == 0 ||
<a name="l01413"></a>01413               strcasecmp(buf, <span class="stringliteral">&quot;DT&quot;</span>) == 0 ||
<a name="l01414"></a>01414               strcasecmp(buf, <span class="stringliteral">&quot;P&quot;</span>) == 0)
<a name="l01415"></a>01415             yy += fsize + 2;
<a name="l01416"></a>01416           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;HR&quot;</span>) == 0)
<a name="l01417"></a>01417           {
<a name="l01418"></a>01418             hh += 2 * fsize;
<a name="l01419"></a>01419             yy += fsize;
<a name="l01420"></a>01420           }
<a name="l01421"></a>01421 
<a name="l01422"></a>01422           <span class="keywordflow">if</span> (row)
<a name="l01423"></a>01423             block = add_block(start, xx, yy, block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>, 0);
<a name="l01424"></a>01424           <span class="keywordflow">else</span>
<a name="l01425"></a>01425             block = add_block(start, xx, yy, hsize_, 0);
<a name="l01426"></a>01426 
<a name="l01427"></a>01427           needspace = 0;
<a name="l01428"></a>01428           line      = 0;
<a name="l01429"></a>01429 
<a name="l01430"></a>01430           <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;CENTER&quot;</span>) == 0)
<a name="l01431"></a>01431             newalign = talign = CENTER;
<a name="l01432"></a>01432           <span class="keywordflow">else</span>
<a name="l01433"></a>01433             newalign = get_align(attrs, talign);
<a name="l01434"></a>01434         }
<a name="l01435"></a>01435         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/CENTER&quot;</span>) == 0 ||
<a name="l01436"></a>01436                  strcasecmp(buf, <span class="stringliteral">&quot;/P&quot;</span>) == 0 ||
<a name="l01437"></a>01437                  strcasecmp(buf, <span class="stringliteral">&quot;/H1&quot;</span>) == 0 ||
<a name="l01438"></a>01438                  strcasecmp(buf, <span class="stringliteral">&quot;/H2&quot;</span>) == 0 ||
<a name="l01439"></a>01439                  strcasecmp(buf, <span class="stringliteral">&quot;/H3&quot;</span>) == 0 ||
<a name="l01440"></a>01440                  strcasecmp(buf, <span class="stringliteral">&quot;/H4&quot;</span>) == 0 ||
<a name="l01441"></a>01441                  strcasecmp(buf, <span class="stringliteral">&quot;/H5&quot;</span>) == 0 ||
<a name="l01442"></a>01442                  strcasecmp(buf, <span class="stringliteral">&quot;/H6&quot;</span>) == 0 ||
<a name="l01443"></a>01443                  strcasecmp(buf, <span class="stringliteral">&quot;/PRE&quot;</span>) == 0 ||
<a name="l01444"></a>01444                  strcasecmp(buf, <span class="stringliteral">&quot;/UL&quot;</span>) == 0 ||
<a name="l01445"></a>01445                  strcasecmp(buf, <span class="stringliteral">&quot;/OL&quot;</span>) == 0 ||
<a name="l01446"></a>01446                  strcasecmp(buf, <span class="stringliteral">&quot;/DL&quot;</span>) == 0 ||
<a name="l01447"></a>01447                  strcasecmp(buf, <span class="stringliteral">&quot;/TABLE&quot;</span>) == 0)
<a name="l01448"></a>01448         {
<a name="l01449"></a>01449           line       = do_align(block, line, xx, newalign, links);
<a name="l01450"></a>01450           xx         = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01451"></a>01451           block-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> = <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;
<a name="l01452"></a>01452 
<a name="l01453"></a>01453           <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/UL&quot;</span>) == 0 ||
<a name="l01454"></a>01454               strcasecmp(buf, <span class="stringliteral">&quot;/OL&quot;</span>) == 0 ||
<a name="l01455"></a>01455               strcasecmp(buf, <span class="stringliteral">&quot;/DL&quot;</span>) == 0)
<a name="l01456"></a>01456           {
<a name="l01457"></a>01457             xx       = margins.<a class="code" href="structfl__margins.html#a7872c5a229f50f2e9559852340143070">pop</a>();
<a name="l01458"></a>01458             block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += fsize + 2;
<a name="l01459"></a>01459           }
<a name="l01460"></a>01460           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/TABLE&quot;</span>) == 0) 
<a name="l01461"></a>01461           {
<a name="l01462"></a>01462             block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += fsize + 2;
<a name="l01463"></a>01463             xx       = margins.<a class="code" href="structfl__margins.html#abd7aefc498760766248e8825dceda5a3">current</a>();
<a name="l01464"></a>01464           }
<a name="l01465"></a>01465           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/PRE&quot;</span>) == 0)
<a name="l01466"></a>01466           {
<a name="l01467"></a>01467             pre = 0;
<a name="l01468"></a>01468             hh  = 0;
<a name="l01469"></a>01469           }
<a name="l01470"></a>01470           <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/CENTER&quot;</span>) == 0)
<a name="l01471"></a>01471             talign = LEFT;
<a name="l01472"></a>01472 
<a name="l01473"></a>01473           popfont(font, fsize, fcolor);
<a name="l01474"></a>01474 
<a name="l01475"></a>01475           <span class="comment">//#if defined(__GNUC__)</span>
<a name="l01476"></a>01476           <span class="comment">//#warning FIXME this isspace &amp; 255 test will probably not work on a utf8 stream... And we use it everywhere!</span>
<a name="l01477"></a>01477           <span class="comment">//#endif /*__GNUC__*/</span>
<a name="l01478"></a>01478           <span class="keywordflow">while</span> (isspace((*ptr)&amp;255))
<a name="l01479"></a>01479             ptr ++;
<a name="l01480"></a>01480 
<a name="l01481"></a>01481           block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += hh;
<a name="l01482"></a>01482           yy       += hh;
<a name="l01483"></a>01483 
<a name="l01484"></a>01484           <span class="keywordflow">if</span> (tolower(buf[2]) == <span class="charliteral">&#39;l&#39;</span>)
<a name="l01485"></a>01485             yy += fsize + 2;
<a name="l01486"></a>01486 
<a name="l01487"></a>01487           <span class="keywordflow">if</span> (row)
<a name="l01488"></a>01488             block = add_block(ptr, xx, yy, block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>, 0);
<a name="l01489"></a>01489           <span class="keywordflow">else</span>
<a name="l01490"></a>01490             block = add_block(ptr, xx, yy, hsize_, 0);
<a name="l01491"></a>01491 
<a name="l01492"></a>01492           needspace = 0;
<a name="l01493"></a>01493           hh        = 0;
<a name="l01494"></a>01494           line      = 0;
<a name="l01495"></a>01495           newalign  = talign;
<a name="l01496"></a>01496         }
<a name="l01497"></a>01497         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TR&quot;</span>) == 0)
<a name="l01498"></a>01498         {
<a name="l01499"></a>01499           block-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> = <a class="code" href="png_8h.html#a96c2a358dab02570791a4c9072aecf60">start</a>;
<a name="l01500"></a>01500           line       = do_align(block, line, xx, newalign, links);
<a name="l01501"></a>01501           xx         = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01502"></a>01502           block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>   += hh;
<a name="l01503"></a>01503 
<a name="l01504"></a>01504           <span class="keywordflow">if</span> (row)
<a name="l01505"></a>01505           {
<a name="l01506"></a>01506             yy = blocks_[<a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>].<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + blocks_[<a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>].<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>;
<a name="l01507"></a>01507 
<a name="l01508"></a>01508             <span class="keywordflow">for</span> (cell = blocks_ + row + 1; cell &lt;= block; cell ++)
<a name="l01509"></a>01509               <span class="keywordflow">if</span> ((cell-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + cell-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>) &gt; yy)
<a name="l01510"></a>01510                 yy = cell-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + cell-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>;
<a name="l01511"></a>01511 
<a name="l01512"></a>01512             block = blocks_ + <a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>;
<a name="l01513"></a>01513 
<a name="l01514"></a>01514             block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> = yy - block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + 2;
<a name="l01515"></a>01515 
<a name="l01516"></a>01516             <span class="keywordflow">for</span> (i = 0; i &lt; column; i ++)
<a name="l01517"></a>01517               <span class="keywordflow">if</span> (cells[i])
<a name="l01518"></a>01518               {
<a name="l01519"></a>01519                 cell = blocks_ + cells[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];
<a name="l01520"></a>01520                 cell-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> = block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>;
<a name="l01521"></a>01521               }
<a name="l01522"></a>01522           }
<a name="l01523"></a>01523 
<a name="l01524"></a>01524           memset(cells, 0, <span class="keyword">sizeof</span>(cells));
<a name="l01525"></a>01525 
<a name="l01526"></a>01526           yy        = block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> - 4;
<a name="l01527"></a>01527           hh        = 0;
<a name="l01528"></a>01528           block     = add_block(start, xx, yy, hsize_, 0);
<a name="l01529"></a>01529           row       = block - blocks_;
<a name="l01530"></a>01530           needspace = 0;
<a name="l01531"></a>01531           column    = 0;
<a name="l01532"></a>01532           line      = 0;
<a name="l01533"></a>01533 
<a name="l01534"></a>01534           rc = get_color(get_attr(attrs, <span class="stringliteral">&quot;BGCOLOR&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)), tc);
<a name="l01535"></a>01535         }
<a name="l01536"></a>01536         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/TR&quot;</span>) == 0 &amp;&amp; row)
<a name="l01537"></a>01537         {
<a name="l01538"></a>01538           line       = do_align(block, line, xx, newalign, links);
<a name="l01539"></a>01539           block-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> = <a class="code" href="png_8h.html#a96c2a358dab02570791a4c9072aecf60">start</a>;
<a name="l01540"></a>01540           block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>   += hh;
<a name="l01541"></a>01541           talign     = LEFT;
<a name="l01542"></a>01542 
<a name="l01543"></a>01543           xx = blocks_[<a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>].x;
<a name="l01544"></a>01544           yy = blocks_[<a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>].y + blocks_[<a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>].h;
<a name="l01545"></a>01545 
<a name="l01546"></a>01546           <span class="keywordflow">for</span> (cell = blocks_ + row + 1; cell &lt;= block; cell ++)
<a name="l01547"></a>01547             <span class="keywordflow">if</span> ((cell-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + cell-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>) &gt; yy)
<a name="l01548"></a>01548               yy = cell-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + cell-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>;
<a name="l01549"></a>01549 
<a name="l01550"></a>01550           block = blocks_ + <a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>;
<a name="l01551"></a>01551 
<a name="l01552"></a>01552           block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> = yy - block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + 2;
<a name="l01553"></a>01553 
<a name="l01554"></a>01554           <span class="keywordflow">for</span> (i = 0; i &lt; column; i ++)
<a name="l01555"></a>01555             <span class="keywordflow">if</span> (cells[i])
<a name="l01556"></a>01556             {
<a name="l01557"></a>01557               cell = blocks_ + cells[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];
<a name="l01558"></a>01558               cell-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> = block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>;
<a name="l01559"></a>01559             }
<a name="l01560"></a>01560 
<a name="l01561"></a>01561           yy        = block-&gt;<a class="code" href="structFl__Help__Block.html#a0c20829c997249167589b466a66cfee4">y</a> + block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> <span class="comment">/*- 4*/</span>;
<a name="l01562"></a>01562           block     = add_block(start, xx, yy, hsize_, 0);
<a name="l01563"></a>01563           needspace = 0;
<a name="l01564"></a>01564           row       = 0;
<a name="l01565"></a>01565           line      = 0;
<a name="l01566"></a>01566         }
<a name="l01567"></a>01567         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((strcasecmp(buf, <span class="stringliteral">&quot;TD&quot;</span>) == 0 ||
<a name="l01568"></a>01568                   strcasecmp(buf, <span class="stringliteral">&quot;TH&quot;</span>) == 0) &amp;&amp; row)
<a name="l01569"></a>01569         {
<a name="l01570"></a>01570           <span class="keywordtype">int</span>   colspan;                <span class="comment">// COLSPAN attribute</span>
<a name="l01571"></a>01571 
<a name="l01572"></a>01572 
<a name="l01573"></a>01573           line       = do_align(block, line, xx, newalign, links);
<a name="l01574"></a>01574           block-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> = <a class="code" href="png_8h.html#a96c2a358dab02570791a4c9072aecf60">start</a>;
<a name="l01575"></a>01575           block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>   += hh;
<a name="l01576"></a>01576 
<a name="l01577"></a>01577           <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TH&quot;</span>) == 0)
<a name="l01578"></a>01578             font = textfont_ | <a class="code" href="Enumerations_8H.html#a5b4c5d04c411d4c086101f5b955c556a" title="add this to helvetica, courier, or times">FL_BOLD</a>;
<a name="l01579"></a>01579           <span class="keywordflow">else</span>
<a name="l01580"></a>01580             font = textfont_;
<a name="l01581"></a>01581 
<a name="l01582"></a>01582           fsize = textsize_;
<a name="l01583"></a>01583 
<a name="l01584"></a>01584           xx = blocks_[<a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>].x + fsize + 3 + table_offset;
<a name="l01585"></a>01585           <span class="keywordflow">for</span> (i = 0; i &lt; column; i ++)
<a name="l01586"></a>01586             xx += columns[i] + 6;
<a name="l01587"></a>01587 
<a name="l01588"></a>01588           margins.<a class="code" href="structfl__margins.html#ab56b4519c0ba5f62ee8370692ddb09eb">push</a>(xx - margins.<a class="code" href="structfl__margins.html#abd7aefc498760766248e8825dceda5a3">current</a>());
<a name="l01589"></a>01589 
<a name="l01590"></a>01590           <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;COLSPAN&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l01591"></a>01591             colspan = atoi(attr);
<a name="l01592"></a>01592           <span class="keywordflow">else</span>
<a name="l01593"></a>01593             colspan = 1;
<a name="l01594"></a>01594 
<a name="l01595"></a>01595           <span class="keywordflow">for</span> (i = 0, ww = -6; i &lt; colspan; i ++)
<a name="l01596"></a>01596             ww += columns[column + i] + 6;
<a name="l01597"></a>01597 
<a name="l01598"></a>01598           <span class="keywordflow">if</span> (block-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> == block-&gt;<a class="code" href="structFl__Help__Block.html#a23f1387b478bdff467b4ca9e401d816d">start</a> &amp;&amp; nblocks_ &gt; 1)
<a name="l01599"></a>01599           {
<a name="l01600"></a>01600             nblocks_ --;
<a name="l01601"></a>01601             block --;
<a name="l01602"></a>01602           }
<a name="l01603"></a>01603 
<a name="l01604"></a>01604           pushfont(font, fsize);
<a name="l01605"></a>01605 
<a name="l01606"></a>01606           yy        = blocks_[<a class="code" href="png_8h.html#a73cf8a72b60ad0318e2eb4f8076dcb40">row</a>].y;
<a name="l01607"></a>01607           hh        = 0;
<a name="l01608"></a>01608           block     = add_block(start, xx, yy, xx + ww, 0, border);
<a name="l01609"></a>01609           needspace = 0;
<a name="l01610"></a>01610           line      = 0;
<a name="l01611"></a>01611           newalign  = get_align(attrs, tolower(buf[1]) == <span class="charliteral">&#39;h&#39;</span> ? CENTER : LEFT);
<a name="l01612"></a>01612           talign    = newalign;
<a name="l01613"></a>01613 
<a name="l01614"></a>01614           cells[column] = block - blocks_;
<a name="l01615"></a>01615 
<a name="l01616"></a>01616           column += colspan;
<a name="l01617"></a>01617 
<a name="l01618"></a>01618           block-&gt;<a class="code" href="structFl__Help__Block.html#a484152cb6382fbf499917ca3cc9a4243">bgcolor</a> = get_color(get_attr(attrs, <span class="stringliteral">&quot;BGCOLOR&quot;</span>, attr,
<a name="l01619"></a>01619                                               <span class="keyword">sizeof</span>(attr)), rc);
<a name="l01620"></a>01620         }
<a name="l01621"></a>01621         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((strcasecmp(buf, <span class="stringliteral">&quot;/TD&quot;</span>) == 0 ||
<a name="l01622"></a>01622                   strcasecmp(buf, <span class="stringliteral">&quot;/TH&quot;</span>) == 0) &amp;&amp; row)
<a name="l01623"></a>01623         {
<a name="l01624"></a>01624           line = do_align(block, line, xx, newalign, links);
<a name="l01625"></a>01625           popfont(font, fsize, fcolor);
<a name="l01626"></a>01626           xx = margins.<a class="code" href="structfl__margins.html#a7872c5a229f50f2e9559852340143070">pop</a>();
<a name="l01627"></a>01627           talign = LEFT;
<a name="l01628"></a>01628         }
<a name="l01629"></a>01629         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;FONT&quot;</span>) == 0)
<a name="l01630"></a>01630         {
<a name="l01631"></a>01631           <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;FACE&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01632"></a>01632             <span class="keywordflow">if</span> (!strncasecmp(attr, <span class="stringliteral">&quot;helvetica&quot;</span>, 9) ||
<a name="l01633"></a>01633                 !strncasecmp(attr, <span class="stringliteral">&quot;arial&quot;</span>, 5) ||
<a name="l01634"></a>01634                 !strncasecmp(attr, <span class="stringliteral">&quot;sans&quot;</span>, 4)) font = <a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>;
<a name="l01635"></a>01635             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(attr, <span class="stringliteral">&quot;times&quot;</span>, 5) ||
<a name="l01636"></a>01636                      !strncasecmp(attr, <span class="stringliteral">&quot;serif&quot;</span>, 5)) font = <a class="code" href="Enumerations_8H.html#a35fe64b07a0f270411dfbcbcc109033c" title="Times roman.">FL_TIMES</a>;
<a name="l01637"></a>01637             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strncasecmp(attr, <span class="stringliteral">&quot;symbol&quot;</span>, 6)) font = <a class="code" href="Enumerations_8H.html#a2b2df61e619d3e6658b2fbb5cef5dc8e" title="Standard symbol font.">FL_SYMBOL</a>;
<a name="l01638"></a>01638             <span class="keywordflow">else</span> font = <a class="code" href="Enumerations_8H.html#ae722fe030bd9bcba33f045098295579d" title="Courier normal.">FL_COURIER</a>;
<a name="l01639"></a>01639           }
<a name="l01640"></a>01640 
<a name="l01641"></a>01641           <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;SIZE&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l01642"></a>01642             <span class="keywordflow">if</span> (isdigit(attr[0] &amp; 255)) {
<a name="l01643"></a>01643               <span class="comment">// Absolute size</span>
<a name="l01644"></a>01644               fsize = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)(textsize_ * pow(1.2, atoi(attr) - 3.0));
<a name="l01645"></a>01645             } <span class="keywordflow">else</span> {
<a name="l01646"></a>01646               <span class="comment">// Relative size</span>
<a name="l01647"></a>01647               fsize = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)(fsize * pow(1.2, atoi(attr)));
<a name="l01648"></a>01648             }
<a name="l01649"></a>01649           }
<a name="l01650"></a>01650 
<a name="l01651"></a>01651           pushfont(font, fsize);
<a name="l01652"></a>01652         }
<a name="l01653"></a>01653         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/FONT&quot;</span>) == 0)
<a name="l01654"></a>01654           popfont(font, fsize, fcolor);
<a name="l01655"></a>01655         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;B&quot;</span>) == 0 ||
<a name="l01656"></a>01656                  strcasecmp(buf, <span class="stringliteral">&quot;STRONG&quot;</span>) == 0)
<a name="l01657"></a>01657           pushfont(font |= <a class="code" href="Enumerations_8H.html#a5b4c5d04c411d4c086101f5b955c556a" title="add this to helvetica, courier, or times">FL_BOLD</a>, fsize);
<a name="l01658"></a>01658         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;I&quot;</span>) == 0 ||
<a name="l01659"></a>01659                  strcasecmp(buf, <span class="stringliteral">&quot;EM&quot;</span>) == 0)
<a name="l01660"></a>01660           pushfont(font |= <a class="code" href="Enumerations_8H.html#abdc8e2cce930b923594df50760299776" title="add this to helvetica, courier, or times">FL_ITALIC</a>, fsize);
<a name="l01661"></a>01661         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;CODE&quot;</span>) == 0 ||
<a name="l01662"></a>01662                  strcasecmp(buf, <span class="stringliteral">&quot;TT&quot;</span>) == 0)
<a name="l01663"></a>01663           pushfont(font = <a class="code" href="Enumerations_8H.html#ae722fe030bd9bcba33f045098295579d" title="Courier normal.">FL_COURIER</a>, fsize);
<a name="l01664"></a>01664         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;KBD&quot;</span>) == 0)
<a name="l01665"></a>01665           pushfont(font = <a class="code" href="Enumerations_8H.html#a311479135f085f16d2a7432af8f482eb" title="Courier bold.">FL_COURIER_BOLD</a>, fsize);
<a name="l01666"></a>01666         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;VAR&quot;</span>) == 0)
<a name="l01667"></a>01667           pushfont(font = <a class="code" href="Enumerations_8H.html#afc9d9ab48f1f9ff634c30fd2af4bb8ad" title="Courier italic.">FL_COURIER_ITALIC</a>, fsize);
<a name="l01668"></a>01668         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/B&quot;</span>) == 0 ||
<a name="l01669"></a>01669                  strcasecmp(buf, <span class="stringliteral">&quot;/STRONG&quot;</span>) == 0 ||
<a name="l01670"></a>01670                  strcasecmp(buf, <span class="stringliteral">&quot;/I&quot;</span>) == 0 ||
<a name="l01671"></a>01671                  strcasecmp(buf, <span class="stringliteral">&quot;/EM&quot;</span>) == 0 ||
<a name="l01672"></a>01672                  strcasecmp(buf, <span class="stringliteral">&quot;/CODE&quot;</span>) == 0 ||
<a name="l01673"></a>01673                  strcasecmp(buf, <span class="stringliteral">&quot;/TT&quot;</span>) == 0 ||
<a name="l01674"></a>01674                  strcasecmp(buf, <span class="stringliteral">&quot;/KBD&quot;</span>) == 0 ||
<a name="l01675"></a>01675                  strcasecmp(buf, <span class="stringliteral">&quot;/VAR&quot;</span>) == 0)
<a name="l01676"></a>01676           popfont(font, fsize, fcolor);
<a name="l01677"></a>01677         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;IMG&quot;</span>) == 0)
<a name="l01678"></a>01678         {
<a name="l01679"></a>01679           <a class="code" href="classFl__Shared__Image.html">Fl_Shared_Image</a>       *img = 0;
<a name="l01680"></a>01680           <span class="keywordtype">int</span>           <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l01681"></a>01681           <span class="keywordtype">int</span>           <a class="code" href="png_8h.html#aabca0b2ed5d849f535861a33f2b3cf61">height</a>;
<a name="l01682"></a>01682 
<a name="l01683"></a>01683 
<a name="l01684"></a>01684           get_attr(attrs, <span class="stringliteral">&quot;WIDTH&quot;</span>, wattr, <span class="keyword">sizeof</span>(wattr));
<a name="l01685"></a>01685           get_attr(attrs, <span class="stringliteral">&quot;HEIGHT&quot;</span>, hattr, <span class="keyword">sizeof</span>(hattr));
<a name="l01686"></a>01686           width  = get_length(wattr);
<a name="l01687"></a>01687           height = get_length(hattr);
<a name="l01688"></a>01688 
<a name="l01689"></a>01689           <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;SRC&quot;</span>, attr, <span class="keyword">sizeof</span>(attr))) {
<a name="l01690"></a>01690             img    = get_image(attr, width, height);
<a name="l01691"></a>01691             width  = img-&gt;<a class="code" href="classFl__Image.html#ac99df85a5ccd161b2b39042231aa2985">w</a>();
<a name="l01692"></a>01692             height = img-&gt;<a class="code" href="classFl__Image.html#a64dbb6fe30e3080a24f718231b371a17">h</a>();
<a name="l01693"></a>01693           }
<a name="l01694"></a>01694 
<a name="l01695"></a>01695           ww = <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l01696"></a>01696 
<a name="l01697"></a>01697           <span class="keywordflow">if</span> (ww &gt; hsize_) {
<a name="l01698"></a>01698             hsize_ = ww;
<a name="l01699"></a>01699             done   = 0;
<a name="l01700"></a>01700             <span class="keywordflow">break</span>;
<a name="l01701"></a>01701           }
<a name="l01702"></a>01702 
<a name="l01703"></a>01703           <span class="keywordflow">if</span> (needspace &amp;&amp; xx &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>)
<a name="l01704"></a>01704             ww += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l01705"></a>01705 
<a name="l01706"></a>01706           <span class="keywordflow">if</span> ((xx + ww) &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>)
<a name="l01707"></a>01707           {
<a name="l01708"></a>01708             line     = do_align(block, line, xx, newalign, links);
<a name="l01709"></a>01709             xx       = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01710"></a>01710             yy       += hh;
<a name="l01711"></a>01711             block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += hh;
<a name="l01712"></a>01712             hh       = 0;
<a name="l01713"></a>01713           }
<a name="l01714"></a>01714 
<a name="l01715"></a>01715           <span class="keywordflow">if</span> (linkdest[0])
<a name="l01716"></a>01716             add_link(linkdest, xx, yy - height, ww, height);
<a name="l01717"></a>01717 
<a name="l01718"></a>01718           xx += ww;
<a name="l01719"></a>01719           <span class="keywordflow">if</span> ((height + 2) &gt; hh)
<a name="l01720"></a>01720             hh = height + 2;
<a name="l01721"></a>01721 
<a name="l01722"></a>01722           needspace = 0;
<a name="l01723"></a>01723         }
<a name="l01724"></a>01724       }
<a name="l01725"></a>01725       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; pre)
<a name="l01726"></a>01726       {
<a name="l01727"></a>01727         <span class="keywordflow">if</span> (linkdest[0])
<a name="l01728"></a>01728           add_link(linkdest, xx, yy - hh, ww, hh);
<a name="l01729"></a>01729 
<a name="l01730"></a>01730         <span class="keywordflow">if</span> (xx &gt; hsize_) {
<a name="l01731"></a>01731           hsize_ = xx;
<a name="l01732"></a>01732           done   = 0;
<a name="l01733"></a>01733           <span class="keywordflow">break</span>;
<a name="l01734"></a>01734         }
<a name="l01735"></a>01735 
<a name="l01736"></a>01736         line      = do_align(block, line, xx, newalign, links);
<a name="l01737"></a>01737         xx        = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01738"></a>01738         yy        += hh;
<a name="l01739"></a>01739         block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a>  += hh;
<a name="l01740"></a>01740         needspace = 0;
<a name="l01741"></a>01741         ptr ++;
<a name="l01742"></a>01742       }
<a name="l01743"></a>01743       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isspace((*ptr)&amp;255))
<a name="l01744"></a>01744       {
<a name="l01745"></a>01745         needspace = 1;
<a name="l01746"></a>01746         <span class="keywordflow">if</span> ( pre ) {
<a name="l01747"></a>01747           xx += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l01748"></a>01748         }
<a name="l01749"></a>01749         ptr ++;
<a name="l01750"></a>01750       }
<a name="l01751"></a>01751       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&amp;&#39;</span> &amp;&amp; s &lt; (buf + <span class="keyword">sizeof</span>(buf) - 1))
<a name="l01752"></a>01752       {
<a name="l01753"></a>01753         <span class="comment">// Handle html &#39;&amp;&#39; codes, eg. &quot;&amp;amp;&quot;</span>
<a name="l01754"></a>01754         ptr ++;
<a name="l01755"></a>01755 
<a name="l01756"></a>01756         <span class="keywordtype">int</span> qch = quote_char(ptr);
<a name="l01757"></a>01757 
<a name="l01758"></a>01758         <span class="keywordflow">if</span> (qch &lt; 0)
<a name="l01759"></a>01759           *s++ = <span class="charliteral">&#39;&amp;&#39;</span>;
<a name="l01760"></a>01760         <span class="keywordflow">else</span> {
<a name="l01761"></a>01761           <span class="keywordtype">int</span> l;
<a name="l01762"></a>01762           l = <a class="code" href="group__fl__unicode.html#gae608a28bc43f10014343483ed3d5e99c">fl_utf8encode</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) qch, s);
<a name="l01763"></a>01763           <span class="keywordflow">if</span> (l &lt; 1) l = 1;
<a name="l01764"></a>01764           s += l;
<a name="l01765"></a>01765           ptr = strchr(ptr, <span class="charliteral">&#39;;&#39;</span>) + 1;
<a name="l01766"></a>01766         }
<a name="l01767"></a>01767 
<a name="l01768"></a>01768         <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l01769"></a>01769           hh = fsize + 2;
<a name="l01770"></a>01770       }
<a name="l01771"></a>01771       <span class="keywordflow">else</span>
<a name="l01772"></a>01772       {
<a name="l01773"></a>01773         <span class="keywordflow">if</span> (s &lt; (buf + <span class="keyword">sizeof</span>(buf) - 1))
<a name="l01774"></a>01774           *s++ = *ptr++;
<a name="l01775"></a>01775         <span class="keywordflow">else</span>
<a name="l01776"></a>01776           ptr ++;
<a name="l01777"></a>01777 
<a name="l01778"></a>01778         <span class="keywordflow">if</span> ((fsize + 2) &gt; hh)
<a name="l01779"></a>01779           hh = fsize + 2;
<a name="l01780"></a>01780       }
<a name="l01781"></a>01781     }
<a name="l01782"></a>01782 
<a name="l01783"></a>01783     <span class="keywordflow">if</span> (s &gt; buf &amp;&amp; !head)
<a name="l01784"></a>01784     {
<a name="l01785"></a>01785       *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01786"></a>01786       ww = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(buf);
<a name="l01787"></a>01787 
<a name="l01788"></a>01788   <span class="comment">//    printf(&quot;line = %d, xx = %d, ww = %d, block-&gt;x = %d, block-&gt;w = %d\n&quot;,</span>
<a name="l01789"></a>01789   <span class="comment">//       line, xx, ww, block-&gt;x, block-&gt;w);</span>
<a name="l01790"></a>01790 
<a name="l01791"></a>01791       <span class="keywordflow">if</span> (ww &gt; hsize_) {
<a name="l01792"></a>01792         hsize_ = ww;
<a name="l01793"></a>01793         done   = 0;
<a name="l01794"></a>01794         <span class="keywordflow">break</span>;
<a name="l01795"></a>01795       }
<a name="l01796"></a>01796 
<a name="l01797"></a>01797       <span class="keywordflow">if</span> (needspace &amp;&amp; xx &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>)
<a name="l01798"></a>01798         ww += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l01799"></a>01799 
<a name="l01800"></a>01800       <span class="keywordflow">if</span> ((xx + ww) &gt; block-&gt;<a class="code" href="structFl__Help__Block.html#a523f8af8f14bac47a48e87b8b73b6890">w</a>)
<a name="l01801"></a>01801       {
<a name="l01802"></a>01802         line     = do_align(block, line, xx, newalign, links);
<a name="l01803"></a>01803         xx       = block-&gt;<a class="code" href="structFl__Help__Block.html#aee9b1066b0b87362519b0aaa0bd5b525">x</a>;
<a name="l01804"></a>01804         yy       += hh;
<a name="l01805"></a>01805         block-&gt;<a class="code" href="structFl__Help__Block.html#a82bad3dd262b0b6e2f0edbe08fb91e67">h</a> += hh;
<a name="l01806"></a>01806         hh       = 0;
<a name="l01807"></a>01807       }
<a name="l01808"></a>01808 
<a name="l01809"></a>01809       <span class="keywordflow">if</span> (linkdest[0])
<a name="l01810"></a>01810         add_link(linkdest, xx, yy - fsize, ww, fsize);
<a name="l01811"></a>01811 
<a name="l01812"></a>01812       xx += ww;
<a name="l01813"></a>01813     }
<a name="l01814"></a>01814 
<a name="l01815"></a>01815     do_align(block, line, xx, newalign, links);
<a name="l01816"></a>01816 
<a name="l01817"></a>01817     block-&gt;<a class="code" href="structFl__Help__Block.html#a95ecbb64e5a5653941534f03d23fa04f">end</a> = <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;
<a name="l01818"></a>01818     size_      = yy + hh;
<a name="l01819"></a>01819   }
<a name="l01820"></a>01820 
<a name="l01821"></a>01821 <span class="comment">//  printf(&quot;margins.depth_=%d\n&quot;, margins.depth_);</span>
<a name="l01822"></a>01822 
<a name="l01823"></a>01823   <span class="keywordflow">if</span> (ntargets_ &gt; 1)
<a name="l01824"></a>01824     qsort(targets_, ntargets_, <span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a>),
<a name="l01825"></a>01825           (<a class="code" href="Fl__Help__View_8cxx.html#a8b9be097479980ff6481d99f34c666e8">compare_func_t</a>)compare_targets);
<a name="l01826"></a>01826 
<a name="l01827"></a>01827   <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#acafd1211381c8640d68a685ac2eea5d2">dx</a> = <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b) - <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(b);
<a name="l01828"></a>01828   <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#a4cffdba1345d329bb97e76579d57fa21">dy</a> = <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b) - <a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(b);
<a name="l01829"></a>01829   <span class="keywordtype">int</span> ss = scrollbar_size_ ? scrollbar_size_ : <a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">Fl::scrollbar_size</a>();
<a name="l01830"></a>01830   <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#aa9a312e633cb49c844d276b4b4531a1e">dw</a> = <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b) + ss;
<a name="l01831"></a>01831   <span class="keywordtype">int</span> <a class="code" href="fl__boxtype_8cxx.html#a581d58dd2f0951cc942c044e1aed6735">dh</a> = <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b);
<a name="l01832"></a>01832 
<a name="l01833"></a>01833   <span class="keywordflow">if</span> (hsize_ &gt; (<a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - dw)) {
<a name="l01834"></a>01834     hscrollbar_.<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l01835"></a>01835 
<a name="l01836"></a>01836     dh += ss;
<a name="l01837"></a>01837 
<a name="l01838"></a>01838     <span class="keywordflow">if</span> (size_ &lt; (<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - dh)) {
<a name="l01839"></a>01839       scrollbar_.<a class="code" href="classFl__Widget.html#a1fe8405b86da29d147dc3b5841cf181c">hide</a>();
<a name="l01840"></a>01840       hscrollbar_.<a class="code" href="classFl__Widget.html#aca98267e7a9b94f699ebd27d9f59e8bb">resize</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(b), <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - ss - dy,
<a name="l01841"></a>01841                          <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b), ss);
<a name="l01842"></a>01842     } <span class="keywordflow">else</span> {
<a name="l01843"></a>01843       scrollbar_.<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l01844"></a>01844       scrollbar_.<a class="code" href="classFl__Widget.html#aca98267e7a9b94f699ebd27d9f59e8bb">resize</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - ss - dx, <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + <a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(b),
<a name="l01845"></a>01845                         ss, <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - ss - <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b));
<a name="l01846"></a>01846       hscrollbar_.<a class="code" href="classFl__Widget.html#aca98267e7a9b94f699ebd27d9f59e8bb">resize</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(b), <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - ss - dy,
<a name="l01847"></a>01847                          <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - ss - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b), ss);
<a name="l01848"></a>01848     }
<a name="l01849"></a>01849   } <span class="keywordflow">else</span> {
<a name="l01850"></a>01850     hscrollbar_.<a class="code" href="classFl__Widget.html#a1fe8405b86da29d147dc3b5841cf181c">hide</a>();
<a name="l01851"></a>01851 
<a name="l01852"></a>01852     <span class="keywordflow">if</span> (size_ &lt; (<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - dh)) scrollbar_.<a class="code" href="classFl__Widget.html#a1fe8405b86da29d147dc3b5841cf181c">hide</a>();
<a name="l01853"></a>01853     <span class="keywordflow">else</span> {
<a name="l01854"></a>01854       scrollbar_.<a class="code" href="classFl__Widget.html#aca98267e7a9b94f699ebd27d9f59e8bb">resize</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - ss - dx, <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + <a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(b),
<a name="l01855"></a>01855                         ss, <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b));
<a name="l01856"></a>01856       scrollbar_.<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l01857"></a>01857     }
<a name="l01858"></a>01858   }
<a name="l01859"></a>01859 
<a name="l01860"></a>01860   <span class="comment">// Reset scrolling if it needs to be...</span>
<a name="l01861"></a>01861   <span class="keywordflow">if</span> (scrollbar_.<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>()) {
<a name="l01862"></a>01862     <span class="keywordtype">int</span> temph = <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b);
<a name="l01863"></a>01863     <span class="keywordflow">if</span> (hscrollbar_.<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>()) temph -= ss;
<a name="l01864"></a>01864     <span class="keywordflow">if</span> ((topline_ + temph) &gt; size_) <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(size_ - temph);
<a name="l01865"></a>01865     <span class="keywordflow">else</span> <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(topline_);
<a name="l01866"></a>01866   } <span class="keywordflow">else</span> <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(0);
<a name="l01867"></a>01867 
<a name="l01868"></a>01868   <span class="keywordflow">if</span> (hscrollbar_.<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>()) {
<a name="l01869"></a>01869     <span class="keywordtype">int</span> tempw = <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - ss - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b);
<a name="l01870"></a>01870     <span class="keywordflow">if</span> ((leftline_ + tempw) &gt; hsize_) <a class="code" href="classFl__Help__View.html#a7953715fdd526ba4c3488569cf7ccfd9">leftline</a>(hsize_ - tempw);
<a name="l01871"></a>01871     <span class="keywordflow">else</span> <a class="code" href="classFl__Help__View.html#a7953715fdd526ba4c3488569cf7ccfd9">leftline</a>(leftline_);
<a name="l01872"></a>01872   } <span class="keywordflow">else</span> <a class="code" href="classFl__Help__View.html#a7953715fdd526ba4c3488569cf7ccfd9">leftline</a>(0);
<a name="l01873"></a>01873 }
<a name="l01874"></a>01874 
<a name="l01875"></a>01875 
<a name="l01877"></a>01877 <span class="keywordtype">void</span>
<a name="l01878"></a>01878 Fl_Help_View::format_table(<span class="keywordtype">int</span>        *table_width,     <span class="comment">// O - Total table width</span>
<a name="l01879"></a>01879                            <span class="keywordtype">int</span>        *columns,         <span class="comment">// O - Column widths</span>
<a name="l01880"></a>01880                            <span class="keyword">const</span> <span class="keywordtype">char</span> *table)           <span class="comment">// I - Pointer to start of table</span>
<a name="l01881"></a>01881 {
<a name="l01882"></a>01882   <span class="keywordtype">int</span>           column,                                 <span class="comment">// Current column</span>
<a name="l01883"></a>01883                 num_columns,                            <span class="comment">// Number of columns</span>
<a name="l01884"></a>01884                 colspan,                                <span class="comment">// COLSPAN attribute</span>
<a name="l01885"></a>01885                 <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>,                                  <span class="comment">// Current width</span>
<a name="l01886"></a>01886                 temp_width,                             <span class="comment">// Temporary width</span>
<a name="l01887"></a>01887                 max_width,                              <span class="comment">// Maximum width</span>
<a name="l01888"></a>01888                 incell,                                 <span class="comment">// In a table cell?</span>
<a name="l01889"></a>01889                 pre,                                    <span class="comment">// &lt;PRE&gt; text?</span>
<a name="l01890"></a>01890                 needspace;                              <span class="comment">// Need whitespace?</span>
<a name="l01891"></a>01891   <span class="keywordtype">char</span>          *s,                                     <span class="comment">// Pointer into buffer</span>
<a name="l01892"></a>01892                 buf[1024],                              <span class="comment">// Text buffer</span>
<a name="l01893"></a>01893                 attr[1024],                             <span class="comment">// Other attribute</span>
<a name="l01894"></a>01894                 wattr[1024],                            <span class="comment">// WIDTH attribute</span>
<a name="l01895"></a>01895                 hattr[1024];                            <span class="comment">// HEIGHT attribute</span>
<a name="l01896"></a>01896   <span class="keyword">const</span> <span class="keywordtype">char</span>    *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>,                                   <span class="comment">// Pointer into table</span>
<a name="l01897"></a>01897                 *attrs,                                 <span class="comment">// Pointer to attributes</span>
<a name="l01898"></a>01898                 *<a class="code" href="png_8h.html#a96c2a358dab02570791a4c9072aecf60">start</a>;                                 <span class="comment">// Start of element</span>
<a name="l01899"></a>01899   <span class="keywordtype">int</span>           minwidths[<a class="code" href="Fl__Help__View_8cxx.html#a2cc6f39fc4594f0e734b2588129fba03">MAX_COLUMNS</a>];                 <span class="comment">// Minimum widths for each column</span>
<a name="l01900"></a>01900   <a class="code" href="Enumerations_8H.html#a2ac46d9f082834b969fffe490a03a709">Fl_Font</a>       font;
<a name="l01901"></a>01901   <a class="code" href="Enumerations_8H.html#ad58927f5c691454480f7cd28362502f1">Fl_Fontsize</a>   fsize;                                  <span class="comment">// Current font and size</span>
<a name="l01902"></a>01902   <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>      fcolor;                                 <span class="comment">// Currrent font color</span>
<a name="l01903"></a>01903 
<a name="l01904"></a>01904   <span class="comment">// Clear widths...</span>
<a name="l01905"></a>01905   *table_width = 0;
<a name="l01906"></a>01906   <span class="keywordflow">for</span> (column = 0; column &lt; <a class="code" href="Fl__Help__View_8cxx.html#a2cc6f39fc4594f0e734b2588129fba03">MAX_COLUMNS</a>; column ++)
<a name="l01907"></a>01907   {
<a name="l01908"></a>01908     columns[column]   = 0;
<a name="l01909"></a>01909     minwidths[column] = 0;
<a name="l01910"></a>01910   }
<a name="l01911"></a>01911 
<a name="l01912"></a>01912   num_columns = 0;
<a name="l01913"></a>01913   colspan     = 0;
<a name="l01914"></a>01914   max_width   = 0;
<a name="l01915"></a>01915   pre         = 0;
<a name="l01916"></a>01916   needspace   = 0;
<a name="l01917"></a>01917   fstack_.<a class="code" href="structFl__Help__Font__Stack.html#a3e595bc9d80ba29e1f10d9dfab8435e3">top</a>(font, fsize, fcolor);
<a name="l01918"></a>01918 
<a name="l01919"></a>01919   <span class="comment">// Scan the table...</span>
<a name="l01920"></a>01920   <span class="keywordflow">for</span> (ptr = table, column = -1, width = 0, s = buf, incell = 0; *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;)
<a name="l01921"></a>01921   {
<a name="l01922"></a>01922     <span class="keywordflow">if</span> ((*ptr == <span class="charliteral">&#39;&lt;&#39;</span> || isspace((*ptr)&amp;255)) &amp;&amp; s &gt; buf &amp;&amp; incell)
<a name="l01923"></a>01923     {
<a name="l01924"></a>01924       <span class="comment">// Check width...</span>
<a name="l01925"></a>01925       <span class="keywordflow">if</span> (needspace)
<a name="l01926"></a>01926       {
<a name="l01927"></a>01927         *s++      = <span class="charliteral">&#39; &#39;</span>;
<a name="l01928"></a>01928         needspace = 0;
<a name="l01929"></a>01929       }
<a name="l01930"></a>01930 
<a name="l01931"></a>01931       *s         = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01932"></a>01932       temp_width = (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(buf);
<a name="l01933"></a>01933       s          = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l01934"></a>01934 
<a name="l01935"></a>01935       <span class="keywordflow">if</span> (temp_width &gt; minwidths[column])
<a name="l01936"></a>01936         minwidths[column] = temp_width;
<a name="l01937"></a>01937 
<a name="l01938"></a>01938       width += temp_width;
<a name="l01939"></a>01939 
<a name="l01940"></a>01940       <span class="keywordflow">if</span> (width &gt; max_width)
<a name="l01941"></a>01941         max_width = <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l01942"></a>01942     }
<a name="l01943"></a>01943 
<a name="l01944"></a>01944     <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&lt;&#39;</span>)
<a name="l01945"></a>01945     {
<a name="l01946"></a>01946       start = <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;
<a name="l01947"></a>01947 
<a name="l01948"></a>01948       <span class="keywordflow">for</span> (s = buf, ptr ++; *ptr &amp;&amp; *ptr != <span class="charliteral">&#39;&gt;&#39;</span> &amp;&amp; !isspace((*ptr)&amp;255);)
<a name="l01949"></a>01949         <span class="keywordflow">if</span> (s &lt; (buf + <span class="keyword">sizeof</span>(buf) - 1))
<a name="l01950"></a>01950           *s++ = *ptr++;
<a name="l01951"></a>01951         <span class="keywordflow">else</span>
<a name="l01952"></a>01952           ptr ++;
<a name="l01953"></a>01953 
<a name="l01954"></a>01954       *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01955"></a>01955       s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l01956"></a>01956 
<a name="l01957"></a>01957       attrs = <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;
<a name="l01958"></a>01958       <span class="keywordflow">while</span> (*ptr &amp;&amp; *ptr != <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l01959"></a>01959         ptr ++;
<a name="l01960"></a>01960 
<a name="l01961"></a>01961       <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l01962"></a>01962         ptr ++;
<a name="l01963"></a>01963 
<a name="l01964"></a>01964       <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;BR&quot;</span>) == 0 ||
<a name="l01965"></a>01965           strcasecmp(buf, <span class="stringliteral">&quot;HR&quot;</span>) == 0)
<a name="l01966"></a>01966       {
<a name="l01967"></a>01967         width     = 0;
<a name="l01968"></a>01968         needspace = 0;
<a name="l01969"></a>01969       }
<a name="l01970"></a>01970       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TABLE&quot;</span>) == 0 &amp;&amp; start &gt; table)
<a name="l01971"></a>01971         <span class="keywordflow">break</span>;
<a name="l01972"></a>01972       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;CENTER&quot;</span>) == 0 ||
<a name="l01973"></a>01973                strcasecmp(buf, <span class="stringliteral">&quot;P&quot;</span>) == 0 ||
<a name="l01974"></a>01974                strcasecmp(buf, <span class="stringliteral">&quot;H1&quot;</span>) == 0 ||
<a name="l01975"></a>01975                strcasecmp(buf, <span class="stringliteral">&quot;H2&quot;</span>) == 0 ||
<a name="l01976"></a>01976                strcasecmp(buf, <span class="stringliteral">&quot;H3&quot;</span>) == 0 ||
<a name="l01977"></a>01977                strcasecmp(buf, <span class="stringliteral">&quot;H4&quot;</span>) == 0 ||
<a name="l01978"></a>01978                strcasecmp(buf, <span class="stringliteral">&quot;H5&quot;</span>) == 0 ||
<a name="l01979"></a>01979                strcasecmp(buf, <span class="stringliteral">&quot;H6&quot;</span>) == 0 ||
<a name="l01980"></a>01980                strcasecmp(buf, <span class="stringliteral">&quot;UL&quot;</span>) == 0 ||
<a name="l01981"></a>01981                strcasecmp(buf, <span class="stringliteral">&quot;OL&quot;</span>) == 0 ||
<a name="l01982"></a>01982                strcasecmp(buf, <span class="stringliteral">&quot;DL&quot;</span>) == 0 ||
<a name="l01983"></a>01983                strcasecmp(buf, <span class="stringliteral">&quot;LI&quot;</span>) == 0 ||
<a name="l01984"></a>01984                strcasecmp(buf, <span class="stringliteral">&quot;DD&quot;</span>) == 0 ||
<a name="l01985"></a>01985                strcasecmp(buf, <span class="stringliteral">&quot;DT&quot;</span>) == 0 ||
<a name="l01986"></a>01986                strcasecmp(buf, <span class="stringliteral">&quot;PRE&quot;</span>) == 0)
<a name="l01987"></a>01987       {
<a name="l01988"></a>01988         width     = 0;
<a name="l01989"></a>01989         needspace = 0;
<a name="l01990"></a>01990 
<a name="l01991"></a>01991         <span class="keywordflow">if</span> (tolower(buf[0]) == <span class="charliteral">&#39;h&#39;</span> &amp;&amp; isdigit(buf[1]))
<a name="l01992"></a>01992         {
<a name="l01993"></a>01993           font  = <a class="code" href="Enumerations_8H.html#ae52b5d98292bf142ea1c7468d7d732cd" title="Helvetica (or Arial) bold.">FL_HELVETICA_BOLD</a>;
<a name="l01994"></a>01994           fsize = textsize_ + <span class="charliteral">&#39;7&#39;</span> - buf[1];
<a name="l01995"></a>01995         }
<a name="l01996"></a>01996         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;DT&quot;</span>) == 0)
<a name="l01997"></a>01997         {
<a name="l01998"></a>01998           font  = textfont_ | <a class="code" href="Enumerations_8H.html#abdc8e2cce930b923594df50760299776" title="add this to helvetica, courier, or times">FL_ITALIC</a>;
<a name="l01999"></a>01999           fsize = textsize_;
<a name="l02000"></a>02000         }
<a name="l02001"></a>02001         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;PRE&quot;</span>) == 0)
<a name="l02002"></a>02002         {
<a name="l02003"></a>02003           font  = <a class="code" href="Enumerations_8H.html#ae722fe030bd9bcba33f045098295579d" title="Courier normal.">FL_COURIER</a>;
<a name="l02004"></a>02004           fsize = textsize_;
<a name="l02005"></a>02005           pre   = 1;
<a name="l02006"></a>02006         }
<a name="l02007"></a>02007         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;LI&quot;</span>) == 0)
<a name="l02008"></a>02008         {
<a name="l02009"></a>02009           width  += 4 * fsize;
<a name="l02010"></a>02010           font   = textfont_;
<a name="l02011"></a>02011           fsize  = textsize_;
<a name="l02012"></a>02012         }
<a name="l02013"></a>02013         <span class="keywordflow">else</span>
<a name="l02014"></a>02014         {
<a name="l02015"></a>02015           font  = textfont_;
<a name="l02016"></a>02016           fsize = textsize_;
<a name="l02017"></a>02017         }
<a name="l02018"></a>02018 
<a name="l02019"></a>02019         pushfont(font, fsize);
<a name="l02020"></a>02020       }
<a name="l02021"></a>02021       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/CENTER&quot;</span>) == 0 ||
<a name="l02022"></a>02022                strcasecmp(buf, <span class="stringliteral">&quot;/P&quot;</span>) == 0 ||
<a name="l02023"></a>02023                strcasecmp(buf, <span class="stringliteral">&quot;/H1&quot;</span>) == 0 ||
<a name="l02024"></a>02024                strcasecmp(buf, <span class="stringliteral">&quot;/H2&quot;</span>) == 0 ||
<a name="l02025"></a>02025                strcasecmp(buf, <span class="stringliteral">&quot;/H3&quot;</span>) == 0 ||
<a name="l02026"></a>02026                strcasecmp(buf, <span class="stringliteral">&quot;/H4&quot;</span>) == 0 ||
<a name="l02027"></a>02027                strcasecmp(buf, <span class="stringliteral">&quot;/H5&quot;</span>) == 0 ||
<a name="l02028"></a>02028                strcasecmp(buf, <span class="stringliteral">&quot;/H6&quot;</span>) == 0 ||
<a name="l02029"></a>02029                strcasecmp(buf, <span class="stringliteral">&quot;/PRE&quot;</span>) == 0 ||
<a name="l02030"></a>02030                strcasecmp(buf, <span class="stringliteral">&quot;/UL&quot;</span>) == 0 ||
<a name="l02031"></a>02031                strcasecmp(buf, <span class="stringliteral">&quot;/OL&quot;</span>) == 0 ||
<a name="l02032"></a>02032                strcasecmp(buf, <span class="stringliteral">&quot;/DL&quot;</span>) == 0)
<a name="l02033"></a>02033       {
<a name="l02034"></a>02034         width     = 0;
<a name="l02035"></a>02035         needspace = 0;
<a name="l02036"></a>02036 
<a name="l02037"></a>02037         popfont(font, fsize, fcolor);
<a name="l02038"></a>02038       }
<a name="l02039"></a>02039       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TR&quot;</span>) == 0 || strcasecmp(buf, <span class="stringliteral">&quot;/TR&quot;</span>) == 0 ||
<a name="l02040"></a>02040                strcasecmp(buf, <span class="stringliteral">&quot;/TABLE&quot;</span>) == 0)
<a name="l02041"></a>02041       {
<a name="l02042"></a>02042 <span class="comment">//        printf(&quot;%s column = %d, colspan = %d, num_columns = %d\n&quot;,</span>
<a name="l02043"></a>02043 <span class="comment">//             buf, column, colspan, num_columns);</span>
<a name="l02044"></a>02044 
<a name="l02045"></a>02045         <span class="keywordflow">if</span> (column &gt;= 0)
<a name="l02046"></a>02046         {
<a name="l02047"></a>02047           <span class="comment">// This is a hack to support COLSPAN...</span>
<a name="l02048"></a>02048           max_width /= colspan;
<a name="l02049"></a>02049 
<a name="l02050"></a>02050           <span class="keywordflow">while</span> (colspan &gt; 0)
<a name="l02051"></a>02051           {
<a name="l02052"></a>02052             <span class="keywordflow">if</span> (max_width &gt; columns[column])
<a name="l02053"></a>02053               columns[column] = max_width;
<a name="l02054"></a>02054 
<a name="l02055"></a>02055             column ++;
<a name="l02056"></a>02056             colspan --;
<a name="l02057"></a>02057           }
<a name="l02058"></a>02058         }
<a name="l02059"></a>02059 
<a name="l02060"></a>02060         <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/TABLE&quot;</span>) == 0)
<a name="l02061"></a>02061           <span class="keywordflow">break</span>;
<a name="l02062"></a>02062 
<a name="l02063"></a>02063         needspace = 0;
<a name="l02064"></a>02064         column    = -1;
<a name="l02065"></a>02065         width     = 0;
<a name="l02066"></a>02066         max_width = 0;
<a name="l02067"></a>02067         incell    = 0;
<a name="l02068"></a>02068       }
<a name="l02069"></a>02069       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TD&quot;</span>) == 0 ||
<a name="l02070"></a>02070                strcasecmp(buf, <span class="stringliteral">&quot;TH&quot;</span>) == 0)
<a name="l02071"></a>02071       {
<a name="l02072"></a>02072 <span class="comment">//        printf(&quot;BEFORE column = %d, colspan = %d, num_columns = %d\n&quot;,</span>
<a name="l02073"></a>02073 <span class="comment">//             column, colspan, num_columns);</span>
<a name="l02074"></a>02074 
<a name="l02075"></a>02075         <span class="keywordflow">if</span> (column &gt;= 0)
<a name="l02076"></a>02076         {
<a name="l02077"></a>02077           <span class="comment">// This is a hack to support COLSPAN...</span>
<a name="l02078"></a>02078           max_width /= colspan;
<a name="l02079"></a>02079 
<a name="l02080"></a>02080           <span class="keywordflow">while</span> (colspan &gt; 0)
<a name="l02081"></a>02081           {
<a name="l02082"></a>02082             <span class="keywordflow">if</span> (max_width &gt; columns[column])
<a name="l02083"></a>02083               columns[column] = max_width;
<a name="l02084"></a>02084 
<a name="l02085"></a>02085             column ++;
<a name="l02086"></a>02086             colspan --;
<a name="l02087"></a>02087           }
<a name="l02088"></a>02088         }
<a name="l02089"></a>02089         <span class="keywordflow">else</span>
<a name="l02090"></a>02090           column ++;
<a name="l02091"></a>02091 
<a name="l02092"></a>02092         <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;COLSPAN&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02093"></a>02093           colspan = atoi(attr);
<a name="l02094"></a>02094         <span class="keywordflow">else</span>
<a name="l02095"></a>02095           colspan = 1;
<a name="l02096"></a>02096 
<a name="l02097"></a>02097 <span class="comment">//        printf(&quot;AFTER column = %d, colspan = %d, num_columns = %d\n&quot;,</span>
<a name="l02098"></a>02098 <span class="comment">//             column, colspan, num_columns);</span>
<a name="l02099"></a>02099 
<a name="l02100"></a>02100         <span class="keywordflow">if</span> ((column + colspan) &gt;= num_columns)
<a name="l02101"></a>02101           num_columns = column + colspan;
<a name="l02102"></a>02102 
<a name="l02103"></a>02103         needspace = 0;
<a name="l02104"></a>02104         width     = 0;
<a name="l02105"></a>02105         incell    = 1;
<a name="l02106"></a>02106 
<a name="l02107"></a>02107         <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;TH&quot;</span>) == 0)
<a name="l02108"></a>02108           font = textfont_ | <a class="code" href="Enumerations_8H.html#a5b4c5d04c411d4c086101f5b955c556a" title="add this to helvetica, courier, or times">FL_BOLD</a>;
<a name="l02109"></a>02109         <span class="keywordflow">else</span>
<a name="l02110"></a>02110           font = textfont_;
<a name="l02111"></a>02111 
<a name="l02112"></a>02112         fsize = textsize_;
<a name="l02113"></a>02113 
<a name="l02114"></a>02114         pushfont(font, fsize);
<a name="l02115"></a>02115 
<a name="l02116"></a>02116         <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;WIDTH&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02117"></a>02117           max_width = get_length(attr);
<a name="l02118"></a>02118         <span class="keywordflow">else</span>
<a name="l02119"></a>02119           max_width = 0;
<a name="l02120"></a>02120 
<a name="l02121"></a>02121 <span class="comment">//        printf(&quot;max_width = %d\n&quot;, max_width);</span>
<a name="l02122"></a>02122       }
<a name="l02123"></a>02123       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/TD&quot;</span>) == 0 ||
<a name="l02124"></a>02124                strcasecmp(buf, <span class="stringliteral">&quot;/TH&quot;</span>) == 0)
<a name="l02125"></a>02125       {
<a name="l02126"></a>02126         incell = 0;
<a name="l02127"></a>02127         popfont(font, fsize, fcolor);
<a name="l02128"></a>02128       }
<a name="l02129"></a>02129       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;B&quot;</span>) == 0 ||
<a name="l02130"></a>02130                strcasecmp(buf, <span class="stringliteral">&quot;STRONG&quot;</span>) == 0)
<a name="l02131"></a>02131         pushfont(font |= <a class="code" href="Enumerations_8H.html#a5b4c5d04c411d4c086101f5b955c556a" title="add this to helvetica, courier, or times">FL_BOLD</a>, fsize);
<a name="l02132"></a>02132       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;I&quot;</span>) == 0 ||
<a name="l02133"></a>02133                strcasecmp(buf, <span class="stringliteral">&quot;EM&quot;</span>) == 0)
<a name="l02134"></a>02134         pushfont(font |= <a class="code" href="Enumerations_8H.html#abdc8e2cce930b923594df50760299776" title="add this to helvetica, courier, or times">FL_ITALIC</a>, fsize);
<a name="l02135"></a>02135       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;CODE&quot;</span>) == 0 ||
<a name="l02136"></a>02136                strcasecmp(buf, <span class="stringliteral">&quot;TT&quot;</span>) == 0)
<a name="l02137"></a>02137         pushfont(font = <a class="code" href="Enumerations_8H.html#ae722fe030bd9bcba33f045098295579d" title="Courier normal.">FL_COURIER</a>, fsize);
<a name="l02138"></a>02138       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;KBD&quot;</span>) == 0)
<a name="l02139"></a>02139         pushfont(font = <a class="code" href="Enumerations_8H.html#a311479135f085f16d2a7432af8f482eb" title="Courier bold.">FL_COURIER_BOLD</a>, fsize);
<a name="l02140"></a>02140       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;VAR&quot;</span>) == 0)
<a name="l02141"></a>02141         pushfont(font = <a class="code" href="Enumerations_8H.html#afc9d9ab48f1f9ff634c30fd2af4bb8ad" title="Courier italic.">FL_COURIER_ITALIC</a>, fsize);
<a name="l02142"></a>02142       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;/B&quot;</span>) == 0 ||
<a name="l02143"></a>02143                strcasecmp(buf, <span class="stringliteral">&quot;/STRONG&quot;</span>) == 0 ||
<a name="l02144"></a>02144                strcasecmp(buf, <span class="stringliteral">&quot;/I&quot;</span>) == 0 ||
<a name="l02145"></a>02145                strcasecmp(buf, <span class="stringliteral">&quot;/EM&quot;</span>) == 0 ||
<a name="l02146"></a>02146                strcasecmp(buf, <span class="stringliteral">&quot;/CODE&quot;</span>) == 0 ||
<a name="l02147"></a>02147                strcasecmp(buf, <span class="stringliteral">&quot;/TT&quot;</span>) == 0 ||
<a name="l02148"></a>02148                strcasecmp(buf, <span class="stringliteral">&quot;/KBD&quot;</span>) == 0 ||
<a name="l02149"></a>02149                strcasecmp(buf, <span class="stringliteral">&quot;/VAR&quot;</span>) == 0)
<a name="l02150"></a>02150         popfont(font, fsize, fcolor);
<a name="l02151"></a>02151       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;IMG&quot;</span>) == 0 &amp;&amp; incell)
<a name="l02152"></a>02152       {
<a name="l02153"></a>02153         <a class="code" href="classFl__Shared__Image.html">Fl_Shared_Image</a> *img = 0;
<a name="l02154"></a>02154         <span class="keywordtype">int</span>             iwidth, iheight;
<a name="l02155"></a>02155 
<a name="l02156"></a>02156 
<a name="l02157"></a>02157         get_attr(attrs, <span class="stringliteral">&quot;WIDTH&quot;</span>, wattr, <span class="keyword">sizeof</span>(wattr));
<a name="l02158"></a>02158         get_attr(attrs, <span class="stringliteral">&quot;HEIGHT&quot;</span>, hattr, <span class="keyword">sizeof</span>(hattr));
<a name="l02159"></a>02159         iwidth  = get_length(wattr);
<a name="l02160"></a>02160         iheight = get_length(hattr);
<a name="l02161"></a>02161 
<a name="l02162"></a>02162         <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;SRC&quot;</span>, attr, <span class="keyword">sizeof</span>(attr))) {
<a name="l02163"></a>02163           img     = get_image(attr, iwidth, iheight);
<a name="l02164"></a>02164           iwidth  = img-&gt;<a class="code" href="classFl__Image.html#ac99df85a5ccd161b2b39042231aa2985">w</a>();
<a name="l02165"></a>02165           iheight = img-&gt;<a class="code" href="classFl__Image.html#a64dbb6fe30e3080a24f718231b371a17">h</a>();
<a name="l02166"></a>02166         }
<a name="l02167"></a>02167 
<a name="l02168"></a>02168         <span class="keywordflow">if</span> (iwidth &gt; minwidths[column])
<a name="l02169"></a>02169           minwidths[column] = iwidth;
<a name="l02170"></a>02170 
<a name="l02171"></a>02171         width += iwidth;
<a name="l02172"></a>02172         <span class="keywordflow">if</span> (needspace)
<a name="l02173"></a>02173           width += (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(<span class="charliteral">&#39; &#39;</span>);
<a name="l02174"></a>02174 
<a name="l02175"></a>02175         <span class="keywordflow">if</span> (width &gt; max_width)
<a name="l02176"></a>02176           max_width = <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l02177"></a>02177 
<a name="l02178"></a>02178         needspace = 0;
<a name="l02179"></a>02179       }
<a name="l02180"></a>02180     }
<a name="l02181"></a>02181     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; pre)
<a name="l02182"></a>02182     {
<a name="l02183"></a>02183       width     = 0;
<a name="l02184"></a>02184       needspace = 0;
<a name="l02185"></a>02185       ptr ++;
<a name="l02186"></a>02186     }
<a name="l02187"></a>02187     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isspace((*ptr)&amp;255))
<a name="l02188"></a>02188     {
<a name="l02189"></a>02189       needspace = 1;
<a name="l02190"></a>02190 
<a name="l02191"></a>02191       ptr ++;
<a name="l02192"></a>02192     }
<a name="l02193"></a>02193     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&amp;&#39;</span> &amp;&amp; s &lt; (buf + <span class="keyword">sizeof</span>(buf) - 1))
<a name="l02194"></a>02194     {
<a name="l02195"></a>02195       ptr ++;
<a name="l02196"></a>02196 
<a name="l02197"></a>02197       <span class="keywordtype">int</span> qch = quote_char(ptr);
<a name="l02198"></a>02198 
<a name="l02199"></a>02199       <span class="keywordflow">if</span> (qch &lt; 0)
<a name="l02200"></a>02200         *s++ = <span class="charliteral">&#39;&amp;&#39;</span>;
<a name="l02201"></a>02201       <span class="keywordflow">else</span> {
<a name="l02202"></a>02202 <span class="comment">//        int l;</span>
<a name="l02203"></a>02203 <span class="comment">//        l = fl_utf8encode((unsigned int) qch, s);</span>
<a name="l02204"></a>02204 <span class="comment">//        if (l &lt; 1) l = 1;</span>
<a name="l02205"></a>02205 <span class="comment">//        s += l;</span>
<a name="l02206"></a>02206         *s++ = qch;
<a name="l02207"></a>02207         ptr = strchr(ptr, <span class="charliteral">&#39;;&#39;</span>) + 1;
<a name="l02208"></a>02208       }
<a name="l02209"></a>02209     }
<a name="l02210"></a>02210     <span class="keywordflow">else</span>
<a name="l02211"></a>02211     {
<a name="l02212"></a>02212       <span class="keywordflow">if</span> (s &lt; (buf + <span class="keyword">sizeof</span>(buf) - 1))
<a name="l02213"></a>02213         *s++ = *ptr++;
<a name="l02214"></a>02214       <span class="keywordflow">else</span>
<a name="l02215"></a>02215         ptr ++;
<a name="l02216"></a>02216     }
<a name="l02217"></a>02217   }
<a name="l02218"></a>02218 
<a name="l02219"></a>02219   <span class="comment">// Now that we have scanned the entire table, adjust the table and</span>
<a name="l02220"></a>02220   <span class="comment">// cell widths to fit on the screen...</span>
<a name="l02221"></a>02221   <span class="keywordflow">if</span> (get_attr(table + 6, <span class="stringliteral">&quot;WIDTH&quot;</span>, attr, <span class="keyword">sizeof</span>(attr)))
<a name="l02222"></a>02222     *table_width = get_length(attr);
<a name="l02223"></a>02223   <span class="keywordflow">else</span>
<a name="l02224"></a>02224     *table_width = 0;
<a name="l02225"></a>02225 
<a name="l02226"></a>02226 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l02227"></a>02227 <span class="preprocessor"></span>  printf(<span class="stringliteral">&quot;num_columns = %d, table_width = %d\n&quot;</span>, num_columns, *table_width);
<a name="l02228"></a>02228 <span class="preprocessor">#endif // DEBUG</span>
<a name="l02229"></a>02229 <span class="preprocessor"></span>
<a name="l02230"></a>02230   <span class="keywordflow">if</span> (num_columns == 0)
<a name="l02231"></a>02231     <span class="keywordflow">return</span>;
<a name="l02232"></a>02232 
<a name="l02233"></a>02233   <span class="comment">// Add up the widths...</span>
<a name="l02234"></a>02234   <span class="keywordflow">for</span> (column = 0, width = 0; column &lt; num_columns; column ++)
<a name="l02235"></a>02235     width += columns[column];
<a name="l02236"></a>02236 
<a name="l02237"></a>02237 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l02238"></a>02238 <span class="preprocessor"></span>  printf(<span class="stringliteral">&quot;width = %d, w() = %d\n&quot;</span>, width, <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>());
<a name="l02239"></a>02239   <span class="keywordflow">for</span> (column = 0; column &lt; num_columns; column ++)
<a name="l02240"></a>02240     printf(<span class="stringliteral">&quot;    columns[%d] = %d, minwidths[%d] = %d\n&quot;</span>, column, columns[column],
<a name="l02241"></a>02241            column, minwidths[column]);
<a name="l02242"></a>02242 <span class="preprocessor">#endif // DEBUG</span>
<a name="l02243"></a>02243 <span class="preprocessor"></span>
<a name="l02244"></a>02244   <span class="comment">// Adjust the width if needed...</span>
<a name="l02245"></a>02245   <span class="keywordtype">int</span> scale_width = *table_width;
<a name="l02246"></a>02246 
<a name="l02247"></a>02247   <span class="keywordtype">int</span> scrollsize = scrollbar_size_ ? scrollbar_size_ : <a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">Fl::scrollbar_size</a>();
<a name="l02248"></a>02248   <span class="keywordflow">if</span> (scale_width == 0) {
<a name="l02249"></a>02249     <span class="keywordflow">if</span> (width &gt; (hsize_ - scrollsize)) scale_width = hsize_ - scrollsize;
<a name="l02250"></a>02250     <span class="keywordflow">else</span> scale_width = <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l02251"></a>02251   }
<a name="l02252"></a>02252 
<a name="l02253"></a>02253   <span class="keywordflow">if</span> (width &lt; scale_width) {
<a name="l02254"></a>02254 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l02255"></a>02255 <span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;Scaling table up to %d from %d...\n&quot;</span>, scale_width, width);
<a name="l02256"></a>02256 <span class="preprocessor">#endif // DEBUG</span>
<a name="l02257"></a>02257 <span class="preprocessor"></span>
<a name="l02258"></a>02258     *table_width = 0;
<a name="l02259"></a>02259 
<a name="l02260"></a>02260     scale_width = (scale_width - <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>) / num_columns;
<a name="l02261"></a>02261 
<a name="l02262"></a>02262 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l02263"></a>02263 <span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;adjusted scale_width = %d\n&quot;</span>, scale_width);
<a name="l02264"></a>02264 <span class="preprocessor">#endif // DEBUG</span>
<a name="l02265"></a>02265 <span class="preprocessor"></span>
<a name="l02266"></a>02266     <span class="keywordflow">for</span> (column = 0; column &lt; num_columns; column ++) {
<a name="l02267"></a>02267       columns[column] += scale_width;
<a name="l02268"></a>02268 
<a name="l02269"></a>02269       (*table_width) += columns[column];
<a name="l02270"></a>02270     }
<a name="l02271"></a>02271   }
<a name="l02272"></a>02272   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (width &gt; scale_width) {
<a name="l02273"></a>02273 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l02274"></a>02274 <span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;Scaling table down to %d from %d...\n&quot;</span>, scale_width, width);
<a name="l02275"></a>02275 <span class="preprocessor">#endif // DEBUG</span>
<a name="l02276"></a>02276 <span class="preprocessor"></span>
<a name="l02277"></a>02277     <span class="keywordflow">for</span> (column = 0; column &lt; num_columns; column ++) {
<a name="l02278"></a>02278       width       -= minwidths[column];
<a name="l02279"></a>02279       scale_width -= minwidths[column];
<a name="l02280"></a>02280     }
<a name="l02281"></a>02281 
<a name="l02282"></a>02282 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l02283"></a>02283 <span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;adjusted width = %d, scale_width = %d\n&quot;</span>, width, scale_width);
<a name="l02284"></a>02284 <span class="preprocessor">#endif // DEBUG</span>
<a name="l02285"></a>02285 <span class="preprocessor"></span>
<a name="l02286"></a>02286     <span class="keywordflow">if</span> (width &gt; 0) {
<a name="l02287"></a>02287       <span class="keywordflow">for</span> (column = 0; column &lt; num_columns; column ++) {
<a name="l02288"></a>02288         columns[column] -= minwidths[column];
<a name="l02289"></a>02289         columns[column] = scale_width * columns[column] / <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l02290"></a>02290         columns[column] += minwidths[column];
<a name="l02291"></a>02291       }
<a name="l02292"></a>02292     }
<a name="l02293"></a>02293 
<a name="l02294"></a>02294     *table_width = 0;
<a name="l02295"></a>02295     <span class="keywordflow">for</span> (column = 0; column &lt; num_columns; column ++) {
<a name="l02296"></a>02296       (*table_width) += columns[column];
<a name="l02297"></a>02297     }
<a name="l02298"></a>02298   }
<a name="l02299"></a>02299   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*table_width == 0)
<a name="l02300"></a>02300     *table_width = <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l02301"></a>02301 
<a name="l02302"></a>02302 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l02303"></a>02303 <span class="preprocessor"></span>  printf(<span class="stringliteral">&quot;FINAL table_width = %d\n&quot;</span>, *table_width);
<a name="l02304"></a>02304   <span class="keywordflow">for</span> (column = 0; column &lt; num_columns; column ++)
<a name="l02305"></a>02305     printf(<span class="stringliteral">&quot;    columns[%d] = %d\n&quot;</span>, column, columns[column]);
<a name="l02306"></a>02306 <span class="preprocessor">#endif // DEBUG</span>
<a name="l02307"></a>02307 <span class="preprocessor"></span>}
<a name="l02308"></a>02308 
<a name="l02309"></a>02309 
<a name="l02311"></a>02311 <span class="keywordtype">void</span>
<a name="l02312"></a>02312 Fl_Help_View::free_data() {
<a name="l02313"></a>02313   <span class="comment">// Release all images...</span>
<a name="l02314"></a>02314   <span class="keywordflow">if</span> (value_) {
<a name="l02315"></a>02315     <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>,           <span class="comment">// Pointer into block</span>
<a name="l02316"></a>02316                 *attrs;         <span class="comment">// Pointer to start of element attributes</span>
<a name="l02317"></a>02317     <span class="keywordtype">char</span>        *s,             <span class="comment">// Pointer into buffer</span>
<a name="l02318"></a>02318                 buf[1024],      <span class="comment">// Text buffer</span>
<a name="l02319"></a>02319                 attr[1024],     <span class="comment">// Attribute buffer</span>
<a name="l02320"></a>02320                 wattr[1024],    <span class="comment">// Width attribute buffer</span>
<a name="l02321"></a>02321                 hattr[1024];    <span class="comment">// Height attribute buffer</span>
<a name="l02322"></a>02322 
<a name="l02323"></a>02323     <span class="keywordflow">for</span> (ptr = value_; *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;)
<a name="l02324"></a>02324     {
<a name="l02325"></a>02325       <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&lt;&#39;</span>)
<a name="l02326"></a>02326       {
<a name="l02327"></a>02327         ptr ++;
<a name="l02328"></a>02328 
<a name="l02329"></a>02329         <span class="keywordflow">if</span> (strncmp(ptr, <span class="stringliteral">&quot;!--&quot;</span>, 3) == 0)
<a name="l02330"></a>02330         {
<a name="l02331"></a>02331           <span class="comment">// Comment...</span>
<a name="l02332"></a>02332           ptr += 3;
<a name="l02333"></a>02333           <span class="keywordflow">if</span> ((ptr = strstr(ptr, <span class="stringliteral">&quot;--&gt;&quot;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02334"></a>02334           {
<a name="l02335"></a>02335             ptr += 3;
<a name="l02336"></a>02336             <span class="keywordflow">continue</span>;
<a name="l02337"></a>02337           }
<a name="l02338"></a>02338           <span class="keywordflow">else</span>
<a name="l02339"></a>02339             <span class="keywordflow">break</span>;
<a name="l02340"></a>02340         }
<a name="l02341"></a>02341 
<a name="l02342"></a>02342         s = <a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a>;
<a name="l02343"></a>02343 
<a name="l02344"></a>02344         <span class="keywordflow">while</span> (*ptr &amp;&amp; *ptr != <span class="charliteral">&#39;&gt;&#39;</span> &amp;&amp; !isspace((*ptr)&amp;255))
<a name="l02345"></a>02345           <span class="keywordflow">if</span> (s &lt; (buf + <span class="keyword">sizeof</span>(buf) - 1))
<a name="l02346"></a>02346             *s++ = *ptr++;
<a name="l02347"></a>02347           <span class="keywordflow">else</span>
<a name="l02348"></a>02348             ptr ++;
<a name="l02349"></a>02349 
<a name="l02350"></a>02350         *s = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02351"></a>02351 
<a name="l02352"></a>02352         attrs = <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>;
<a name="l02353"></a>02353         <span class="keywordflow">while</span> (*ptr &amp;&amp; *ptr != <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l02354"></a>02354           ptr ++;
<a name="l02355"></a>02355 
<a name="l02356"></a>02356         <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l02357"></a>02357           ptr ++;
<a name="l02358"></a>02358 
<a name="l02359"></a>02359         <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;IMG&quot;</span>) == 0)
<a name="l02360"></a>02360         {
<a name="l02361"></a>02361           <a class="code" href="classFl__Shared__Image.html">Fl_Shared_Image</a>       *img;
<a name="l02362"></a>02362           <span class="keywordtype">int</span>           <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l02363"></a>02363           <span class="keywordtype">int</span>           <a class="code" href="png_8h.html#aabca0b2ed5d849f535861a33f2b3cf61">height</a>;
<a name="l02364"></a>02364 
<a name="l02365"></a>02365           get_attr(attrs, <span class="stringliteral">&quot;WIDTH&quot;</span>, wattr, <span class="keyword">sizeof</span>(wattr));
<a name="l02366"></a>02366           get_attr(attrs, <span class="stringliteral">&quot;HEIGHT&quot;</span>, hattr, <span class="keyword">sizeof</span>(hattr));
<a name="l02367"></a>02367           width  = get_length(wattr);
<a name="l02368"></a>02368           height = get_length(hattr);
<a name="l02369"></a>02369 
<a name="l02370"></a>02370           <span class="keywordflow">if</span> (get_attr(attrs, <span class="stringliteral">&quot;SRC&quot;</span>, attr, <span class="keyword">sizeof</span>(attr))) {
<a name="l02371"></a>02371             <span class="comment">// Get and release the image to free it from memory...</span>
<a name="l02372"></a>02372             img = get_image(attr, width, height);
<a name="l02373"></a>02373             <span class="keywordflow">if</span> ((<span class="keywordtype">void</span>*)img != &amp;broken_image) {
<a name="l02374"></a>02374               img-&gt;<a class="code" href="classFl__Shared__Image.html#a78812e7f8fc51248061c79bf72ae32ec">release</a>();
<a name="l02375"></a>02375             }
<a name="l02376"></a>02376           }
<a name="l02377"></a>02377         }
<a name="l02378"></a>02378       }
<a name="l02379"></a>02379       <span class="keywordflow">else</span>
<a name="l02380"></a>02380         ptr ++;
<a name="l02381"></a>02381     }
<a name="l02382"></a>02382 
<a name="l02383"></a>02383     free((<span class="keywordtype">void</span> *)value_);
<a name="l02384"></a>02384     value_ = 0;
<a name="l02385"></a>02385   }
<a name="l02386"></a>02386 
<a name="l02387"></a>02387   <span class="comment">// Free all of the arrays...</span>
<a name="l02388"></a>02388   <span class="keywordflow">if</span> (nblocks_) {
<a name="l02389"></a>02389     free(blocks_);
<a name="l02390"></a>02390 
<a name="l02391"></a>02391     ablocks_ = 0;
<a name="l02392"></a>02392     nblocks_ = 0;
<a name="l02393"></a>02393     blocks_  = 0;
<a name="l02394"></a>02394   }
<a name="l02395"></a>02395 
<a name="l02396"></a>02396   <span class="keywordflow">if</span> (nlinks_) {
<a name="l02397"></a>02397     free(links_);
<a name="l02398"></a>02398 
<a name="l02399"></a>02399     alinks_ = 0;
<a name="l02400"></a>02400     nlinks_ = 0;
<a name="l02401"></a>02401     links_  = 0;
<a name="l02402"></a>02402   }
<a name="l02403"></a>02403 
<a name="l02404"></a>02404   <span class="keywordflow">if</span> (ntargets_) {
<a name="l02405"></a>02405     free(targets_);
<a name="l02406"></a>02406 
<a name="l02407"></a>02407     atargets_ = 0;
<a name="l02408"></a>02408     ntargets_ = 0;
<a name="l02409"></a>02409     targets_  = 0;
<a name="l02410"></a>02410   }
<a name="l02411"></a>02411 }
<a name="l02412"></a>02412 
<a name="l02414"></a>02414 <span class="keywordtype">int</span>                                     <span class="comment">// O - Alignment</span>
<a name="l02415"></a>02415 Fl_Help_View::get_align(<span class="keyword">const</span> <span class="keywordtype">char</span> *p,  <span class="comment">// I - Pointer to start of attrs</span>
<a name="l02416"></a>02416                         <span class="keywordtype">int</span>        a)   <span class="comment">// I - Default alignment</span>
<a name="l02417"></a>02417 {
<a name="l02418"></a>02418   <span class="keywordtype">char</span>  buf[255];                       <span class="comment">// Alignment value</span>
<a name="l02419"></a>02419 
<a name="l02420"></a>02420 
<a name="l02421"></a>02421   <span class="keywordflow">if</span> (get_attr(p, <span class="stringliteral">&quot;ALIGN&quot;</span>, buf, <span class="keyword">sizeof</span>(buf)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02422"></a>02422     <span class="keywordflow">return</span> (a);
<a name="l02423"></a>02423 
<a name="l02424"></a>02424   <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;CENTER&quot;</span>) == 0)
<a name="l02425"></a>02425     <span class="keywordflow">return</span> (CENTER);
<a name="l02426"></a>02426   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(buf, <span class="stringliteral">&quot;RIGHT&quot;</span>) == 0)
<a name="l02427"></a>02427     <span class="keywordflow">return</span> (RIGHT);
<a name="l02428"></a>02428   <span class="keywordflow">else</span>
<a name="l02429"></a>02429     <span class="keywordflow">return</span> (LEFT);
<a name="l02430"></a>02430 }
<a name="l02431"></a>02431 
<a name="l02432"></a>02432 
<a name="l02434"></a>02434 <span class="keyword">const</span> <span class="keywordtype">char</span> *                                    <span class="comment">// O - Pointer to buf or NULL</span>
<a name="l02435"></a>02435 Fl_Help_View::get_attr(<span class="keyword">const</span> <span class="keywordtype">char</span> *p,           <span class="comment">// I - Pointer to start of attributes</span>
<a name="l02436"></a>02436                       <span class="keyword">const</span> <span class="keywordtype">char</span> *n,            <span class="comment">// I - Name of attribute</span>
<a name="l02437"></a>02437                       <span class="keywordtype">char</span>       *buf,          <span class="comment">// O - Buffer for attribute value</span>
<a name="l02438"></a>02438                       <span class="keywordtype">int</span>        bufsize)       <span class="comment">// I - Size of buffer</span>
<a name="l02439"></a>02439 {
<a name="l02440"></a>02440   <span class="keywordtype">char</span>  <a class="code" href="png_8h.html#a90cd716fdb9b68c9661c3ba908a0ceff">name</a>[255],                              <span class="comment">// Name from string</span>
<a name="l02441"></a>02441         *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>,                                   <span class="comment">// Pointer into name or value</span>
<a name="l02442"></a>02442         quote;                                  <span class="comment">// Quote</span>
<a name="l02443"></a>02443 
<a name="l02444"></a>02444 
<a name="l02445"></a>02445   buf[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02446"></a>02446 
<a name="l02447"></a>02447   <span class="keywordflow">while</span> (*p &amp;&amp; *p != <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l02448"></a>02448   {
<a name="l02449"></a>02449     <span class="keywordflow">while</span> (isspace((*p)&amp;255))
<a name="l02450"></a>02450       p ++;
<a name="l02451"></a>02451 
<a name="l02452"></a>02452     <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;&gt;&#39;</span> || !*p)
<a name="l02453"></a>02453       <span class="keywordflow">return</span> (<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l02454"></a>02454 
<a name="l02455"></a>02455     <span class="keywordflow">for</span> (ptr = name; *p &amp;&amp; !isspace((*p)&amp;255) &amp;&amp; *p != <span class="charliteral">&#39;=&#39;</span> &amp;&amp; *p != <span class="charliteral">&#39;&gt;&#39;</span>;)
<a name="l02456"></a>02456       <span class="keywordflow">if</span> (ptr &lt; (name + <span class="keyword">sizeof</span>(name) - 1))
<a name="l02457"></a>02457         *ptr++ = *p++;
<a name="l02458"></a>02458       <span class="keywordflow">else</span>
<a name="l02459"></a>02459         p ++;
<a name="l02460"></a>02460 
<a name="l02461"></a>02461     *ptr = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02462"></a>02462 
<a name="l02463"></a>02463     <span class="keywordflow">if</span> (isspace((*p)&amp;255) || !*p || *p == <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l02464"></a>02464       buf[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02465"></a>02465     <span class="keywordflow">else</span>
<a name="l02466"></a>02466     {
<a name="l02467"></a>02467       <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;=&#39;</span>)
<a name="l02468"></a>02468         p ++;
<a name="l02469"></a>02469 
<a name="l02470"></a>02470       <span class="keywordflow">for</span> (ptr = buf; *p &amp;&amp; !isspace((*p)&amp;255) &amp;&amp; *p != <span class="charliteral">&#39;&gt;&#39;</span>;)
<a name="l02471"></a>02471         <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;\&#39;&#39;</span> || *p == <span class="charliteral">&#39;\&quot;&#39;</span>)
<a name="l02472"></a>02472         {
<a name="l02473"></a>02473           quote = *p++;
<a name="l02474"></a>02474 
<a name="l02475"></a>02475           <span class="keywordflow">while</span> (*p &amp;&amp; *p != quote)
<a name="l02476"></a>02476             <span class="keywordflow">if</span> ((ptr - buf + 1) &lt; bufsize)
<a name="l02477"></a>02477               *ptr++ = *p++;
<a name="l02478"></a>02478             <span class="keywordflow">else</span>
<a name="l02479"></a>02479               p ++;
<a name="l02480"></a>02480 
<a name="l02481"></a>02481           <span class="keywordflow">if</span> (*p == quote)
<a name="l02482"></a>02482             p ++;
<a name="l02483"></a>02483         }
<a name="l02484"></a>02484         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((ptr - buf + 1) &lt; bufsize)
<a name="l02485"></a>02485           *ptr++ = *p++;
<a name="l02486"></a>02486         <span class="keywordflow">else</span>
<a name="l02487"></a>02487           p ++;
<a name="l02488"></a>02488 
<a name="l02489"></a>02489       *ptr = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02490"></a>02490     }
<a name="l02491"></a>02491 
<a name="l02492"></a>02492     <span class="keywordflow">if</span> (strcasecmp(n, name) == 0)
<a name="l02493"></a>02493       <span class="keywordflow">return</span> (buf);
<a name="l02494"></a>02494     <span class="keywordflow">else</span>
<a name="l02495"></a>02495       buf[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l02496"></a>02496 
<a name="l02497"></a>02497     <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;&gt;&#39;</span>)
<a name="l02498"></a>02498       <span class="keywordflow">return</span> (<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l02499"></a>02499   }
<a name="l02500"></a>02500 
<a name="l02501"></a>02501   <span class="keywordflow">return</span> (<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l02502"></a>02502 }
<a name="l02503"></a>02503 
<a name="l02504"></a>02504 
<a name="l02506"></a>02506 <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>                                <span class="comment">// O - Color value</span>
<a name="l02507"></a>02507 Fl_Help_View::get_color(<span class="keyword">const</span> <span class="keywordtype">char</span> *n,  <span class="comment">// I - Color name</span>
<a name="l02508"></a>02508                         <a class="code" href="Enumerations_8H.html#a8b762953646f8abee866061f1af78a6a">Fl_Color</a>   c)   <span class="comment">// I - Default color value</span>
<a name="l02509"></a>02509 {
<a name="l02510"></a>02510   <span class="keywordtype">int</span>   <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;                              <span class="comment">// Looping var</span>
<a name="l02511"></a>02511   <span class="keywordtype">int</span>   rgb, r, g, <a class="code" href="jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>;                   <span class="comment">// RGB values</span>
<a name="l02512"></a>02512   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>{                 <span class="comment">// Color name table</span>
<a name="l02513"></a>02513     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="png_8h.html#a90cd716fdb9b68c9661c3ba908a0ceff">name</a>;
<a name="l02514"></a>02514     <span class="keywordtype">int</span> r, g, <a class="code" href="jpegint_8h.html#af320905358fa78701e4cc60b6135601f">b</a>;
<a name="l02515"></a>02515   }     colors[] = {
<a name="l02516"></a>02516     { <span class="stringliteral">&quot;black&quot;</span>,          0x00, 0x00, 0x00 },
<a name="l02517"></a>02517     { <span class="stringliteral">&quot;red&quot;</span>,            0xff, 0x00, 0x00 },
<a name="l02518"></a>02518     { <span class="stringliteral">&quot;green&quot;</span>,          0x00, 0x80, 0x00 },
<a name="l02519"></a>02519     { <span class="stringliteral">&quot;yellow&quot;</span>,         0xff, 0xff, 0x00 },
<a name="l02520"></a>02520     { <span class="stringliteral">&quot;blue&quot;</span>,           0x00, 0x00, 0xff },
<a name="l02521"></a>02521     { <span class="stringliteral">&quot;magenta&quot;</span>,        0xff, 0x00, 0xff },
<a name="l02522"></a>02522     { <span class="stringliteral">&quot;fuchsia&quot;</span>,        0xff, 0x00, 0xff },
<a name="l02523"></a>02523     { <span class="stringliteral">&quot;cyan&quot;</span>,           0x00, 0xff, 0xff },
<a name="l02524"></a>02524     { <span class="stringliteral">&quot;aqua&quot;</span>,           0x00, 0xff, 0xff },
<a name="l02525"></a>02525     { <span class="stringliteral">&quot;white&quot;</span>,          0xff, 0xff, 0xff },
<a name="l02526"></a>02526     { <span class="stringliteral">&quot;gray&quot;</span>,           0x80, 0x80, 0x80 },
<a name="l02527"></a>02527     { <span class="stringliteral">&quot;grey&quot;</span>,           0x80, 0x80, 0x80 },
<a name="l02528"></a>02528     { <span class="stringliteral">&quot;lime&quot;</span>,           0x00, 0xff, 0x00 },
<a name="l02529"></a>02529     { <span class="stringliteral">&quot;maroon&quot;</span>,         0x80, 0x00, 0x00 },
<a name="l02530"></a>02530     { <span class="stringliteral">&quot;navy&quot;</span>,           0x00, 0x00, 0x80 },
<a name="l02531"></a>02531     { <span class="stringliteral">&quot;olive&quot;</span>,          0x80, 0x80, 0x00 },
<a name="l02532"></a>02532     { <span class="stringliteral">&quot;purple&quot;</span>,         0x80, 0x00, 0x80 },
<a name="l02533"></a>02533     { <span class="stringliteral">&quot;silver&quot;</span>,         0xc0, 0xc0, 0xc0 },
<a name="l02534"></a>02534     { <span class="stringliteral">&quot;teal&quot;</span>,           0x00, 0x80, 0x80 }
<a name="l02535"></a>02535   };
<a name="l02536"></a>02536 
<a name="l02537"></a>02537 
<a name="l02538"></a>02538   <span class="keywordflow">if</span> (!n || !n[0]) <span class="keywordflow">return</span> c;
<a name="l02539"></a>02539 
<a name="l02540"></a>02540   <span class="keywordflow">if</span> (n[0] == <span class="charliteral">&#39;#&#39;</span>) {
<a name="l02541"></a>02541     <span class="comment">// Do hex color lookup</span>
<a name="l02542"></a>02542     rgb = strtol(n + 1, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 16);
<a name="l02543"></a>02543 
<a name="l02544"></a>02544     <span class="keywordflow">if</span> (strlen(n) &gt; 4) {
<a name="l02545"></a>02545       r = rgb &gt;&gt; 16;
<a name="l02546"></a>02546       g = (rgb &gt;&gt; 8) &amp; 255;
<a name="l02547"></a>02547       b = rgb &amp; 255;
<a name="l02548"></a>02548     } <span class="keywordflow">else</span> {
<a name="l02549"></a>02549       r = (rgb &gt;&gt; 8) * 17;
<a name="l02550"></a>02550       g = ((rgb &gt;&gt; 4) &amp; 15) * 17;
<a name="l02551"></a>02551       b = (rgb &amp; 15) * 17;
<a name="l02552"></a>02552     }
<a name="l02553"></a>02553     <span class="keywordflow">return</span> (<a class="code" href="Enumerations_8H.html#a7c5acc4633fbab7016bce2fb69046494">fl_rgb_color</a>((<a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)r, (<a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)g, (<a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>)b));
<a name="l02554"></a>02554   } else {
<a name="l02555"></a>02555     <span class="keywordflow">for</span> (i = 0; i &lt; (<a class="code" href="png_8h.html#ab832c174e145540d491b0830fc05dbb1">int</a>)(<span class="keyword">sizeof</span>(colors) / <span class="keyword">sizeof</span>(colors[0])); i ++)
<a name="l02556"></a>02556       <span class="keywordflow">if</span> (!strcasecmp(n, colors[i].name)) {
<a name="l02557"></a>02557         <span class="keywordflow">return</span> <a class="code" href="Enumerations_8H.html#a7c5acc4633fbab7016bce2fb69046494">fl_rgb_color</a>(colors[i].r, colors[i].g, colors[i].b);
<a name="l02558"></a>02558       }
<a name="l02559"></a>02559     <span class="keywordflow">return</span> c;
<a name="l02560"></a>02560   }
<a name="l02561"></a>02561 }
<a name="l02562"></a>02562 
<a name="l02563"></a>02563 
<a name="l02577"></a>02577 <span class="comment">/* Implementation note: (A.S. Apr 05, 2009)</span>
<a name="l02578"></a>02578 <span class="comment"></span>
<a name="l02579"></a>02579 <span class="comment">  Fl_Help_View::get_image() uses a static global flag (initial_load)</span>
<a name="l02580"></a>02580 <span class="comment">  to determine, if it is called from the initial loading of a document</span>
<a name="l02581"></a>02581 <span class="comment">  (load() or value()), or from resize() or draw().</span>
<a name="l02582"></a>02582 <span class="comment"></span>
<a name="l02583"></a>02583 <span class="comment">  A better solution would be to manage all loaded images in an own</span>
<a name="l02584"></a>02584 <span class="comment">  structure like Fl_Help_Target (Fl_Help_Image ?) to avoid using this</span>
<a name="l02585"></a>02585 <span class="comment">  global flag, but this would break the ABI !</span>
<a name="l02586"></a>02586 <span class="comment"></span>
<a name="l02587"></a>02587 <span class="comment">  This should be fixed in FLTK 1.3 !</span>
<a name="l02588"></a>02588 <span class="comment"></span>
<a name="l02589"></a>02589 <span class="comment"></span>
<a name="l02590"></a>02590 <span class="comment">  If initial_load is true, then Fl_Shared_Image::get() is called to</span>
<a name="l02591"></a>02591 <span class="comment">  load the image, and the reference count of the shared image is</span>
<a name="l02592"></a>02592 <span class="comment">  increased by one.</span>
<a name="l02593"></a>02593 <span class="comment"></span>
<a name="l02594"></a>02594 <span class="comment">  If initial_load is false, then Fl_Shared_Image::find() is called to</span>
<a name="l02595"></a>02595 <span class="comment">  load the image, and the image is released immediately. This avoids</span>
<a name="l02596"></a>02596 <span class="comment">  increasing the reference count when calling get_image() from draw()</span>
<a name="l02597"></a>02597 <span class="comment">  or resize().</span>
<a name="l02598"></a>02598 <span class="comment"></span>
<a name="l02599"></a>02599 <span class="comment">  Calling Fl_Shared_Image::find() instead of Fl_Shared_Image::get() avoids</span>
<a name="l02600"></a>02600 <span class="comment">  doing unnecessary i/o for &quot;broken images&quot; within each resize/redraw.</span>
<a name="l02601"></a>02601 <span class="comment"></span>
<a name="l02602"></a>02602 <span class="comment">  Each image must be released exactly once in the destructor or before</span>
<a name="l02603"></a>02603 <span class="comment">  a new document is loaded: see free_data().</span>
<a name="l02604"></a>02604 <span class="comment">*/</span>
<a name="l02605"></a>02605 
<a name="l02606"></a>02606 <a class="code" href="classFl__Shared__Image.html">Fl_Shared_Image</a> *
<a name="l02607"></a>02607 Fl_Help_View::get_image(<span class="keyword">const</span> <span class="keywordtype">char</span> *name, <span class="keywordtype">int</span> W, <span class="keywordtype">int</span> <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a>) {
<a name="l02608"></a>02608   <span class="keyword">const</span> <span class="keywordtype">char</span>    *localname;             <span class="comment">// Local filename</span>
<a name="l02609"></a>02609   <span class="keywordtype">char</span>          dir[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];       <span class="comment">// Current directory</span>
<a name="l02610"></a>02610   <span class="keywordtype">char</span>          temp[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>],      <span class="comment">// Temporary filename</span>
<a name="l02611"></a>02611                 *tempptr;               <span class="comment">// Pointer into temporary name</span>
<a name="l02612"></a>02612   <a class="code" href="classFl__Shared__Image.html">Fl_Shared_Image</a> *ip;                  <span class="comment">// Image pointer...</span>
<a name="l02613"></a>02613 
<a name="l02614"></a>02614   <span class="comment">// See if the image can be found...</span>
<a name="l02615"></a>02615   <span class="keywordflow">if</span> (strchr(directory_, <span class="charliteral">&#39;:&#39;</span>) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; strchr(name, <span class="charliteral">&#39;:&#39;</span>) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l02616"></a>02616     <span class="keywordflow">if</span> (name[0] == <span class="charliteral">&#39;/&#39;</span>) {
<a name="l02617"></a>02617       <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(temp, directory_, <span class="keyword">sizeof</span>(temp));
<a name="l02618"></a>02618 
<a name="l02619"></a>02619       <span class="keywordflow">if</span> ((tempptr = strrchr(strchr(directory_, <span class="charliteral">&#39;:&#39;</span>) + 3, <span class="charliteral">&#39;/&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l02620"></a>02620         <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(tempptr, name, <span class="keyword">sizeof</span>(temp) - (tempptr - temp));
<a name="l02621"></a>02621       } <span class="keywordflow">else</span> {
<a name="l02622"></a>02622         <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(temp, name, <span class="keyword">sizeof</span>(temp));
<a name="l02623"></a>02623       }
<a name="l02624"></a>02624     } <span class="keywordflow">else</span> {
<a name="l02625"></a>02625       <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(temp, <span class="keyword">sizeof</span>(temp), <span class="stringliteral">&quot;%s/%s&quot;</span>, directory_, name);
<a name="l02626"></a>02626     }
<a name="l02627"></a>02627 
<a name="l02628"></a>02628     <span class="keywordflow">if</span> (link_) localname = (*link_)(<span class="keyword">this</span>, temp);
<a name="l02629"></a>02629     <span class="keywordflow">else</span> localname = temp;
<a name="l02630"></a>02630   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name[0] != <span class="charliteral">&#39;/&#39;</span> &amp;&amp; strchr(name, <span class="charliteral">&#39;:&#39;</span>) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l02631"></a>02631     <span class="keywordflow">if</span> (directory_[0]) <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(temp, <span class="keyword">sizeof</span>(temp), <span class="stringliteral">&quot;%s/%s&quot;</span>, directory_, name);
<a name="l02632"></a>02632     <span class="keywordflow">else</span> {
<a name="l02633"></a>02633       <a class="code" href="group__fl__unicode.html#gadf2f42e2589e945c323fc23d4ff8e009">fl_getcwd</a>(dir, <span class="keyword">sizeof</span>(dir));
<a name="l02634"></a>02634       <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(temp, <span class="keyword">sizeof</span>(temp), <span class="stringliteral">&quot;file:%s/%s&quot;</span>, dir, name);
<a name="l02635"></a>02635     }
<a name="l02636"></a>02636 
<a name="l02637"></a>02637     <span class="keywordflow">if</span> (link_) localname = (*link_)(<span class="keyword">this</span>, temp);
<a name="l02638"></a>02638     <span class="keywordflow">else</span> localname = temp;
<a name="l02639"></a>02639   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (link_) localname = (*link_)(<span class="keyword">this</span>, <a class="code" href="png_8h.html#a90cd716fdb9b68c9661c3ba908a0ceff">name</a>);
<a name="l02640"></a>02640   <span class="keywordflow">else</span> localname = <a class="code" href="png_8h.html#a90cd716fdb9b68c9661c3ba908a0ceff">name</a>;
<a name="l02641"></a>02641 
<a name="l02642"></a>02642   <span class="keywordflow">if</span> (!localname) <span class="keywordflow">return</span> 0;
<a name="l02643"></a>02643 
<a name="l02644"></a>02644   <span class="keywordflow">if</span> (strncmp(localname, <span class="stringliteral">&quot;file:&quot;</span>, 5) == 0) localname += 5;
<a name="l02645"></a>02645 
<a name="l02646"></a>02646   <span class="keywordflow">if</span> (initial_load) {
<a name="l02647"></a>02647     <span class="keywordflow">if</span> ((ip = <a class="code" href="classFl__Shared__Image.html#a064dd63c8ca24b08ab9fe713f34a9928">Fl_Shared_Image::get</a>(localname, W, H)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l02648"></a>02648       ip = (<a class="code" href="classFl__Shared__Image.html">Fl_Shared_Image</a> *)&amp;broken_image;
<a name="l02649"></a>02649     }
<a name="l02650"></a>02650   } <span class="keywordflow">else</span> { <span class="comment">// draw or resize</span>
<a name="l02651"></a>02651     <span class="keywordflow">if</span> ((ip = <a class="code" href="classFl__Shared__Image.html#aa5cde98e010540a7923765350559628f">Fl_Shared_Image::find</a>(localname, W, H)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l02652"></a>02652       ip = (<a class="code" href="classFl__Shared__Image.html">Fl_Shared_Image</a> *)&amp;broken_image;
<a name="l02653"></a>02653     } <span class="keywordflow">else</span> {
<a name="l02654"></a>02654       ip-&gt;<a class="code" href="classFl__Shared__Image.html#a78812e7f8fc51248061c79bf72ae32ec">release</a>();
<a name="l02655"></a>02655     }
<a name="l02656"></a>02656   }
<a name="l02657"></a>02657 
<a name="l02658"></a>02658   <span class="keywordflow">return</span> ip;
<a name="l02659"></a>02659 }
<a name="l02660"></a>02660 
<a name="l02661"></a>02661 
<a name="l02663"></a>02663 <span class="keywordtype">int</span>
<a name="l02664"></a>02664 Fl_Help_View::get_length(<span class="keyword">const</span> <span class="keywordtype">char</span> *l) {       <span class="comment">// I - Value</span>
<a name="l02665"></a>02665   <span class="keywordtype">int</span>   <a class="code" href="jpeglib_8h.html#aa0ccb5ee6d882ee3605ff47745c6467b">val</a>;                                    <span class="comment">// Integer value</span>
<a name="l02666"></a>02666 
<a name="l02667"></a>02667   <span class="keywordflow">if</span> (!l[0]) <span class="keywordflow">return</span> 0;
<a name="l02668"></a>02668 
<a name="l02669"></a>02669   val = atoi(l);
<a name="l02670"></a>02670   <span class="keywordflow">if</span> (l[strlen(l) - 1] == <span class="charliteral">&#39;%&#39;</span>) {
<a name="l02671"></a>02671     <span class="keywordflow">if</span> (val &gt; 100) val = 100;
<a name="l02672"></a>02672     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (val &lt; 0) val = 0;
<a name="l02673"></a>02673 
<a name="l02674"></a>02674     <span class="keywordtype">int</span> scrollsize = scrollbar_size_ ? scrollbar_size_ : <a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">Fl::scrollbar_size</a>();
<a name="l02675"></a>02675     val = val * (hsize_ - scrollsize) / 100;
<a name="l02676"></a>02676   }
<a name="l02677"></a>02677 
<a name="l02678"></a>02678   <span class="keywordflow">return</span> <a class="code" href="jpeglib_8h.html#aa0ccb5ee6d882ee3605ff47745c6467b">val</a>;
<a name="l02679"></a>02679 }
<a name="l02680"></a>02680 
<a name="l02681"></a>02681 
<a name="l02682"></a>02682 <a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a> *Fl_Help_View::find_link(<span class="keywordtype">int</span> xx, <span class="keywordtype">int</span> yy)
<a name="l02683"></a>02683 {
<a name="l02684"></a>02684   <span class="keywordtype">int</span>           <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;
<a name="l02685"></a>02685   <a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a>  *linkp;
<a name="l02686"></a>02686   <span class="keywordflow">for</span> (i = nlinks_, linkp = links_; i &gt; 0; i --, linkp ++) {
<a name="l02687"></a>02687     <span class="keywordflow">if</span> (xx &gt;= linkp-&gt;<a class="code" href="structFl__Help__Link.html#ae4779c7f0291c60fdeb00eb088133fe2" title="X offset of link text.">x</a> &amp;&amp; xx &lt; linkp-&gt;w &amp;&amp;
<a name="l02688"></a>02688         yy &gt;= linkp-&gt;<a class="code" href="structFl__Help__Link.html#ad77f7b9105f689fe2fb5847d5b7e8ae5" title="Y offset of link text.">y</a> &amp;&amp; yy &lt; linkp-&gt;<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>)
<a name="l02689"></a>02689       <span class="keywordflow">break</span>;
<a name="l02690"></a>02690   }
<a name="l02691"></a>02691   <span class="keywordflow">return</span> i ? linkp : 0L;
<a name="l02692"></a>02692 }
<a name="l02693"></a>02693 
<a name="l02694"></a>02694 <span class="keywordtype">void</span> Fl_Help_View::follow_link(<a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a> *linkp)
<a name="l02695"></a>02695 {
<a name="l02696"></a>02696   <span class="keywordtype">char</span>          target[32];     <span class="comment">// Current target</span>
<a name="l02697"></a>02697 
<a name="l02698"></a>02698   <a class="code" href="classFl__Help__View.html#a6ad8e324f62c8f22c335a8860680e7cb">clear_selection</a>();
<a name="l02699"></a>02699 
<a name="l02700"></a>02700   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(target, linkp-&gt;<a class="code" href="structFl__Help__Link.html#a0ccda15c03d1015cb2846c66d65213c8" title="Link target (blank if none)">name</a>, <span class="keyword">sizeof</span>(target));
<a name="l02701"></a>02701 
<a name="l02702"></a>02702   <a class="code" href="classFl__Widget.html#a825fd3487559e1c283550abdb92304ef">set_changed</a>();
<a name="l02703"></a>02703 
<a name="l02704"></a>02704   <span class="keywordflow">if</span> (strcmp(linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>, filename_) != 0 &amp;&amp; linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>[0])
<a name="l02705"></a>02705   {
<a name="l02706"></a>02706     <span class="keywordtype">char</span>        dir[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];       <span class="comment">// Current directory</span>
<a name="l02707"></a>02707     <span class="keywordtype">char</span>        temp[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>],      <span class="comment">// Temporary filename</span>
<a name="l02708"></a>02708               *tempptr; <span class="comment">// Pointer into temporary filename</span>
<a name="l02709"></a>02709 
<a name="l02710"></a>02710 
<a name="l02711"></a>02711     <span class="keywordflow">if</span> (strchr(directory_, <span class="charliteral">&#39;:&#39;</span>) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;
<a name="l02712"></a>02712         strchr(linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>, <span class="charliteral">&#39;:&#39;</span>) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02713"></a>02713     {
<a name="l02714"></a>02714       <span class="keywordflow">if</span> (linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>[0] == <span class="charliteral">&#39;/&#39;</span>)
<a name="l02715"></a>02715       {
<a name="l02716"></a>02716         <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(temp, directory_, <span class="keyword">sizeof</span>(temp));
<a name="l02717"></a>02717         <span class="keywordflow">if</span> ((tempptr = strrchr(strchr(directory_, <span class="charliteral">&#39;:&#39;</span>) + 3, <span class="charliteral">&#39;/&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02718"></a>02718           <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(tempptr, linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>, <span class="keyword">sizeof</span>(temp));
<a name="l02719"></a>02719         <span class="keywordflow">else</span>
<a name="l02720"></a>02720           <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(temp, linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>, <span class="keyword">sizeof</span>(temp));
<a name="l02721"></a>02721       }
<a name="l02722"></a>02722       <span class="keywordflow">else</span>
<a name="l02723"></a>02723         <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(temp, <span class="keyword">sizeof</span>(temp), <span class="stringliteral">&quot;%s/%s&quot;</span>, directory_, linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>);
<a name="l02724"></a>02724     }
<a name="l02725"></a>02725     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>[0] != <span class="charliteral">&#39;/&#39;</span> &amp;&amp; strchr(linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>, <span class="charliteral">&#39;:&#39;</span>) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l02726"></a>02726     {
<a name="l02727"></a>02727       <span class="keywordflow">if</span> (directory_[0])
<a name="l02728"></a>02728         <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(temp, <span class="keyword">sizeof</span>(temp), <span class="stringliteral">&quot;%s/%s&quot;</span>, directory_, linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>);
<a name="l02729"></a>02729       <span class="keywordflow">else</span>
<a name="l02730"></a>02730       {
<a name="l02731"></a>02731           <a class="code" href="group__fl__unicode.html#gadf2f42e2589e945c323fc23d4ff8e009">fl_getcwd</a>(dir, <span class="keyword">sizeof</span>(dir));
<a name="l02732"></a>02732         <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(temp, <span class="keyword">sizeof</span>(temp), <span class="stringliteral">&quot;file:%s/%s&quot;</span>, dir, linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>);
<a name="l02733"></a>02733       }
<a name="l02734"></a>02734     }
<a name="l02735"></a>02735     <span class="keywordflow">else</span>
<a name="l02736"></a>02736       <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(temp, linkp-&gt;<a class="code" href="structFl__Help__Link.html#ab7a1011018b6604e32ce62618fd60f9d" title="Reference filename.">filename</a>, <span class="keyword">sizeof</span>(temp));
<a name="l02737"></a>02737 
<a name="l02738"></a>02738     <span class="keywordflow">if</span> (linkp-&gt;<a class="code" href="structFl__Help__Link.html#a0ccda15c03d1015cb2846c66d65213c8" title="Link target (blank if none)">name</a>[0])
<a name="l02739"></a>02739       <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(temp + strlen(temp), <span class="keyword">sizeof</span>(temp) - strlen(temp), <span class="stringliteral">&quot;#%s&quot;</span>,
<a name="l02740"></a>02740                linkp-&gt;<a class="code" href="structFl__Help__Link.html#a0ccda15c03d1015cb2846c66d65213c8" title="Link target (blank if none)">name</a>);
<a name="l02741"></a>02741 
<a name="l02742"></a>02742     <a class="code" href="classFl__Help__View.html#a70786a7db2d6a049c673b8bcd4a095d8">load</a>(temp);
<a name="l02743"></a>02743   }
<a name="l02744"></a>02744   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (target[0])
<a name="l02745"></a>02745     <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(target);
<a name="l02746"></a>02746   <span class="keywordflow">else</span>
<a name="l02747"></a>02747     <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(0);
<a name="l02748"></a>02748 
<a name="l02749"></a>02749   <a class="code" href="classFl__Help__View.html#a7953715fdd526ba4c3488569cf7ccfd9">leftline</a>(0);
<a name="l02750"></a>02750 }
<a name="l02751"></a>02751 
<a name="l02753"></a><a class="code" href="classFl__Help__View.html#a6ad8e324f62c8f22c335a8860680e7cb">02753</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Help__View.html#a6ad8e324f62c8f22c335a8860680e7cb">Fl_Help_View::clear_selection</a>()
<a name="l02754"></a>02754 {
<a name="l02755"></a>02755   <span class="keywordflow">if</span> (current_view==<span class="keyword">this</span>)
<a name="l02756"></a>02756     clear_global_selection();
<a name="l02757"></a>02757 }
<a name="l02759"></a><a class="code" href="classFl__Help__View.html#aa7d1a77e47ca1011cd5c9ac679a450fb">02759</a> <span class="keywordtype">void</span> <a class="code" href="classFl__Help__View.html#aa7d1a77e47ca1011cd5c9ac679a450fb">Fl_Help_View::select_all</a>()
<a name="l02760"></a>02760 {
<a name="l02761"></a>02761   clear_global_selection();
<a name="l02762"></a>02762   <span class="keywordflow">if</span> (!value_) <span class="keywordflow">return</span>;
<a name="l02763"></a>02763   current_view = <span class="keyword">this</span>;
<a name="l02764"></a>02764   selection_drag_last = selection_last = strlen(value_);
<a name="l02765"></a>02765   selected = 1;
<a name="l02766"></a>02766 }
<a name="l02767"></a>02767 
<a name="l02768"></a>02768 <span class="keywordtype">void</span> Fl_Help_View::clear_global_selection()
<a name="l02769"></a>02769 {
<a name="l02770"></a>02770   <span class="keywordflow">if</span> (selected) <a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>();
<a name="l02771"></a>02771   selection_push_first = selection_push_last = 0;
<a name="l02772"></a>02772   selection_drag_first = selection_drag_last = 0;
<a name="l02773"></a>02773   selection_first = selection_last = 0;
<a name="l02774"></a>02774   selected = 0;
<a name="l02775"></a>02775 }
<a name="l02776"></a>02776 
<a name="l02777"></a>02777 <span class="keywordtype">char</span> Fl_Help_View::begin_selection()
<a name="l02778"></a>02778 {
<a name="l02779"></a>02779   clear_global_selection();
<a name="l02780"></a>02780 
<a name="l02781"></a>02781   <span class="keywordflow">if</span> (!fl_help_view_buffer) fl_help_view_buffer = <a class="code" href="mac_8H.html#a22259d434be43b30f74bfb3e96c5fdab">fl_create_offscreen</a>(1, 1);
<a name="l02782"></a>02782 
<a name="l02783"></a>02783   mouse_x = <a class="code" href="group__fl__events.html#ga91585fcbaa1e79f7452fd2d16a82136e">Fl::event_x</a>();
<a name="l02784"></a>02784   mouse_y = <a class="code" href="group__fl__events.html#ga192a0c5a37f33b9d117a69f20977c2a1">Fl::event_y</a>();
<a name="l02785"></a>02785   draw_mode = 1;
<a name="l02786"></a>02786 
<a name="l02787"></a>02787     current_view = <span class="keyword">this</span>;
<a name="l02788"></a>02788     <a class="code" href="mac_8H.html#aac0378733483d10e73c694adf93f462c">fl_begin_offscreen</a>(fl_help_view_buffer);
<a name="l02789"></a>02789     draw();
<a name="l02790"></a>02790     <a class="code" href="mac_8H.html#ac2195ac3bd679bac0b2810c8ac90faa6">fl_end_offscreen</a>();
<a name="l02791"></a>02791 
<a name="l02792"></a>02792   draw_mode = 0;
<a name="l02793"></a>02793 
<a name="l02794"></a>02794   <span class="keywordflow">if</span> (selection_push_last) <span class="keywordflow">return</span> 1;
<a name="l02795"></a>02795   <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;
<a name="l02796"></a>02796 }
<a name="l02797"></a>02797 
<a name="l02798"></a>02798 <span class="keywordtype">char</span> Fl_Help_View::extend_selection()
<a name="l02799"></a>02799 {
<a name="l02800"></a>02800   <span class="keywordflow">if</span> (<a class="code" href="group__fl__events.html#gae4f3bafeb9fbae98c3b7cc6f5326e582">Fl::event_is_click</a>())
<a name="l02801"></a>02801     <span class="keywordflow">return</span> 0;
<a name="l02802"></a>02802 
<a name="l02803"></a>02803 <span class="comment">//  printf(&quot;old selection_first=%d, selection_last=%d\n&quot;,</span>
<a name="l02804"></a>02804 <span class="comment">//         selection_first, selection_last);</span>
<a name="l02805"></a>02805 
<a name="l02806"></a>02806   <span class="keywordtype">int</span> sf = selection_first, sl = selection_last;
<a name="l02807"></a>02807 
<a name="l02808"></a>02808   selected = 1;
<a name="l02809"></a>02809   mouse_x = <a class="code" href="group__fl__events.html#ga91585fcbaa1e79f7452fd2d16a82136e">Fl::event_x</a>();
<a name="l02810"></a>02810   mouse_y = <a class="code" href="group__fl__events.html#ga192a0c5a37f33b9d117a69f20977c2a1">Fl::event_y</a>();
<a name="l02811"></a>02811   draw_mode = 2;
<a name="l02812"></a>02812 
<a name="l02813"></a>02813     <a class="code" href="mac_8H.html#aac0378733483d10e73c694adf93f462c">fl_begin_offscreen</a>(fl_help_view_buffer);
<a name="l02814"></a>02814     draw();
<a name="l02815"></a>02815     <a class="code" href="mac_8H.html#ac2195ac3bd679bac0b2810c8ac90faa6">fl_end_offscreen</a>();
<a name="l02816"></a>02816 
<a name="l02817"></a>02817   draw_mode = 0;
<a name="l02818"></a>02818 
<a name="l02819"></a>02819   <span class="keywordflow">if</span> (selection_push_first &lt; selection_drag_first) {
<a name="l02820"></a>02820     selection_first = selection_push_first;
<a name="l02821"></a>02821   } <span class="keywordflow">else</span> {
<a name="l02822"></a>02822     selection_first = selection_drag_first;
<a name="l02823"></a>02823   }
<a name="l02824"></a>02824 
<a name="l02825"></a>02825   <span class="keywordflow">if</span> (selection_push_last &gt; selection_drag_last) {
<a name="l02826"></a>02826     selection_last = selection_push_last;
<a name="l02827"></a>02827   } <span class="keywordflow">else</span> {
<a name="l02828"></a>02828     selection_last = selection_drag_last;
<a name="l02829"></a>02829   }
<a name="l02830"></a>02830 
<a name="l02831"></a>02831 <span class="comment">//  printf(&quot;new selection_first=%d, selection_last=%d\n&quot;,</span>
<a name="l02832"></a>02832 <span class="comment">//         selection_first, selection_last);</span>
<a name="l02833"></a>02833 
<a name="l02834"></a>02834   <span class="keywordflow">if</span> (sf!=selection_first || sl!=selection_last) {
<a name="l02835"></a>02835 <span class="comment">//    puts(&quot;REDRAW!!!\n&quot;);</span>
<a name="l02836"></a>02836     <span class="keywordflow">return</span> 1;
<a name="l02837"></a>02837   } <span class="keywordflow">else</span> {
<a name="l02838"></a>02838 <span class="comment">//    puts(&quot;&quot;);</span>
<a name="l02839"></a>02839     <span class="keywordflow">return</span> 0;
<a name="l02840"></a>02840   }
<a name="l02841"></a>02841 }
<a name="l02842"></a>02842 
<a name="l02843"></a>02843 <span class="comment">// convert a command with up to four letters into an unsigned int</span>
<a name="l02844"></a>02844 <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> command(<span class="keyword">const</span> <span class="keywordtype">char</span> *cmd)
<a name="l02845"></a>02845 {
<a name="l02846"></a>02846   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ret = (tolower(cmd[0])&lt;&lt;24);
<a name="l02847"></a>02847   <span class="keywordtype">char</span> c = cmd[1];
<a name="l02848"></a>02848   <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;&gt;&#39;</span> || c==<span class="charliteral">&#39; &#39;</span> || c==0) <span class="keywordflow">return</span> ret;
<a name="l02849"></a>02849   ret |= (tolower(c)&lt;&lt;16);
<a name="l02850"></a>02850   c = cmd[2];
<a name="l02851"></a>02851   <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;&gt;&#39;</span> || c==<span class="charliteral">&#39; &#39;</span> || c==0) <span class="keywordflow">return</span> ret;
<a name="l02852"></a>02852   ret |= (tolower(c)&lt;&lt;8);
<a name="l02853"></a>02853   c = cmd[3];
<a name="l02854"></a>02854   <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;&gt;&#39;</span> || c==<span class="charliteral">&#39; &#39;</span> || c==0) <span class="keywordflow">return</span> ret;
<a name="l02855"></a>02855   ret |= tolower(c);
<a name="l02856"></a>02856   c = cmd[4];
<a name="l02857"></a>02857   <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;&gt;&#39;</span> || c==<span class="charliteral">&#39; &#39;</span> || c==0) <span class="keywordflow">return</span> ret;
<a name="l02858"></a>02858   <span class="keywordflow">return</span> 0;
<a name="l02859"></a>02859 }
<a name="l02860"></a>02860 
<a name="l02861"></a><a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">02861</a> <span class="preprocessor">#define CMD(a, b, c, d) ((a&lt;&lt;24)|(b&lt;&lt;16)|(c&lt;&lt;8)|d)</span>
<a name="l02862"></a>02862 <span class="preprocessor"></span>
<a name="l02863"></a>02863 <span class="keywordtype">void</span> Fl_Help_View::end_selection(<span class="keywordtype">int</span> clipboard) 
<a name="l02864"></a>02864 {
<a name="l02865"></a>02865   <span class="keywordflow">if</span> (!selected || current_view!=<span class="keyword">this</span>) 
<a name="l02866"></a>02866     <span class="keywordflow">return</span>;
<a name="l02867"></a>02867   <span class="comment">// convert the select part of our html text into some kind of somewhat readable ASCII</span>
<a name="l02868"></a>02868   <span class="comment">// and store it in the selection buffer</span>
<a name="l02869"></a>02869   <span class="keywordtype">char</span> p = 0, pre = 0;;
<a name="l02870"></a>02870   <span class="keywordtype">int</span> len = strlen(value_);
<a name="l02871"></a>02871   <span class="keywordtype">char</span> *txt = (<span class="keywordtype">char</span>*)malloc(len+1), *d = txt;
<a name="l02872"></a>02872   <span class="keyword">const</span> <span class="keywordtype">char</span> *s = value_, *cmd, *src;
<a name="l02873"></a>02873   <span class="keywordflow">for</span> (;;) {
<a name="l02874"></a>02874     <span class="keywordtype">char</span> c = *s++;
<a name="l02875"></a>02875     <span class="keywordflow">if</span> (c==0) <span class="keywordflow">break</span>;
<a name="l02876"></a>02876     <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;&lt;&#39;</span>) { <span class="comment">// begin of some html command. Skip until we find a &#39;&gt;&#39;</span>
<a name="l02877"></a>02877       cmd = s;
<a name="l02878"></a>02878       <span class="keywordflow">for</span> (;;) {
<a name="l02879"></a>02879         c = *s++;
<a name="l02880"></a>02880         <span class="keywordflow">if</span> (c==0 || c==<span class="charliteral">&#39;&gt;&#39;</span>) <span class="keywordflow">break</span>;
<a name="l02881"></a>02881       }
<a name="l02882"></a>02882       <span class="keywordflow">if</span> (c==0) <span class="keywordflow">break</span>;
<a name="l02883"></a>02883       <span class="comment">// do something with this command... .</span>
<a name="l02884"></a>02884       <span class="comment">// the replacement string must not be longer that the command itself plus &#39;&lt;&#39; and &#39;&gt;&#39;</span>
<a name="l02885"></a>02885       src = 0;
<a name="l02886"></a>02886       <span class="keywordflow">switch</span> (command(cmd)) {
<a name="l02887"></a>02887         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>, 0 ): pre = 1; <span class="keywordflow">break</span>;
<a name="l02888"></a>02888         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;/&#39;</span>,<span class="charliteral">&#39;p&#39;</span>,<span class="charliteral">&#39;r&#39;</span>,<span class="charliteral">&#39;e&#39;</span>): pre = 0; <span class="keywordflow">break</span>;
<a name="l02889"></a>02889         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;d&#39;</span>, 0 , 0 ):
<a name="l02890"></a>02890         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;p&#39;</span>, 0 , 0 , 0 ):
<a name="l02891"></a>02891         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;/&#39;</span>,<span class="charliteral">&#39;p&#39;</span>, 0 , 0 ):
<a name="l02892"></a>02892         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;b&#39;</span>,<span class="charliteral">&#39;r&#39;</span>, 0 , 0 ): src = <span class="stringliteral">&quot;\n&quot;</span>; <span class="keywordflow">break</span>;
<a name="l02893"></a>02893         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;l&#39;</span>,<span class="charliteral">&#39;i&#39;</span>, 0 , 0 ): src = <span class="stringliteral">&quot;\n * &quot;</span>; <span class="keywordflow">break</span>;
<a name="l02894"></a>02894         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;/&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;1&#39;</span>, 0 ):
<a name="l02895"></a>02895         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;/&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;2&#39;</span>, 0 ):
<a name="l02896"></a>02896         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;/&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;3&#39;</span>, 0 ):
<a name="l02897"></a>02897         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;/&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;4&#39;</span>, 0 ):
<a name="l02898"></a>02898         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;/&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;5&#39;</span>, 0 ):
<a name="l02899"></a>02899         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;/&#39;</span>,<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;6&#39;</span>, 0 ): src = <span class="stringliteral">&quot;\n\n&quot;</span>; <span class="keywordflow">break</span>;
<a name="l02900"></a>02900         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;t&#39;</span>,<span class="charliteral">&#39;r&#39;</span>, 0 , 0 ):
<a name="l02901"></a>02901         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;1&#39;</span>, 0 , 0 ):
<a name="l02902"></a>02902         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;2&#39;</span>, 0 , 0 ):
<a name="l02903"></a>02903         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;3&#39;</span>, 0 , 0 ):
<a name="l02904"></a>02904         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;4&#39;</span>, 0 , 0 ):
<a name="l02905"></a>02905         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;5&#39;</span>, 0 , 0 ):
<a name="l02906"></a>02906         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;h&#39;</span>,<span class="charliteral">&#39;6&#39;</span>, 0 , 0 ): src = <span class="stringliteral">&quot;\n\n&quot;</span>; <span class="keywordflow">break</span>;
<a name="l02907"></a>02907         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;t&#39;</span>, 0 , 0 ): src = <span class="stringliteral">&quot;\n &quot;</span>; <span class="keywordflow">break</span>;
<a name="l02908"></a>02908         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#a0c04bee8b28ba6027ed99afef041685c">CMD</a>(<span class="charliteral">&#39;d&#39;</span>,<span class="charliteral">&#39;d&#39;</span>, 0 , 0 ): src = <span class="stringliteral">&quot;\n - &quot;</span>; <span class="keywordflow">break</span>;
<a name="l02909"></a>02909       }
<a name="l02910"></a>02910       <span class="keywordtype">int</span> n = s-value_;
<a name="l02911"></a>02911       <span class="keywordflow">if</span> (src &amp;&amp; n&gt;selection_first &amp;&amp; n&lt;=selection_last) {
<a name="l02912"></a>02912         <span class="keywordflow">while</span> (*src) {
<a name="l02913"></a>02913           *d++ = *src++;
<a name="l02914"></a>02914         }
<a name="l02915"></a>02915         c = src[-1];
<a name="l02916"></a>02916         p = isspace(c&amp;255) ? <span class="charliteral">&#39; &#39;</span> : c;
<a name="l02917"></a>02917       }
<a name="l02918"></a>02918       <span class="keywordflow">continue</span>;
<a name="l02919"></a>02919     }
<a name="l02920"></a>02920     <span class="keywordflow">if</span> (c==<span class="charliteral">&#39;&amp;&#39;</span>) { <span class="comment">// special characters</span>
<a name="l02921"></a>02921       <span class="keywordtype">int</span> xx = quote_char(s);
<a name="l02922"></a>02922       <span class="keywordflow">if</span> (xx&gt;=0) {
<a name="l02923"></a>02923         c = (char)xx;
<a name="l02924"></a>02924         <span class="keywordflow">for</span> (;;) {
<a name="l02925"></a>02925           <span class="keywordtype">char</span> cc = *s++;
<a name="l02926"></a>02926           <span class="keywordflow">if</span> (!cc || cc==<span class="charliteral">&#39;;&#39;</span>) <span class="keywordflow">break</span>;
<a name="l02927"></a>02927         }
<a name="l02928"></a>02928       }
<a name="l02929"></a>02929     }
<a name="l02930"></a>02930     <span class="keywordtype">int</span> n = s-value_;
<a name="l02931"></a>02931     <span class="keywordflow">if</span> (n&gt;selection_first &amp;&amp; n&lt;=selection_last) {
<a name="l02932"></a>02932       <span class="keywordflow">if</span> (!pre &amp;&amp; isspace(c&amp;255)) c = <span class="charliteral">&#39; &#39;</span>;
<a name="l02933"></a>02933       <span class="keywordflow">if</span> (p!=<span class="charliteral">&#39; &#39;</span>||c!=<span class="charliteral">&#39; &#39;</span>)
<a name="l02934"></a>02934         *d++ = c;
<a name="l02935"></a>02935       p = c;
<a name="l02936"></a>02936     }
<a name="l02937"></a>02937   }
<a name="l02938"></a>02938   *d = 0;
<a name="l02939"></a>02939   <a class="code" href="group__fl__clipboard.html#gaa219ad0a09d4ff6f7d8feddcc7e96b90">Fl::copy</a>(txt, strlen(txt), clipboard);
<a name="l02940"></a>02940   free(txt);
<a name="l02941"></a>02941 }
<a name="l02942"></a>02942 
<a name="l02943"></a><a class="code" href="Fl__Help__View_8cxx.html#af6ee1b872ad26f17423b021733a49311">02943</a> <span class="preprocessor">#define ctrl(x) ((x)&amp;0x1f)</span>
<a name="l02944"></a>02944 <span class="preprocessor"></span>
<a name="l02946"></a>02946 <span class="keywordtype">int</span>                             <span class="comment">// O - 1 if we handled it, 0 otherwise</span>
<a name="l02947"></a>02947 Fl_Help_View::handle(<span class="keywordtype">int</span> event) <span class="comment">// I - Event to handle</span>
<a name="l02948"></a>02948 {
<a name="l02949"></a>02949   <span class="keyword">static</span> <a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a> *linkp;   <span class="comment">// currently clicked link</span>
<a name="l02950"></a>02950 
<a name="l02951"></a>02951   <span class="keywordtype">int</span> xx = <a class="code" href="group__fl__events.html#ga91585fcbaa1e79f7452fd2d16a82136e">Fl::event_x</a>() - <a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + leftline_;
<a name="l02952"></a>02952   <span class="keywordtype">int</span> yy = <a class="code" href="group__fl__events.html#ga192a0c5a37f33b9d117a69f20977c2a1">Fl::event_y</a>() - <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + topline_;
<a name="l02953"></a>02953 
<a name="l02954"></a>02954   <span class="keywordflow">switch</span> (event)
<a name="l02955"></a>02955   {
<a name="l02956"></a>02956     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3adaac2a187beb309443d668a20a59986b">FL_FOCUS</a>:
<a name="l02957"></a>02957       <a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>();
<a name="l02958"></a>02958       <span class="keywordflow">return</span> 1;
<a name="l02959"></a>02959     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a7d2e5eb9247b1927ba5cc26dc82acaf3">FL_UNFOCUS</a>:
<a name="l02960"></a>02960       <a class="code" href="classFl__Help__View.html#a6ad8e324f62c8f22c335a8860680e7cb">clear_selection</a>();
<a name="l02961"></a>02961       <a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>();
<a name="l02962"></a>02962       <span class="keywordflow">return</span> 1;
<a name="l02963"></a>02963     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a29b256ac93d443dd33a8c610c24e7af5">FL_ENTER</a> :
<a name="l02964"></a>02964       <a class="code" href="classFl__Group.html#a7503757c2a734442e74717d1971b12ce">Fl_Group::handle</a>(event);
<a name="l02965"></a>02965       <span class="keywordflow">return</span> 1;
<a name="l02966"></a>02966     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3aa776cf3129e97140c88a062881a2d29a">FL_LEAVE</a> :
<a name="l02967"></a>02967       <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a045f091aae5108f94e912bf5163344dd">FL_CURSOR_DEFAULT</a>);
<a name="l02968"></a>02968       <span class="keywordflow">break</span>;
<a name="l02969"></a>02969     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3acd57cae091eb27c9a52c446bdd0c164d">FL_MOVE</a>:
<a name="l02970"></a>02970       <span class="keywordflow">if</span> (find_link(xx, yy)) <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a1b25ce2668fb1ca7bd85b0ba4cc20ab7">FL_CURSOR_HAND</a>);
<a name="l02971"></a>02971       <span class="keywordflow">else</span> <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a045f091aae5108f94e912bf5163344dd">FL_CURSOR_DEFAULT</a>);
<a name="l02972"></a>02972       <span class="keywordflow">return</span> 1;
<a name="l02973"></a>02973     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a44972d76423f3e380ae12c36827944e3">FL_PUSH</a>:
<a name="l02974"></a>02974       <span class="keywordflow">if</span> (<a class="code" href="classFl__Group.html#a7503757c2a734442e74717d1971b12ce">Fl_Group::handle</a>(event)) <span class="keywordflow">return</span> 1;
<a name="l02975"></a>02975       linkp = find_link(xx, yy);
<a name="l02976"></a>02976       <span class="keywordflow">if</span> (linkp) {
<a name="l02977"></a>02977         <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a1b25ce2668fb1ca7bd85b0ba4cc20ab7">FL_CURSOR_HAND</a>);
<a name="l02978"></a>02978         <span class="keywordflow">return</span> 1;
<a name="l02979"></a>02979       }
<a name="l02980"></a>02980       <span class="keywordflow">if</span> (begin_selection()) {
<a name="l02981"></a>02981         <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0ab6031998169de52eadfda65d464cbefb">FL_CURSOR_INSERT</a>);
<a name="l02982"></a>02982         <span class="keywordflow">return</span> 1;
<a name="l02983"></a>02983       }
<a name="l02984"></a>02984       <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a045f091aae5108f94e912bf5163344dd">FL_CURSOR_DEFAULT</a>);
<a name="l02985"></a>02985       <span class="keywordflow">return</span> 1;
<a name="l02986"></a>02986     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3aaad5c7b2302d7bfe6c6d37b50b4c70f0">FL_DRAG</a>:
<a name="l02987"></a>02987       <span class="keywordflow">if</span> (linkp) {
<a name="l02988"></a>02988         <span class="keywordflow">if</span> (<a class="code" href="group__fl__events.html#gae4f3bafeb9fbae98c3b7cc6f5326e582">Fl::event_is_click</a>()) {
<a name="l02989"></a>02989           <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a1b25ce2668fb1ca7bd85b0ba4cc20ab7">FL_CURSOR_HAND</a>);
<a name="l02990"></a>02990         } <span class="keywordflow">else</span> {
<a name="l02991"></a>02991           <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a045f091aae5108f94e912bf5163344dd">FL_CURSOR_DEFAULT</a>); <span class="comment">// should be &quot;FL_CURSOR_CANCEL&quot; if we had it</span>
<a name="l02992"></a>02992         }
<a name="l02993"></a>02993         <span class="keywordflow">return</span> 1;
<a name="l02994"></a>02994       }
<a name="l02995"></a>02995       <span class="keywordflow">if</span> (current_view==<span class="keyword">this</span> &amp;&amp; selection_push_last) {
<a name="l02996"></a>02996         <span class="keywordflow">if</span> (extend_selection()) <a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>();
<a name="l02997"></a>02997         <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0ab6031998169de52eadfda65d464cbefb">FL_CURSOR_INSERT</a>);
<a name="l02998"></a>02998         <span class="keywordflow">return</span> 1;
<a name="l02999"></a>02999       }
<a name="l03000"></a>03000       <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a045f091aae5108f94e912bf5163344dd">FL_CURSOR_DEFAULT</a>);
<a name="l03001"></a>03001       <span class="keywordflow">return</span> 1;
<a name="l03002"></a>03002     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a5949b5ff170a8236d2745eddb1e9fd9a">FL_RELEASE</a>:
<a name="l03003"></a>03003       <span class="keywordflow">if</span> (linkp) {
<a name="l03004"></a>03004         <span class="keywordflow">if</span> (<a class="code" href="group__fl__events.html#gae4f3bafeb9fbae98c3b7cc6f5326e582">Fl::event_is_click</a>()) {
<a name="l03005"></a>03005           follow_link(linkp);
<a name="l03006"></a>03006         }
<a name="l03007"></a>03007         <a class="code" href="group__fl__drawings.html#gac3632671b9ae4db7c13f6ce2c9008919">fl_cursor</a>(<a class="code" href="Enumerations_8H.html#a72bde974edc7926b1217dd51b8c7e8e0a045f091aae5108f94e912bf5163344dd">FL_CURSOR_DEFAULT</a>);
<a name="l03008"></a>03008         linkp = 0;
<a name="l03009"></a>03009         <span class="keywordflow">return</span> 1;
<a name="l03010"></a>03010       }
<a name="l03011"></a>03011       <span class="keywordflow">if</span> (current_view==<span class="keyword">this</span> &amp;&amp; selection_push_last) {
<a name="l03012"></a>03012         end_selection();
<a name="l03013"></a>03013         <span class="keywordflow">return</span> 1;
<a name="l03014"></a>03014       }
<a name="l03015"></a>03015       <span class="keywordflow">return</span> 1;
<a name="l03016"></a>03016     <span class="keywordflow">case</span> <a class="code" href="Enumerations_8H.html#ad16daf120d9a0501cccaee563af0b9a3a6161f0e91cc6b2947200323e3bda8156">FL_SHORTCUT</a>: {
<a name="l03017"></a>03017       <span class="keywordtype">char</span> ascii = <a class="code" href="group__fl__events.html#ga6647c55948fe1d8be9367267529e9c54">Fl::event_text</a>()[0];
<a name="l03018"></a>03018       <span class="keywordflow">switch</span> (ascii) {
<a name="l03019"></a>03019         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#af6ee1b872ad26f17423b021733a49311">ctrl</a>(<span class="charliteral">&#39;A&#39;</span>): <a class="code" href="classFl__Help__View.html#aa7d1a77e47ca1011cd5c9ac679a450fb">select_all</a>(); <a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>(); <span class="keywordflow">return</span> 1;
<a name="l03020"></a>03020         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#af6ee1b872ad26f17423b021733a49311">ctrl</a>(<span class="charliteral">&#39;C&#39;</span>):
<a name="l03021"></a>03021         <span class="keywordflow">case</span> <a class="code" href="Fl__Help__View_8cxx.html#af6ee1b872ad26f17423b021733a49311">ctrl</a>(<span class="charliteral">&#39;X&#39;</span>): end_selection(1); <span class="keywordflow">return</span> 1;
<a name="l03022"></a>03022       }
<a name="l03023"></a>03023       <span class="keywordflow">break</span>; }
<a name="l03024"></a>03024   }
<a name="l03025"></a>03025   <span class="keywordflow">return</span> (<a class="code" href="classFl__Group.html#a7503757c2a734442e74717d1971b12ce">Fl_Group::handle</a>(event));
<a name="l03026"></a>03026 }
<a name="l03027"></a>03027 
<a name="l03032"></a><a class="code" href="classFl__Help__View.html#af3f2935801fe289f17616f7a58b82ea9">03032</a> <a class="code" href="classFl__Help__View.html#af3f2935801fe289f17616f7a58b82ea9">Fl_Help_View::Fl_Help_View</a>(<span class="keywordtype">int</span>        xx,       <span class="comment">// I - Left position</span>
<a name="l03033"></a>03033                            <span class="keywordtype">int</span>        yy,       <span class="comment">// I - Top position</span>
<a name="l03034"></a>03034                            <span class="keywordtype">int</span>        ww,       <span class="comment">// I - Width in pixels</span>
<a name="l03035"></a>03035                            <span class="keywordtype">int</span>        hh,       <span class="comment">// I - Height in pixels</span>
<a name="l03036"></a>03036                            <span class="keyword">const</span> <span class="keywordtype">char</span> *l)
<a name="l03037"></a>03037     : <a class="code" href="classFl__Group.html">Fl_Group</a>(xx, yy, ww, hh, l),
<a name="l03038"></a>03038       scrollbar_(xx + ww - <a class="code" href="classFl.html">Fl</a>::<a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">scrollbar_size</a>(), yy,
<a name="l03039"></a>03039                  <a class="code" href="classFl.html">Fl</a>::<a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">scrollbar_size</a>(), hh - <a class="code" href="classFl.html">Fl</a>::<a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">scrollbar_size</a>()),
<a name="l03040"></a>03040       hscrollbar_(xx, yy + hh - <a class="code" href="classFl.html">Fl</a>::<a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">scrollbar_size</a>(),
<a name="l03041"></a>03041                   ww - <a class="code" href="classFl.html">Fl</a>::<a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">scrollbar_size</a>(), <a class="code" href="classFl.html">Fl</a>::<a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">scrollbar_size</a>())
<a name="l03042"></a>03042 {
<a name="l03043"></a>03043   <a class="code" href="classFl__Widget.html#a03c07e0725994cddf9070f9f1cd215c4">color</a>(<a class="code" href="Enumerations_8H.html#a5c5704ed2ec5eb9c964d6dcb51474055" title="the default background color for text, list, and valuator widgets">FL_BACKGROUND2_COLOR</a>, <a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>);
<a name="l03044"></a>03044 
<a name="l03045"></a>03045   title_[0]     = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03046"></a>03046   defcolor_     = <a class="code" href="Enumerations_8H.html#a8c67b74501f259f9bcfbf55415cfc162" title="the default foreground color (0) used for labels and text">FL_FOREGROUND_COLOR</a>;
<a name="l03047"></a>03047   bgcolor_      = <a class="code" href="Enumerations_8H.html#aa1c7250c485966fcd5c49f1bdc3a6587">FL_BACKGROUND_COLOR</a>;
<a name="l03048"></a>03048   textcolor_    = <a class="code" href="Enumerations_8H.html#a8c67b74501f259f9bcfbf55415cfc162" title="the default foreground color (0) used for labels and text">FL_FOREGROUND_COLOR</a>;
<a name="l03049"></a>03049   linkcolor_    = <a class="code" href="Enumerations_8H.html#a331e6d52a8f08e7d9bafd9cc8341cd9f" title="the default selection/highlight color">FL_SELECTION_COLOR</a>;
<a name="l03050"></a>03050   textfont_     = <a class="code" href="Enumerations_8H.html#a35fe64b07a0f270411dfbcbcc109033c" title="Times roman.">FL_TIMES</a>;
<a name="l03051"></a>03051   textsize_     = 12;
<a name="l03052"></a>03052   value_        = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l03053"></a>03053 
<a name="l03054"></a>03054   ablocks_      = 0;
<a name="l03055"></a>03055   nblocks_      = 0;
<a name="l03056"></a>03056   blocks_       = (<a class="code" href="structFl__Help__Block.html">Fl_Help_Block</a> *)0;
<a name="l03057"></a>03057 
<a name="l03058"></a>03058   link_         = (<a class="code" href="Fl__Help__View_8H.html#ae337c9d2469f21c5258ea450d4646e9b">Fl_Help_Func</a> *)0;
<a name="l03059"></a>03059 
<a name="l03060"></a>03060   alinks_       = 0;
<a name="l03061"></a>03061   nlinks_       = 0;
<a name="l03062"></a>03062   links_        = (<a class="code" href="structFl__Help__Link.html">Fl_Help_Link</a> *)0;
<a name="l03063"></a>03063 
<a name="l03064"></a>03064   atargets_     = 0;
<a name="l03065"></a>03065   ntargets_     = 0;
<a name="l03066"></a>03066   targets_      = (<a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a> *)0;
<a name="l03067"></a>03067 
<a name="l03068"></a>03068   directory_[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03069"></a>03069   filename_[0]  = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03070"></a>03070 
<a name="l03071"></a>03071   topline_      = 0;
<a name="l03072"></a>03072   leftline_     = 0;
<a name="l03073"></a>03073   size_         = 0;
<a name="l03074"></a>03074   hsize_        = 0;
<a name="l03075"></a>03075   scrollbar_size_ = 0;
<a name="l03076"></a>03076 
<a name="l03077"></a>03077   scrollbar_.<a class="code" href="classFl__Scrollbar.html#ac77d402598c922f8eae9987021d84119">value</a>(0, hh, 0, 1);
<a name="l03078"></a>03078   scrollbar_.<a class="code" href="classFl__Valuator.html#a3308133e6e4963e0e22f4fb405bef298">step</a>(8.0);
<a name="l03079"></a>03079   scrollbar_.<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l03080"></a>03080   scrollbar_.<a class="code" href="classFl__Widget.html#aa19d0dccbebc8aa2763af265c6597607">callback</a>(scrollbar_callback);
<a name="l03081"></a>03081 
<a name="l03082"></a>03082   hscrollbar_.<a class="code" href="classFl__Scrollbar.html#ac77d402598c922f8eae9987021d84119">value</a>(0, ww, 0, 1);
<a name="l03083"></a>03083   hscrollbar_.<a class="code" href="classFl__Valuator.html#a3308133e6e4963e0e22f4fb405bef298">step</a>(8.0);
<a name="l03084"></a>03084   hscrollbar_.<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l03085"></a>03085   hscrollbar_.<a class="code" href="classFl__Widget.html#aa19d0dccbebc8aa2763af265c6597607">callback</a>(hscrollbar_callback);
<a name="l03086"></a>03086   hscrollbar_.<a class="code" href="classFl__Widget.html#ac3050e16d7ed8dccbbf3468ea8c64ab8">type</a>(<a class="code" href="Fl__Valuator_8H.html#a40de8f55ac4cbd5ee8667152db75c668" title="The valuator can work horizontally.">FL_HORIZONTAL</a>);
<a name="l03087"></a>03087   <a class="code" href="classFl__Group.html#a029653337efa0cb2ec52852519293ba8">end</a>();
<a name="l03088"></a>03088 
<a name="l03089"></a>03089   <a class="code" href="classFl__Help__View.html#ab5ef730c30f06bf24a55ff70c6cdd490">resize</a>(xx, yy, ww, hh);
<a name="l03090"></a>03090 }
<a name="l03091"></a>03091 
<a name="l03092"></a>03092 
<a name="l03098"></a><a class="code" href="classFl__Help__View.html#ac12a07242886c1cdd811de20ce3a3447">03098</a> <a class="code" href="classFl__Help__View.html#ac12a07242886c1cdd811de20ce3a3447">Fl_Help_View::~Fl_Help_View</a>()
<a name="l03099"></a>03099 {
<a name="l03100"></a>03100   <a class="code" href="classFl__Help__View.html#a6ad8e324f62c8f22c335a8860680e7cb">clear_selection</a>();
<a name="l03101"></a>03101   free_data();
<a name="l03102"></a>03102 }
<a name="l03103"></a>03103 
<a name="l03104"></a>03104 
<a name="l03109"></a>03109 <span class="keywordtype">int</span>                             <span class="comment">// O - 0 on success, -1 on error</span>
<a name="l03110"></a><a class="code" href="classFl__Help__View.html#a70786a7db2d6a049c673b8bcd4a095d8">03110</a> <a class="code" href="classFl__Help__View.html#a70786a7db2d6a049c673b8bcd4a095d8">Fl_Help_View::load</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fl__boxtype_8cxx.html#ac406db58651c10e8f67ed432c66db0d6">f</a>)<span class="comment">// I - Filename to load (may also have target)</span>
<a name="l03111"></a>03111 {
<a name="l03112"></a>03112   FILE          *<a class="code" href="png_8h.html#a2fc770f3075676bb456388a905f1cc99">fp</a>;            <span class="comment">// File to read from</span>
<a name="l03113"></a>03113   <span class="keywordtype">long</span>          len;            <span class="comment">// Length of file</span>
<a name="l03114"></a>03114   <span class="keywordtype">char</span>          *target;        <span class="comment">// Target in file</span>
<a name="l03115"></a>03115   <span class="keywordtype">char</span>          *slash;         <span class="comment">// Directory separator</span>
<a name="l03116"></a>03116   <span class="keyword">const</span> <span class="keywordtype">char</span>    *localname;     <span class="comment">// Local filename</span>
<a name="l03117"></a>03117   <span class="keywordtype">char</span>          error[1024];    <span class="comment">// Error buffer</span>
<a name="l03118"></a>03118   <span class="keywordtype">char</span>          newname[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];   <span class="comment">// New filename buffer</span>
<a name="l03119"></a>03119 
<a name="l03120"></a>03120   <span class="comment">// printf(&quot;load(%s)\n&quot;,f); fflush(stdout);</span>
<a name="l03121"></a>03121 
<a name="l03122"></a>03122   <span class="keywordflow">if</span> (strncmp(f, <span class="stringliteral">&quot;ftp:&quot;</span>, 4) == 0 ||
<a name="l03123"></a>03123       strncmp(f, <span class="stringliteral">&quot;http:&quot;</span>, 5) == 0 ||
<a name="l03124"></a>03124       strncmp(f, <span class="stringliteral">&quot;https:&quot;</span>, 6) == 0 ||
<a name="l03125"></a>03125       strncmp(f, <span class="stringliteral">&quot;ipp:&quot;</span>, 4) == 0 ||
<a name="l03126"></a>03126       strncmp(f, <span class="stringliteral">&quot;mailto:&quot;</span>, 7) == 0 ||
<a name="l03127"></a>03127       strncmp(f, <span class="stringliteral">&quot;news:&quot;</span>, 5) == 0) {
<a name="l03128"></a>03128     <span class="keywordtype">char</span> urimsg[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l03129"></a>03129     <span class="keywordflow">if</span> ( <a class="code" href="group__filenames.html#gaa703a16e265f609bedbaf0930dbcd0d7">fl_open_uri</a>(f, urimsg, <span class="keyword">sizeof</span>(urimsg)) == 0 ) {
<a name="l03130"></a>03130       <a class="code" href="classFl__Help__View.html#a6ad8e324f62c8f22c335a8860680e7cb">clear_selection</a>();
<a name="l03131"></a>03131 
<a name="l03132"></a>03132       <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(newname, f, <span class="keyword">sizeof</span>(newname));
<a name="l03133"></a>03133       <span class="keywordflow">if</span> ((target = strrchr(newname, <span class="charliteral">&#39;#&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03134"></a>03134         *target++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03135"></a>03135 
<a name="l03136"></a>03136       <span class="keywordflow">if</span> (link_)
<a name="l03137"></a>03137         localname = (*link_)(<span class="keyword">this</span>, newname);
<a name="l03138"></a>03138       <span class="keywordflow">else</span>
<a name="l03139"></a>03139         localname = filename_;
<a name="l03140"></a>03140 
<a name="l03141"></a>03141       <span class="keywordflow">if</span> (!localname)
<a name="l03142"></a>03142         <span class="keywordflow">return</span> (0);
<a name="l03143"></a>03143 
<a name="l03144"></a>03144       free_data();
<a name="l03145"></a>03145 
<a name="l03146"></a>03146       <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(filename_, newname, <span class="keyword">sizeof</span>(filename_));
<a name="l03147"></a>03147       <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(directory_, newname, <span class="keyword">sizeof</span>(directory_));
<a name="l03148"></a>03148 
<a name="l03149"></a>03149       <span class="comment">// Note: We do not support Windows backslashes, since they are illegal</span>
<a name="l03150"></a>03150       <span class="comment">//       in URLs...</span>
<a name="l03151"></a>03151       <span class="keywordflow">if</span> ((slash = strrchr(directory_, <span class="charliteral">&#39;/&#39;</span>)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03152"></a>03152         directory_[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03153"></a>03153       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (slash &gt; directory_ &amp;&amp; slash[-1] != <span class="charliteral">&#39;/&#39;</span>)
<a name="l03154"></a>03154         *slash = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03155"></a>03155 
<a name="l03156"></a>03156       <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(error, <span class="keyword">sizeof</span>(error),
<a name="l03157"></a>03157                <span class="stringliteral">&quot;&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;Error&lt;/TITLE&gt;&lt;/HEAD&gt;&quot;</span>
<a name="l03158"></a>03158                <span class="stringliteral">&quot;&lt;BODY&gt;&lt;H1&gt;Error&lt;/H1&gt;&quot;</span>
<a name="l03159"></a>03159                <span class="stringliteral">&quot;&lt;P&gt;Unable to follow the link \&quot;%s\&quot; - &quot;</span>
<a name="l03160"></a>03160                <span class="stringliteral">&quot;%s.&lt;/P&gt;&lt;/BODY&gt;&quot;</span>,
<a name="l03161"></a>03161                f, urimsg);
<a name="l03162"></a>03162       <a class="code" href="classFl__Help__View.html#a09dcd042eaca8a2d1818ff974138d0f6">value</a>(error);
<a name="l03163"></a>03163       <span class="comment">//return(-1);</span>
<a name="l03164"></a>03164     }
<a name="l03165"></a>03165     <span class="keywordflow">return</span>(0);
<a name="l03166"></a>03166   }
<a name="l03167"></a>03167 
<a name="l03168"></a>03168   <a class="code" href="classFl__Help__View.html#a6ad8e324f62c8f22c335a8860680e7cb">clear_selection</a>();
<a name="l03169"></a>03169 
<a name="l03170"></a>03170   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(newname, f, <span class="keyword">sizeof</span>(newname));
<a name="l03171"></a>03171   <span class="keywordflow">if</span> ((target = strrchr(newname, <span class="charliteral">&#39;#&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03172"></a>03172     *target++ = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03173"></a>03173 
<a name="l03174"></a>03174   <span class="keywordflow">if</span> (link_)
<a name="l03175"></a>03175     localname = (*link_)(<span class="keyword">this</span>, newname);
<a name="l03176"></a>03176   <span class="keywordflow">else</span>
<a name="l03177"></a>03177     localname = filename_;
<a name="l03178"></a>03178 
<a name="l03179"></a>03179   <span class="keywordflow">if</span> (!localname)
<a name="l03180"></a>03180     <span class="keywordflow">return</span> (0);
<a name="l03181"></a>03181 
<a name="l03182"></a>03182   free_data();
<a name="l03183"></a>03183 
<a name="l03184"></a>03184   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(filename_, newname, <span class="keyword">sizeof</span>(filename_));
<a name="l03185"></a>03185   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(directory_, newname, <span class="keyword">sizeof</span>(directory_));
<a name="l03186"></a>03186 
<a name="l03187"></a>03187   <span class="comment">// Note: We do not support Windows backslashes, since they are illegal</span>
<a name="l03188"></a>03188   <span class="comment">//       in URLs...</span>
<a name="l03189"></a>03189   <span class="keywordflow">if</span> ((slash = strrchr(directory_, <span class="charliteral">&#39;/&#39;</span>)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03190"></a>03190     directory_[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03191"></a>03191   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (slash &gt; directory_ &amp;&amp; slash[-1] != <span class="charliteral">&#39;/&#39;</span>)
<a name="l03192"></a>03192     *slash = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l03193"></a>03193 
<a name="l03194"></a>03194   <span class="keywordflow">if</span> (strncmp(localname, <span class="stringliteral">&quot;file:&quot;</span>, 5) == 0)
<a name="l03195"></a>03195     localname += 5;     <span class="comment">// Adjust for local filename...</span>
<a name="l03196"></a>03196 
<a name="l03197"></a>03197   <span class="keywordflow">if</span> ((fp = <a class="code" href="group__fl__unicode.html#ga8a457e9f251d83d565a62fb3c88cf32e">fl_fopen</a>(localname, <span class="stringliteral">&quot;rb&quot;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03198"></a>03198   {
<a name="l03199"></a>03199     fseek(fp, 0, <a class="code" href="zconf_8h.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>);
<a name="l03200"></a>03200     len = ftell(fp);
<a name="l03201"></a>03201     rewind(fp);
<a name="l03202"></a>03202 
<a name="l03203"></a>03203     value_ = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)calloc(len + 1, 1);
<a name="l03204"></a>03204     <span class="keywordflow">if</span> (fread((<span class="keywordtype">void</span> *)value_, 1, len, fp)==0) { <span class="comment">/* use default 0 */</span> }
<a name="l03205"></a>03205     fclose(fp);
<a name="l03206"></a>03206   }
<a name="l03207"></a>03207   <span class="keywordflow">else</span>
<a name="l03208"></a>03208   {
<a name="l03209"></a>03209     <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(error, <span class="keyword">sizeof</span>(error),
<a name="l03210"></a>03210              <span class="stringliteral">&quot;&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;Error&lt;/TITLE&gt;&lt;/HEAD&gt;&quot;</span>
<a name="l03211"></a>03211              <span class="stringliteral">&quot;&lt;BODY&gt;&lt;H1&gt;Error&lt;/H1&gt;&quot;</span>
<a name="l03212"></a>03212              <span class="stringliteral">&quot;&lt;P&gt;Unable to follow the link \&quot;%s\&quot; - &quot;</span>
<a name="l03213"></a>03213              <span class="stringliteral">&quot;%s.&lt;/P&gt;&lt;/BODY&gt;&quot;</span>,
<a name="l03214"></a>03214              localname, strerror(errno));
<a name="l03215"></a>03215     value_ = strdup(error);
<a name="l03216"></a>03216   }
<a name="l03217"></a>03217 
<a name="l03218"></a>03218   initial_load = 1;
<a name="l03219"></a>03219   format();
<a name="l03220"></a>03220   initial_load = 0;
<a name="l03221"></a>03221 
<a name="l03222"></a>03222   <span class="keywordflow">if</span> (target)
<a name="l03223"></a>03223     <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(target);
<a name="l03224"></a>03224   <span class="keywordflow">else</span>
<a name="l03225"></a>03225     <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(0);
<a name="l03226"></a>03226 
<a name="l03227"></a>03227   <span class="keywordflow">return</span> (0);
<a name="l03228"></a>03228 }
<a name="l03229"></a>03229 
<a name="l03230"></a>03230 
<a name="l03233"></a>03233 <span class="keywordtype">void</span>
<a name="l03234"></a><a class="code" href="classFl__Help__View.html#ab5ef730c30f06bf24a55ff70c6cdd490">03234</a> <a class="code" href="classFl__Help__View.html#ab5ef730c30f06bf24a55ff70c6cdd490">Fl_Help_View::resize</a>(<span class="keywordtype">int</span> xx,    <span class="comment">// I - New left position</span>
<a name="l03235"></a>03235                      <span class="keywordtype">int</span> yy,    <span class="comment">// I - New top position</span>
<a name="l03236"></a>03236                      <span class="keywordtype">int</span> ww,    <span class="comment">// I - New width</span>
<a name="l03237"></a>03237                      <span class="keywordtype">int</span> hh)    <span class="comment">// I - New height</span>
<a name="l03238"></a>03238 {
<a name="l03239"></a>03239   <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bc">Fl_Boxtype</a>            b = <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() ? <a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>() : <a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca9374077c9b546ed69f6592c246ba80ad" title="see figure 1">FL_DOWN_BOX</a>;
<a name="l03240"></a>03240                                         <span class="comment">// Box to draw...</span>
<a name="l03241"></a>03241 
<a name="l03242"></a>03242 
<a name="l03243"></a>03243   <a class="code" href="classFl__Help__View.html#ab5ef730c30f06bf24a55ff70c6cdd490">Fl_Widget::resize</a>(xx, yy, ww, hh);
<a name="l03244"></a>03244 
<a name="l03245"></a>03245   <span class="keywordtype">int</span> scrollsize = scrollbar_size_ ? scrollbar_size_ : <a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">Fl::scrollbar_size</a>();
<a name="l03246"></a>03246   scrollbar_.<a class="code" href="classFl__Widget.html#aca98267e7a9b94f699ebd27d9f59e8bb">resize</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - scrollsize - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b) + <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(b),
<a name="l03247"></a>03247                     <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + <a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(b), scrollsize, <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - scrollsize - <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b));
<a name="l03248"></a>03248   hscrollbar_.<a class="code" href="classFl__Widget.html#aca98267e7a9b94f699ebd27d9f59e8bb">resize</a>(<a class="code" href="classFl__Widget.html#ad09bc10de43482a671f834a653211e9f">x</a>() + <a class="code" href="classFl.html#a2971f20fe3595fd8f77fe73d4eb89594">Fl::box_dx</a>(b),
<a name="l03249"></a>03249                      <a class="code" href="classFl__Widget.html#a54fbdc7be9ae81c6b34abc73a93908f1">y</a>() + <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - scrollsize - <a class="code" href="classFl.html#af739a06d44dc94d09015ed1940b9f066">Fl::box_dh</a>(b) + <a class="code" href="classFl.html#a9fbd0a2a5c43a30893dec05e8d34dc15">Fl::box_dy</a>(b),
<a name="l03250"></a>03250                      <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - scrollsize - <a class="code" href="classFl.html#a9a327ed95a8c2533ca4eee659bf3d557">Fl::box_dw</a>(b), scrollsize);
<a name="l03251"></a>03251 
<a name="l03252"></a>03252   format();
<a name="l03253"></a>03253 }
<a name="l03254"></a>03254 
<a name="l03255"></a>03255 
<a name="l03260"></a>03260 <span class="keywordtype">void</span>
<a name="l03261"></a><a class="code" href="classFl__Help__View.html#a81559cdf5d5380fd1fc3d548b5fd1f4c">03261</a> <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">Fl_Help_View::topline</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *n)    <span class="comment">// I - Target name</span>
<a name="l03262"></a>03262 {
<a name="l03263"></a>03263   <a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a> <a class="code" href="Fl__Text__Editor_8cxx.html#a35af0be900467fedbb610bd6ea65ed78">key</a>,                   <span class="comment">// Target name key</span>
<a name="l03264"></a>03264                 *target;                <span class="comment">// Pointer to matching target</span>
<a name="l03265"></a>03265 
<a name="l03266"></a>03266 
<a name="l03267"></a>03267   <span class="keywordflow">if</span> (ntargets_ == 0)
<a name="l03268"></a>03268     <span class="keywordflow">return</span>;
<a name="l03269"></a>03269 
<a name="l03270"></a>03270   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(key.<a class="code" href="structFl__Help__Target.html#af278961a4d3d04fab6e52c2ea623bd1e" title="Target name.">name</a>, n, <span class="keyword">sizeof</span>(key.<a class="code" href="structFl__Help__Target.html#af278961a4d3d04fab6e52c2ea623bd1e" title="Target name.">name</a>));
<a name="l03271"></a>03271 
<a name="l03272"></a>03272   target = (<a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a> *)bsearch(&amp;key, targets_, ntargets_, <span class="keyword">sizeof</span>(<a class="code" href="structFl__Help__Target.html">Fl_Help_Target</a>),
<a name="l03273"></a>03273                                  (<a class="code" href="Fl__Help__View_8cxx.html#a8b9be097479980ff6481d99f34c666e8">compare_func_t</a>)compare_targets);
<a name="l03274"></a>03274 
<a name="l03275"></a>03275   <span class="keywordflow">if</span> (target != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l03276"></a>03276     <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(target-&gt;<a class="code" href="structFl__Help__Target.html#af7bb97b0dfc3e302d1a4afa7408d0d99" title="Y offset of target.">y</a>);
<a name="l03277"></a>03277 }
<a name="l03278"></a>03278 
<a name="l03279"></a>03279 
<a name="l03287"></a>03287 <span class="keywordtype">void</span>
<a name="l03288"></a><a class="code" href="classFl__Help__View.html#a130b631f4cdc5a5e80a95bb19382a9ba">03288</a> <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">Fl_Help_View::topline</a>(<span class="keywordtype">int</span> top)  <span class="comment">// I - Top line number</span>
<a name="l03289"></a>03289 {
<a name="l03290"></a>03290   <span class="keywordflow">if</span> (!value_)
<a name="l03291"></a>03291     <span class="keywordflow">return</span>;
<a name="l03292"></a>03292 
<a name="l03293"></a>03293   <span class="keywordtype">int</span> scrollsize = scrollbar_size_ ? scrollbar_size_ : <a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">Fl::scrollbar_size</a>();
<a name="l03294"></a>03294   <span class="keywordflow">if</span> (size_ &lt; (<a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - scrollsize) || top &lt; 0)
<a name="l03295"></a>03295     top = 0;
<a name="l03296"></a>03296   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (top &gt; size_)
<a name="l03297"></a>03297     top = size_;
<a name="l03298"></a>03298 
<a name="l03299"></a>03299   topline_ = top;
<a name="l03300"></a>03300 
<a name="l03301"></a>03301   scrollbar_.<a class="code" href="classFl__Scrollbar.html#ac77d402598c922f8eae9987021d84119">value</a>(topline_, <a class="code" href="classFl__Widget.html#a994f71abd8b39c87cef909713d3347f0">h</a>() - scrollsize, 0, size_);
<a name="l03302"></a>03302 
<a name="l03303"></a>03303   <a class="code" href="classFl__Widget.html#a37aa870315e37ddc1246caa6421322f4">do_callback</a>();
<a name="l03304"></a>03304 
<a name="l03305"></a>03305   <a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>();
<a name="l03306"></a>03306 }
<a name="l03307"></a>03307 
<a name="l03308"></a>03308 
<a name="l03316"></a>03316 <span class="keywordtype">void</span>
<a name="l03317"></a><a class="code" href="classFl__Help__View.html#a83f502b7e8e1abe07806e2a693e42a25">03317</a> <a class="code" href="classFl__Help__View.html#a7953715fdd526ba4c3488569cf7ccfd9">Fl_Help_View::leftline</a>(<span class="keywordtype">int</span> left)        <span class="comment">// I - Left position</span>
<a name="l03318"></a>03318 {
<a name="l03319"></a>03319   <span class="keywordflow">if</span> (!value_)
<a name="l03320"></a>03320     <span class="keywordflow">return</span>;
<a name="l03321"></a>03321 
<a name="l03322"></a>03322   <span class="keywordtype">int</span> scrollsize = scrollbar_size_ ? scrollbar_size_ : <a class="code" href="classFl__Help__View.html#a0b75ce107731fc3d20cb67251771ef71">Fl::scrollbar_size</a>();
<a name="l03323"></a>03323   <span class="keywordflow">if</span> (hsize_ &lt; (<a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - scrollsize) || left &lt; 0)
<a name="l03324"></a>03324     left = 0;
<a name="l03325"></a>03325   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (left &gt; hsize_)
<a name="l03326"></a>03326     left = hsize_;
<a name="l03327"></a>03327 
<a name="l03328"></a>03328   leftline_ = left;
<a name="l03329"></a>03329 
<a name="l03330"></a>03330   hscrollbar_.<a class="code" href="classFl__Scrollbar.html#ac77d402598c922f8eae9987021d84119">value</a>(leftline_, <a class="code" href="classFl__Widget.html#aec9e0a6f77d93e6f8caffc1b0f6abbda">w</a>() - scrollsize, 0, hsize_);
<a name="l03331"></a>03331 
<a name="l03332"></a>03332   <a class="code" href="classFl__Widget.html#aa63ce68cbf4620cf8750b868368ea02b">redraw</a>();
<a name="l03333"></a>03333 }
<a name="l03334"></a>03334 
<a name="l03335"></a>03335 
<a name="l03343"></a>03343 <span class="keywordtype">void</span>
<a name="l03344"></a><a class="code" href="classFl__Help__View.html#adefe614a70fbe249dd9cb47278c1cb02">03344</a> <a class="code" href="classFl__Help__View.html#a09dcd042eaca8a2d1818ff974138d0f6">Fl_Help_View::value</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *val)    <span class="comment">// I - Text to view</span>
<a name="l03345"></a>03345 {
<a name="l03346"></a>03346   <a class="code" href="classFl__Help__View.html#a6ad8e324f62c8f22c335a8860680e7cb">clear_selection</a>();
<a name="l03347"></a>03347   free_data();
<a name="l03348"></a>03348   <a class="code" href="classFl__Widget.html#a825fd3487559e1c283550abdb92304ef">set_changed</a>();
<a name="l03349"></a>03349 
<a name="l03350"></a>03350   <span class="keywordflow">if</span> (!val)
<a name="l03351"></a>03351     <span class="keywordflow">return</span>;
<a name="l03352"></a>03352 
<a name="l03353"></a>03353   value_ = strdup(val);
<a name="l03354"></a>03354 
<a name="l03355"></a>03355   initial_load = 1;
<a name="l03356"></a>03356   format();
<a name="l03357"></a>03357   initial_load = 0;
<a name="l03358"></a>03358 
<a name="l03359"></a>03359   <a class="code" href="classFl__Help__View.html#ad2f683e724d5f4f4733abe89239a63b1">topline</a>(0);
<a name="l03360"></a>03360   <a class="code" href="classFl__Help__View.html#a7953715fdd526ba4c3488569cf7ccfd9">leftline</a>(0);
<a name="l03361"></a>03361 }
<a name="l03362"></a>03362 
<a name="l03363"></a>03363 
<a name="l03364"></a>03364 <span class="preprocessor">#ifdef ENC</span>
<a name="l03365"></a>03365 <span class="preprocessor"></span><span class="preprocessor"># undef ENC</span>
<a name="l03366"></a>03366 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l03367"></a>03367 <span class="preprocessor"></span><span class="comment">// part b in the table seems to be mac_roman - beku</span>
<a name="l03368"></a><a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">03368</a> <span class="preprocessor"># define ENC(a, b) a</span>
<a name="l03369"></a>03369 <span class="preprocessor"></span>
<a name="l03370"></a>03370 
<a name="l03372"></a>03372 <span class="keyword">static</span> <span class="keywordtype">int</span>                      <span class="comment">// O - Code or -1 on error</span>
<a name="l03373"></a>03373 quote_char(<span class="keyword">const</span> <span class="keywordtype">char</span> *p) {     <span class="comment">// I - Quoted string</span>
<a name="l03374"></a>03374   <span class="keywordtype">int</span>   <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;                      <span class="comment">// Looping var</span>
<a name="l03375"></a>03375   <span class="keyword">static</span> <span class="keyword">struct </span>{
<a name="l03376"></a>03376     <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="png_8h.html#a90cd716fdb9b68c9661c3ba908a0ceff">name</a>;
<a name="l03377"></a>03377     <span class="keywordtype">int</span>         namelen;
<a name="l03378"></a>03378     <span class="keywordtype">int</span>         <a class="code" href="structcode.html">code</a>;
<a name="l03379"></a>03379   }     *nameptr,               <span class="comment">// Pointer into name array</span>
<a name="l03380"></a>03380         names[] = {             <span class="comment">// Quoting names</span>
<a name="l03381"></a>03381     { <span class="stringliteral">&quot;Aacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(193,231) },
<a name="l03382"></a>03382     { <span class="stringliteral">&quot;aacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(225,135) },
<a name="l03383"></a>03383     { <span class="stringliteral">&quot;Acirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(194,229) },
<a name="l03384"></a>03384     { <span class="stringliteral">&quot;acirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(226,137) },
<a name="l03385"></a>03385     { <span class="stringliteral">&quot;acute;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(180,171) },
<a name="l03386"></a>03386     { <span class="stringliteral">&quot;AElig;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(198,174) },
<a name="l03387"></a>03387     { <span class="stringliteral">&quot;aelig;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(230,190) },
<a name="l03388"></a>03388     { <span class="stringliteral">&quot;Agrave;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(192,203) },
<a name="l03389"></a>03389     { <span class="stringliteral">&quot;agrave;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(224,136) },
<a name="l03390"></a>03390     { <span class="stringliteral">&quot;amp;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(<span class="charliteral">&#39;&amp;&#39;</span>,<span class="charliteral">&#39;&amp;&#39;</span>) },
<a name="l03391"></a>03391     { <span class="stringliteral">&quot;Aring;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(197,129) },
<a name="l03392"></a>03392     { <span class="stringliteral">&quot;aring;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(229,140) },
<a name="l03393"></a>03393     { <span class="stringliteral">&quot;Atilde;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(195,204) },
<a name="l03394"></a>03394     { <span class="stringliteral">&quot;atilde;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(227,139) },
<a name="l03395"></a>03395     { <span class="stringliteral">&quot;Auml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(196,128) },
<a name="l03396"></a>03396     { <span class="stringliteral">&quot;auml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(228,138) },
<a name="l03397"></a>03397     { <span class="stringliteral">&quot;brvbar;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(166, -1) },
<a name="l03398"></a>03398     { <span class="stringliteral">&quot;bull;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(149,165) },
<a name="l03399"></a>03399     { <span class="stringliteral">&quot;Ccedil;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(199,199) },
<a name="l03400"></a>03400     { <span class="stringliteral">&quot;ccedil;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(231,141) },
<a name="l03401"></a>03401     { <span class="stringliteral">&quot;cedil;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(184,252) },
<a name="l03402"></a>03402     { <span class="stringliteral">&quot;cent;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(162,162) },
<a name="l03403"></a>03403     { <span class="stringliteral">&quot;copy;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(169,169) },
<a name="l03404"></a>03404     { <span class="stringliteral">&quot;curren;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(164, -1) },
<a name="l03405"></a>03405     { <span class="stringliteral">&quot;deg;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(176,161) },
<a name="l03406"></a>03406     { <span class="stringliteral">&quot;divide;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(247,214) },
<a name="l03407"></a>03407     { <span class="stringliteral">&quot;Eacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(201,131) },
<a name="l03408"></a>03408     { <span class="stringliteral">&quot;eacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(233,142) },
<a name="l03409"></a>03409     { <span class="stringliteral">&quot;Ecirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(202,230) },
<a name="l03410"></a>03410     { <span class="stringliteral">&quot;ecirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(234,144) },
<a name="l03411"></a>03411     { <span class="stringliteral">&quot;Egrave;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(200,233) },
<a name="l03412"></a>03412     { <span class="stringliteral">&quot;egrave;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(232,143) },
<a name="l03413"></a>03413     { <span class="stringliteral">&quot;ETH;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(208, -1) },
<a name="l03414"></a>03414     { <span class="stringliteral">&quot;eth;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(240, -1) },
<a name="l03415"></a>03415     { <span class="stringliteral">&quot;Euml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(203,232) },
<a name="l03416"></a>03416     { <span class="stringliteral">&quot;euml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(235,145) },
<a name="l03417"></a>03417     { <span class="stringliteral">&quot;euro;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(128,219) },
<a name="l03418"></a>03418     { <span class="stringliteral">&quot;frac12;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(189, -1) },
<a name="l03419"></a>03419     { <span class="stringliteral">&quot;frac14;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(188, -1) },
<a name="l03420"></a>03420     { <span class="stringliteral">&quot;frac34;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(190, -1) },
<a name="l03421"></a>03421     { <span class="stringliteral">&quot;gt;&quot;</span>,     3, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(<span class="charliteral">&#39;&gt;&#39;</span>,<span class="charliteral">&#39;&gt;&#39;</span>) },
<a name="l03422"></a>03422     { <span class="stringliteral">&quot;Iacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(205,234) },
<a name="l03423"></a>03423     { <span class="stringliteral">&quot;iacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(237,146) },
<a name="l03424"></a>03424     { <span class="stringliteral">&quot;Icirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(206,235) },
<a name="l03425"></a>03425     { <span class="stringliteral">&quot;icirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(238,148) },
<a name="l03426"></a>03426     { <span class="stringliteral">&quot;iexcl;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(161,193) },
<a name="l03427"></a>03427     { <span class="stringliteral">&quot;Igrave;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(204,237) },
<a name="l03428"></a>03428     { <span class="stringliteral">&quot;igrave;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(236,147) },
<a name="l03429"></a>03429     { <span class="stringliteral">&quot;iquest;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(191,192) },
<a name="l03430"></a>03430     { <span class="stringliteral">&quot;Iuml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(207,236) },
<a name="l03431"></a>03431     { <span class="stringliteral">&quot;iuml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(239,149) },
<a name="l03432"></a>03432     { <span class="stringliteral">&quot;laquo;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(171,199) },
<a name="l03433"></a>03433     { <span class="stringliteral">&quot;lt;&quot;</span>,     3, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(<span class="charliteral">&#39;&lt;&#39;</span>,<span class="charliteral">&#39;&lt;&#39;</span>) },
<a name="l03434"></a>03434     { <span class="stringliteral">&quot;macr;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(175,248) },
<a name="l03435"></a>03435     { <span class="stringliteral">&quot;micro;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(181,181) },
<a name="l03436"></a>03436     { <span class="stringliteral">&quot;middot;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(183,225) },
<a name="l03437"></a>03437     { <span class="stringliteral">&quot;nbsp;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(<span class="charliteral">&#39; &#39;</span>,<span class="charliteral">&#39; &#39;</span>) },
<a name="l03438"></a>03438     { <span class="stringliteral">&quot;not;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(172,194) },
<a name="l03439"></a>03439     { <span class="stringliteral">&quot;Ntilde;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(209,132) },
<a name="l03440"></a>03440     { <span class="stringliteral">&quot;ntilde;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(241,150) },
<a name="l03441"></a>03441     { <span class="stringliteral">&quot;Oacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(211,238) },
<a name="l03442"></a>03442     { <span class="stringliteral">&quot;oacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(243,151) },
<a name="l03443"></a>03443     { <span class="stringliteral">&quot;Ocirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(212,239) },
<a name="l03444"></a>03444     { <span class="stringliteral">&quot;ocirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(244,153) },
<a name="l03445"></a>03445     { <span class="stringliteral">&quot;Ograve;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(210,241) },
<a name="l03446"></a>03446     { <span class="stringliteral">&quot;ograve;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(242,152) },
<a name="l03447"></a>03447     { <span class="stringliteral">&quot;ordf;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(170,187) },
<a name="l03448"></a>03448     { <span class="stringliteral">&quot;ordm;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(186,188) },
<a name="l03449"></a>03449     { <span class="stringliteral">&quot;Oslash;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(216,175) },
<a name="l03450"></a>03450     { <span class="stringliteral">&quot;oslash;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(248,191) },
<a name="l03451"></a>03451     { <span class="stringliteral">&quot;Otilde;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(213,205) },
<a name="l03452"></a>03452     { <span class="stringliteral">&quot;otilde;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(245,155) },
<a name="l03453"></a>03453     { <span class="stringliteral">&quot;Ouml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(214,133) },
<a name="l03454"></a>03454     { <span class="stringliteral">&quot;ouml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(246,154) },
<a name="l03455"></a>03455     { <span class="stringliteral">&quot;para;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(182,166) },
<a name="l03456"></a>03456     { <span class="stringliteral">&quot;premil;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(137,228) },
<a name="l03457"></a>03457     { <span class="stringliteral">&quot;plusmn;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(177,177) },
<a name="l03458"></a>03458     { <span class="stringliteral">&quot;pound;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(163,163) },
<a name="l03459"></a>03459     { <span class="stringliteral">&quot;quot;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(<span class="charliteral">&#39;\&quot;&#39;</span>,<span class="charliteral">&#39;\&quot;&#39;</span>) },
<a name="l03460"></a>03460     { <span class="stringliteral">&quot;raquo;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(187,200) },
<a name="l03461"></a>03461     { <span class="stringliteral">&quot;reg;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(174,168) },
<a name="l03462"></a>03462     { <span class="stringliteral">&quot;sect;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(167,164) },
<a name="l03463"></a>03463     { <span class="stringliteral">&quot;shy;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(173,<span class="charliteral">&#39;-&#39;</span>) },
<a name="l03464"></a>03464     { <span class="stringliteral">&quot;sup1;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(185, -1) },
<a name="l03465"></a>03465     { <span class="stringliteral">&quot;sup2;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(178, -1) },
<a name="l03466"></a>03466     { <span class="stringliteral">&quot;sup3;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(179, -1) },
<a name="l03467"></a>03467     { <span class="stringliteral">&quot;szlig;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(223,167) },
<a name="l03468"></a>03468     { <span class="stringliteral">&quot;THORN;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(222, -1) },
<a name="l03469"></a>03469     { <span class="stringliteral">&quot;thorn;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(254, -1) },
<a name="l03470"></a>03470     { <span class="stringliteral">&quot;times;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(215,<span class="charliteral">&#39;x&#39;</span>) },
<a name="l03471"></a>03471     { <span class="stringliteral">&quot;trade;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(153,170) },
<a name="l03472"></a>03472     { <span class="stringliteral">&quot;Uacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(218,242) },
<a name="l03473"></a>03473     { <span class="stringliteral">&quot;uacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(250,156) },
<a name="l03474"></a>03474     { <span class="stringliteral">&quot;Ucirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(219,243) },
<a name="l03475"></a>03475     { <span class="stringliteral">&quot;ucirc;&quot;</span>,  6, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(251,158) },
<a name="l03476"></a>03476     { <span class="stringliteral">&quot;Ugrave;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(217,244) },
<a name="l03477"></a>03477     { <span class="stringliteral">&quot;ugrave;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(249,157) },
<a name="l03478"></a>03478     { <span class="stringliteral">&quot;uml;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(168,172) },
<a name="l03479"></a>03479     { <span class="stringliteral">&quot;Uuml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(220,134) },
<a name="l03480"></a>03480     { <span class="stringliteral">&quot;uuml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(252,159) },
<a name="l03481"></a>03481     { <span class="stringliteral">&quot;Yacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(221, -1) },
<a name="l03482"></a>03482     { <span class="stringliteral">&quot;yacute;&quot;</span>, 7, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(253, -1) },
<a name="l03483"></a>03483     { <span class="stringliteral">&quot;yen;&quot;</span>,    4, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(165,180) },
<a name="l03484"></a>03484     { <span class="stringliteral">&quot;Yuml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(159,217) },
<a name="l03485"></a>03485     { <span class="stringliteral">&quot;yuml;&quot;</span>,   5, <a class="code" href="Fl__Help__View_8cxx.html#a165817aa6b4a942948d4581f75aaf091">ENC</a>(255,216) }
<a name="l03486"></a>03486   };
<a name="l03487"></a>03487 
<a name="l03488"></a>03488   <span class="keywordflow">if</span> (!strchr(p, <span class="charliteral">&#39;;&#39;</span>)) <span class="keywordflow">return</span> -1;
<a name="l03489"></a>03489   <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;#&#39;</span>) {
<a name="l03490"></a>03490     <span class="keywordflow">if</span> (*(p+1) == <span class="charliteral">&#39;x&#39;</span> || *(p+1) == <span class="charliteral">&#39;X&#39;</span>) <span class="keywordflow">return</span> strtol(p+2, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 16);
<a name="l03491"></a>03491     <span class="keywordflow">else</span> <span class="keywordflow">return</span> atoi(p+1);
<a name="l03492"></a>03492   }
<a name="l03493"></a>03493   <span class="keywordflow">for</span> (i = (<span class="keywordtype">int</span>)(<span class="keyword">sizeof</span>(names) / <span class="keyword">sizeof</span>(names[0])), nameptr = names; i &gt; 0; i --, nameptr ++)
<a name="l03494"></a>03494     <span class="keywordflow">if</span> (strncmp(p, nameptr-&gt;name, nameptr-&gt;namelen) == 0)
<a name="l03495"></a>03495       <span class="keywordflow">return</span> nameptr-&gt;code;
<a name="l03496"></a>03496 
<a name="l03497"></a>03497   <span class="keywordflow">return</span> -1;
<a name="l03498"></a>03498 }
<a name="l03499"></a>03499 
<a name="l03500"></a>03500 
<a name="l03502"></a>03502 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l03503"></a>03503 scrollbar_callback(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *s, <span class="keywordtype">void</span> *)
<a name="l03504"></a>03504 {
<a name="l03505"></a>03505   ((<a class="code" href="classFl__Help__View.html">Fl_Help_View</a> *)(s-&gt;<a class="code" href="classFl__Widget.html#a77af13bd8284ed43dc8c402a7224bd99">parent</a>()))-&gt;topline(<span class="keywordtype">int</span>(((<a class="code" href="classFl__Scrollbar.html">Fl_Scrollbar</a>*)s)-&gt;<a class="code" href="png_8h.html#a58342413057d091672287c7522a6137f">value</a>()));
<a name="l03506"></a>03506 }
<a name="l03507"></a>03507 
<a name="l03508"></a>03508 
<a name="l03510"></a>03510 <span class="keyword">static</span> <span class="keywordtype">void</span>
<a name="l03511"></a>03511 hscrollbar_callback(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *s, <span class="keywordtype">void</span> *)
<a name="l03512"></a>03512 {
<a name="l03513"></a>03513   ((<a class="code" href="classFl__Help__View.html">Fl_Help_View</a> *)(s-&gt;<a class="code" href="classFl__Widget.html#a77af13bd8284ed43dc8c402a7224bd99">parent</a>()))-&gt;leftline(<span class="keywordtype">int</span>(((<a class="code" href="classFl__Scrollbar.html">Fl_Scrollbar</a>*)s)-&gt;<a class="code" href="png_8h.html#a58342413057d091672287c7522a6137f">value</a>()));
<a name="l03514"></a>03514 }
<a name="l03515"></a>03515 
<a name="l03516"></a>03516 
<a name="l03517"></a>03517 <span class="comment">//</span>
<a name="l03518"></a>03518 <span class="comment">// End of &quot;$Id: Fl_Help_View.cxx 8063 2010-12-19 21:20:10Z matt $&quot;.</span>
<a name="l03519"></a>03519 <span class="comment">//</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="Fl__Help__View_8cxx.html">Fl_Help_View.cxx</a>      </li>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="#" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3</small></address>
</body>

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/Fl__Help__View_8cxx_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:41:29 GMT -->
</html>
