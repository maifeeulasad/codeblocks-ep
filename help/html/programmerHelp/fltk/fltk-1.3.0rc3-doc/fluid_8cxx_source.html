<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/fluid_8cxx_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:37:54 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SfR Fresh Dox - fltk: fltk-1.3.0rc3/fluid/fluid.cxx Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">fltk&#160;<span id="projectnumber">1.3.0rc3</span></div>
   <div id="projectbrief">About: <A HREF= http://www.fltk.org/>FLTK</A> (Fast Light Tool Kit) is a cross-platform C++ GUI toolkit for UNIX/Linux (X11), Microsoft Windows, and MacOS X. Release candidate.<BR><IMG SRC="../warix/forest1.gif" ALT="">&nbsp;&nbsp;<A HREF="http://www.sfr-fresh.com/" TITLE="SfR Fresh Home">SfR Fresh</A> <A HREF="http://www.sfr-fresh.com/warix/features.html#doxygen" TITLE="SfR Fresh Doxygen Support Info">Dox</A>: <A HREF="../fresh/unix/misc/fltk-1.3.0rc3-source.tar.gz/index.html" TITLE="SfR Fresh: fltk-1.3.0rc3-source.tar.gz Contents &amp; Download Page">fltk-1.3.0rc3-source.tar.gz</A> ("inofficial" and yet experimental doxygen-generated source code documentation)&nbsp;&nbsp;<IMG SRC="../warix/forest2.gif" ALT=""><P></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index-2.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('fluid_8cxx.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<h1>fluid.cxx</h1>  </div>
</div>
<div class="contents">
<a href="fluid_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">//</span>
<a name="l00002"></a>00002 <span class="comment">// &quot;$Id: fluid.cxx 8202 2011-01-06 21:36:04Z matt $&quot;</span>
<a name="l00003"></a>00003 <span class="comment">//</span>
<a name="l00004"></a>00004 <span class="comment">// FLUID main entry for the Fast Light Tool Kit (FLTK).</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">// Copyright 1998-2010 by Bill Spitzak and others.</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// This library is free software; you can redistribute it and/or</span>
<a name="l00009"></a>00009 <span class="comment">// modify it under the terms of the GNU Library General Public</span>
<a name="l00010"></a>00010 <span class="comment">// License as published by the Free Software Foundation; either</span>
<a name="l00011"></a>00011 <span class="comment">// version 2 of the License, or (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// This library is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<a name="l00016"></a>00016 <span class="comment">// Library General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">// You should have received a copy of the GNU Library General Public</span>
<a name="l00019"></a>00019 <span class="comment">// License along with this library; if not, write to the Free Software</span>
<a name="l00020"></a>00020 <span class="comment">// Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307</span>
<a name="l00021"></a>00021 <span class="comment">// USA.</span>
<a name="l00022"></a>00022 <span class="comment">//</span>
<a name="l00023"></a>00023 <span class="comment">// Please report all bugs and problems on the following page:</span>
<a name="l00024"></a>00024 <span class="comment">//</span>
<a name="l00025"></a>00025 <span class="comment">//     http://www.fltk.org/str.php</span>
<a name="l00026"></a>00026 <span class="comment">//</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;FL/Fl.H&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;FL/Fl_Double_Window.H&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;FL/Fl_Box.H&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;FL/Fl_Button.H&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;FL/Fl_File_Icon.H&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;FL/Fl_Help_Dialog.H&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;FL/Fl_Hold_Browser.H&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;FL/Fl_Menu_Bar.H&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;FL/Fl_Input.H&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;FL/Fl_Plugin.H&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;FL/fl_ask.H&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;FL/fl_draw.H&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;FL/Fl_File_Chooser.H&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;FL/fl_message.H&gt;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &lt;FL/filename.H&gt;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &lt;sys/stat.h&gt;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;time.h&gt;</span> <span class="comment">// time(), localtime(), etc.</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">#include &quot;<a class="code" href="flstring_8h.html">../src/flstring.h</a>&quot;</span>
<a name="l00050"></a>00050 <span class="preprocessor">#include &quot;<a class="code" href="alignment__panel_8h.html">alignment_panel.h</a>&quot;</span>
<a name="l00051"></a>00051 <span class="preprocessor">#include &quot;<a class="code" href="function__panel_8h.html">function_panel.h</a>&quot;</span>
<a name="l00052"></a>00052 <span class="preprocessor">#include &quot;<a class="code" href="template__panel_8h.html">template_panel.h</a>&quot;</span>
<a name="l00053"></a>00053 <span class="preprocessor">#if !defined(WIN32) || defined(__CYGWIN__)</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#  include &quot;<a class="code" href="fluid_2print__panel_8cxx.html">print_panel.cxx</a>&quot;</span>
<a name="l00055"></a>00055 <span class="preprocessor">#endif // !WIN32 || __CYGWIN__</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a>00057 <span class="preprocessor">#if defined(WIN32) &amp;&amp; !defined(__CYGWIN__)</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;direct.h&gt;</span>
<a name="l00059"></a>00059 <span class="preprocessor">#  include &lt;windows.h&gt;</span>
<a name="l00060"></a>00060 <span class="preprocessor">#  include &lt;io.h&gt;</span>
<a name="l00061"></a>00061 <span class="preprocessor">#  include &lt;fcntl.h&gt;</span>
<a name="l00062"></a>00062 <span class="preprocessor">#  include &lt;commdlg.h&gt;</span>
<a name="l00063"></a>00063 <span class="preprocessor">#  include &lt;FL/x.H&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#  ifndef __WATCOMC__</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="comment">// Visual C++ 2005 incorrectly displays a warning about the use of POSIX APIs</span>
<a name="l00066"></a>00066 <span class="comment">// on Windows, which is supposed to be POSIX compliant...</span>
<a name="l00067"></a>00067 <span class="preprocessor">#    define access _access</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="preprocessor">#    define chdir _chdir</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span><span class="preprocessor">#    define getcwd _getcwd</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="preprocessor">#  endif // !__WATCOMC__</span>
<a name="l00071"></a>00071 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;unistd.h&gt;</span>
<a name="l00073"></a>00073 <span class="preprocessor">#endif</span>
<a name="l00074"></a>00074 <span class="preprocessor"></span><span class="preprocessor">#ifdef __EMX__</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;X11/Xlibint.h&gt;</span>
<a name="l00076"></a>00076 <span class="preprocessor">#endif</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a>00078 <span class="preprocessor">#include &quot;<a class="code" href="about__panel_8h.html">about_panel.h</a>&quot;</span>
<a name="l00079"></a>00079 <span class="preprocessor">#include &quot;<a class="code" href="undo_8h.html">undo.h</a>&quot;</span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="preprocessor">#include &quot;<a class="code" href="Fl__Type_8h.html">Fl_Type.h</a>&quot;</span>
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span>
<a name="l00084"></a>00084 {
<a name="l00085"></a>00085 <span class="preprocessor">#if defined(HAVE_LIBPNG) &amp;&amp; defined(HAVE_LIBZ)</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;zlib.h&gt;</span>
<a name="l00087"></a>00087 <span class="preprocessor">#  ifdef HAVE_PNG_H</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span><span class="preprocessor">#    include &lt;png.h&gt;</span>
<a name="l00089"></a>00089 <span class="preprocessor">#  else</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span><span class="preprocessor">#    include &lt;libpng/png.h&gt;</span>
<a name="l00091"></a>00091 <span class="preprocessor">#  endif // HAVE_PNG_H</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span><span class="preprocessor">#endif // HAVE_LIBPNG &amp;&amp; HAVE_LIBZ</span>
<a name="l00093"></a>00093 <span class="preprocessor"></span>}
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="keyword">static</span> <a class="code" href="classFl__Help__Dialog.html">Fl_Help_Dialog</a> *help_dialog = 0;
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <a class="code" href="classFl__Preferences.html" title="Fl_Preferences provides methods to store user settings between application starts.">Fl_Preferences</a>  <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>(<a class="code" href="classFl__Preferences.html#a0947b73d778ca66b9fbb97b75bbbd7cbaaf4354ca5ac4df110c2fd1fc36c61053" title="Preferences apply only to the current user.">Fl_Preferences::USER</a>, <span class="stringliteral">&quot;fltk.org&quot;</span>, <span class="stringliteral">&quot;fluid&quot;</span>);
<a name="l00098"></a><a class="code" href="fluid_8cxx.html#aea7a16a3db8cab79bfcc6fcfb2715d08">00098</a> <span class="keywordtype">int</span> <a class="code" href="Fl__Widget__Type_8cxx.html#aea7a16a3db8cab79bfcc6fcfb2715d08">gridx</a> = 5;
<a name="l00099"></a><a class="code" href="fluid_8cxx.html#aecd27836708382115b8882d43870c1f2">00099</a> <span class="keywordtype">int</span> <a class="code" href="Fl__Widget__Type_8cxx.html#aecd27836708382115b8882d43870c1f2">gridy</a> = 5;
<a name="l00100"></a><a class="code" href="fluid_8cxx.html#a965b906c8fc9bb5596167a229d53d3e5">00100</a> <span class="keywordtype">int</span> <a class="code" href="Fl__Window__Type_8cxx.html#a965b906c8fc9bb5596167a229d53d3e5">snap</a> = 1;
<a name="l00101"></a><a class="code" href="fluid_8cxx.html#a768e737fb16279a5cc49defae2c6b92b">00101</a> <span class="keywordtype">int</span> <a class="code" href="Fl__Window__Type_8cxx.html#a768e737fb16279a5cc49defae2c6b92b">show_guides</a> = 1;
<a name="l00102"></a><a class="code" href="fluid_8cxx.html#a3dc085cfbb8c763efe846750692c305f">00102</a> <span class="keywordtype">int</span> <a class="code" href="alignment__panel_8h.html#a3dc085cfbb8c763efe846750692c305f">show_comments</a> = 1;
<a name="l00103"></a><a class="code" href="fluid_8cxx.html#a634f6bf1dfaec5298e9810659fa65fd8">00103</a> <span class="keywordtype">int</span> <a class="code" href="alignment__panel_8h.html#a634f6bf1dfaec5298e9810659fa65fd8">show_coredevmenus</a> = 1;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="comment">// File history info...</span>
<a name="l00106"></a><a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">00106</a> <span class="keywordtype">char</span>    <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[10][<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00107"></a><a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">00107</a> <span class="keywordtype">char</span>    <a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[10][<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 <span class="keywordtype">void</span>    <a class="code" href="alignment__panel_8h.html#a430dfdf5895b99b13d24f0cd542eda06">load_history</a>();
<a name="l00110"></a>00110 <span class="keywordtype">void</span>    <a class="code" href="fluid_8cxx.html#aec5ea22adaffdb7c81cd1f6346287c22">update_history</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *);
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <span class="comment">// Shell command support...</span>
<a name="l00113"></a>00113 <span class="keywordtype">void</span>    <a class="code" href="fluid_8cxx.html#a6965f54617edc2d93f763e5112658efd">show_shell_window</a>();
<a name="l00114"></a>00114 
<a name="l00115"></a><a class="code" href="fluid_8cxx.html#a533a9a2560bc9f2ea4a1ac0af799f9fa">00115</a> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a> *<a class="code" href="fluid_8cxx.html#a533a9a2560bc9f2ea4a1ac0af799f9fa">save_item</a> = 0L;
<a name="l00116"></a><a class="code" href="fluid_8cxx.html#a5ec161ffb34c6704c83deb7b821c4e47">00116</a> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a> *<a class="code" href="fluid_8cxx.html#a5ec161ffb34c6704c83deb7b821c4e47">history_item</a> = 0L;
<a name="l00117"></a><a class="code" href="fluid_8cxx.html#ae8e405070c846a2726c498e83ba798c4">00117</a> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a> *<a class="code" href="fluid_8cxx.html#ae8e405070c846a2726c498e83ba798c4">widgetbin_item</a> = 0L;
<a name="l00118"></a><a class="code" href="fluid_8cxx.html#a2e4fe8123d67f6c2d2b0ad7017ed26c3">00118</a> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a> *<a class="code" href="fluid_8cxx.html#a2e4fe8123d67f6c2d2b0ad7017ed26c3">sourceview_item</a> = 0L;
<a name="l00119"></a>00119 
<a name="l00121"></a>00121 
<a name="l00122"></a>00122 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *filename;
<a name="l00123"></a>00123 <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">set_filename</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *c);
<a name="l00124"></a>00124 <span class="keywordtype">void</span> <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(<span class="keywordtype">int</span> mf);
<a name="l00125"></a><a class="code" href="fluid_8cxx.html#aec0f4b7eb93b050a62b0b978b2612ff8">00125</a> <span class="keywordtype">int</span> <a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 <span class="keyword">static</span> <span class="keywordtype">char</span>* pwd;
<a name="l00128"></a>00128 <span class="keyword">static</span> <span class="keywordtype">char</span> in_source_dir;
<a name="l00129"></a><a class="code" href="Fluid__Image_8cxx.html#a616925549ca86711c18eb4a6aec4d3eb">00129</a> <span class="keywordtype">void</span> <a class="code" href="Fl__Function__Type_8cxx.html#a616925549ca86711c18eb4a6aec4d3eb">goto_source_dir</a>() {
<a name="l00130"></a>00130   <span class="keywordflow">if</span> (in_source_dir) <span class="keywordflow">return</span>;
<a name="l00131"></a>00131   <span class="keywordflow">if</span> (!filename || !*filename) <span class="keywordflow">return</span>;
<a name="l00132"></a>00132   <span class="keyword">const</span> <span class="keywordtype">char</span> *p = <a class="code" href="group__filenames.html#ga0ac0f44a1709c6ff94f56a8954dc8fd6">fl_filename_name</a>(filename);
<a name="l00133"></a>00133   <span class="keywordflow">if</span> (p &lt;= filename) <span class="keywordflow">return</span>; <span class="comment">// it is in the current directory</span>
<a name="l00134"></a>00134   <span class="keywordtype">char</span> <a class="code" href="png_8h.html#ae666dd7e2f504034709280abeac7616e">buffer</a>[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00135"></a>00135   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(buffer, filename, <span class="keyword">sizeof</span>(buffer));
<a name="l00136"></a>00136   <span class="keywordtype">int</span> n = p-filename; <span class="keywordflow">if</span> (n&gt;1) n--; buffer[n] = 0;
<a name="l00137"></a>00137   <span class="keywordflow">if</span> (!pwd) {
<a name="l00138"></a>00138     pwd = getcwd(0,<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>);
<a name="l00139"></a>00139     <span class="keywordflow">if</span> (!pwd) {fprintf(stderr,<span class="stringliteral">&quot;getwd : %s\n&quot;</span>,strerror(errno)); <span class="keywordflow">return</span>;}
<a name="l00140"></a>00140   }
<a name="l00141"></a>00141   <span class="keywordflow">if</span> (chdir(buffer)&lt;0) {fprintf(stderr, <span class="stringliteral">&quot;Can&#39;t chdir to %s : %s\n&quot;</span>,
<a name="l00142"></a>00142                                 buffer, strerror(errno)); <span class="keywordflow">return</span>;}
<a name="l00143"></a>00143   in_source_dir = 1;
<a name="l00144"></a>00144 }
<a name="l00145"></a>00145 
<a name="l00146"></a><a class="code" href="Fluid__Image_8cxx.html#a4571b9a412d02b63ddd9053de574db37">00146</a> <span class="keywordtype">void</span> <a class="code" href="Fl__Function__Type_8cxx.html#a4571b9a412d02b63ddd9053de574db37">leave_source_dir</a>() {
<a name="l00147"></a>00147   <span class="keywordflow">if</span> (!in_source_dir) <span class="keywordflow">return</span>;
<a name="l00148"></a>00148   <span class="keywordflow">if</span> (chdir(pwd)&lt;0) {fprintf(stderr, <span class="stringliteral">&quot;Can&#39;t chdir to %s : %s\n&quot;</span>,
<a name="l00149"></a>00149                              pwd, strerror(errno));}
<a name="l00150"></a>00150   in_source_dir = 0;
<a name="l00151"></a>00151 }
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="fluid_8cxx.html#adbc9b0521a04cefacc1f3f50547061b3">00153</a> <span class="keywordtype">char</span> <a class="code" href="fluid_8cxx.html#adbc9b0521a04cefacc1f3f50547061b3">position_window</a>(<a class="code" href="classFl__Window.html">Fl_Window</a> *<a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *prefsName, <span class="keywordtype">int</span> Visible, <span class="keywordtype">int</span> X, <span class="keywordtype">int</span> Y, <span class="keywordtype">int</span> W=0, <span class="keywordtype">int</span> <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a>=0 ) {
<a name="l00154"></a>00154   <a class="code" href="classFl__Preferences.html" title="Fl_Preferences provides methods to store user settings between application starts.">Fl_Preferences</a> pos(<a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>, prefsName);
<a name="l00155"></a>00155   <span class="keywordflow">if</span> (<a class="code" href="alignment__panel_8cxx.html#a7414b80c1edc8a111c5f361fe50a340b">prevpos_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l00156"></a>00156     pos.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;x&quot;</span>, X, X);
<a name="l00157"></a>00157     pos.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;y&quot;</span>, Y, Y);
<a name="l00158"></a>00158     <span class="keywordflow">if</span> ( W!=0 ) {
<a name="l00159"></a>00159       pos.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;w&quot;</span>, W, W);
<a name="l00160"></a>00160       pos.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;h&quot;</span>, <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a>, <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a>);
<a name="l00161"></a>00161       w-&gt;<a class="code" href="classFl__Window.html#a7b3f27fe1b0fbc2a06065a7f037a2fbb">resize</a>( X, Y, W, <a class="code" href="Fl__Tooltip_8cxx.html#affa487e8e3cc48473cfc05c0ce0165e9">H</a> );
<a name="l00162"></a>00162     }
<a name="l00163"></a>00163     <span class="keywordflow">else</span>
<a name="l00164"></a>00164       w-&gt;<a class="code" href="classFl__Widget.html#ac45bdb80c3e66c571d0420ebefd4aaa5">position</a>( X, Y );
<a name="l00165"></a>00165   }
<a name="l00166"></a>00166   pos.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;visible&quot;</span>, Visible, Visible);
<a name="l00167"></a>00167   <span class="keywordflow">return</span> Visible;
<a name="l00168"></a>00168 }
<a name="l00169"></a>00169 
<a name="l00170"></a><a class="code" href="fluid_8cxx.html#a36f019f9809d2404b7054188f0a1359e">00170</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a36f019f9809d2404b7054188f0a1359e">save_position</a>(<a class="code" href="classFl__Window.html">Fl_Window</a> *<a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *prefsName) {
<a name="l00171"></a>00171   <a class="code" href="classFl__Preferences.html" title="Fl_Preferences provides methods to store user settings between application starts.">Fl_Preferences</a> pos(<a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>, prefsName);
<a name="l00172"></a>00172   pos.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;x&quot;</span>, w-&gt;<a class="code" href="classFl__Widget.html#abea0b9ad493d58bf7fda8d3c81d477b7">x</a>());
<a name="l00173"></a>00173   pos.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;y&quot;</span>, w-&gt;<a class="code" href="classFl__Widget.html#aec1aded9efdf5f23dfac8cc725cefc4a">y</a>());
<a name="l00174"></a>00174   pos.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;w&quot;</span>, w-&gt;<a class="code" href="classFl__Widget.html#ad59ece778aaf15acc4dd01a8bf5f8012">w</a>());
<a name="l00175"></a>00175   pos.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;h&quot;</span>, w-&gt;<a class="code" href="classFl__Widget.html#aeeabd61e2d10c76cd6600dbbfe951f71">h</a>());
<a name="l00176"></a>00176   pos.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;visible&quot;</span>, (<span class="keywordtype">int</span>)(w-&gt;<a class="code" href="classFl__Window.html#aa09300542b2d8b49fc69a037bdd3b742">shown</a>() &amp;&amp; w-&gt;<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>()));
<a name="l00177"></a>00177 }
<a name="l00178"></a>00178 
<a name="l00179"></a><a class="code" href="fluid_8cxx.html#a55a5e8b88ddb6bb9f8b5b1f6486b9e71">00179</a> <a class="code" href="classFl__Window.html">Fl_Window</a> *<a class="code" href="Fl__Window__Type_8cxx.html#a55a5e8b88ddb6bb9f8b5b1f6486b9e71">main_window</a>;
<a name="l00180"></a><a class="code" href="fluid_8cxx.html#abc4b21b942b8b525ee5ac7a3e6dfd606">00180</a> <a class="code" href="classFl__Menu__Bar.html">Fl_Menu_Bar</a> *<a class="code" href="fluid_8cxx.html#abc4b21b942b8b525ee5ac7a3e6dfd606">main_menubar</a>;
<a name="l00181"></a>00181 
<a name="l00182"></a>00182 <span class="keyword">static</span> <span class="keywordtype">char</span>* cutfname(<span class="keywordtype">int</span> which = 0) {
<a name="l00183"></a>00183   <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="png_8h.html#a90cd716fdb9b68c9661c3ba908a0ceff">name</a>[2][<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00184"></a>00184   <span class="keyword">static</span> <span class="keywordtype">char</span> beenhere = 0;
<a name="l00185"></a>00185 
<a name="l00186"></a>00186   <span class="keywordflow">if</span> (!beenhere) {
<a name="l00187"></a>00187     beenhere = 1;
<a name="l00188"></a>00188     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#acf3c545a4006ef50b091ed45b6f7ce2a" title="Creates a path that is related to the preferences file and that is usable for additional application ...">getUserdataPath</a>(name[0], <span class="keyword">sizeof</span>(name[0]));
<a name="l00189"></a>00189     <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(name[0], <span class="stringliteral">&quot;cut_buffer&quot;</span>, <span class="keyword">sizeof</span>(name[0]));
<a name="l00190"></a>00190     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#acf3c545a4006ef50b091ed45b6f7ce2a" title="Creates a path that is related to the preferences file and that is usable for additional application ...">getUserdataPath</a>(name[1], <span class="keyword">sizeof</span>(name[1]));
<a name="l00191"></a>00191     <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(name[1], <span class="stringliteral">&quot;dup_buffer&quot;</span>, <span class="keyword">sizeof</span>(name[1]));
<a name="l00192"></a>00192   }
<a name="l00193"></a>00193 
<a name="l00194"></a>00194   <span class="keywordflow">return</span> name[which];
<a name="l00195"></a>00195 }
<a name="l00196"></a>00196 
<a name="l00197"></a><a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">00197</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *v) {
<a name="l00198"></a>00198   <span class="keyword">const</span> <span class="keywordtype">char</span> *c = filename;
<a name="l00199"></a>00199   <span class="keywordflow">if</span> (v || !c || !*c) {
<a name="l00200"></a>00200     <a class="code" href="group__group__comdlg.html#gad4e7eaf88fe838a415110280fd636566">fl_file_chooser_ok_label</a>(<span class="stringliteral">&quot;Save&quot;</span>);
<a name="l00201"></a>00201     c=<a class="code" href="group__group__comdlg.html#ga5bc7a0eda4de38cbc33d3a16d5cfd32f">fl_file_chooser</a>(<span class="stringliteral">&quot;Save To:&quot;</span>, <span class="stringliteral">&quot;FLUID Files (*.f[ld])&quot;</span>, c);
<a name="l00202"></a>00202     <a class="code" href="group__group__comdlg.html#gad4e7eaf88fe838a415110280fd636566">fl_file_chooser_ok_label</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00203"></a>00203     <span class="keywordflow">if</span> (!c) <span class="keywordflow">return</span>;
<a name="l00204"></a>00204 
<a name="l00205"></a>00205     <span class="keywordflow">if</span> (!access(c, 0)) {
<a name="l00206"></a>00206       <span class="keyword">const</span> <span class="keywordtype">char</span> *basename;
<a name="l00207"></a>00207       <span class="keywordflow">if</span> ((basename = strrchr(c, <span class="charliteral">&#39;/&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00208"></a>00208         basename ++;
<a name="l00209"></a>00209 <span class="preprocessor">#if defined(WIN32) || defined(__EMX__)</span>
<a name="l00210"></a>00210 <span class="preprocessor"></span>      <span class="keywordflow">if</span> ((basename = strrchr(c, <span class="charliteral">&#39;\\&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)
<a name="l00211"></a>00211         basename ++;
<a name="l00212"></a>00212 <span class="preprocessor">#endif // WIN32 || __EMX__</span>
<a name="l00213"></a>00213 <span class="preprocessor"></span>      <span class="keywordflow">else</span>
<a name="l00214"></a>00214         basename = c;
<a name="l00215"></a>00215 
<a name="l00216"></a>00216       <span class="keywordflow">if</span> (<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;The file \&quot;%s\&quot; already exists.\n&quot;</span>
<a name="l00217"></a>00217                     <span class="stringliteral">&quot;Do you want to replace it?&quot;</span>, <span class="stringliteral">&quot;Cancel&quot;</span>,
<a name="l00218"></a>00218                     <span class="stringliteral">&quot;Replace&quot;</span>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, basename) == 0) <span class="keywordflow">return</span>;
<a name="l00219"></a>00219     }
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="keywordflow">if</span> (v != (<span class="keywordtype">void</span> *)2) <a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">set_filename</a>(c);
<a name="l00222"></a>00222   }
<a name="l00223"></a>00223   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#a058a4fcc0eddbadab12da2d41e0180b6">write_file</a>(c)) {
<a name="l00224"></a>00224     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Error writing %s: %s&quot;</span>, c, strerror(errno));
<a name="l00225"></a>00225     <span class="keywordflow">return</span>;
<a name="l00226"></a>00226   }
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <span class="keywordflow">if</span> (v != (<span class="keywordtype">void</span> *)2) {
<a name="l00229"></a>00229     <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l00230"></a>00230     <a class="code" href="undo_8cxx.html#aebad65eace958854091c2b14fa2428a9">undo_save</a> = <a class="code" href="undo_8cxx.html#adc00ccb4c88ac23b6cf6b1cc51527165">undo_current</a>;
<a name="l00231"></a>00231   }
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00234"></a><a class="code" href="fluid_8cxx.html#a58c4dddbe366ec899e0ffbe4466eae78">00234</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a58c4dddbe366ec899e0ffbe4466eae78">save_template_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00235"></a>00235   <span class="comment">// Setup the template panel...</span>
<a name="l00236"></a>00236   <span class="keywordflow">if</span> (!<a class="code" href="template__panel_8cxx.html#a3c68d0f7b3e6dfc671e4c291ff45945a">template_panel</a>) <a class="code" href="template__panel_8cxx.html#adcb80262ec9b87a2a50920e31678cb9f">make_template_panel</a>();
<a name="l00237"></a>00237 
<a name="l00238"></a>00238   <a class="code" href="template__panel_8cxx.html#abc990e3bc32beeae2902005663533164">template_clear</a>();
<a name="l00239"></a>00239   <a class="code" href="template__panel_8cxx.html#af5358f6fac2c2b2da94ab8a58cde54f4">template_browser</a>-&gt;<a class="code" href="classFl__Browser.html#af2761597d5618fa4d1339563ee127e29">add</a>(<span class="stringliteral">&quot;New Template&quot;</span>);
<a name="l00240"></a>00240   <a class="code" href="template__panel_8cxx.html#af22a0872f52126be5b98aeaf1b7263fe">template_load</a>();
<a name="l00241"></a>00241 
<a name="l00242"></a>00242   <a class="code" href="template__panel_8cxx.html#a885aca9210e4b9daebe680e78a4647a8">template_name</a>-&gt;<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l00243"></a>00243   <a class="code" href="template__panel_8cxx.html#a885aca9210e4b9daebe680e78a4647a8">template_name</a>-&gt;<a class="code" href="classFl__Input__.html#aaccaca04083dc6d2f1c1a4fa273d9048">value</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00244"></a>00244 
<a name="l00245"></a>00245   <a class="code" href="template__panel_8cxx.html#a804f77988c898a89a88c138e97282e90">template_instance</a>-&gt;<a class="code" href="classFl__Widget.html#a1fe8405b86da29d147dc3b5841cf181c">hide</a>();
<a name="l00246"></a>00246 
<a name="l00247"></a>00247   <a class="code" href="template__panel_8cxx.html#aaf4d2ffde786b632a2d90a9509322d10">template_delete</a>-&gt;<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l00248"></a>00248   <a class="code" href="template__panel_8cxx.html#aaf4d2ffde786b632a2d90a9509322d10">template_delete</a>-&gt;<a class="code" href="classFl__Widget.html#a2eb3d2eebe8ba623c4007d4f8e66a1ee">deactivate</a>();
<a name="l00249"></a>00249 
<a name="l00250"></a>00250   <a class="code" href="template__panel_8cxx.html#a5b885d93104059a3c7e04eccf71a08e7">template_submit</a>-&gt;<a class="code" href="classFl__Widget.html#abb0e926996f83bc1c60972afa8284045">label</a>(<span class="stringliteral">&quot;Save&quot;</span>);
<a name="l00251"></a>00251   <a class="code" href="template__panel_8cxx.html#a5b885d93104059a3c7e04eccf71a08e7">template_submit</a>-&gt;<a class="code" href="classFl__Widget.html#a2eb3d2eebe8ba623c4007d4f8e66a1ee">deactivate</a>();
<a name="l00252"></a>00252 
<a name="l00253"></a>00253   <a class="code" href="template__panel_8cxx.html#a3c68d0f7b3e6dfc671e4c291ff45945a">template_panel</a>-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>(<span class="stringliteral">&quot;Save Template&quot;</span>);
<a name="l00254"></a>00254 
<a name="l00255"></a>00255   <span class="comment">// Show the panel and wait for the user to do something...</span>
<a name="l00256"></a>00256   <a class="code" href="template__panel_8cxx.html#a3c68d0f7b3e6dfc671e4c291ff45945a">template_panel</a>-&gt;<a class="code" href="classFl__Double__Window.html#a4d1c3cbb1184c6785df7465b0c657025">show</a>();
<a name="l00257"></a>00257   <span class="keywordflow">while</span> (<a class="code" href="template__panel_8cxx.html#a3c68d0f7b3e6dfc671e4c291ff45945a">template_panel</a>-&gt;<a class="code" href="classFl__Window.html#aa09300542b2d8b49fc69a037bdd3b742">shown</a>()) <a class="code" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait</a>();
<a name="l00258"></a>00258 
<a name="l00259"></a>00259   <span class="comment">// Get the template name, return if it is empty...</span>
<a name="l00260"></a>00260   <span class="keyword">const</span> <span class="keywordtype">char</span> *c = <a class="code" href="template__panel_8cxx.html#a885aca9210e4b9daebe680e78a4647a8">template_name</a>-&gt;<a class="code" href="classFl__Input__.html#aaccaca04083dc6d2f1c1a4fa273d9048">value</a>();
<a name="l00261"></a>00261   <span class="keywordflow">if</span> (!c || !*c) <span class="keywordflow">return</span>;
<a name="l00262"></a>00262 
<a name="l00263"></a>00263   <span class="comment">// Convert template name to filename_with_underscores</span>
<a name="l00264"></a>00264   <span class="keywordtype">char</span> safename[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>], *safeptr;
<a name="l00265"></a>00265   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(safename, c, <span class="keyword">sizeof</span>(safename));
<a name="l00266"></a>00266   <span class="keywordflow">for</span> (safeptr = safename; *safeptr; safeptr ++) {
<a name="l00267"></a>00267     <span class="keywordflow">if</span> (isspace(*safeptr)) *safeptr = <span class="charliteral">&#39;_&#39;</span>;
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="comment">// Find the templates directory...</span>
<a name="l00271"></a>00271   <span class="keywordtype">char</span> filename[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00272"></a>00272   <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#acf3c545a4006ef50b091ed45b6f7ce2a" title="Creates a path that is related to the preferences file and that is usable for additional application ...">getUserdataPath</a>(filename, <span class="keyword">sizeof</span>(filename));
<a name="l00273"></a>00273 
<a name="l00274"></a>00274   <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(filename, <span class="stringliteral">&quot;templates&quot;</span>, <span class="keyword">sizeof</span>(filename));
<a name="l00275"></a>00275 <span class="preprocessor">#if defined(WIN32) &amp;&amp; !defined(__CYGWIN__)</span>
<a name="l00276"></a>00276 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (access(filename, 0)) mkdir(filename);
<a name="l00277"></a>00277 <span class="preprocessor">#else</span>
<a name="l00278"></a>00278 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (access(filename, 0)) mkdir(filename, 0777);
<a name="l00279"></a>00279 <span class="preprocessor">#endif // WIN32 &amp;&amp; !__CYGWIN__</span>
<a name="l00280"></a>00280 <span class="preprocessor"></span>
<a name="l00281"></a>00281   <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(filename, <span class="stringliteral">&quot;/&quot;</span>, <span class="keyword">sizeof</span>(filename));
<a name="l00282"></a>00282   <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(filename, safename, <span class="keyword">sizeof</span>(filename));
<a name="l00283"></a>00283 
<a name="l00284"></a>00284   <span class="keywordtype">char</span> *ext = filename + strlen(filename);
<a name="l00285"></a>00285   <span class="keywordflow">if</span> (ext &gt;= (filename + <span class="keyword">sizeof</span>(filename) - 5)) {
<a name="l00286"></a>00286     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;The template name \&quot;%s\&quot; is too long!&quot;</span>, c);
<a name="l00287"></a>00287     <span class="keywordflow">return</span>;
<a name="l00288"></a>00288   }
<a name="l00289"></a>00289 
<a name="l00290"></a>00290   <span class="comment">// Save the .fl file...</span>
<a name="l00291"></a>00291   strcpy(ext, <span class="stringliteral">&quot;.fl&quot;</span>);
<a name="l00292"></a>00292 
<a name="l00293"></a>00293   <span class="keywordflow">if</span> (!access(filename, 0)) {
<a name="l00294"></a>00294     <span class="keywordflow">if</span> (<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;The template \&quot;%s\&quot; already exists.\n&quot;</span>
<a name="l00295"></a>00295                   <span class="stringliteral">&quot;Do you want to replace it?&quot;</span>, <span class="stringliteral">&quot;Cancel&quot;</span>,
<a name="l00296"></a>00296                   <span class="stringliteral">&quot;Replace&quot;</span>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, c) == 0) <span class="keywordflow">return</span>;
<a name="l00297"></a>00297   }
<a name="l00298"></a>00298 
<a name="l00299"></a>00299   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#a058a4fcc0eddbadab12da2d41e0180b6">write_file</a>(filename)) {
<a name="l00300"></a>00300     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Error writing %s: %s&quot;</span>, filename, strerror(errno));
<a name="l00301"></a>00301     <span class="keywordflow">return</span>;
<a name="l00302"></a>00302   }
<a name="l00303"></a>00303 
<a name="l00304"></a>00304 <span class="preprocessor">#if defined(HAVE_LIBPNG) &amp;&amp; defined(HAVE_LIBZ)</span>
<a name="l00305"></a>00305 <span class="preprocessor"></span>  <span class="comment">// Get the screenshot, if any...</span>
<a name="l00306"></a>00306   <a class="code" href="classFl__Type.html">Fl_Type</a> *t;
<a name="l00307"></a>00307 
<a name="l00308"></a>00308   <span class="keywordflow">for</span> (t = <a class="code" href="classFl__Type.html#a6e61204827c4d0c7c5e5d16f2f698849">Fl_Type::first</a>; t; t = t-&gt;<a class="code" href="classFl__Type.html#a5cd49076cafb035e44c87943acd98136">next</a>) {
<a name="l00309"></a>00309     <span class="comment">// Find the first window...</span>
<a name="l00310"></a>00310     <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classFl__Type.html#a7d11fc59b12a555bd551f95bf35ba375">is_window</a>()) <span class="keywordflow">break</span>;
<a name="l00311"></a>00311   }
<a name="l00312"></a>00312 
<a name="l00313"></a>00313   <span class="keywordflow">if</span> (!t) <span class="keywordflow">return</span>;
<a name="l00314"></a>00314 
<a name="l00315"></a>00315   <span class="comment">// Grab a screenshot...</span>
<a name="l00316"></a>00316   <a class="code" href="classFl__Window__Type.html">Fl_Window_Type</a> *wt = (<a class="code" href="classFl__Window__Type.html">Fl_Window_Type</a> *)t;
<a name="l00317"></a>00317   <a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *pixels;
<a name="l00318"></a>00318   <span class="keywordtype">int</span> <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>, <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320   <span class="keywordflow">if</span> ((pixels = wt-&gt;<a class="code" href="classFl__Window__Type.html#aa6610e39c78c3550e2f3c9a4d026bb01">read_image</a>(w, h)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) <span class="keywordflow">return</span>;
<a name="l00321"></a>00321 
<a name="l00322"></a>00322   <span class="comment">// Save to a PNG file...</span>
<a name="l00323"></a>00323   strcpy(ext, <span class="stringliteral">&quot;.png&quot;</span>);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325   FILE *<a class="code" href="png_8h.html#a2fc770f3075676bb456388a905f1cc99">fp</a>;
<a name="l00326"></a>00326 
<a name="l00327"></a>00327   <span class="keywordflow">if</span> ((fp = <a class="code" href="group__fl__unicode.html#ga8a457e9f251d83d565a62fb3c88cf32e">fl_fopen</a>(filename, <span class="stringliteral">&quot;wb&quot;</span>)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00328"></a>00328     <span class="keyword">delete</span>[] pixels;
<a name="l00329"></a>00329     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Error writing %s: %s&quot;</span>, filename, strerror(errno));
<a name="l00330"></a>00330     <span class="keywordflow">return</span>;
<a name="l00331"></a>00331   }
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   <a class="code" href="png_8h.html#a431351f0dcae8200b5514bcc9c506217">png_structp</a> pptr = <a class="code" href="pngwrite_8c.html#af5e72b38d8667584e1f2002022e2d727">png_create_write_struct</a>(<a class="code" href="png_8h.html#add626ac7b0df735bc999399dbd70c301">PNG_LIBPNG_VER_STRING</a>, 0, 0, 0);
<a name="l00334"></a>00334   <a class="code" href="png_8h.html#ab1f46fcc45e053a9fcb32c8b2ccc0866">png_infop</a> iptr = <a class="code" href="png_8c.html#afaf600dde6e51b9d9ae09dfed09111a7">png_create_info_struct</a>(pptr);
<a name="l00335"></a>00335   <a class="code" href="pngconf_8h.html#ad9305b4048360cace50425303f51ab34">png_bytep</a> <a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a> = (<a class="code" href="pngconf_8h.html#ad9305b4048360cace50425303f51ab34">png_bytep</a>)pixels;
<a name="l00336"></a>00336 
<a name="l00337"></a>00337   <a class="code" href="png_8c.html#ada81de71a2560c00f8db93eb4727f450">png_init_io</a>(pptr, fp);
<a name="l00338"></a>00338   <a class="code" href="pngset_8c.html#aea8072c433d04540b749d7fa5e95eab8">png_set_IHDR</a>(pptr, iptr, w, h, 8, <a class="code" href="png_8h.html#a30350690cac2ef450ec14447793a5a28">PNG_COLOR_TYPE_RGB</a>, <a class="code" href="png_8h.html#ae93a30e20540b6fa168bf2edf8e27002">PNG_INTERLACE_NONE</a>,
<a name="l00339"></a>00339                <a class="code" href="png_8h.html#a3b149ef2d0f4603d5fd356934b229345">PNG_COMPRESSION_TYPE_DEFAULT</a>, <a class="code" href="png_8h.html#addcf51f7decf8f646f88c261448c2e6c">PNG_FILTER_TYPE_DEFAULT</a>);
<a name="l00340"></a>00340   <a class="code" href="pngset_8c.html#ac1dbf3b451fe555d5543cb1c49360b5d">png_set_sRGB</a>(pptr, iptr, <a class="code" href="png_8h.html#abe2fad9beca526ba3e5dd13c40743fa2">PNG_sRGB_INTENT_PERCEPTUAL</a>);
<a name="l00341"></a>00341 
<a name="l00342"></a>00342   <a class="code" href="pngwrite_8c.html#a235653b681745e984b3af5ec1d0d06a2">png_write_info</a>(pptr, iptr);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> = h; <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> &gt; 0; <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a> --, ptr += w * 3) {
<a name="l00345"></a>00345     <a class="code" href="pngwrite_8c.html#ac9fb9650c9db3da22cc4e0465252e2f6">png_write_row</a>(pptr, ptr);
<a name="l00346"></a>00346   }
<a name="l00347"></a>00347 
<a name="l00348"></a>00348   <a class="code" href="pngwrite_8c.html#a7f4d49e4d761688c284ccc2176ad7521">png_write_end</a>(pptr, iptr);
<a name="l00349"></a>00349   <a class="code" href="pngwrite_8c.html#a7fd7eae2e3177be04f49c03bf6f647ff">png_destroy_write_struct</a>(&amp;pptr, &amp;iptr);
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   fclose(fp);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353 <span class="preprocessor">#  if 0 // The original PPM output code...</span>
<a name="l00354"></a>00354 <span class="preprocessor"></span>  strcpy(ext, <span class="stringliteral">&quot;.ppm&quot;</span>);
<a name="l00355"></a>00355   fp = <a class="code" href="group__fl__unicode.html#ga8a457e9f251d83d565a62fb3c88cf32e">fl_fopen</a>(filename, <span class="stringliteral">&quot;wb&quot;</span>);
<a name="l00356"></a>00356   fprintf(fp, <span class="stringliteral">&quot;P6\n%d %d 255\n&quot;</span>, w, h);
<a name="l00357"></a>00357   fwrite(pixels, w * h, 3, fp);
<a name="l00358"></a>00358   fclose(fp);
<a name="l00359"></a>00359 <span class="preprocessor">#  endif // 0</span>
<a name="l00360"></a>00360 <span class="preprocessor"></span>
<a name="l00361"></a>00361   <span class="keyword">delete</span>[] pixels;
<a name="l00362"></a>00362 <span class="preprocessor">#endif // HAVE_LIBPNG &amp;&amp; HAVE_LIBZ</span>
<a name="l00363"></a>00363 <span class="preprocessor"></span>}
<a name="l00364"></a>00364 
<a name="l00365"></a><a class="code" href="fluid_8cxx.html#af883effc2c68a75bc68fe3ce0b0969ee">00365</a> <span class="keywordtype">void</span> <a class="code" href="Fl__Widget__Type_8cxx.html#a2dd24880b3df7bbf9d4d1d751c2ec71e">revert_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *,<span class="keywordtype">void</span> *) {
<a name="l00366"></a>00366   <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) {
<a name="l00367"></a>00367     <span class="keywordflow">if</span> (!<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;This user interface has been changed. Really revert?&quot;</span>,
<a name="l00368"></a>00368                    <span class="stringliteral">&quot;Cancel&quot;</span>, <span class="stringliteral">&quot;Revert&quot;</span>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) <span class="keywordflow">return</span>;
<a name="l00369"></a>00369   }
<a name="l00370"></a>00370   <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l00371"></a>00371   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(filename, 0)) {
<a name="l00372"></a>00372     <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00373"></a>00373     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t read %s: %s&quot;</span>, filename, strerror(errno));
<a name="l00374"></a>00374     <span class="keywordflow">return</span>;
<a name="l00375"></a>00375   }
<a name="l00376"></a>00376   <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00377"></a>00377   <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l00378"></a>00378   <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00379"></a>00379 }
<a name="l00380"></a>00380 
<a name="l00381"></a><a class="code" href="function__panel_8cxx.html#acbffe6f8d55cda6a39766dc92d2e9a9c">00381</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#acbffe6f8d55cda6a39766dc92d2e9a9c">exit_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *,<span class="keywordtype">void</span> *) {
<a name="l00382"></a>00382   <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>)
<a name="l00383"></a>00383     <span class="keywordflow">switch</span> (<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;Do you want to save changes to this user\n&quot;</span>
<a name="l00384"></a>00384                       <span class="stringliteral">&quot;interface before exiting?&quot;</span>, <span class="stringliteral">&quot;Cancel&quot;</span>,
<a name="l00385"></a>00385                       <span class="stringliteral">&quot;Save&quot;</span>, <span class="stringliteral">&quot;Don&#39;t Save&quot;</span>))
<a name="l00386"></a>00386     {
<a name="l00387"></a>00387       <span class="keywordflow">case</span> 0 : <span class="comment">/* Cancel */</span>
<a name="l00388"></a>00388           <span class="keywordflow">return</span>;
<a name="l00389"></a>00389       <span class="keywordflow">case</span> 1 : <span class="comment">/* Save */</span>
<a name="l00390"></a>00390           <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00391"></a>00391           <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) <span class="keywordflow">return</span>;  <span class="comment">// Didn&#39;t save!</span>
<a name="l00392"></a>00392     }
<a name="l00393"></a>00393 
<a name="l00394"></a>00394   <a class="code" href="fluid_8cxx.html#a36f019f9809d2404b7054188f0a1359e">save_position</a>(main_window,<span class="stringliteral">&quot;main_window_pos&quot;</span>);
<a name="l00395"></a>00395 
<a name="l00396"></a>00396   <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a7a3ec739e0139e5d8746207581220e01">widgetbin_panel</a>) {
<a name="l00397"></a>00397     <a class="code" href="fluid_8cxx.html#a36f019f9809d2404b7054188f0a1359e">save_position</a>(<a class="code" href="function__panel_8cxx.html#a7a3ec739e0139e5d8746207581220e01">widgetbin_panel</a>,<span class="stringliteral">&quot;widgetbin_pos&quot;</span>);
<a name="l00398"></a>00398     <span class="keyword">delete</span> <a class="code" href="function__panel_8cxx.html#a7a3ec739e0139e5d8746207581220e01">widgetbin_panel</a>;
<a name="l00399"></a>00399   }
<a name="l00400"></a>00400   <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>) {
<a name="l00401"></a>00401     <a class="code" href="classFl__Preferences.html" title="Fl_Preferences provides methods to store user settings between application starts.">Fl_Preferences</a> svp(<a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>, <span class="stringliteral">&quot;sourceview&quot;</span>);
<a name="l00402"></a>00402     svp.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;autorefresh&quot;</span>, <a class="code" href="function__panel_8cxx.html#a3e341cc2793c5dc3b18ce42f65c8eed7">sv_autorefresh</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>());
<a name="l00403"></a>00403     svp.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;autoposition&quot;</span>, <a class="code" href="function__panel_8cxx.html#a0a51d1f1a2d428a33731600fe900a33f">sv_autoposition</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>());
<a name="l00404"></a>00404     svp.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;tab&quot;</span>, <a class="code" href="function__panel_8cxx.html#a580b1bd56496c60e2c72d757622a6dbb">sv_tab</a>-&gt;<a class="code" href="classFl__Group.html#a58574e53e1e33a95364e259fd7011f5c">find</a>(<a class="code" href="function__panel_8cxx.html#a580b1bd56496c60e2c72d757622a6dbb">sv_tab</a>-&gt;<a class="code" href="classFl__Tabs.html#aa76c3a292bf992a319849dec3beaa825">value</a>()));
<a name="l00405"></a>00405     <a class="code" href="fluid_8cxx.html#a36f019f9809d2404b7054188f0a1359e">save_position</a>(<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>,<span class="stringliteral">&quot;sourceview_pos&quot;</span>);
<a name="l00406"></a>00406     <span class="keyword">delete</span> <a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>;
<a name="l00407"></a>00407   }
<a name="l00408"></a>00408   <span class="keywordflow">if</span> (<a class="code" href="about__panel_8cxx.html#a788de3f900e9297d91916fb0591d8992">about_panel</a>)
<a name="l00409"></a>00409     <span class="keyword">delete</span> <a class="code" href="about__panel_8cxx.html#a788de3f900e9297d91916fb0591d8992">about_panel</a>;
<a name="l00410"></a>00410   <span class="keywordflow">if</span> (help_dialog)
<a name="l00411"></a>00411     <span class="keyword">delete</span> help_dialog;
<a name="l00412"></a>00412 
<a name="l00413"></a>00413   <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00414"></a>00414 
<a name="l00415"></a>00415   exit(0);
<a name="l00416"></a>00416 }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 <span class="preprocessor">#ifdef __APPLE__</span>
<a name="l00419"></a>00419 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;FL/x.H&gt;</span>
<a name="l00420"></a>00420 
<a name="l00421"></a>00421 <span class="keywordtype">void</span>
<a name="l00422"></a>00422 apple_open_cb(<span class="keyword">const</span> <span class="keywordtype">char</span> *c) {
<a name="l00423"></a>00423   <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) {
<a name="l00424"></a>00424     <span class="keywordflow">switch</span> (<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;Do you want to save changes to this user\n&quot;</span>
<a name="l00425"></a>00425                       <span class="stringliteral">&quot;interface before opening another one?&quot;</span>, <span class="stringliteral">&quot;Don&#39;t Save&quot;</span>,
<a name="l00426"></a>00426                       <span class="stringliteral">&quot;Save&quot;</span>, <span class="stringliteral">&quot;Cancel&quot;</span>))
<a name="l00427"></a>00427     {
<a name="l00428"></a>00428       <span class="keywordflow">case</span> 0 : <span class="comment">/* Cancel */</span>
<a name="l00429"></a>00429           <span class="keywordflow">return</span>;
<a name="l00430"></a>00430       <span class="keywordflow">case</span> 1 : <span class="comment">/* Save */</span>
<a name="l00431"></a>00431           <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00432"></a>00432           <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) <span class="keywordflow">return</span>;  <span class="comment">// Didn&#39;t save!</span>
<a name="l00433"></a>00433     }
<a name="l00434"></a>00434   }
<a name="l00435"></a>00435   <span class="keyword">const</span> <span class="keywordtype">char</span> *oldfilename;
<a name="l00436"></a>00436   oldfilename = filename;
<a name="l00437"></a>00437   filename    = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00438"></a>00438   <a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">set_filename</a>(c);
<a name="l00439"></a>00439   <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l00440"></a>00440   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(c, 0)) {
<a name="l00441"></a>00441     <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00442"></a>00442     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t read %s: %s&quot;</span>, c, strerror(errno));
<a name="l00443"></a>00443     free((<span class="keywordtype">void</span> *)filename);
<a name="l00444"></a>00444     filename = oldfilename;
<a name="l00445"></a>00445     <span class="keywordflow">if</span> (main_window) main_window-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>(filename);
<a name="l00446"></a>00446     <span class="keywordflow">return</span>;
<a name="l00447"></a>00447   }
<a name="l00448"></a>00448 
<a name="l00449"></a>00449   <span class="comment">// Loaded a file; free the old filename...</span>
<a name="l00450"></a>00450   <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l00451"></a>00451   <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00452"></a>00452   <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00453"></a>00453   <span class="keywordflow">if</span> (oldfilename) free((<span class="keywordtype">void</span> *)oldfilename);
<a name="l00454"></a>00454 }
<a name="l00455"></a>00455 <span class="preprocessor">#endif // __APPLE__</span>
<a name="l00456"></a>00456 <span class="preprocessor"></span>
<a name="l00457"></a><a class="code" href="fluid_8cxx.html#a8fd61bd0e72bddff439d06748df19197">00457</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a8fd61bd0e72bddff439d06748df19197">open_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *v) {
<a name="l00458"></a>00458   <span class="keywordflow">if</span> (!v &amp;&amp; <a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) {
<a name="l00459"></a>00459     <span class="keywordflow">switch</span> (<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;Do you want to save changes to this user\n&quot;</span>
<a name="l00460"></a>00460                       <span class="stringliteral">&quot;interface before opening another one?&quot;</span>, <span class="stringliteral">&quot;Cancel&quot;</span>,
<a name="l00461"></a>00461                       <span class="stringliteral">&quot;Save&quot;</span>, <span class="stringliteral">&quot;Don&#39;t Save&quot;</span>))
<a name="l00462"></a>00462     {
<a name="l00463"></a>00463       <span class="keywordflow">case</span> 0 : <span class="comment">/* Cancel */</span>
<a name="l00464"></a>00464           <span class="keywordflow">return</span>;
<a name="l00465"></a>00465       <span class="keywordflow">case</span> 1 : <span class="comment">/* Save */</span>
<a name="l00466"></a>00466           <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00467"></a>00467           <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) <span class="keywordflow">return</span>;  <span class="comment">// Didn&#39;t save!</span>
<a name="l00468"></a>00468     }
<a name="l00469"></a>00469   }
<a name="l00470"></a>00470   <span class="keyword">const</span> <span class="keywordtype">char</span> *c;
<a name="l00471"></a>00471   <span class="keyword">const</span> <span class="keywordtype">char</span> *oldfilename;
<a name="l00472"></a>00472   <a class="code" href="group__group__comdlg.html#gad4e7eaf88fe838a415110280fd636566">fl_file_chooser_ok_label</a>(<span class="stringliteral">&quot;Open&quot;</span>);
<a name="l00473"></a>00473   c = <a class="code" href="group__group__comdlg.html#ga5bc7a0eda4de38cbc33d3a16d5cfd32f">fl_file_chooser</a>(<span class="stringliteral">&quot;Open:&quot;</span>, <span class="stringliteral">&quot;FLUID Files (*.f[ld])&quot;</span>, filename);
<a name="l00474"></a>00474   <a class="code" href="group__group__comdlg.html#gad4e7eaf88fe838a415110280fd636566">fl_file_chooser_ok_label</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00475"></a>00475   <span class="keywordflow">if</span> (!c) <span class="keywordflow">return</span>;
<a name="l00476"></a>00476   oldfilename = filename;
<a name="l00477"></a>00477   filename    = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00478"></a>00478   <a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">set_filename</a>(c);
<a name="l00479"></a>00479   <span class="keywordflow">if</span> (v != 0) <a class="code" href="undo_8cxx.html#a8f7400541e204e94e0ded5218ce14689">undo_checkpoint</a>();
<a name="l00480"></a>00480   <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l00481"></a>00481   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(c, v!=0)) {
<a name="l00482"></a>00482     <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00483"></a>00483     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t read %s: %s&quot;</span>, c, strerror(errno));
<a name="l00484"></a>00484     free((<span class="keywordtype">void</span> *)filename);
<a name="l00485"></a>00485     filename = oldfilename;
<a name="l00486"></a>00486     <span class="keywordflow">if</span> (main_window) <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>);
<a name="l00487"></a>00487     <span class="keywordflow">return</span>;
<a name="l00488"></a>00488   }
<a name="l00489"></a>00489   <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00490"></a>00490   <span class="keywordflow">if</span> (v) {
<a name="l00491"></a>00491     <span class="comment">// Inserting a file; restore the original filename...</span>
<a name="l00492"></a>00492     free((<span class="keywordtype">void</span> *)filename);
<a name="l00493"></a>00493     filename = oldfilename;
<a name="l00494"></a>00494     <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(1);
<a name="l00495"></a>00495   } <span class="keywordflow">else</span> {
<a name="l00496"></a>00496     <span class="comment">// Loaded a file; free the old filename...</span>
<a name="l00497"></a>00497     <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l00498"></a>00498     <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00499"></a>00499     <span class="keywordflow">if</span> (oldfilename) free((<span class="keywordtype">void</span> *)oldfilename);
<a name="l00500"></a>00500   }
<a name="l00501"></a>00501 }
<a name="l00502"></a>00502 
<a name="l00503"></a><a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">00503</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *v) {
<a name="l00504"></a>00504   <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) {
<a name="l00505"></a>00505     <span class="keywordflow">switch</span> (<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;Do you want to save changes to this user\n&quot;</span>
<a name="l00506"></a>00506                       <span class="stringliteral">&quot;interface before opening another one?&quot;</span>, <span class="stringliteral">&quot;Cancel&quot;</span>,
<a name="l00507"></a>00507                       <span class="stringliteral">&quot;Save&quot;</span>, <span class="stringliteral">&quot;Don&#39;t Save&quot;</span>))
<a name="l00508"></a>00508     {
<a name="l00509"></a>00509       <span class="keywordflow">case</span> 0 : <span class="comment">/* Cancel */</span>
<a name="l00510"></a>00510           <span class="keywordflow">return</span>;
<a name="l00511"></a>00511       <span class="keywordflow">case</span> 1 : <span class="comment">/* Save */</span>
<a name="l00512"></a>00512           <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00513"></a>00513           <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) <span class="keywordflow">return</span>;  <span class="comment">// Didn&#39;t save!</span>
<a name="l00514"></a>00514     }
<a name="l00515"></a>00515   }
<a name="l00516"></a>00516   <span class="keyword">const</span> <span class="keywordtype">char</span> *oldfilename = filename;
<a name="l00517"></a>00517   filename = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00518"></a>00518   <a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">set_filename</a>((<span class="keywordtype">char</span> *)v);
<a name="l00519"></a>00519   <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l00520"></a>00520   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(filename, 0)) {
<a name="l00521"></a>00521     <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00522"></a>00522     <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00523"></a>00523     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t read %s: %s&quot;</span>, filename, strerror(errno));
<a name="l00524"></a>00524     free((<span class="keywordtype">void</span> *)filename);
<a name="l00525"></a>00525     filename = oldfilename;
<a name="l00526"></a>00526     <span class="keywordflow">if</span> (main_window) main_window-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>(filename);
<a name="l00527"></a>00527     <span class="keywordflow">return</span>;
<a name="l00528"></a>00528   }
<a name="l00529"></a>00529   <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l00530"></a>00530   <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00531"></a>00531   <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00532"></a>00532   <span class="keywordflow">if</span> (oldfilename) free((<span class="keywordtype">void</span> *)oldfilename);
<a name="l00533"></a>00533 }
<a name="l00534"></a>00534 
<a name="l00535"></a><a class="code" href="fluid_8cxx.html#afd37c2cf88fe702cd2b9c71956515822">00535</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#afd37c2cf88fe702cd2b9c71956515822">new_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *v) {
<a name="l00536"></a>00536   <span class="comment">// Check if the current file has been modified...</span>
<a name="l00537"></a>00537   <span class="keywordflow">if</span> (!v &amp;&amp; <a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) {
<a name="l00538"></a>00538     <span class="comment">// Yes, ask the user what to do...</span>
<a name="l00539"></a>00539     <span class="keywordflow">switch</span> (<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;Do you want to save changes to this user\n&quot;</span>
<a name="l00540"></a>00540                       <span class="stringliteral">&quot;interface before creating a new one?&quot;</span>, <span class="stringliteral">&quot;Cancel&quot;</span>,
<a name="l00541"></a>00541                       <span class="stringliteral">&quot;Save&quot;</span>, <span class="stringliteral">&quot;Don&#39;t Save&quot;</span>))
<a name="l00542"></a>00542     {
<a name="l00543"></a>00543       <span class="keywordflow">case</span> 0 : <span class="comment">/* Cancel */</span>
<a name="l00544"></a>00544           <span class="keywordflow">return</span>;
<a name="l00545"></a>00545       <span class="keywordflow">case</span> 1 : <span class="comment">/* Save */</span>
<a name="l00546"></a>00546           <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00547"></a>00547           <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) <span class="keywordflow">return</span>;  <span class="comment">// Didn&#39;t save!</span>
<a name="l00548"></a>00548     }
<a name="l00549"></a>00549   }
<a name="l00550"></a>00550 
<a name="l00551"></a>00551   <span class="comment">// Setup the template panel...</span>
<a name="l00552"></a>00552   <span class="keywordflow">if</span> (!<a class="code" href="template__panel_8cxx.html#a3c68d0f7b3e6dfc671e4c291ff45945a">template_panel</a>) <a class="code" href="template__panel_8cxx.html#adcb80262ec9b87a2a50920e31678cb9f">make_template_panel</a>();
<a name="l00553"></a>00553 
<a name="l00554"></a>00554   <a class="code" href="template__panel_8cxx.html#abc990e3bc32beeae2902005663533164">template_clear</a>();
<a name="l00555"></a>00555   <a class="code" href="template__panel_8cxx.html#af5358f6fac2c2b2da94ab8a58cde54f4">template_browser</a>-&gt;<a class="code" href="classFl__Browser.html#af2761597d5618fa4d1339563ee127e29">add</a>(<span class="stringliteral">&quot;Blank&quot;</span>);
<a name="l00556"></a>00556   <a class="code" href="template__panel_8cxx.html#af22a0872f52126be5b98aeaf1b7263fe">template_load</a>();
<a name="l00557"></a>00557 
<a name="l00558"></a>00558   <a class="code" href="template__panel_8cxx.html#a885aca9210e4b9daebe680e78a4647a8">template_name</a>-&gt;<a class="code" href="classFl__Widget.html#a1fe8405b86da29d147dc3b5841cf181c">hide</a>();
<a name="l00559"></a>00559   <a class="code" href="template__panel_8cxx.html#a885aca9210e4b9daebe680e78a4647a8">template_name</a>-&gt;<a class="code" href="classFl__Input__.html#aaccaca04083dc6d2f1c1a4fa273d9048">value</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00560"></a>00560 
<a name="l00561"></a>00561   <a class="code" href="template__panel_8cxx.html#a804f77988c898a89a88c138e97282e90">template_instance</a>-&gt;<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l00562"></a>00562   <a class="code" href="template__panel_8cxx.html#a804f77988c898a89a88c138e97282e90">template_instance</a>-&gt;<a class="code" href="classFl__Widget.html#a2eb3d2eebe8ba623c4007d4f8e66a1ee">deactivate</a>();
<a name="l00563"></a>00563   <a class="code" href="template__panel_8cxx.html#a804f77988c898a89a88c138e97282e90">template_instance</a>-&gt;<a class="code" href="classFl__Input__.html#aaccaca04083dc6d2f1c1a4fa273d9048">value</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00564"></a>00564 
<a name="l00565"></a>00565   <a class="code" href="template__panel_8cxx.html#aaf4d2ffde786b632a2d90a9509322d10">template_delete</a>-&gt;<a class="code" href="classFl__Widget.html#a1fe8405b86da29d147dc3b5841cf181c">hide</a>();
<a name="l00566"></a>00566 
<a name="l00567"></a>00567   <a class="code" href="template__panel_8cxx.html#a5b885d93104059a3c7e04eccf71a08e7">template_submit</a>-&gt;<a class="code" href="classFl__Widget.html#abb0e926996f83bc1c60972afa8284045">label</a>(<span class="stringliteral">&quot;New&quot;</span>);
<a name="l00568"></a>00568   <a class="code" href="template__panel_8cxx.html#a5b885d93104059a3c7e04eccf71a08e7">template_submit</a>-&gt;<a class="code" href="classFl__Widget.html#a2eb3d2eebe8ba623c4007d4f8e66a1ee">deactivate</a>();
<a name="l00569"></a>00569 
<a name="l00570"></a>00570   <a class="code" href="template__panel_8cxx.html#a3c68d0f7b3e6dfc671e4c291ff45945a">template_panel</a>-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>(<span class="stringliteral">&quot;New&quot;</span>);
<a name="l00571"></a>00571 
<a name="l00572"></a>00572   <span class="comment">// Show the panel and wait for the user to do something...</span>
<a name="l00573"></a>00573   <a class="code" href="template__panel_8cxx.html#a3c68d0f7b3e6dfc671e4c291ff45945a">template_panel</a>-&gt;<a class="code" href="classFl__Double__Window.html#a4d1c3cbb1184c6785df7465b0c657025">show</a>();
<a name="l00574"></a>00574   <span class="keywordflow">while</span> (<a class="code" href="template__panel_8cxx.html#a3c68d0f7b3e6dfc671e4c291ff45945a">template_panel</a>-&gt;<a class="code" href="classFl__Window.html#aa09300542b2d8b49fc69a037bdd3b742">shown</a>()) <a class="code" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait</a>();
<a name="l00575"></a>00575 
<a name="l00576"></a>00576   <span class="comment">// See if the user chose anything...</span>
<a name="l00577"></a>00577   <span class="keywordtype">int</span> item = <a class="code" href="template__panel_8cxx.html#af5358f6fac2c2b2da94ab8a58cde54f4">template_browser</a>-&gt;<a class="code" href="classFl__Browser.html#a478c6086727631f3c4d80769b478a3c8">value</a>();
<a name="l00578"></a>00578   <span class="keywordflow">if</span> (item &lt; 1) <span class="keywordflow">return</span>;
<a name="l00579"></a>00579 
<a name="l00580"></a>00580   <span class="comment">// Clear the current data...</span>
<a name="l00581"></a>00581   <a class="code" href="Fl__Type_8cxx.html#a6eabfa7e7056545b381dd26ffb76b004">delete_all</a>();
<a name="l00582"></a>00582   <a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">set_filename</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00583"></a>00583 
<a name="l00584"></a>00584   <span class="comment">// Load the template, if any...</span>
<a name="l00585"></a>00585   <span class="keyword">const</span> <span class="keywordtype">char</span> *tname = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)<a class="code" href="template__panel_8cxx.html#af5358f6fac2c2b2da94ab8a58cde54f4">template_browser</a>-&gt;<a class="code" href="classFl__Browser.html#a83578d1150c2128135fbc6d812e18aff">data</a>(item);
<a name="l00586"></a>00586 
<a name="l00587"></a>00587   <span class="keywordflow">if</span> (tname) {
<a name="l00588"></a>00588     <span class="comment">// Grab the instance name...</span>
<a name="l00589"></a>00589     <span class="keyword">const</span> <span class="keywordtype">char</span> *iname = <a class="code" href="template__panel_8cxx.html#a804f77988c898a89a88c138e97282e90">template_instance</a>-&gt;<a class="code" href="classFl__Input__.html#aaccaca04083dc6d2f1c1a4fa273d9048">value</a>();
<a name="l00590"></a>00590 
<a name="l00591"></a>00591     <span class="keywordflow">if</span> (iname &amp;&amp; *iname) {
<a name="l00592"></a>00592       <span class="comment">// Copy the template to a temp file, then read it in...</span>
<a name="l00593"></a>00593       <span class="keywordtype">char</span> line[1024], *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a>, *next;
<a name="l00594"></a>00594       FILE *<a class="code" href="jpeglib_8h.html#af19157da745ecb3f2b088c8f3a10c0a7">infile</a>, *<a class="code" href="jpeglib_8h.html#ae581849c67336453bd5b81e6518019a9">outfile</a>;
<a name="l00595"></a>00595 
<a name="l00596"></a>00596       <span class="keywordflow">if</span> ((infile = <a class="code" href="group__fl__unicode.html#ga8a457e9f251d83d565a62fb3c88cf32e">fl_fopen</a>(tname, <span class="stringliteral">&quot;r&quot;</span>)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00597"></a>00597         <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Error reading template file \&quot;%s\&quot;:\n%s&quot;</span>, tname,
<a name="l00598"></a>00598                  strerror(errno));
<a name="l00599"></a>00599         <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l00600"></a>00600         <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00601"></a>00601         <span class="keywordflow">return</span>;
<a name="l00602"></a>00602       }
<a name="l00603"></a>00603 
<a name="l00604"></a>00604       <span class="keywordflow">if</span> ((outfile = <a class="code" href="group__fl__unicode.html#ga8a457e9f251d83d565a62fb3c88cf32e">fl_fopen</a>(cutfname(1), <span class="stringliteral">&quot;w&quot;</span>)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00605"></a>00605         <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Error writing buffer file \&quot;%s\&quot;:\n%s&quot;</span>, cutfname(1),
<a name="l00606"></a>00606                  strerror(errno));
<a name="l00607"></a>00607         fclose(infile);
<a name="l00608"></a>00608         <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l00609"></a>00609         <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00610"></a>00610         <span class="keywordflow">return</span>;
<a name="l00611"></a>00611       }
<a name="l00612"></a>00612 
<a name="l00613"></a>00613       <span class="keywordflow">while</span> (fgets(line, <span class="keyword">sizeof</span>(line), infile)) {
<a name="l00614"></a>00614         <span class="comment">// Replace @INSTANCE@ with the instance name...</span>
<a name="l00615"></a>00615         <span class="keywordflow">for</span> (ptr = line; (next = strstr(ptr, <span class="stringliteral">&quot;@INSTANCE@&quot;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; ptr = next + 10) {
<a name="l00616"></a>00616           fwrite(ptr, next - ptr, 1, outfile);
<a name="l00617"></a>00617           fputs(iname, outfile);
<a name="l00618"></a>00618         }
<a name="l00619"></a>00619 
<a name="l00620"></a>00620         fputs(ptr, outfile);
<a name="l00621"></a>00621       }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623       fclose(infile);
<a name="l00624"></a>00624       fclose(outfile);
<a name="l00625"></a>00625 
<a name="l00626"></a>00626       <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l00627"></a>00627       <a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(cutfname(1), 0);
<a name="l00628"></a>00628       unlink(cutfname(1));
<a name="l00629"></a>00629       <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00630"></a>00630     } <span class="keywordflow">else</span> {
<a name="l00631"></a>00631       <span class="comment">// No instance name, so read the template without replacements...</span>
<a name="l00632"></a>00632       <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l00633"></a>00633       <a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(tname, 0);
<a name="l00634"></a>00634       <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00635"></a>00635     }
<a name="l00636"></a>00636   }
<a name="l00637"></a>00637 
<a name="l00638"></a>00638   <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l00639"></a>00639   <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l00640"></a>00640 }
<a name="l00641"></a>00641 
<a name="l00642"></a><a class="code" href="fluid_8cxx.html#ad4ab38768c9de24d31b406983a995eef">00642</a> <span class="keywordtype">int</span> <a class="code" href="fluid_8cxx.html#ad4ab38768c9de24d31b406983a995eef">exit_early</a> = 0;
<a name="l00643"></a><a class="code" href="fluid_8cxx.html#a501daf1e5396283be44e6ccee44e7612">00643</a> <span class="keywordtype">int</span> <a class="code" href="factory_8cxx.html#a501daf1e5396283be44e6ccee44e7612">compile_only</a> = 0;
<a name="l00644"></a><a class="code" href="fluid_8cxx.html#a2aab46612fe99e05a7fa14f4794036bf">00644</a> <span class="keywordtype">int</span> <a class="code" href="fluid_8cxx.html#a2aab46612fe99e05a7fa14f4794036bf">compile_strings</a> = 0;
<a name="l00645"></a><a class="code" href="fluid_8cxx.html#a55164120a6cb8837a794ce9addd7dedc">00645</a> <span class="keywordtype">int</span> <a class="code" href="file_8cxx.html#a55164120a6cb8837a794ce9addd7dedc">header_file_set</a> = 0;
<a name="l00646"></a><a class="code" href="fluid_8cxx.html#a503f435b41b0633c8e8de50c79410c4b">00646</a> <span class="keywordtype">int</span> <a class="code" href="file_8cxx.html#a503f435b41b0633c8e8de50c79410c4b">code_file_set</a> = 0;
<a name="l00647"></a><a class="code" href="fluid_8cxx.html#a2439435a3813bc1c7f294303fec38efd">00647</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="code_8cxx.html#a2439435a3813bc1c7f294303fec38efd">header_file_name</a> = <span class="stringliteral">&quot;.h&quot;</span>;
<a name="l00648"></a><a class="code" href="fluid_8cxx.html#ab206f3bb486783a62ccd3225e4f56363">00648</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="file_8cxx.html#ab206f3bb486783a62ccd3225e4f56363">code_file_name</a> = <span class="stringliteral">&quot;.cxx&quot;</span>;
<a name="l00649"></a><a class="code" href="fluid_8cxx.html#a6095e2c81b23eb723d8b800da54f47f0">00649</a> <span class="keywordtype">int</span> <a class="code" href="code_8cxx.html#a6095e2c81b23eb723d8b800da54f47f0">i18n_type</a> = 0;
<a name="l00650"></a><a class="code" href="fluid_8cxx.html#afadfdd22e15be021055ab56021f47784">00650</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="code_8cxx.html#afadfdd22e15be021055ab56021f47784">i18n_include</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00651"></a><a class="code" href="fluid_8cxx.html#a1e0f870ae73f4f22ee2cb1f4c26a2c51">00651</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="code_8cxx.html#a1e0f870ae73f4f22ee2cb1f4c26a2c51">i18n_function</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00652"></a><a class="code" href="fluid_8cxx.html#a0d589414805c5e1a5caca1916d3e6510">00652</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="code_8cxx.html#a0d589414805c5e1a5caca1916d3e6510">i18n_file</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00653"></a><a class="code" href="fluid_8cxx.html#af2ca2532b0fb61d790d97a5e0e91f6f4">00653</a> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="code_8cxx.html#af2ca2532b0fb61d790d97a5e0e91f6f4">i18n_set</a> = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00654"></a><a class="code" href="fluid_8cxx.html#ae779a6644008ff3623abab236046d9c9">00654</a> <span class="keywordtype">char</span> <a class="code" href="code_8cxx.html#a24e921b3414e421d8dfc2678d0bea13c">i18n_program</a>[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00655"></a>00655 
<a name="l00656"></a><a class="code" href="fluid_8cxx.html#a8e952052b4225f043f44665b398a5616">00656</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a8e952052b4225f043f44665b398a5616">write_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00657"></a>00657   <span class="keywordflow">if</span> (!filename) {
<a name="l00658"></a>00658     <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(0,0);
<a name="l00659"></a>00659     <span class="keywordflow">if</span> (!filename) <span class="keywordflow">return</span>;
<a name="l00660"></a>00660   }
<a name="l00661"></a>00661   <span class="keywordtype">char</span> cname[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00662"></a>00662   <span class="keywordtype">char</span> hname[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00663"></a>00663   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(i18n_program, <a class="code" href="group__filenames.html#ga0ac0f44a1709c6ff94f56a8954dc8fd6">fl_filename_name</a>(filename), <span class="keyword">sizeof</span>(i18n_program));
<a name="l00664"></a>00664   <a class="code" href="group__filenames.html#ga957325ab216ec3290693a737ac8881a3">fl_filename_setext</a>(i18n_program, <span class="keyword">sizeof</span>(i18n_program), <span class="stringliteral">&quot;&quot;</span>);
<a name="l00665"></a>00665   <span class="keywordflow">if</span> (*code_file_name == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; strchr(code_file_name, <span class="charliteral">&#39;/&#39;</span>) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00666"></a>00666     <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(cname, <a class="code" href="group__filenames.html#ga0ac0f44a1709c6ff94f56a8954dc8fd6">fl_filename_name</a>(filename), <span class="keyword">sizeof</span>(cname));
<a name="l00667"></a>00667     <a class="code" href="group__filenames.html#ga957325ab216ec3290693a737ac8881a3">fl_filename_setext</a>(cname, <span class="keyword">sizeof</span>(cname), code_file_name);
<a name="l00668"></a>00668   } <span class="keywordflow">else</span> {
<a name="l00669"></a>00669     <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(cname, code_file_name, <span class="keyword">sizeof</span>(hname));
<a name="l00670"></a>00670   }
<a name="l00671"></a>00671   <span class="keywordflow">if</span> (*header_file_name == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; strchr(header_file_name, <span class="charliteral">&#39;/&#39;</span>) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00672"></a>00672     <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(hname, <a class="code" href="group__filenames.html#ga0ac0f44a1709c6ff94f56a8954dc8fd6">fl_filename_name</a>(filename), <span class="keyword">sizeof</span>(hname));
<a name="l00673"></a>00673     <a class="code" href="group__filenames.html#ga957325ab216ec3290693a737ac8881a3">fl_filename_setext</a>(hname, <span class="keyword">sizeof</span>(hname), header_file_name);
<a name="l00674"></a>00674   } <span class="keywordflow">else</span> {
<a name="l00675"></a>00675     <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(hname, header_file_name, <span class="keyword">sizeof</span>(hname));
<a name="l00676"></a>00676   }
<a name="l00677"></a>00677   <span class="keywordflow">if</span> (!compile_only) <a class="code" href="Fl__Function__Type_8cxx.html#a616925549ca86711c18eb4a6aec4d3eb">goto_source_dir</a>();
<a name="l00678"></a>00678   <span class="keywordtype">int</span> <a class="code" href="test_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = <a class="code" href="code_8cxx.html#a3e1266f68106f46fd13061bf8924e0a4">write_code</a>(cname,hname);
<a name="l00679"></a>00679   <span class="keywordflow">if</span> (!compile_only) <a class="code" href="Fl__Function__Type_8cxx.html#a4571b9a412d02b63ddd9053de574db37">leave_source_dir</a>();
<a name="l00680"></a>00680   <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(cname, <span class="stringliteral">&quot; and &quot;</span>, <span class="keyword">sizeof</span>(cname));
<a name="l00681"></a>00681   <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(cname, hname, <span class="keyword">sizeof</span>(cname));
<a name="l00682"></a>00682   <span class="keywordflow">if</span> (compile_only) {
<a name="l00683"></a>00683     <span class="keywordflow">if</span> (!x) {fprintf(stderr,<span class="stringliteral">&quot;%s : %s\n&quot;</span>,cname,strerror(errno)); exit(1);}
<a name="l00684"></a>00684   } <span class="keywordflow">else</span> {
<a name="l00685"></a>00685     <span class="keywordflow">if</span> (!x) {
<a name="l00686"></a>00686       <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t write %s: %s&quot;</span>, cname, strerror(errno));
<a name="l00687"></a>00687     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="alignment__panel_8cxx.html#abc0eac728316ac6829459f1dbbb5d00c">completion_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l00688"></a>00688       <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Wrote %s&quot;</span>, cname);
<a name="l00689"></a>00689     }
<a name="l00690"></a>00690   }
<a name="l00691"></a>00691 }
<a name="l00692"></a>00692 
<a name="l00693"></a><a class="code" href="fluid_8cxx.html#a08316bbde185907c026f03ae7364c150">00693</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a08316bbde185907c026f03ae7364c150">write_strings_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00694"></a>00694   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *exts[] = { <span class="stringliteral">&quot;.txt&quot;</span>, <span class="stringliteral">&quot;.po&quot;</span>, <span class="stringliteral">&quot;.msg&quot;</span> };
<a name="l00695"></a>00695   <span class="keywordflow">if</span> (!filename) {
<a name="l00696"></a>00696     <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(0,0);
<a name="l00697"></a>00697     <span class="keywordflow">if</span> (!filename) <span class="keywordflow">return</span>;
<a name="l00698"></a>00698   }
<a name="l00699"></a>00699   <span class="keywordtype">char</span> sname[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00700"></a>00700   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(sname, <a class="code" href="group__filenames.html#ga0ac0f44a1709c6ff94f56a8954dc8fd6">fl_filename_name</a>(filename), <span class="keyword">sizeof</span>(sname));
<a name="l00701"></a>00701   <a class="code" href="group__filenames.html#ga957325ab216ec3290693a737ac8881a3">fl_filename_setext</a>(sname, <span class="keyword">sizeof</span>(sname), exts[i18n_type]);
<a name="l00702"></a>00702   <span class="keywordflow">if</span> (!compile_only) <a class="code" href="Fl__Function__Type_8cxx.html#a616925549ca86711c18eb4a6aec4d3eb">goto_source_dir</a>();
<a name="l00703"></a>00703   <span class="keywordtype">int</span> <a class="code" href="test_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = <a class="code" href="code_8cxx.html#ab5f29b28c3607537670f71f7816e603d">write_strings</a>(sname);
<a name="l00704"></a>00704   <span class="keywordflow">if</span> (!compile_only) <a class="code" href="Fl__Function__Type_8cxx.html#a4571b9a412d02b63ddd9053de574db37">leave_source_dir</a>();
<a name="l00705"></a>00705   <span class="keywordflow">if</span> (compile_only) {
<a name="l00706"></a>00706     <span class="keywordflow">if</span> (x) {fprintf(stderr,<span class="stringliteral">&quot;%s : %s\n&quot;</span>,sname,strerror(errno)); exit(1);}
<a name="l00707"></a>00707   } <span class="keywordflow">else</span> {
<a name="l00708"></a>00708     <span class="keywordflow">if</span> (x) {
<a name="l00709"></a>00709       <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t write %s: %s&quot;</span>, sname, strerror(errno));
<a name="l00710"></a>00710     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="alignment__panel_8cxx.html#abc0eac728316ac6829459f1dbbb5d00c">completion_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l00711"></a>00711       <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Wrote %s&quot;</span>, sname);
<a name="l00712"></a>00712     }
<a name="l00713"></a>00713   }
<a name="l00714"></a>00714 }
<a name="l00715"></a>00715 
<a name="l00716"></a><a class="code" href="fluid_8cxx.html#ac09b95a7a888717e820e03800f04d7af">00716</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#ac09b95a7a888717e820e03800f04d7af">openwidget_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00717"></a>00717   <span class="keywordflow">if</span> (!<a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>) {
<a name="l00718"></a>00718     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Please select a widget&quot;</span>);
<a name="l00719"></a>00719     <span class="keywordflow">return</span>;
<a name="l00720"></a>00720   }
<a name="l00721"></a>00721   <a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>-&gt;<a class="code" href="classFl__Type.html#abebee98de6518fe010d0e146249aaf23">open</a>();
<a name="l00722"></a>00722 }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724 <span class="keywordtype">void</span> <a class="code" href="Fl__Widget__Type_8cxx.html#acc812b9e286cddb13de4218c1bea1fe4">toggle_overlays</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *,<span class="keywordtype">void</span> *);
<a name="l00725"></a>00725 
<a name="l00726"></a>00726 <span class="keywordtype">void</span> <a class="code" href="Fl__Type_8cxx.html#a5c6293116043ce417ee3ace5c5913552">select_all_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *,<span class="keywordtype">void</span> *);
<a name="l00727"></a>00727 <span class="keywordtype">void</span> <a class="code" href="Fl__Type_8cxx.html#a811cb4d5a72e7260d2f0471d7324c182">select_none_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *,<span class="keywordtype">void</span> *);
<a name="l00728"></a>00728 
<a name="l00729"></a>00729 <span class="keywordtype">void</span> <a class="code" href="Fl__Group__Type_8cxx.html#a711956b4fcb15ffb138bba6e791c2812">group_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *);
<a name="l00730"></a>00730 
<a name="l00731"></a>00731 <span class="keywordtype">void</span> <a class="code" href="Fl__Group__Type_8cxx.html#a67d149f1515b939e1490fc67e117a853">ungroup_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *);
<a name="l00732"></a>00732 
<a name="l00733"></a>00733 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="Fl__Widget__Type_8cxx.html#ae1ee6a20a6057996cadab622b679504f">pasteoffset</a>;
<a name="l00734"></a>00734 <span class="keyword">static</span> <span class="keywordtype">int</span> ipasteoffset;
<a name="l00735"></a>00735 
<a name="l00736"></a><a class="code" href="fluid_8cxx.html#a1f5afd8bfd5413cdc3e1152f79ec912a">00736</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a1f5afd8bfd5413cdc3e1152f79ec912a">copy_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a>*, <span class="keywordtype">void</span>*) {
<a name="l00737"></a>00737   <span class="keywordflow">if</span> (!<a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>) {
<a name="l00738"></a>00738     <a class="code" href="group__group__comdlg.html#ga7df367b297d2b2d1af087e1adbf3c265">fl_beep</a>();
<a name="l00739"></a>00739     <span class="keywordflow">return</span>;
<a name="l00740"></a>00740   }
<a name="l00741"></a>00741   ipasteoffset = 10;
<a name="l00742"></a>00742   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#a058a4fcc0eddbadab12da2d41e0180b6">write_file</a>(cutfname(),1)) {
<a name="l00743"></a>00743     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t write %s: %s&quot;</span>, cutfname(), strerror(errno));
<a name="l00744"></a>00744     <span class="keywordflow">return</span>;
<a name="l00745"></a>00745   }
<a name="l00746"></a>00746 }
<a name="l00747"></a>00747 
<a name="l00748"></a>00748 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="factory_8cxx.html#a84827b8e13ac3751c6efc3322167984c">select_only</a>(<a class="code" href="classFl__Type.html">Fl_Type</a> *);
<a name="l00749"></a><a class="code" href="fluid_8cxx.html#a1c2d23cf31cf404e97badeec1a643ec3">00749</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a1c2d23cf31cf404e97badeec1a643ec3">cut_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00750"></a>00750   <span class="keywordflow">if</span> (!<a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>) {
<a name="l00751"></a>00751     <a class="code" href="group__group__comdlg.html#ga7df367b297d2b2d1af087e1adbf3c265">fl_beep</a>();
<a name="l00752"></a>00752     <span class="keywordflow">return</span>;
<a name="l00753"></a>00753   }
<a name="l00754"></a>00754   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#a058a4fcc0eddbadab12da2d41e0180b6">write_file</a>(cutfname(),1)) {
<a name="l00755"></a>00755     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t write %s: %s&quot;</span>, cutfname(), strerror(errno));
<a name="l00756"></a>00756     <span class="keywordflow">return</span>;
<a name="l00757"></a>00757   }
<a name="l00758"></a>00758   <a class="code" href="undo_8cxx.html#a8f7400541e204e94e0ded5218ce14689">undo_checkpoint</a>();
<a name="l00759"></a>00759   <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(1);
<a name="l00760"></a>00760   ipasteoffset = 0;
<a name="l00761"></a>00761   <a class="code" href="classFl__Type.html">Fl_Type</a> *p = <a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>-&gt;<a class="code" href="classFl__Type.html#a8651d3f6d1f618e23c59e9cb4c32ac8e">parent</a>;
<a name="l00762"></a>00762   <span class="keywordflow">while</span> (p &amp;&amp; p-&gt;<a class="code" href="classFl__Type.html#a52691ca3cdde11a8103384faae547886">selected</a>) p = p-&gt;<a class="code" href="classFl__Type.html#a8651d3f6d1f618e23c59e9cb4c32ac8e">parent</a>;
<a name="l00763"></a>00763   <a class="code" href="Fl__Type_8cxx.html#a6eabfa7e7056545b381dd26ffb76b004">delete_all</a>(1);
<a name="l00764"></a>00764   <span class="keywordflow">if</span> (p) <a class="code" href="factory_8cxx.html#a84827b8e13ac3751c6efc3322167984c">select_only</a>(p);
<a name="l00765"></a>00765 }
<a name="l00766"></a>00766 
<a name="l00767"></a><a class="code" href="fluid_8cxx.html#a99fdb378dd62523fedfc9128ba8c48f8">00767</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a99fdb378dd62523fedfc9128ba8c48f8">delete_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00768"></a>00768   <span class="keywordflow">if</span> (!<a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>) {
<a name="l00769"></a>00769     <a class="code" href="group__group__comdlg.html#ga7df367b297d2b2d1af087e1adbf3c265">fl_beep</a>();
<a name="l00770"></a>00770     <span class="keywordflow">return</span>;
<a name="l00771"></a>00771   }
<a name="l00772"></a>00772   <a class="code" href="undo_8cxx.html#a8f7400541e204e94e0ded5218ce14689">undo_checkpoint</a>();
<a name="l00773"></a>00773   <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(1);
<a name="l00774"></a>00774   ipasteoffset = 0;
<a name="l00775"></a>00775   <a class="code" href="classFl__Type.html">Fl_Type</a> *p = <a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>-&gt;<a class="code" href="classFl__Type.html#a8651d3f6d1f618e23c59e9cb4c32ac8e">parent</a>;
<a name="l00776"></a>00776   <span class="keywordflow">while</span> (p &amp;&amp; p-&gt;<a class="code" href="classFl__Type.html#a52691ca3cdde11a8103384faae547886">selected</a>) p = p-&gt;<a class="code" href="classFl__Type.html#a8651d3f6d1f618e23c59e9cb4c32ac8e">parent</a>;
<a name="l00777"></a>00777   <a class="code" href="Fl__Type_8cxx.html#a6eabfa7e7056545b381dd26ffb76b004">delete_all</a>(1);
<a name="l00778"></a>00778   <span class="keywordflow">if</span> (p) <a class="code" href="factory_8cxx.html#a84827b8e13ac3751c6efc3322167984c">select_only</a>(p);
<a name="l00779"></a>00779 }
<a name="l00780"></a>00780 
<a name="l00781"></a>00781 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="Fl__Group__Type_8cxx.html#a32609bff440c92d9507dfe87d760e7cc">force_parent</a>;
<a name="l00782"></a>00782 
<a name="l00783"></a><a class="code" href="fluid_8cxx.html#ac5ed9e9e53ce40db93583f3c93b3ac6b">00783</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#ac5ed9e9e53ce40db93583f3c93b3ac6b">paste_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a>*, <span class="keywordtype">void</span>*) {
<a name="l00784"></a>00784   <span class="comment">//if (ipasteoffset) force_parent = 1;</span>
<a name="l00785"></a>00785   pasteoffset = ipasteoffset;
<a name="l00786"></a>00786   <span class="keywordflow">if</span> (<a class="code" href="Fl__Widget__Type_8cxx.html#aea7a16a3db8cab79bfcc6fcfb2715d08">gridx</a>&gt;1) pasteoffset = ((pasteoffset-1)/<a class="code" href="Fl__Widget__Type_8cxx.html#aea7a16a3db8cab79bfcc6fcfb2715d08">gridx</a>+1)*<a class="code" href="Fl__Widget__Type_8cxx.html#aea7a16a3db8cab79bfcc6fcfb2715d08">gridx</a>;
<a name="l00787"></a>00787   <span class="keywordflow">if</span> (<a class="code" href="Fl__Widget__Type_8cxx.html#aecd27836708382115b8882d43870c1f2">gridy</a>&gt;1) pasteoffset = ((pasteoffset-1)/<a class="code" href="Fl__Widget__Type_8cxx.html#aecd27836708382115b8882d43870c1f2">gridy</a>+1)*<a class="code" href="Fl__Widget__Type_8cxx.html#aecd27836708382115b8882d43870c1f2">gridy</a>;
<a name="l00788"></a>00788   <a class="code" href="undo_8cxx.html#a8f7400541e204e94e0ded5218ce14689">undo_checkpoint</a>();
<a name="l00789"></a>00789   <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l00790"></a>00790   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(cutfname(), 1)) {
<a name="l00791"></a>00791     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t read %s: %s&quot;</span>, cutfname(), strerror(errno));
<a name="l00792"></a>00792   }
<a name="l00793"></a>00793   <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00794"></a>00794   pasteoffset = 0;
<a name="l00795"></a>00795   ipasteoffset += 10;
<a name="l00796"></a>00796   force_parent = 0;
<a name="l00797"></a>00797 }
<a name="l00798"></a>00798 
<a name="l00799"></a>00799 <span class="comment">// Duplicate the selected widgets...</span>
<a name="l00800"></a><a class="code" href="fluid_8cxx.html#ab5c5bb5cb9ca9f2c7720eb33df34a295">00800</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#ab5c5bb5cb9ca9f2c7720eb33df34a295">duplicate_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a>*, <span class="keywordtype">void</span>*) {
<a name="l00801"></a>00801   <span class="keywordflow">if</span> (!<a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>) {
<a name="l00802"></a>00802     <a class="code" href="group__group__comdlg.html#ga7df367b297d2b2d1af087e1adbf3c265">fl_beep</a>();
<a name="l00803"></a>00803     <span class="keywordflow">return</span>;
<a name="l00804"></a>00804   }
<a name="l00805"></a>00805 
<a name="l00806"></a>00806   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#a058a4fcc0eddbadab12da2d41e0180b6">write_file</a>(cutfname(1),1)) {
<a name="l00807"></a>00807     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t write %s: %s&quot;</span>, cutfname(1), strerror(errno));
<a name="l00808"></a>00808     <span class="keywordflow">return</span>;
<a name="l00809"></a>00809   }
<a name="l00810"></a>00810 
<a name="l00811"></a>00811   pasteoffset  = 0;
<a name="l00812"></a>00812   force_parent = 1;
<a name="l00813"></a>00813 
<a name="l00814"></a>00814   <a class="code" href="undo_8cxx.html#a8f7400541e204e94e0ded5218ce14689">undo_checkpoint</a>();
<a name="l00815"></a>00815   <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l00816"></a>00816   <span class="keywordflow">if</span> (!<a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(cutfname(1), 1)) {
<a name="l00817"></a>00817     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t read %s: %s&quot;</span>, cutfname(1), strerror(errno));
<a name="l00818"></a>00818   }
<a name="l00819"></a>00819   unlink(cutfname(1));
<a name="l00820"></a>00820   <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l00821"></a>00821 
<a name="l00822"></a>00822   force_parent = 0;
<a name="l00823"></a>00823 }
<a name="l00824"></a>00824 
<a name="l00825"></a>00825 <span class="keywordtype">void</span> <a class="code" href="Fl__Type_8cxx.html#a887c29914c60c0c63ceed0f0facb0660">earlier_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a>*,<span class="keywordtype">void</span>*);
<a name="l00826"></a>00826 
<a name="l00827"></a>00827 <span class="keywordtype">void</span> <a class="code" href="Fl__Type_8cxx.html#acc87b15c6b66f0960e4c6c27c046dd91">later_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a>*,<span class="keywordtype">void</span>*);
<a name="l00828"></a>00828 
<a name="l00829"></a>00829 <a class="code" href="classFl__Type.html">Fl_Type</a> *<a class="code" href="Fl__Widget__Type_8cxx.html#ae50eddc9f038cf4c81f491a77de5aa52">sort</a>(<a class="code" href="classFl__Type.html">Fl_Type</a> *parent);
<a name="l00830"></a>00830 
<a name="l00831"></a>00831 <span class="keyword">static</span> <span class="keywordtype">void</span> sort_cb(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *,<span class="keywordtype">void</span> *) {
<a name="l00832"></a>00832   <a class="code" href="Fl__Widget__Type_8cxx.html#ae50eddc9f038cf4c81f491a77de5aa52">sort</a>((<a class="code" href="classFl__Type.html">Fl_Type</a>*)0);
<a name="l00833"></a>00833 }
<a name="l00834"></a>00834 
<a name="l00835"></a>00835 <span class="keywordtype">void</span> <a class="code" href="Fl__Window__Type_8cxx.html#a55c2e66b09c105b42fbe4804eace293b">show_project_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *);
<a name="l00836"></a>00836 <span class="keywordtype">void</span> <a class="code" href="Fl__Window__Type_8cxx.html#aba785b6d08766b51bd736661597efedd">show_grid_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *);
<a name="l00837"></a>00837 <span class="keywordtype">void</span> <a class="code" href="Fl__Window__Type_8cxx.html#a665349c1186c35718ff95a16b1a2e2f7">show_settings_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *);
<a name="l00838"></a>00838 <span class="keywordtype">void</span> <a class="code" href="Fl__Window__Type_8cxx.html#a54af0c66154ab749a9e407ded0458f04">show_global_settings_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *);
<a name="l00839"></a>00839 
<a name="l00840"></a>00840 <span class="keywordtype">void</span> <a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">long</span>);
<a name="l00841"></a>00841 <span class="keywordtype">void</span> <a class="code" href="align__widget_8cxx.html#aac4c08af936f108913596517b746e15b">widget_size_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">long</span>);
<a name="l00842"></a>00842 
<a name="l00843"></a><a class="code" href="fluid_8cxx.html#a082c06a638ac407b52237bf2e631d72c">00843</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a082c06a638ac407b52237bf2e631d72c">about_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00844"></a>00844   <span class="keywordflow">if</span> (!<a class="code" href="about__panel_8cxx.html#a788de3f900e9297d91916fb0591d8992">about_panel</a>) <a class="code" href="about__panel_8cxx.html#a9e224c3691554d2fe36674abaf20cd6b">make_about_panel</a>();
<a name="l00845"></a>00845   <a class="code" href="about__panel_8cxx.html#a788de3f900e9297d91916fb0591d8992">about_panel</a>-&gt;<a class="code" href="classFl__Double__Window.html#a4d1c3cbb1184c6785df7465b0c657025">show</a>();
<a name="l00846"></a>00846 }
<a name="l00847"></a>00847 
<a name="l00848"></a><a class="code" href="fluid_8cxx.html#a191744ffc243128e8e5c20078ed9333e">00848</a> <span class="keywordtype">void</span> <a class="code" href="about__panel_8cxx.html#a191744ffc243128e8e5c20078ed9333e">show_help</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="png_8h.html#a90cd716fdb9b68c9661c3ba908a0ceff">name</a>) {
<a name="l00849"></a>00849   <span class="keyword">const</span> <span class="keywordtype">char</span>    *docdir;
<a name="l00850"></a>00850   <span class="keywordtype">char</span>          helpname[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00851"></a>00851 
<a name="l00852"></a>00852   <span class="keywordflow">if</span> (!help_dialog) help_dialog = <span class="keyword">new</span> <a class="code" href="classFl__Help__Dialog.html">Fl_Help_Dialog</a>();
<a name="l00853"></a>00853 
<a name="l00854"></a>00854   <span class="keywordflow">if</span> ((docdir = getenv(<span class="stringliteral">&quot;FLTK_DOCDIR&quot;</span>)) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00855"></a>00855 <span class="preprocessor">#ifdef __EMX__</span>
<a name="l00856"></a>00856 <span class="preprocessor"></span>    <span class="comment">// Doesn&#39;t make sense to have a hardcoded fallback</span>
<a name="l00857"></a>00857     <span class="keyword">static</span> <span class="keywordtype">char</span> fltk_docdir[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l00858"></a>00858 
<a name="l00859"></a>00859     <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(fltk_docdir, __XOS2RedirRoot(<span class="stringliteral">&quot;/XFree86/lib/X11/fltk/doc&quot;</span>),
<a name="l00860"></a>00860             <span class="keyword">sizeof</span>(fltk_docdir));
<a name="l00861"></a>00861 
<a name="l00862"></a>00862     docdir = fltk_docdir;
<a name="l00863"></a>00863 <span class="preprocessor">#else</span>
<a name="l00864"></a>00864 <span class="preprocessor"></span>    docdir = <a class="code" href="VisualC2008_2config_8h.html#a06b3a49267874d006d2e7750cf9387c0">FLTK_DOCDIR</a>;
<a name="l00865"></a>00865 <span class="preprocessor">#endif // __EMX__</span>
<a name="l00866"></a>00866 <span class="preprocessor"></span>  }
<a name="l00867"></a>00867   <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(helpname, <span class="keyword">sizeof</span>(helpname), <span class="stringliteral">&quot;%s/%s&quot;</span>, docdir, name);
<a name="l00868"></a>00868 
<a name="l00869"></a>00869   help_dialog-&gt;<a class="code" href="classFl__Help__Dialog.html#a47475b8965fd6d6efc0b71bf5e195571">load</a>(helpname);
<a name="l00870"></a>00870   help_dialog-&gt;<a class="code" href="classFl__Help__Dialog.html#a88728acbc1622853f8e8d3bc79faa0b8">show</a>();
<a name="l00871"></a>00871 }
<a name="l00872"></a>00872 
<a name="l00873"></a><a class="code" href="fluid_8cxx.html#a1151118e3544af988678134a667f4d19">00873</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a1151118e3544af988678134a667f4d19">help_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00874"></a>00874   <a class="code" href="about__panel_8cxx.html#a191744ffc243128e8e5c20078ed9333e">show_help</a>(<span class="stringliteral">&quot;fluid.html&quot;</span>);
<a name="l00875"></a>00875 }
<a name="l00876"></a>00876 
<a name="l00877"></a><a class="code" href="fluid_8cxx.html#ae06172bee3d69d56c7d6acdc03438c1c">00877</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#ae06172bee3d69d56c7d6acdc03438c1c">manual_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00878"></a>00878   <a class="code" href="about__panel_8cxx.html#a191744ffc243128e8e5c20078ed9333e">show_help</a>(<span class="stringliteral">&quot;main.html&quot;</span>);
<a name="l00879"></a>00879 }
<a name="l00880"></a>00880 
<a name="l00881"></a>00881 
<a name="l00883"></a>00883 
<a name="l00884"></a>00884 <span class="preprocessor">#if defined(WIN32) &amp;&amp; !defined(__CYGWIN__)</span>
<a name="l00885"></a>00885 <span class="preprocessor"></span><span class="comment">// Draw a shaded box...</span>
<a name="l00886"></a>00886 <span class="keyword">static</span> <span class="keywordtype">void</span> win_box(<span class="keywordtype">int</span> <a class="code" href="test_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <span class="keywordtype">int</span> <a class="code" href="test_8c.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a>, <span class="keywordtype">int</span> <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>, <span class="keywordtype">int</span> <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>) {
<a name="l00887"></a>00887   <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0xc0, 0xc0, 0xc0);
<a name="l00888"></a>00888   <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x, y, w, h);
<a name="l00889"></a>00889   <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0, 0, 0);
<a name="l00890"></a>00890   <a class="code" href="group__fl__drawings.html#ga690c83e11f49fa837b563f4c0bc4fd1b">fl_rect</a>(x, y, w, h);
<a name="l00891"></a>00891   <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0xf0, 0xf0, 0xf0);
<a name="l00892"></a>00892   <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + 1, y + 1, 4, h - 2);
<a name="l00893"></a>00893   <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + 1, y + 1, w - 2, 4);
<a name="l00894"></a>00894   <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0x90, 0x90, 0x90);
<a name="l00895"></a>00895   <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + w - 5, y + 1, 4, h - 2);
<a name="l00896"></a>00896   <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(x + 1, y + h - 5, w - 2, 4);
<a name="l00897"></a>00897 }
<a name="l00898"></a>00898 
<a name="l00899"></a>00899 <span class="comment">// Load and show the print dialog...</span>
<a name="l00900"></a>00900 <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#af5dcf594e577c0e9254b411908a9aa98">print_menu_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l00901"></a>00901   PRINTDLG      dialog;                 <span class="comment">// Print dialog</span>
<a name="l00902"></a>00902   DOCINFO       docinfo;                <span class="comment">// Document info</span>
<a name="l00903"></a>00903   <span class="keywordtype">int</span>           first, last;            <span class="comment">// First and last page</span>
<a name="l00904"></a>00904   <span class="keywordtype">int</span>           page;                   <span class="comment">// Current page</span>
<a name="l00905"></a>00905   <span class="keywordtype">int</span>           winpage;                <span class="comment">// Current window page</span>
<a name="l00906"></a>00906   <span class="keywordtype">int</span>           num_pages;              <span class="comment">// Number of pages</span>
<a name="l00907"></a>00907   <a class="code" href="classFl__Type.html">Fl_Type</a>       *t;                     <span class="comment">// Current widget</span>
<a name="l00908"></a>00908   <span class="keywordtype">int</span>           num_windows;            <span class="comment">// Number of windows</span>
<a name="l00909"></a>00909   <a class="code" href="classFl__Window__Type.html">Fl_Window_Type</a> *windows[1000];        <span class="comment">// Windows to print</span>
<a name="l00910"></a>00910 
<a name="l00911"></a>00911 
<a name="l00912"></a>00912   <span class="comment">// Show print dialog...</span>
<a name="l00913"></a>00913   <span class="keywordflow">for</span> (t = <a class="code" href="classFl__Type.html#a6e61204827c4d0c7c5e5d16f2f698849">Fl_Type::first</a>, num_pages = 0; t; t = t-&gt;<a class="code" href="classFl__Type.html#a5cd49076cafb035e44c87943acd98136">next</a>) {
<a name="l00914"></a>00914     <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classFl__Type.html#a7d11fc59b12a555bd551f95bf35ba375">is_window</a>()) num_pages ++;
<a name="l00915"></a>00915   }
<a name="l00916"></a>00916 
<a name="l00917"></a>00917   memset(&amp;dialog, 0, <span class="keyword">sizeof</span>(dialog));
<a name="l00918"></a>00918   dialog.lStructSize = <span class="keyword">sizeof</span>(dialog);
<a name="l00919"></a>00919   dialog.hwndOwner   = <a class="code" href="mac_8H.html#a87152d2ed84f9d97c6bf3150c7688261">fl_xid</a>(main_window);
<a name="l00920"></a>00920   dialog.Flags       = PD_ALLPAGES |
<a name="l00921"></a>00921                        PD_RETURNDC;
<a name="l00922"></a>00922   dialog.nFromPage   = 1;
<a name="l00923"></a>00923   dialog.nToPage     = num_pages;
<a name="l00924"></a>00924   dialog.nMinPage    = 1;
<a name="l00925"></a>00925   dialog.nMaxPage    = num_pages;
<a name="l00926"></a>00926   dialog.nCopies     = 1;
<a name="l00927"></a>00927 
<a name="l00928"></a>00928   <span class="keywordflow">if</span> (!PrintDlg(&amp;dialog)) <span class="keywordflow">return</span>;
<a name="l00929"></a>00929 
<a name="l00930"></a>00930   <span class="comment">// Get the base filename...</span>
<a name="l00931"></a>00931   <span class="keyword">const</span> <span class="keywordtype">char</span> *basename = strrchr(filename, <span class="charliteral">&#39;/&#39;</span>);
<a name="l00932"></a>00932   <span class="keywordflow">if</span> (basename) basename ++;
<a name="l00933"></a>00933   <span class="keywordflow">else</span> basename = filename;
<a name="l00934"></a>00934 
<a name="l00935"></a>00935   <span class="comment">// Do the print job...</span>
<a name="l00936"></a>00936   memset(&amp;docinfo, 0, <span class="keyword">sizeof</span>(docinfo));
<a name="l00937"></a>00937   docinfo.cbSize      = <span class="keyword">sizeof</span>(docinfo);
<a name="l00938"></a>00938   docinfo.lpszDocName = basename;
<a name="l00939"></a>00939 
<a name="l00940"></a>00940   StartDoc(dialog.hDC, &amp;docinfo);
<a name="l00941"></a>00941 
<a name="l00942"></a>00942   <span class="comment">// Figure out how many pages we&#39;ll have to print...</span>
<a name="l00943"></a>00943   <span class="keywordflow">if</span> (dialog.Flags &amp; PD_PAGENUMS) {
<a name="l00944"></a>00944     <span class="comment">// Get from and to page numbers...</span>
<a name="l00945"></a>00945     first = dialog.nFromPage;
<a name="l00946"></a>00946     last  = dialog.nToPage;
<a name="l00947"></a>00947 
<a name="l00948"></a>00948     <span class="keywordflow">if</span> (first &gt; last) {
<a name="l00949"></a>00949       <span class="comment">// Swap first/last page</span>
<a name="l00950"></a>00950       page  = first;
<a name="l00951"></a>00951       first = last;
<a name="l00952"></a>00952       last  = page;
<a name="l00953"></a>00953     }
<a name="l00954"></a>00954   } <span class="keywordflow">else</span> {
<a name="l00955"></a>00955     <span class="comment">// Print everything...</span>
<a name="l00956"></a>00956     first = 1;
<a name="l00957"></a>00957     last  = dialog.nMaxPage;
<a name="l00958"></a>00958   }
<a name="l00959"></a>00959 
<a name="l00960"></a>00960   <span class="keywordflow">for</span> (t = <a class="code" href="classFl__Type.html#a6e61204827c4d0c7c5e5d16f2f698849">Fl_Type::first</a>, num_windows = 0, winpage = 0; t; t = t-&gt;<a class="code" href="classFl__Type.html#a5cd49076cafb035e44c87943acd98136">next</a>) {
<a name="l00961"></a>00961     <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classFl__Type.html#a7d11fc59b12a555bd551f95bf35ba375">is_window</a>()) {
<a name="l00962"></a>00962       winpage ++;
<a name="l00963"></a>00963       windows[num_windows] = (<a class="code" href="classFl__Window__Type.html">Fl_Window_Type</a> *)t;
<a name="l00964"></a>00964       num_windows ++;
<a name="l00965"></a>00965 <span class="preprocessor">#if 0</span>
<a name="l00966"></a>00966 <span class="preprocessor"></span>      <span class="keywordflow">if</span> (dialog.Flags &amp; PD_ALLPAGES) num_windows ++;
<a name="l00967"></a>00967       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((dialog.Flags &amp; PD_PAGENUMS) &amp;&amp; winpage &gt;= first &amp;&amp;
<a name="l00968"></a>00968                winpage &lt;= last) num_windows ++;
<a name="l00969"></a>00969       <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((dialog.Flags &amp; PD_SELECTION) &amp;&amp; t-&gt;<a class="code" href="classFl__Type.html#a52691ca3cdde11a8103384faae547886">selected</a>) num_windows ++;
<a name="l00970"></a>00970 <span class="preprocessor">#endif // 0</span>
<a name="l00971"></a>00971 <span class="preprocessor"></span>    }
<a name="l00972"></a>00972   }
<a name="l00973"></a>00973 
<a name="l00974"></a>00974   num_pages = num_windows;
<a name="l00975"></a>00975 
<a name="l00976"></a>00976   <span class="comment">// Figure out the page size and margins...</span>
<a name="l00977"></a>00977   <span class="keywordtype">int</span>   <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>, <a class="code" href="png_8h.html#ae403475fe6a2c471cf8dd689e3049953">length</a>;                  <span class="comment">// Size of page</span>
<a name="l00978"></a>00978   <span class="keywordtype">int</span>   xdpi, ydpi;                     <span class="comment">// Output resolution</span>
<a name="l00979"></a>00979   <span class="keywordtype">char</span>  <a class="code" href="png_8h.html#ae666dd7e2f504034709280abeac7616e">buffer</a>[1024];
<a name="l00980"></a>00980 
<a name="l00981"></a>00981   width  = GetDeviceCaps(dialog.hDC, HORZRES);
<a name="l00982"></a>00982   length = GetDeviceCaps(dialog.hDC, VERTRES);
<a name="l00983"></a>00983   xdpi   = GetDeviceCaps(dialog.hDC, LOGPIXELSX);
<a name="l00984"></a>00984   ydpi   = GetDeviceCaps(dialog.hDC, LOGPIXELSY);
<a name="l00985"></a>00985 
<a name="l00986"></a>00986 <span class="comment">//  fl_message(&quot;width=%d, length=%d, xdpi=%d, ydpi=%d, num_windows=%d\n&quot;,</span>
<a name="l00987"></a>00987 <span class="comment">//             width, length, xdpi, ydpi, num_windows);</span>
<a name="l00988"></a>00988 
<a name="l00989"></a>00989   HDC   save_dc = <a class="code" href="mac_8H.html#a9b2af459c0a223b6274f508339c783a6">fl_gc</a>;
<a name="l00990"></a>00990   HWND  save_win = <a class="code" href="win32_8H.html#afdab6664143864c36ba6b51782b32500">fl_window</a>;
<a name="l00991"></a>00991   <span class="keywordtype">int</span>   fontsize = 14 * ydpi / 72;
<a name="l00992"></a>00992 
<a name="l00993"></a>00993   <a class="code" href="mac_8H.html#a9b2af459c0a223b6274f508339c783a6">fl_gc</a> = dialog.hDC;
<a name="l00994"></a>00994   <a class="code" href="win32_8H.html#afdab6664143864c36ba6b51782b32500">fl_window</a> = (HWND)dialog.hDC;
<a name="l00995"></a>00995   <a class="code" href="group__fl__drawings.html#ga0fce6c81d69c3a80c8073a338f1346fd">fl_push_no_clip</a>();
<a name="l00996"></a>00996 
<a name="l00997"></a>00997   <span class="comment">// Get the time and date...</span>
<a name="l00998"></a>00998   time_t curtime = time(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l00999"></a>00999   <span class="keyword">struct </span>tm *curdate = localtime(&amp;curtime);
<a name="l01000"></a>01000   <span class="keywordtype">char</span> date[1024];
<a name="l01001"></a>01001 
<a name="l01002"></a>01002   strftime(date, <span class="keyword">sizeof</span>(date), <span class="stringliteral">&quot;%c&quot;</span>, curdate);
<a name="l01003"></a>01003 
<a name="l01004"></a>01004   <span class="comment">// Print each of the windows...</span>
<a name="l01005"></a>01005   <span class="keywordflow">for</span> (winpage = 0; winpage &lt; num_windows; winpage ++) {
<a name="l01006"></a>01006     <span class="comment">// Draw header...</span>
<a name="l01007"></a>01007     StartPage(dialog.hDC);
<a name="l01008"></a>01008 
<a name="l01009"></a>01009     <a class="code" href="group__fl__attributes.html#ga1bdba1e2b321676da6b0b290f485bf27">fl_font</a>(<a class="code" href="Enumerations_8H.html#ae52b5d98292bf142ea1c7468d7d732cd" title="Helvetica (or Arial) bold.">FL_HELVETICA_BOLD</a>, fontsize);
<a name="l01010"></a>01010     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0, 0, 0);
<a name="l01011"></a>01011 
<a name="l01012"></a>01012     <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(basename, 0, fontsize);
<a name="l01013"></a>01013 
<a name="l01014"></a>01014     <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(date, (width - (<span class="keywordtype">int</span>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(date)) / 2, fontsize);
<a name="l01015"></a>01015 
<a name="l01016"></a>01016     sprintf(buffer, <span class="stringliteral">&quot;%d/%d&quot;</span>, winpage + 1, num_windows);
<a name="l01017"></a>01017     <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(buffer, width - (<span class="keywordtype">int</span>)<a class="code" href="group__fl__attributes.html#ga92c762ce2fc7fa891bac6b7590f967bd">fl_width</a>(buffer), fontsize);
<a name="l01018"></a>01018 
<a name="l01019"></a>01019     <span class="comment">// Get window image...</span>
<a name="l01020"></a>01020     <a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>       *pixels;                <span class="comment">// Window image data</span>
<a name="l01021"></a>01021     <span class="keywordtype">int</span>         <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>, <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>;                   <span class="comment">// Window image dimensions</span>
<a name="l01022"></a>01022     <span class="keywordtype">int</span>         ww, hh;                 <span class="comment">// Scaled size</span>
<a name="l01023"></a>01023     <span class="keywordtype">int</span>         ulx, uly;               <span class="comment">// Upper-lefthand corner</span>
<a name="l01024"></a>01024     <a class="code" href="classFl__Window.html">Fl_Window</a>   *win;                   <span class="comment">// Window widget</span>
<a name="l01025"></a>01025     BITMAPINFO  <a class="code" href="jmemsys_8h.html#aae47c0f1d689d6cba5eb7077ca1299fa">info</a>;                   <span class="comment">// Bitmap information</span>
<a name="l01026"></a>01026 
<a name="l01027"></a>01027     win    = (<a class="code" href="classFl__Window.html">Fl_Window</a> *)(windows[winpage]-&gt;o);
<a name="l01028"></a>01028     pixels = windows[winpage]-&gt;<a class="code" href="classFl__Window__Type.html#aa6610e39c78c3550e2f3c9a4d026bb01">read_image</a>(w, h);
<a name="l01029"></a>01029 
<a name="l01030"></a>01030     <span class="comment">// Swap colors: FLTK uses R-G-B --&gt; Windows GDI uses B-G-R</span>
<a name="l01031"></a>01031 
<a name="l01032"></a>01032     { <a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *p = pixels;
<a name="l01033"></a>01033       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>=0; <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>&lt;w*<a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>; <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>++, p+=3) {
<a name="l01034"></a>01034         <a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> temp = p[0]; p[0] = p[2]; p[2] = temp;
<a name="l01035"></a>01035       }
<a name="l01036"></a>01036     }
<a name="l01037"></a>01037 
<a name="l01038"></a>01038     <span class="comment">// Figure out the window size, first at 100 PPI and then scaled</span>
<a name="l01039"></a>01039     <span class="comment">// down if that is too big...</span>
<a name="l01040"></a>01040     ww = w * xdpi / 100;
<a name="l01041"></a>01041     hh = h * ydpi / 100;
<a name="l01042"></a>01042 
<a name="l01043"></a>01043     <span class="keywordflow">if</span> (ww &gt; width) {
<a name="l01044"></a>01044       ww = <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>;
<a name="l01045"></a>01045       hh = h * ww * ydpi / xdpi / <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>;
<a name="l01046"></a>01046     }
<a name="l01047"></a>01047 
<a name="l01048"></a>01048     <span class="keywordflow">if</span> (hh &gt; (length - ydpi / 2)) {
<a name="l01049"></a>01049       hh = length - ydpi / 2;
<a name="l01050"></a>01050       ww = w * hh / <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>;
<a name="l01051"></a>01051     }
<a name="l01052"></a>01052 
<a name="l01053"></a>01053     <span class="comment">// Position the window in the center...</span>
<a name="l01054"></a>01054     ulx = (width - ww) / 2;
<a name="l01055"></a>01055     uly = (length - hh) / 2;
<a name="l01056"></a>01056 
<a name="l01057"></a>01057 <span class="comment">//    fl_message(&quot;winpage=%d, ulx=%d, uly=%d, ww=%d, hh=%d&quot;,</span>
<a name="l01058"></a>01058 <span class="comment">//               winpage, ulx, uly, ww, hh);</span>
<a name="l01059"></a>01059 
<a name="l01060"></a>01060     <span class="comment">// Draw a simulated window border...</span>
<a name="l01061"></a>01061     <span class="keywordtype">int</span> xborder = 4 * ww / <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>;
<a name="l01062"></a>01062     <span class="keywordtype">int</span> yborder = 4 * hh / <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>;
<a name="l01063"></a>01063 
<a name="l01064"></a>01064     win_box(ulx - xborder, uly - 5 * yborder,
<a name="l01065"></a>01065             ww + 2 * xborder, hh + 6 * yborder);
<a name="l01066"></a>01066 
<a name="l01067"></a>01067     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0, 0, 255);
<a name="l01068"></a>01068     <a class="code" href="group__fl__drawings.html#ga2986a868e9cc8d9141acde94c0fe8ab0">fl_rectf</a>(ulx, uly - 4 * yborder, ww, 4 * yborder);
<a name="l01069"></a>01069 
<a name="l01070"></a>01070     <a class="code" href="group__fl__attributes.html#ga1bdba1e2b321676da6b0b290f485bf27">fl_font</a>(<a class="code" href="Enumerations_8H.html#ae52b5d98292bf142ea1c7468d7d732cd" title="Helvetica (or Arial) bold.">FL_HELVETICA_BOLD</a>, 2 * yborder);
<a name="l01071"></a>01071     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(255, 255, 255);
<a name="l01072"></a>01072     <a class="code" href="group__fl__drawings.html#gacf054f0c5c5d3ab6caa1e8be3d58ec7e">fl_draw</a>(win-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>() ? win-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>() : <span class="stringliteral">&quot;Window&quot;</span>,
<a name="l01073"></a>01073             ulx + xborder, uly - 3 * yborder);
<a name="l01074"></a>01074 
<a name="l01075"></a>01075     <span class="keywordtype">int</span> <a class="code" href="test_8c.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = ulx + ww - 4 * xborder;
<a name="l01076"></a>01076 
<a name="l01077"></a>01077     win_box(x, uly - 4 * yborder, 4 * xborder, 4 * yborder);
<a name="l01078"></a>01078     <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0, 0, 0);
<a name="l01079"></a>01079     <a class="code" href="group__fl__drawings.html#gaecc374f163a97ef67c4e58be11c47047">fl_line</a>(x + xborder, uly - yborder,
<a name="l01080"></a>01080             x + 3 * xborder, uly - 3 * yborder);
<a name="l01081"></a>01081     <a class="code" href="group__fl__drawings.html#gaecc374f163a97ef67c4e58be11c47047">fl_line</a>(x + xborder, uly - 3 * yborder,
<a name="l01082"></a>01082             x + 3 * xborder, uly - yborder);
<a name="l01083"></a>01083     x -= 4 * xborder;
<a name="l01084"></a>01084 
<a name="l01085"></a>01085     <span class="keywordflow">if</span> (win-&gt;<a class="code" href="classFl__Group.html#ab0ed0d1974d7185594687849f386c5f3">resizable</a>()) {
<a name="l01086"></a>01086       win_box(x, uly - 4 * yborder, 4 * xborder, 4 * yborder);
<a name="l01087"></a>01087       <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0, 0, 0);
<a name="l01088"></a>01088       <a class="code" href="group__fl__drawings.html#ga690c83e11f49fa837b563f4c0bc4fd1b">fl_rect</a>(x + xborder, uly - 3 * yborder, 2 * xborder, 2 * yborder);
<a name="l01089"></a>01089       x -= 4 * xborder;
<a name="l01090"></a>01090     }
<a name="l01091"></a>01091 
<a name="l01092"></a>01092     <span class="keywordflow">if</span> (!win-&gt;<a class="code" href="classFl__Window.html#a6cc843ffcc711300613e44c678ad682f">modal</a>()) {
<a name="l01093"></a>01093       win_box(x, uly - 4 * yborder, 4 * xborder, 4 * yborder);
<a name="l01094"></a>01094       <a class="code" href="group__fl__attributes.html#ga974e9f64959aa83cf6f0a36d3f0105aa">fl_color</a>(0, 0, 0);
<a name="l01095"></a>01095       <a class="code" href="group__fl__drawings.html#gaecc374f163a97ef67c4e58be11c47047">fl_line</a>(x + xborder, uly - yborder, x + 3 * xborder, uly - yborder);
<a name="l01096"></a>01096       x -= 4 * xborder;
<a name="l01097"></a>01097     }
<a name="l01098"></a>01098 
<a name="l01099"></a>01099     <span class="comment">// Color image...</span>
<a name="l01100"></a>01100     memset(&amp;info, 0, <span class="keyword">sizeof</span>(info));
<a name="l01101"></a>01101     info.bmiHeader.biSize        = <span class="keyword">sizeof</span>(<a class="code" href="jmemsys_8h.html#aae47c0f1d689d6cba5eb7077ca1299fa">info</a>);
<a name="l01102"></a>01102     info.bmiHeader.biWidth       = <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>;
<a name="l01103"></a>01103     info.bmiHeader.biHeight      = 1;
<a name="l01104"></a>01104     info.bmiHeader.biPlanes      = 1;
<a name="l01105"></a>01105     info.bmiHeader.biBitCount    = 24;
<a name="l01106"></a>01106     info.bmiHeader.biCompression = <a class="code" href="Fl__BMP__Image_8cxx.html#a30c89822a72c59b21109955f16d74e29">BI_RGB</a>;
<a name="l01107"></a>01107 
<a name="l01108"></a>01108     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="test_8c.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a> = 0; <a class="code" href="test_8c.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a> &lt; <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>; <a class="code" href="test_8c.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a> ++) {
<a name="l01109"></a>01109       StretchDIBits(dialog.hDC, ulx, uly + <a class="code" href="test_8c.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a> * hh / h, ww, (hh + h - 1) / h, 0, 0, w, 1,
<a name="l01110"></a>01110                     pixels + <a class="code" href="test_8c.html#a0a2f84ed7838f07779ae24c5a9086d33">y</a> * w * 3, &amp;info, DIB_RGB_COLORS, SRCCOPY);
<a name="l01111"></a>01111     }
<a name="l01112"></a>01112 
<a name="l01113"></a>01113     <span class="keyword">delete</span>[] pixels;
<a name="l01114"></a>01114 
<a name="l01115"></a>01115     <span class="comment">// Show the page...</span>
<a name="l01116"></a>01116     EndPage(dialog.hDC);
<a name="l01117"></a>01117   }
<a name="l01118"></a>01118 
<a name="l01119"></a>01119   <span class="comment">// Finish up...</span>
<a name="l01120"></a>01120   EndDoc(dialog.hDC);
<a name="l01121"></a>01121 
<a name="l01122"></a>01122   <a class="code" href="mac_8H.html#a9b2af459c0a223b6274f508339c783a6">fl_gc</a> = save_dc;
<a name="l01123"></a>01123   <a class="code" href="win32_8H.html#afdab6664143864c36ba6b51782b32500">fl_window</a> = save_win;
<a name="l01124"></a>01124   <a class="code" href="group__fl__drawings.html#ga7abb216a9a87408c8926126cc9efce22">fl_pop_clip</a>();
<a name="l01125"></a>01125 
<a name="l01126"></a>01126   <span class="comment">// Free the print DC and return...</span>
<a name="l01127"></a>01127   DeleteDC(dialog.hDC);
<a name="l01128"></a>01128 }
<a name="l01129"></a>01129 <span class="preprocessor">#else</span>
<a name="l01130"></a>01130 <span class="preprocessor"></span><span class="comment">// Load and show the print dialog...</span>
<a name="l01131"></a><a class="code" href="fluid_8cxx.html#af5dcf594e577c0e9254b411908a9aa98">01131</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#af5dcf594e577c0e9254b411908a9aa98">print_menu_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l01132"></a>01132   <span class="keywordflow">if</span> (!<a class="code" href="fluid_2print__panel_8cxx.html#ab6925b8df4306b878162413f8f120d3a">print_panel</a>) <a class="code" href="fluid_2print__panel_8cxx.html#a231cc517e985fc6bcd057ea078f82b69">make_print_panel</a>();
<a name="l01133"></a>01133 
<a name="l01134"></a>01134   <a class="code" href="fluid_2print__panel_8cxx.html#a601622c679c0f391d067a3b200f58ccb">print_load</a>();
<a name="l01135"></a>01135 
<a name="l01136"></a>01136   <a class="code" href="fluid_2print__panel_8cxx.html#a73711fc6bdcea7accd8fefbd322d8ed6">print_selection</a>-&gt;<a class="code" href="classFl__Widget.html#a2eb3d2eebe8ba623c4007d4f8e66a1ee">deactivate</a>();
<a name="l01137"></a>01137 
<a name="l01138"></a>01138   <span class="keywordflow">for</span> (<a class="code" href="classFl__Type.html">Fl_Type</a> *t = <a class="code" href="classFl__Type.html#a6e61204827c4d0c7c5e5d16f2f698849">Fl_Type::first</a>; t; t = t-&gt;<a class="code" href="classFl__Type.html#a5cd49076cafb035e44c87943acd98136">next</a>) {
<a name="l01139"></a>01139     <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classFl__Type.html#a52691ca3cdde11a8103384faae547886">selected</a> &amp;&amp; t-&gt;<a class="code" href="classFl__Type.html#a7d11fc59b12a555bd551f95bf35ba375">is_window</a>()) {
<a name="l01140"></a>01140       <a class="code" href="fluid_2print__panel_8cxx.html#a73711fc6bdcea7accd8fefbd322d8ed6">print_selection</a>-&gt;<a class="code" href="classFl__Widget.html#ae0ca5f7159aceba7d813c81167e684bb">activate</a>();
<a name="l01141"></a>01141       <span class="keywordflow">break</span>;
<a name="l01142"></a>01142     }
<a name="l01143"></a>01143   }
<a name="l01144"></a>01144 
<a name="l01145"></a>01145   <a class="code" href="fluid_2print__panel_8cxx.html#ad9c68942979c6972ea073d06533b5f24">print_all</a>-&gt;<a class="code" href="classFl__Button.html#ad56f03bef37bd9d2a8a115188da3149d">setonly</a>();
<a name="l01146"></a>01146   <a class="code" href="fluid_2print__panel_8cxx.html#ad9c68942979c6972ea073d06533b5f24">print_all</a>-&gt;<a class="code" href="classFl__Widget.html#a37aa870315e37ddc1246caa6421322f4">do_callback</a>();
<a name="l01147"></a>01147 
<a name="l01148"></a>01148   <a class="code" href="fluid_2print__panel_8cxx.html#ab6925b8df4306b878162413f8f120d3a">print_panel</a>-&gt;<a class="code" href="classFl__Double__Window.html#a4d1c3cbb1184c6785df7465b0c657025">show</a>();
<a name="l01149"></a>01149 }
<a name="l01150"></a>01150 
<a name="l01151"></a>01151 <span class="comment">// Quote a string for PostScript printing</span>
<a name="l01152"></a>01152 <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *ps_string(<span class="keyword">const</span> <span class="keywordtype">char</span> *s) {
<a name="l01153"></a>01153   <span class="keywordtype">char</span> *bufptr;
<a name="l01154"></a>01154   <span class="keyword">static</span> <span class="keywordtype">char</span> buffer[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l01155"></a>01155 
<a name="l01156"></a>01156 
<a name="l01157"></a>01157   <span class="keywordflow">if</span> (!s) {
<a name="l01158"></a>01158     buffer[0] = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01159"></a>01159   } <span class="keywordflow">else</span> {
<a name="l01160"></a>01160     <span class="keywordflow">for</span> (bufptr = buffer; bufptr &lt; (buffer + <span class="keyword">sizeof</span>(buffer) - 3) &amp;&amp; *s;) {
<a name="l01161"></a>01161       <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;(&#39;</span> || *s == <span class="charliteral">&#39;)&#39;</span> || *s == <span class="charliteral">&#39;\\&#39;</span>) *bufptr++ = <span class="charliteral">&#39;\\&#39;</span>;
<a name="l01162"></a>01162       *bufptr++ = *s++;
<a name="l01163"></a>01163     }
<a name="l01164"></a>01164 
<a name="l01165"></a>01165     *bufptr = <span class="charliteral">&#39;\0&#39;</span>;
<a name="l01166"></a>01166   }
<a name="l01167"></a>01167 
<a name="l01168"></a>01168   <span class="keywordflow">return</span> (buffer);
<a name="l01169"></a>01169 }
<a name="l01170"></a>01170 
<a name="l01171"></a>01171 <span class="comment">// Actually print...</span>
<a name="l01172"></a><a class="code" href="fluid_2print__panel_8h.html#a92bf6e365ea3cfd9921038b545aa0735">01172</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a92bf6e365ea3cfd9921038b545aa0735">print_cb</a>(<a class="code" href="classFl__Return__Button.html">Fl_Return_Button</a> *, <span class="keywordtype">void</span> *) {
<a name="l01173"></a>01173   FILE          *<a class="code" href="jpeglib_8h.html#ae581849c67336453bd5b81e6518019a9">outfile</a>;               <span class="comment">// Output file or pipe to print command</span>
<a name="l01174"></a>01174   <span class="keywordtype">char</span>          command[1024];          <span class="comment">// Print command</span>
<a name="l01175"></a>01175   <span class="keywordtype">int</span>           copies;                 <span class="comment">// Collated copies</span>
<a name="l01176"></a>01176   <span class="keywordtype">int</span>           first, last;            <span class="comment">// First and last page</span>
<a name="l01177"></a>01177   <span class="keywordtype">int</span>           page;                   <span class="comment">// Current page</span>
<a name="l01178"></a>01178   <span class="keywordtype">int</span>           winpage;                <span class="comment">// Current window page</span>
<a name="l01179"></a>01179   <span class="keywordtype">int</span>           num_pages;              <span class="comment">// Number of pages</span>
<a name="l01180"></a>01180   <a class="code" href="classFl__Type.html">Fl_Type</a>       *t;                     <span class="comment">// Current widget</span>
<a name="l01181"></a>01181   <span class="keywordtype">int</span>           num_windows;            <span class="comment">// Number of windows</span>
<a name="l01182"></a>01182   <a class="code" href="classFl__Window__Type.html">Fl_Window_Type</a> *windows[1000];        <span class="comment">// Windows to print</span>
<a name="l01183"></a>01183 
<a name="l01184"></a>01184   <span class="comment">// Show progress, deactivate controls...</span>
<a name="l01185"></a>01185   <a class="code" href="fluid_2print__panel_8cxx.html#ae31275a431467261caefb09f839a9ee2">print_panel_controls</a>-&gt;<a class="code" href="classFl__Widget.html#a2eb3d2eebe8ba623c4007d4f8e66a1ee">deactivate</a>();
<a name="l01186"></a>01186   <a class="code" href="fluid_2print__panel_8cxx.html#ac827c1cf761dbdd6b63fe4844301a754">print_progress</a>-&gt;<a class="code" href="classFl__Widget.html#ab572c6fbc922bf3268b72cf9e2939606">show</a>();
<a name="l01187"></a>01187 
<a name="l01188"></a>01188   <span class="comment">// Figure out how many pages we&#39;ll have to print...</span>
<a name="l01189"></a>01189   <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#ac5b4de320faddebf945e696fe7ca3c25">print_collate_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) copies = (<span class="keywordtype">int</span>)<a class="code" href="fluid_2print__panel_8cxx.html#adb6cfdd39bb14498a2669517a0679135">print_copies</a>-&gt;<a class="code" href="classFl__Spinner.html#aae40d60e85e9d89caf797dd3862cff2b">value</a>();
<a name="l01190"></a>01190   <span class="keywordflow">else</span> copies = 1;
<a name="l01191"></a>01191 
<a name="l01192"></a>01192   <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#ae5cbc3203c00eca92a215562bf823db0">print_pages</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l01193"></a>01193     <span class="comment">// Get from and to page numbers...</span>
<a name="l01194"></a>01194     <span class="keywordflow">if</span> ((first = atoi(<a class="code" href="fluid_2print__panel_8cxx.html#a61238728a9c4ca6cd63d6bd9afa7be18">print_from</a>-&gt;<a class="code" href="classFl__Input__.html#aaccaca04083dc6d2f1c1a4fa273d9048">value</a>())) &lt; 1) first = 1;
<a name="l01195"></a>01195     <span class="keywordflow">if</span> ((last = atoi(<a class="code" href="fluid_2print__panel_8cxx.html#ad61e50a4c57d6c26e87aba672690886f">print_to</a>-&gt;<a class="code" href="classFl__Input__.html#aaccaca04083dc6d2f1c1a4fa273d9048">value</a>())) &lt; 1) last = 1000;
<a name="l01196"></a>01196 
<a name="l01197"></a>01197     <span class="keywordflow">if</span> (first &gt; last) {
<a name="l01198"></a>01198       <span class="comment">// Swap first/last page</span>
<a name="l01199"></a>01199       page  = first;
<a name="l01200"></a>01200       first = last;
<a name="l01201"></a>01201       last  = page;
<a name="l01202"></a>01202     }
<a name="l01203"></a>01203   } <span class="keywordflow">else</span> {
<a name="l01204"></a>01204     <span class="comment">// Print everything...</span>
<a name="l01205"></a>01205     first = 1;
<a name="l01206"></a>01206     last  = 1000;
<a name="l01207"></a>01207   }
<a name="l01208"></a>01208 
<a name="l01209"></a>01209   <span class="keywordflow">for</span> (t = <a class="code" href="classFl__Type.html#a6e61204827c4d0c7c5e5d16f2f698849">Fl_Type::first</a>, num_windows = 0, winpage = 0; t; t = t-&gt;<a class="code" href="classFl__Type.html#a5cd49076cafb035e44c87943acd98136">next</a>) {
<a name="l01210"></a>01210     <span class="keywordflow">if</span> (t-&gt;<a class="code" href="classFl__Type.html#a7d11fc59b12a555bd551f95bf35ba375">is_window</a>()) {
<a name="l01211"></a>01211       winpage ++;
<a name="l01212"></a>01212       windows[num_windows] = (<a class="code" href="classFl__Window__Type.html">Fl_Window_Type</a> *)t;
<a name="l01213"></a>01213 
<a name="l01214"></a>01214       <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#ad9c68942979c6972ea073d06533b5f24">print_all</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) num_windows ++;
<a name="l01215"></a>01215       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#ae5cbc3203c00eca92a215562bf823db0">print_pages</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>() &amp;&amp; winpage &gt;= first &amp;&amp;
<a name="l01216"></a>01216                winpage &lt;= last) num_windows ++;
<a name="l01217"></a>01217       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#a73711fc6bdcea7accd8fefbd322d8ed6">print_selection</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>() &amp;&amp; t-&gt;<a class="code" href="classFl__Type.html#a52691ca3cdde11a8103384faae547886">selected</a>) num_windows ++;
<a name="l01218"></a>01218     }
<a name="l01219"></a>01219   }
<a name="l01220"></a>01220 
<a name="l01221"></a>01221   num_pages = num_windows * copies;
<a name="l01222"></a>01222 
<a name="l01223"></a>01223   <a class="code" href="fluid_2print__panel_8cxx.html#ac827c1cf761dbdd6b63fe4844301a754">print_progress</a>-&gt;<a class="code" href="classFl__Progress.html#acde4b20b5c359e72d2e8b3f6a68f3ed9">minimum</a>(0);
<a name="l01224"></a>01224   <a class="code" href="fluid_2print__panel_8cxx.html#ac827c1cf761dbdd6b63fe4844301a754">print_progress</a>-&gt;<a class="code" href="classFl__Progress.html#afebf9d9c188be1e8f5dd7576bcb9aff7">maximum</a>(num_pages);
<a name="l01225"></a>01225   <a class="code" href="fluid_2print__panel_8cxx.html#ac827c1cf761dbdd6b63fe4844301a754">print_progress</a>-&gt;<a class="code" href="classFl__Progress.html#af6fb114a44c7f74c9ec4ff09eb747659">value</a>(0);
<a name="l01226"></a>01226   <a class="code" href="classFl.html#a1dbb83f1d52001c152ccf8415e3ee6f0">Fl::check</a>();
<a name="l01227"></a>01227 
<a name="l01228"></a>01228   <span class="comment">// Get the base filename...</span>
<a name="l01229"></a>01229   <span class="keyword">const</span> <span class="keywordtype">char</span> *basename = strrchr(filename, <span class="charliteral">&#39;/&#39;</span>);
<a name="l01230"></a>01230   <span class="keywordflow">if</span> (basename) basename ++;
<a name="l01231"></a>01231   <span class="keywordflow">else</span> basename = filename;
<a name="l01232"></a>01232 
<a name="l01233"></a>01233   <span class="comment">// Open the print stream...</span>
<a name="l01234"></a>01234   <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#a724ff8a1b57e5c86138e3360b80100df">print_choice</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>()) {
<a name="l01235"></a>01235     <span class="comment">// Pipe the output into the lp command...</span>
<a name="l01236"></a>01236     <span class="keyword">const</span> <span class="keywordtype">char</span> *printer = (<span class="keyword">const</span> <span class="keywordtype">char</span> *)<a class="code" href="fluid_2print__panel_8cxx.html#a724ff8a1b57e5c86138e3360b80100df">print_choice</a>-&gt;<a class="code" href="classFl__Menu__.html#a44b0dd7371022c6df07fda0e9aa0e293">menu</a>()[<a class="code" href="fluid_2print__panel_8cxx.html#a724ff8a1b57e5c86138e3360b80100df">print_choice</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>()].<a class="code" href="structFl__Menu__Item.html#ae8192e7a8277c85c1a8e431a9e4bd6a8">user_data</a>();
<a name="l01237"></a>01237 
<a name="l01238"></a>01238     <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(command, <span class="keyword">sizeof</span>(command), <span class="stringliteral">&quot;lp -s -d %s -n %.0f -t &#39;%s&#39; -o media=%s&quot;</span>,
<a name="l01239"></a>01239              printer, <a class="code" href="fluid_2print__panel_8cxx.html#ac5b4de320faddebf945e696fe7ca3c25">print_collate_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>() ? 1.0 : <a class="code" href="fluid_2print__panel_8cxx.html#adb6cfdd39bb14498a2669517a0679135">print_copies</a>-&gt;<a class="code" href="classFl__Spinner.html#aae40d60e85e9d89caf797dd3862cff2b">value</a>(),
<a name="l01240"></a>01240              basename, <a class="code" href="fluid_2print__panel_8cxx.html#ad82bf6fa3151088a2f18809cbb7b563d">print_page_size</a>-&gt;<a class="code" href="classFl__Menu__.html#a65447e98577519c36eb6b3561192e7cd">text</a>(<a class="code" href="fluid_2print__panel_8cxx.html#ad82bf6fa3151088a2f18809cbb7b563d">print_page_size</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>()));
<a name="l01241"></a>01241     outfile = popen(command, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l01242"></a>01242   } <span class="keywordflow">else</span> {
<a name="l01243"></a>01243     <span class="comment">// Print to file...</span>
<a name="l01244"></a>01244     <a class="code" href="group__group__comdlg.html#gad4e7eaf88fe838a415110280fd636566">fl_file_chooser_ok_label</a>(<span class="stringliteral">&quot;Print&quot;</span>);
<a name="l01245"></a>01245     <span class="keyword">const</span> <span class="keywordtype">char</span> *outname = <a class="code" href="group__group__comdlg.html#ga5bc7a0eda4de38cbc33d3a16d5cfd32f">fl_file_chooser</a>(<span class="stringliteral">&quot;Print To&quot;</span>, <span class="stringliteral">&quot;PostScript (*.ps)&quot;</span>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);
<a name="l01246"></a>01246     <a class="code" href="group__group__comdlg.html#gad4e7eaf88fe838a415110280fd636566">fl_file_chooser_ok_label</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01247"></a>01247 
<a name="l01248"></a>01248     <span class="keywordflow">if</span> (outname &amp;&amp; !access(outname, 0)) {
<a name="l01249"></a>01249       <span class="keywordflow">if</span> (<a class="code" href="fl__ask_8H.html#a5b69d37ffa543fe5dd617dc4277f2e1c">fl_choice</a>(<span class="stringliteral">&quot;The file \&quot;%s\&quot; already exists.\n&quot;</span>
<a name="l01250"></a>01250                     <span class="stringliteral">&quot;Do you want to replace it?&quot;</span>, <span class="stringliteral">&quot;Cancel&quot;</span>,
<a name="l01251"></a>01251                     <span class="stringliteral">&quot;Replace&quot;</span>, <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, outname) == 0) outname = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01252"></a>01252     }
<a name="l01253"></a>01253 
<a name="l01254"></a>01254     <span class="keywordflow">if</span> (outname) outfile = <a class="code" href="group__fl__unicode.html#ga8a457e9f251d83d565a62fb3c88cf32e">fl_fopen</a>(outname, <span class="stringliteral">&quot;w&quot;</span>);
<a name="l01255"></a>01255     <span class="keywordflow">else</span> outfile = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01256"></a>01256   }
<a name="l01257"></a>01257 
<a name="l01258"></a>01258   <span class="keywordflow">if</span> (outfile) {
<a name="l01259"></a>01259     <span class="comment">// Figure out the page size and margins...</span>
<a name="l01260"></a>01260     <span class="keywordtype">int</span> <a class="code" href="png_8h.html#a435a10efbc8005bae2e58e63cf9b55ce">width</a>, <a class="code" href="png_8h.html#ae403475fe6a2c471cf8dd689e3049953">length</a>;                  <span class="comment">// Size of page</span>
<a name="l01261"></a>01261     <span class="keywordtype">int</span> left, bottom,                   <span class="comment">// Bottom lefthand corner</span>
<a name="l01262"></a>01262         right, top;                     <span class="comment">// Top righthand corner</span>
<a name="l01263"></a>01263 
<a name="l01264"></a>01264     <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#ad82bf6fa3151088a2f18809cbb7b563d">print_page_size</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>()) {
<a name="l01265"></a>01265       <span class="comment">// A4</span>
<a name="l01266"></a>01266       width  = 595;
<a name="l01267"></a>01267       length = 842;
<a name="l01268"></a>01268     } <span class="keywordflow">else</span> {
<a name="l01269"></a>01269       <span class="comment">// Letter</span>
<a name="l01270"></a>01270       width  = 612;
<a name="l01271"></a>01271       length = 792;
<a name="l01272"></a>01272     }
<a name="l01273"></a>01273 
<a name="l01274"></a>01274     <span class="keywordtype">int</span> output_mode;
<a name="l01275"></a>01275     <span class="keywordflow">for</span> (output_mode = 0; output_mode &lt; 4; output_mode ++) {
<a name="l01276"></a>01276       <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#ad667457d375d1e1638ddcdde23adfbd9">print_output_mode</a>[output_mode]-&gt;<a class="code" href="png_8h.html#a58342413057d091672287c7522a6137f">value</a>()) <span class="keywordflow">break</span>;
<a name="l01277"></a>01277     }
<a name="l01278"></a>01278 
<a name="l01279"></a>01279     <span class="keywordflow">if</span> (output_mode &amp; 1) {
<a name="l01280"></a>01280       <span class="comment">// Landscape</span>
<a name="l01281"></a>01281       left   = 36;
<a name="l01282"></a>01282       bottom = 18;
<a name="l01283"></a>01283       right  = length - 36;
<a name="l01284"></a>01284       top    = width - 18;
<a name="l01285"></a>01285     } <span class="keywordflow">else</span> {
<a name="l01286"></a>01286       <span class="comment">// Portrait</span>
<a name="l01287"></a>01287       left   = 18;
<a name="l01288"></a>01288       bottom = 36;
<a name="l01289"></a>01289       right  = width - 18;
<a name="l01290"></a>01290       top    = length - 36;
<a name="l01291"></a>01291     }
<a name="l01292"></a>01292 
<a name="l01293"></a>01293     <span class="comment">// Get the time and date...</span>
<a name="l01294"></a>01294     time_t curtime = time(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01295"></a>01295     <span class="keyword">struct </span>tm *curdate = localtime(&amp;curtime);
<a name="l01296"></a>01296     <span class="keywordtype">char</span> date[1024];
<a name="l01297"></a>01297 
<a name="l01298"></a>01298     strftime(date, <span class="keyword">sizeof</span>(date), <span class="stringliteral">&quot;%c&quot;</span>, curdate);
<a name="l01299"></a>01299 
<a name="l01300"></a>01300     <span class="comment">// Write the prolog...</span>
<a name="l01301"></a>01301     fprintf(outfile,
<a name="l01302"></a>01302             <span class="stringliteral">&quot;%%!PS-Adobe-3.0\n&quot;</span>
<a name="l01303"></a>01303             <span class="stringliteral">&quot;%%%%BoundingBox: 18 36 %d %d\n&quot;</span>
<a name="l01304"></a>01304             <span class="stringliteral">&quot;%%%%Pages: %d\n&quot;</span>
<a name="l01305"></a>01305             <span class="stringliteral">&quot;%%%%LanguageLevel: 1\n&quot;</span>
<a name="l01306"></a>01306             <span class="stringliteral">&quot;%%%%DocumentData: Clean7Bit\n&quot;</span>
<a name="l01307"></a>01307             <span class="stringliteral">&quot;%%%%DocumentNeededResources: font Helvetica-Bold\n&quot;</span>
<a name="l01308"></a>01308             <span class="stringliteral">&quot;%%%%Creator: FLUID %.4f\n&quot;</span>
<a name="l01309"></a>01309             <span class="stringliteral">&quot;%%%%CreationDate: %s\n&quot;</span>
<a name="l01310"></a>01310             <span class="stringliteral">&quot;%%%%Title: (%s)\n&quot;</span>
<a name="l01311"></a>01311             <span class="stringliteral">&quot;%%%%EndComments\n&quot;</span>
<a name="l01312"></a>01312             <span class="stringliteral">&quot;%%%%BeginProlog\n&quot;</span>
<a name="l01313"></a>01313             <span class="stringliteral">&quot;%%languagelevel 1 eq {\n&quot;</span>
<a name="l01314"></a>01314             <span class="stringliteral">&quot;  /rectfill {\n&quot;</span>
<a name="l01315"></a>01315             <span class="stringliteral">&quot;    newpath 4 2 roll moveto dup 0 exch rlineto exch 0 rlineto\n&quot;</span>
<a name="l01316"></a>01316             <span class="stringliteral">&quot;    neg 0 exch rlineto closepath fill\n&quot;</span>
<a name="l01317"></a>01317             <span class="stringliteral">&quot;  } bind def\n&quot;</span>
<a name="l01318"></a>01318             <span class="stringliteral">&quot;  /rectstroke {\n&quot;</span>
<a name="l01319"></a>01319             <span class="stringliteral">&quot;    newpath 4 2 roll moveto dup 0 exch rlineto exch 0 rlineto\n&quot;</span>
<a name="l01320"></a>01320             <span class="stringliteral">&quot;    neg 0 exch rlineto closepath stroke\n&quot;</span>
<a name="l01321"></a>01321             <span class="stringliteral">&quot;  } bind def\n&quot;</span>
<a name="l01322"></a>01322             <span class="stringliteral">&quot;%%} if\n&quot;</span>
<a name="l01323"></a>01323             <span class="stringliteral">&quot;%%%%EndProlog\n&quot;</span>
<a name="l01324"></a>01324             <span class="stringliteral">&quot;%%%%BeginSetup\n&quot;</span>
<a name="l01325"></a>01325             <span class="stringliteral">&quot;%%%%BeginFeature: *PageSize %s\n&quot;</span>
<a name="l01326"></a>01326             <span class="stringliteral">&quot;languagelevel 1 ne {\n&quot;</span>
<a name="l01327"></a>01327             <span class="stringliteral">&quot;  &lt;&lt;/PageSize[%d %d]/ImagingBBox null&gt;&gt;setpagedevice\n&quot;</span>
<a name="l01328"></a>01328             <span class="stringliteral">&quot;} {\n&quot;</span>
<a name="l01329"></a>01329             <span class="stringliteral">&quot;  %s\n&quot;</span>
<a name="l01330"></a>01330             <span class="stringliteral">&quot;} ifelse\n&quot;</span>
<a name="l01331"></a>01331             <span class="stringliteral">&quot;%%%%EndFeature\n&quot;</span>
<a name="l01332"></a>01332             <span class="stringliteral">&quot;%%%%EndSetup\n&quot;</span>,
<a name="l01333"></a>01333             width - 18, length - 36,
<a name="l01334"></a>01334             num_pages,
<a name="l01335"></a>01335             <a class="code" href="Enumerations_8H.html#a94499c96b5f3ca212d90a2c41f947a67">FL_VERSION</a>,
<a name="l01336"></a>01336             date,
<a name="l01337"></a>01337             basename,
<a name="l01338"></a>01338             <a class="code" href="fluid_2print__panel_8cxx.html#ad82bf6fa3151088a2f18809cbb7b563d">print_page_size</a>-&gt;<a class="code" href="classFl__Menu__.html#a65447e98577519c36eb6b3561192e7cd">text</a>(<a class="code" href="fluid_2print__panel_8cxx.html#ad82bf6fa3151088a2f18809cbb7b563d">print_page_size</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>()),
<a name="l01339"></a>01339             width, length,
<a name="l01340"></a>01340             <a class="code" href="fluid_2print__panel_8cxx.html#ad82bf6fa3151088a2f18809cbb7b563d">print_page_size</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>() ? <span class="stringliteral">&quot;a4tray&quot;</span> : <span class="stringliteral">&quot;lettertray&quot;</span>);
<a name="l01341"></a>01341 
<a name="l01342"></a>01342     <span class="comment">// Print each of the windows...</span>
<a name="l01343"></a>01343     <span class="keywordtype">char</span>        progress[255];          <span class="comment">// Progress text</span>
<a name="l01344"></a>01344     <span class="keywordtype">int</span>         copy;                   <span class="comment">// Current copy</span>
<a name="l01345"></a>01345 
<a name="l01346"></a>01346     <span class="keywordflow">for</span> (copy = 0, page = 0; copy &lt; copies; copy ++) {
<a name="l01347"></a>01347       <span class="keywordflow">for</span> (winpage = 0; winpage &lt; num_pages; winpage ++) {
<a name="l01348"></a>01348         <span class="comment">// Start next page...</span>
<a name="l01349"></a>01349         page ++;
<a name="l01350"></a>01350         sprintf(progress, <span class="stringliteral">&quot;Printing page %d/%d...&quot;</span>, page, num_pages);
<a name="l01351"></a>01351         <a class="code" href="fluid_2print__panel_8cxx.html#ac827c1cf761dbdd6b63fe4844301a754">print_progress</a>-&gt;<a class="code" href="classFl__Progress.html#af6fb114a44c7f74c9ec4ff09eb747659">value</a>(page);
<a name="l01352"></a>01352         <a class="code" href="fluid_2print__panel_8cxx.html#ac827c1cf761dbdd6b63fe4844301a754">print_progress</a>-&gt;<a class="code" href="classFl__Widget.html#abb0e926996f83bc1c60972afa8284045">label</a>(progress);
<a name="l01353"></a>01353         <a class="code" href="classFl.html#a1dbb83f1d52001c152ccf8415e3ee6f0">Fl::check</a>();
<a name="l01354"></a>01354 
<a name="l01355"></a>01355         <span class="comment">// Add common page stuff...</span>
<a name="l01356"></a>01356         fprintf(outfile,
<a name="l01357"></a>01357                 <span class="stringliteral">&quot;%%%%Page: %d %d\n&quot;</span>
<a name="l01358"></a>01358                 <span class="stringliteral">&quot;gsave\n&quot;</span>,
<a name="l01359"></a>01359                 page, page);
<a name="l01360"></a>01360 
<a name="l01361"></a>01361         <span class="keywordflow">if</span> (output_mode &amp; 1) {
<a name="l01362"></a>01362           <span class="comment">// Landscape...</span>
<a name="l01363"></a>01363           fprintf(outfile, <span class="stringliteral">&quot;%d 0 translate 90 rotate\n&quot;</span>, width);
<a name="l01364"></a>01364         }
<a name="l01365"></a>01365 
<a name="l01366"></a>01366         <span class="comment">// Draw header...</span>
<a name="l01367"></a>01367         fprintf(outfile,
<a name="l01368"></a>01368                 <span class="stringliteral">&quot;0 setgray\n&quot;</span>
<a name="l01369"></a>01369                 <span class="stringliteral">&quot;/Helvetica-Bold findfont 14 scalefont setfont\n&quot;</span>
<a name="l01370"></a>01370                 <span class="stringliteral">&quot;%d %d moveto (%s) show\n&quot;</span>
<a name="l01371"></a>01371                 <span class="stringliteral">&quot;%.1f %d moveto (%s) dup stringwidth pop -0.5 mul 0 rmoveto show\n&quot;</span>
<a name="l01372"></a>01372                 <span class="stringliteral">&quot;%d %d moveto (%d/%d) dup stringwidth pop neg 0 rmoveto show\n&quot;</span>,
<a name="l01373"></a>01373                 left, top - 15, ps_string(basename),
<a name="l01374"></a>01374                 0.5 * (left + right), top - 15, date,
<a name="l01375"></a>01375                 right, top - 15, winpage + 1, num_windows);
<a name="l01376"></a>01376 
<a name="l01377"></a>01377         <span class="comment">// Get window image...</span>
<a name="l01378"></a>01378         <a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a>   *pixels;                <span class="comment">// Window image data</span>
<a name="l01379"></a>01379         <span class="keywordtype">int</span>     <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>, <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>;                   <span class="comment">// Window image dimensions</span>
<a name="l01380"></a>01380         <span class="keywordtype">float</span>   ww, hh;                 <span class="comment">// Scaled size</span>
<a name="l01381"></a>01381         <span class="keywordtype">float</span>   border;                 <span class="comment">// Width of 1 pixel</span>
<a name="l01382"></a>01382         <span class="keywordtype">float</span>   llx, lly,               <span class="comment">// Lower-lefthand corner</span>
<a name="l01383"></a>01383                 urx, ury;               <span class="comment">// Upper-righthand corner</span>
<a name="l01384"></a>01384         <a class="code" href="classFl__Window.html">Fl_Window</a> *win;                 <span class="comment">// Window widget</span>
<a name="l01385"></a>01385 
<a name="l01386"></a>01386         win    = (<a class="code" href="classFl__Window.html">Fl_Window</a> *)(windows[winpage]-&gt;o);
<a name="l01387"></a>01387         pixels = windows[winpage]-&gt;<a class="code" href="classFl__Window__Type.html#aa6610e39c78c3550e2f3c9a4d026bb01">read_image</a>(w, h);
<a name="l01388"></a>01388 
<a name="l01389"></a>01389         <span class="comment">// Figure out the window size, first at 100 PPI and then scaled</span>
<a name="l01390"></a>01390         <span class="comment">// down if that is too big...</span>
<a name="l01391"></a>01391         ww = w * 72.0 / 100.0;
<a name="l01392"></a>01392         hh = h * 72.0 / 100.0;
<a name="l01393"></a>01393 
<a name="l01394"></a>01394         <span class="keywordflow">if</span> (ww &gt; (right - left)) {
<a name="l01395"></a>01395           ww = right - left;
<a name="l01396"></a>01396           hh = h * ww / <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>;
<a name="l01397"></a>01397         }
<a name="l01398"></a>01398 
<a name="l01399"></a>01399         <span class="keywordflow">if</span> (hh &gt; (top - bottom - 36)) {
<a name="l01400"></a>01400           hh = top - bottom;
<a name="l01401"></a>01401           ww = w * hh / <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>;
<a name="l01402"></a>01402         }
<a name="l01403"></a>01403 
<a name="l01404"></a>01404         border = ww / <a class="code" href="forms_8H-2.html#aac374e320caaadeca4874add33b62af2">w</a>;
<a name="l01405"></a>01405 
<a name="l01406"></a>01406         <span class="comment">// Position the window in the center...</span>
<a name="l01407"></a>01407         llx = 0.5 * (right - left - ww);
<a name="l01408"></a>01408         lly = 0.5 * (top - bottom - hh);
<a name="l01409"></a>01409         urx = 0.5 * (right - left + ww);
<a name="l01410"></a>01410         ury = 0.5 * (top - bottom + hh);
<a name="l01411"></a>01411 
<a name="l01412"></a>01412         <span class="comment">// Draw a simulated window border...</span>
<a name="l01413"></a>01413         fprintf(outfile,
<a name="l01414"></a>01414                 <span class="stringliteral">&quot;0.75 setgray\n&quot;</span>                        <span class="comment">// Gray background</span>
<a name="l01415"></a>01415                 <span class="stringliteral">&quot;newpath %.2f %.2f %.2f 180 90 arcn\n&quot;</span>  <span class="comment">// Top left</span>
<a name="l01416"></a>01416                 <span class="stringliteral">&quot;%.2f %.2f %.2f 90 0 arcn\n&quot;</span>            <span class="comment">// Top right</span>
<a name="l01417"></a>01417                 <span class="stringliteral">&quot;%.2f %.2f %.2f 0 -90 arcn\n&quot;</span>           <span class="comment">// Bottom right</span>
<a name="l01418"></a>01418                 <span class="stringliteral">&quot;%.2f %.2f %.2f -90 -180 arcn\n&quot;</span>        <span class="comment">// Bottom left</span>
<a name="l01419"></a>01419                 <span class="stringliteral">&quot;closepath gsave fill grestore\n&quot;</span>       <span class="comment">// Fill</span>
<a name="l01420"></a>01420                 <span class="stringliteral">&quot;0 setlinewidth 0 setgray stroke\n&quot;</span>,    <span class="comment">// Outline</span>
<a name="l01421"></a>01421                 llx, ury + 12 * border, 4 * border,
<a name="l01422"></a>01422                 urx, ury + 12 * border, 4 * border,
<a name="l01423"></a>01423                 urx, lly, 4 * border,
<a name="l01424"></a>01424                 llx, lly, 4 * border);
<a name="l01425"></a>01425 
<a name="l01426"></a>01426         <span class="comment">// Title bar...</span>
<a name="l01427"></a>01427         <span class="keywordflow">if</span> (output_mode &amp; 2) {
<a name="l01428"></a>01428           fputs(<span class="stringliteral">&quot;0.25 setgray\n&quot;</span>, outfile);
<a name="l01429"></a>01429         } <span class="keywordflow">else</span> {
<a name="l01430"></a>01430           fputs(<span class="stringliteral">&quot;0.1 0.2 0.6 setrgbcolor\n&quot;</span>, outfile);
<a name="l01431"></a>01431         }
<a name="l01432"></a>01432 
<a name="l01433"></a>01433         fprintf(outfile, <span class="stringliteral">&quot;%.2f %.2f %.2f %.2f rectfill\n&quot;</span>,
<a name="l01434"></a>01434                 llx + 12 * border, ury,
<a name="l01435"></a>01435                 ww - (24 + 16 * (!win-&gt;<a class="code" href="classFl__Window.html#a6cc843ffcc711300613e44c678ad682f">modal</a>() || win-&gt;<a class="code" href="classFl__Group.html#ab0ed0d1974d7185594687849f386c5f3">resizable</a>()) +
<a name="l01436"></a>01436                       16 * (!win-&gt;<a class="code" href="classFl__Window.html#a6cc843ffcc711300613e44c678ad682f">modal</a>() &amp;&amp; win-&gt;<a class="code" href="classFl__Group.html#ab0ed0d1974d7185594687849f386c5f3">resizable</a>())) * border,
<a name="l01437"></a>01437                 16 * border);
<a name="l01438"></a>01438 
<a name="l01439"></a>01439         <span class="keywordflow">if</span> (win-&gt;<a class="code" href="classFl__Group.html#ab0ed0d1974d7185594687849f386c5f3">resizable</a>()) {
<a name="l01440"></a>01440           fprintf(outfile,
<a name="l01441"></a>01441                   <span class="stringliteral">&quot;%.2f %.2f %.2f -90 -180 arcn\n&quot;</span>      <span class="comment">// Bottom left</span>
<a name="l01442"></a>01442                   <span class="stringliteral">&quot;0 %.2f rlineto %.2f 0 rlineto 0 -%.2f rlineto closepath fill\n&quot;</span>
<a name="l01443"></a>01443                   <span class="stringliteral">&quot;%.2f %.2f %.2f 0 -90 arcn\n&quot;</span> <span class="comment">// Bottom right</span>
<a name="l01444"></a>01444                   <span class="stringliteral">&quot;-%.2f 0 rlineto 0 %.2f rlineto %.2f 0 rlineto closepath fill\n&quot;</span>,
<a name="l01445"></a>01445                   llx, lly, 4 * border,
<a name="l01446"></a>01446                   12 * border, 16 * border, 16 * border,
<a name="l01447"></a>01447                   urx, lly, 4 * border,
<a name="l01448"></a>01448                   12 * border, 16 * border, 16 * border);
<a name="l01449"></a>01449         }
<a name="l01450"></a>01450 
<a name="l01451"></a>01451         <span class="comment">// Inside outline and button shading...</span>
<a name="l01452"></a>01452         fprintf(outfile,
<a name="l01453"></a>01453                 <span class="stringliteral">&quot;%.2f setlinewidth 0.5 setgray\n&quot;</span>
<a name="l01454"></a>01454                 <span class="stringliteral">&quot;%.2f %.2f %.2f %.2f rectstroke\n&quot;</span>
<a name="l01455"></a>01455                 <span class="stringliteral">&quot;%.2f %.2f moveto 0 %.2f rlineto\n&quot;</span>
<a name="l01456"></a>01456                 <span class="stringliteral">&quot;%.2f %.2f moveto 0 %.2f rlineto\n&quot;</span>,
<a name="l01457"></a>01457                 border,
<a name="l01458"></a>01458                 llx - 0.5 * border, lly - 0.5 * border, ww + border, hh + border,
<a name="l01459"></a>01459                 llx + 12 * border, ury, 16 * border,
<a name="l01460"></a>01460                 urx - 12 * border, ury, 16 * border);
<a name="l01461"></a>01461 
<a name="l01462"></a>01462         <span class="keywordflow">if</span> (!win-&gt;<a class="code" href="classFl__Window.html#a6cc843ffcc711300613e44c678ad682f">modal</a>() || win-&gt;<a class="code" href="classFl__Group.html#ab0ed0d1974d7185594687849f386c5f3">resizable</a>()) {
<a name="l01463"></a>01463           fprintf(outfile, <span class="stringliteral">&quot;%.2f %.2f moveto 0 %.2f rlineto\n&quot;</span>,
<a name="l01464"></a>01464                   urx - 28 * border, ury, 16 * border);
<a name="l01465"></a>01465         }
<a name="l01466"></a>01466 
<a name="l01467"></a>01467         <span class="keywordflow">if</span> (!win-&gt;<a class="code" href="classFl__Window.html#a6cc843ffcc711300613e44c678ad682f">modal</a>() &amp;&amp; win-&gt;<a class="code" href="classFl__Group.html#ab0ed0d1974d7185594687849f386c5f3">resizable</a>()) {
<a name="l01468"></a>01468           fprintf(outfile, <span class="stringliteral">&quot;%.2f %.2f moveto 0 %.2f rlineto\n&quot;</span>,
<a name="l01469"></a>01469                   urx - 44 * border, ury, 16 * border);
<a name="l01470"></a>01470         }
<a name="l01471"></a>01471 
<a name="l01472"></a>01472         fprintf(outfile, <span class="stringliteral">&quot;%.2f %.2f moveto %.2f 0 rlineto stroke\n&quot;</span>,
<a name="l01473"></a>01473                 llx - 3.5 * border, ury + 0.5 * border, ww + 7 * border);
<a name="l01474"></a>01474 
<a name="l01475"></a>01475         <span class="comment">// Button icons...</span>
<a name="l01476"></a>01476         fprintf(outfile,
<a name="l01477"></a>01477                 <span class="stringliteral">&quot;%.2f setlinewidth 0 setgray\n&quot;</span>
<a name="l01478"></a>01478                 <span class="stringliteral">&quot;%.2f %.2f moveto %.2f -%.2f rlineto %.2f %.2f rlineto\n&quot;</span>
<a name="l01479"></a>01479                 <span class="stringliteral">&quot;%.2f %.2f moveto -%.2f -%.2f rlineto 0 %.2f rmoveto %.2f -%.2f rlineto\n&quot;</span>,
<a name="l01480"></a>01480                 2 * border,
<a name="l01481"></a>01481                 llx, ury + 10 * border, 4 * border, 4 * border, 4 * border, 4 * border,
<a name="l01482"></a>01482                 urx, ury + 12 * border, 8 * border, 8 * border, 8 * border, 8 * border, 8 * border);
<a name="l01483"></a>01483 
<a name="l01484"></a>01484         <span class="keywordtype">float</span> x = urx - 16 * border;
<a name="l01485"></a>01485 
<a name="l01486"></a>01486         <span class="keywordflow">if</span> (win-&gt;<a class="code" href="classFl__Group.html#ab0ed0d1974d7185594687849f386c5f3">resizable</a>()) {
<a name="l01487"></a>01487           <span class="comment">// Maximize button</span>
<a name="l01488"></a>01488           fprintf(outfile,
<a name="l01489"></a>01489                   <span class="stringliteral">&quot;%.2f %.2f moveto -%.2f 0 rlineto 0 -%.2f rlineto &quot;</span>
<a name="l01490"></a>01490                   <span class="stringliteral">&quot;%.2f 0 rlineto 0 %.2f rlineto\n&quot;</span>,
<a name="l01491"></a>01491                   x, ury + 12 * border, 8 * border, 8 * border,
<a name="l01492"></a>01492                   8 * border, 8 * border);
<a name="l01493"></a>01493 
<a name="l01494"></a>01494           x -= 16 * border;
<a name="l01495"></a>01495         }
<a name="l01496"></a>01496 
<a name="l01497"></a>01497         <span class="keywordflow">if</span> (!win-&gt;<a class="code" href="classFl__Window.html#a6cc843ffcc711300613e44c678ad682f">modal</a>()) {
<a name="l01498"></a>01498           <span class="comment">// Minimize button</span>
<a name="l01499"></a>01499           fprintf(outfile,
<a name="l01500"></a>01500                   <span class="stringliteral">&quot;%.2f %.2f moveto -%.2f 0 rlineto\n&quot;</span>,
<a name="l01501"></a>01501                   x, ury + 4 * border, 8 * border);
<a name="l01502"></a>01502         }
<a name="l01503"></a>01503 
<a name="l01504"></a>01504         fputs(<span class="stringliteral">&quot;stroke\n&quot;</span>, outfile);
<a name="l01505"></a>01505 
<a name="l01506"></a>01506         <span class="keywordflow">if</span> (win-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>()) {
<a name="l01507"></a>01507           <span class="comment">// Add window title...</span>
<a name="l01508"></a>01508           fprintf(outfile,
<a name="l01509"></a>01509                   <span class="stringliteral">&quot;1 setgray\n&quot;</span>
<a name="l01510"></a>01510                   <span class="stringliteral">&quot;/Helvetica-Bold findfont %.2f scalefont setfont\n&quot;</span>
<a name="l01511"></a>01511                   <span class="stringliteral">&quot;(%s) %.2f %.2f moveto show\n&quot;</span>,
<a name="l01512"></a>01512                   12 * border,
<a name="l01513"></a>01513                   ps_string(win-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>()), llx + 16 * border, ury + 4 * border);
<a name="l01514"></a>01514         }
<a name="l01515"></a>01515 
<a name="l01516"></a>01516         fprintf(outfile,
<a name="l01517"></a>01517                 <span class="stringliteral">&quot;gsave\n&quot;</span>
<a name="l01518"></a>01518                 <span class="stringliteral">&quot;%.2f %.2f translate %.2f %.2f scale\n&quot;</span>,
<a name="l01519"></a>01519                 llx, ury - border, border, border);
<a name="l01520"></a>01520 
<a name="l01521"></a>01521         <span class="keywordflow">if</span> (output_mode &amp; 2) {
<a name="l01522"></a>01522           <span class="comment">// Grayscale image...</span>
<a name="l01523"></a>01523           fprintf(outfile,
<a name="l01524"></a>01524                   <span class="stringliteral">&quot;/imgdata %d string def\n&quot;</span>
<a name="l01525"></a>01525                   <span class="stringliteral">&quot;%d %d 8[1 0 0 -1 0 1] &quot;</span>
<a name="l01526"></a>01526                   <span class="stringliteral">&quot;{currentfile imgdata readhexstring pop} image\n&quot;</span>,
<a name="l01527"></a>01527                   w,
<a name="l01528"></a>01528                   w, h);
<a name="l01529"></a>01529 
<a name="l01530"></a>01530           <a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a> = pixels;
<a name="l01531"></a>01531           <span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>, count = w * <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>;
<a name="l01532"></a>01532 
<a name="l01533"></a>01533           <span class="keywordflow">for</span> (i = 0; i &lt; count; i ++, ptr += 3) {
<a name="l01534"></a>01534             fprintf(outfile, <span class="stringliteral">&quot;%02X&quot;</span>,
<a name="l01535"></a>01535                     (31 * ptr[0] + 61 * ptr[1] + 8 * ptr[2]) / 100);
<a name="l01536"></a>01536             <span class="keywordflow">if</span> (!(i % 40)) putc(<span class="charliteral">&#39;\n&#39;</span>, outfile);
<a name="l01537"></a>01537           }
<a name="l01538"></a>01538         } <span class="keywordflow">else</span> {
<a name="l01539"></a>01539           <span class="comment">// Color image...</span>
<a name="l01540"></a>01540           fprintf(outfile,
<a name="l01541"></a>01541                   <span class="stringliteral">&quot;/imgdata %d string def\n&quot;</span>
<a name="l01542"></a>01542                   <span class="stringliteral">&quot;%d %d 8[1 0 0 -1 0 1] &quot;</span>
<a name="l01543"></a>01543                   <span class="stringliteral">&quot;{currentfile imgdata readhexstring pop} false 3 colorimage\n&quot;</span>,
<a name="l01544"></a>01544                   w * 3,
<a name="l01545"></a>01545                   w, h);
<a name="l01546"></a>01546 
<a name="l01547"></a>01547           <a class="code" href="fl__types_8h.html#a65f85814a8290f9797005d3b28e7e5fc">uchar</a> *<a class="code" href="png_8h.html#a95138b534309370df8c31b354dfcbe45">ptr</a> = pixels;
<a name="l01548"></a>01548           <span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>, count = w * <a class="code" href="forms_8H-2.html#a7e427ba5b307f9068129699250690066">h</a>;
<a name="l01549"></a>01549 
<a name="l01550"></a>01550           <span class="keywordflow">for</span> (i = 0; i &lt; count; i ++, ptr += 3) {
<a name="l01551"></a>01551             fprintf(outfile, <span class="stringliteral">&quot;%02X%02X%02X&quot;</span>, ptr[0], ptr[1], ptr[2]);
<a name="l01552"></a>01552             <span class="keywordflow">if</span> (!(i % 13)) putc(<span class="charliteral">&#39;\n&#39;</span>, outfile);
<a name="l01553"></a>01553           }
<a name="l01554"></a>01554         }
<a name="l01555"></a>01555 
<a name="l01556"></a>01556         fputs(<span class="stringliteral">&quot;\ngrestore\n&quot;</span>, outfile);
<a name="l01557"></a>01557 
<a name="l01558"></a>01558         <span class="keyword">delete</span>[] pixels;
<a name="l01559"></a>01559 
<a name="l01560"></a>01560         <span class="comment">// Show the page...</span>
<a name="l01561"></a>01561         fputs(<span class="stringliteral">&quot;grestore showpage\n&quot;</span>, outfile);
<a name="l01562"></a>01562       }
<a name="l01563"></a>01563     }
<a name="l01564"></a>01564 
<a name="l01565"></a>01565     <span class="comment">// Finish up...</span>
<a name="l01566"></a>01566     fputs(<span class="stringliteral">&quot;%%EOF\n&quot;</span>, outfile);
<a name="l01567"></a>01567 
<a name="l01568"></a>01568     <span class="keywordflow">if</span> (<a class="code" href="fluid_2print__panel_8cxx.html#a724ff8a1b57e5c86138e3360b80100df">print_choice</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>()) pclose(outfile);
<a name="l01569"></a>01569     <span class="keywordflow">else</span> fclose(outfile);
<a name="l01570"></a>01570   } <span class="keywordflow">else</span> {
<a name="l01571"></a>01571     <span class="comment">// Unable to print...</span>
<a name="l01572"></a>01572     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Error printing: %s&quot;</span>, strerror(errno));
<a name="l01573"></a>01573   }
<a name="l01574"></a>01574 
<a name="l01575"></a>01575   <span class="comment">// Hide progress, activate controls, hide print panel...</span>
<a name="l01576"></a>01576   <a class="code" href="fluid_2print__panel_8cxx.html#ae31275a431467261caefb09f839a9ee2">print_panel_controls</a>-&gt;<a class="code" href="classFl__Widget.html#ae0ca5f7159aceba7d813c81167e684bb">activate</a>();
<a name="l01577"></a>01577   <a class="code" href="fluid_2print__panel_8cxx.html#ac827c1cf761dbdd6b63fe4844301a754">print_progress</a>-&gt;<a class="code" href="classFl__Widget.html#a1fe8405b86da29d147dc3b5841cf181c">hide</a>();
<a name="l01578"></a>01578   <a class="code" href="fluid_2print__panel_8cxx.html#ab6925b8df4306b878162413f8f120d3a">print_panel</a>-&gt;<a class="code" href="classFl__Double__Window.html#acc0edc55a9d27e4e276e8a5b78deeeef">hide</a>();
<a name="l01579"></a>01579 }
<a name="l01580"></a>01580 <span class="preprocessor">#endif // WIN32 &amp;&amp; !__CYGWIN__</span>
<a name="l01581"></a>01581 <span class="preprocessor"></span>
<a name="l01583"></a>01583 
<a name="l01584"></a>01584 <span class="keyword">extern</span> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a> <a class="code" href="factory_8cxx.html#ad99c35b342bb9cabae8f9b0fc67ac61f">New_Menu</a>[];
<a name="l01585"></a>01585 
<a name="l01586"></a>01586 <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#aa3f0f184cbc92d787193312456a7860e">toggle_widgetbin_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *);
<a name="l01587"></a>01587 <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a6febb02ce135d88eef15bfbde26c1f56">toggle_sourceview_cb</a>(<a class="code" href="classFl__Double__Window.html">Fl_Double_Window</a> *, <span class="keywordtype">void</span> *);
<a name="l01588"></a>01588 
<a name="l01589"></a><a class="code" href="undo_8cxx.html#abd2a1315668aa21c41934cb50883533d">01589</a> <a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a> <a class="code" href="Fl__Window__Type_8cxx.html#a0a5b853a0f99247e8199028c7b0aac54">Main_Menu</a>[] = {
<a name="l01590"></a>01590 {<span class="stringliteral">&quot;&amp;File&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01591"></a>01591   {<span class="stringliteral">&quot;&amp;New...&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;n&#39;</span>, <a class="code" href="fluid_8cxx.html#afd37c2cf88fe702cd2b9c71956515822">new_cb</a>, 0},
<a name="l01592"></a>01592   {<span class="stringliteral">&quot;&amp;Open...&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;o&#39;</span>, <a class="code" href="fluid_8cxx.html#a8fd61bd0e72bddff439d06748df19197">open_cb</a>, 0},
<a name="l01593"></a>01593   {<span class="stringliteral">&quot;&amp;Insert...&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;i&#39;</span>, <a class="code" href="fluid_8cxx.html#a8fd61bd0e72bddff439d06748df19197">open_cb</a>, (<span class="keywordtype">void</span>*)1, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01594"></a>01594   {<span class="stringliteral">&quot;&amp;Save&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;s&#39;</span>, <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>, 0},
<a name="l01595"></a>01595   {<span class="stringliteral">&quot;Save &amp;As...&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<a class="code" href="Enumerations_8H.html#aa0d93ca1bc8a0c7f84888cdf458f043d" title="One of the shift keys is down.">FL_SHIFT</a>+<span class="charliteral">&#39;s&#39;</span>, <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>, (<span class="keywordtype">void</span>*)1},
<a name="l01596"></a>01596   {<span class="stringliteral">&quot;Sa&amp;ve A Copy...&quot;</span>, 0, <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>, (<span class="keywordtype">void</span>*)2},
<a name="l01597"></a>01597   {<span class="stringliteral">&quot;Save &amp;Template...&quot;</span>, 0, <a class="code" href="fluid_8cxx.html#a58c4dddbe366ec899e0ffbe4466eae78">save_template_cb</a>},
<a name="l01598"></a>01598   {<span class="stringliteral">&quot;&amp;Revert...&quot;</span>, 0, <a class="code" href="Fl__Widget__Type_8cxx.html#a2dd24880b3df7bbf9d4d1d751c2ec71e">revert_cb</a>, 0, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01599"></a>01599   {<span class="stringliteral">&quot;&amp;Print...&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;p&#39;</span>, <a class="code" href="fluid_8cxx.html#af5dcf594e577c0e9254b411908a9aa98">print_menu_cb</a>},
<a name="l01600"></a>01600   {<span class="stringliteral">&quot;Write &amp;Code...&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+FL_SHIFT+<span class="charliteral">&#39;c&#39;</span>, <a class="code" href="fluid_8cxx.html#a8e952052b4225f043f44665b398a5616">write_cb</a>, 0},
<a name="l01601"></a>01601   {<span class="stringliteral">&quot;&amp;Write Strings...&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+FL_SHIFT+<span class="charliteral">&#39;w&#39;</span>, <a class="code" href="fluid_8cxx.html#a08316bbde185907c026f03ae7364c150">write_strings_cb</a>, 0, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01602"></a>01602   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[0], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;0&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[0]},
<a name="l01603"></a>01603   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[1], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;1&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[1]},
<a name="l01604"></a>01604   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[2], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;2&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[2]},
<a name="l01605"></a>01605   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[3], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;3&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[3]},
<a name="l01606"></a>01606   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[4], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;4&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[4]},
<a name="l01607"></a>01607   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[5], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;5&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[5]},
<a name="l01608"></a>01608   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[6], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;6&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[6]},
<a name="l01609"></a>01609   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[7], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;7&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[7]},
<a name="l01610"></a>01610   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[8], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;8&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[8]},
<a name="l01611"></a>01611   {<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[9], <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;9&#39;</span>, <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[9], <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01612"></a>01612   {<span class="stringliteral">&quot;&amp;Quit&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;q&#39;</span>, <a class="code" href="fluid_8cxx.html#acbffe6f8d55cda6a39766dc92d2e9a9c">exit_cb</a>},
<a name="l01613"></a>01613   {0},
<a name="l01614"></a>01614 {<span class="stringliteral">&quot;&amp;Edit&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01615"></a>01615   {<span class="stringliteral">&quot;&amp;Undo&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;z&#39;</span>, <a class="code" href="undo_8cxx.html#ac62f48e04e6a86f0d4b63577c215069b">undo_cb</a>},
<a name="l01616"></a>01616   {<span class="stringliteral">&quot;&amp;Redo&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+FL_SHIFT+<span class="charliteral">&#39;z&#39;</span>, <a class="code" href="undo_8cxx.html#a06a64bd3a021b9e3d79aea165c9d91e3">redo_cb</a>, 0, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01617"></a>01617   {<span class="stringliteral">&quot;C&amp;ut&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;x&#39;</span>, <a class="code" href="fluid_8cxx.html#a1c2d23cf31cf404e97badeec1a643ec3">cut_cb</a>},
<a name="l01618"></a>01618   {<span class="stringliteral">&quot;&amp;Copy&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;c&#39;</span>, <a class="code" href="fluid_8cxx.html#a1f5afd8bfd5413cdc3e1152f79ec912a">copy_cb</a>},
<a name="l01619"></a>01619   {<span class="stringliteral">&quot;&amp;Paste&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;v&#39;</span>, <a class="code" href="fluid_8cxx.html#ac5ed9e9e53ce40db93583f3c93b3ac6b">paste_cb</a>},
<a name="l01620"></a>01620   {<span class="stringliteral">&quot;Dup&amp;licate&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;u&#39;</span>, <a class="code" href="fluid_8cxx.html#ab5c5bb5cb9ca9f2c7720eb33df34a295">duplicate_cb</a>},
<a name="l01621"></a>01621   {<span class="stringliteral">&quot;&amp;Delete&quot;</span>, <a class="code" href="Enumerations_8H.html#a323fcf5bab321ec05826a6510a0f1d5a" title="The delete key.">FL_Delete</a>, <a class="code" href="fluid_8cxx.html#a99fdb378dd62523fedfc9128ba8c48f8">delete_cb</a>, 0, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01622"></a>01622   {<span class="stringliteral">&quot;Select &amp;All&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;a&#39;</span>, <a class="code" href="Fl__Type_8cxx.html#a5c6293116043ce417ee3ace5c5913552">select_all_cb</a>},
<a name="l01623"></a>01623   {<span class="stringliteral">&quot;Select &amp;None&quot;</span>, <a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+FL_SHIFT+<span class="charliteral">&#39;a&#39;</span>, <a class="code" href="Fl__Type_8cxx.html#a811cb4d5a72e7260d2f0471d7324c182">select_none_cb</a>, 0, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01624"></a>01624   {<span class="stringliteral">&quot;Pr&amp;operties...&quot;</span>, <a class="code" href="Enumerations_8H.html#ae793aa65307884c2ad99893508d844f2" title="One of the function keys; use FL_F + n for function key n.">FL_F</a>+1, <a class="code" href="fluid_8cxx.html#ac09b95a7a888717e820e03800f04d7af">openwidget_cb</a>},
<a name="l01625"></a>01625   {<span class="stringliteral">&quot;&amp;Sort&quot;</span>,0,sort_cb},
<a name="l01626"></a>01626   {<span class="stringliteral">&quot;&amp;Earlier&quot;</span>, <a class="code" href="Enumerations_8H.html#ae793aa65307884c2ad99893508d844f2" title="One of the function keys; use FL_F + n for function key n.">FL_F</a>+2, <a class="code" href="Fl__Type_8cxx.html#a887c29914c60c0c63ceed0f0facb0660">earlier_cb</a>},
<a name="l01627"></a>01627   {<span class="stringliteral">&quot;&amp;Later&quot;</span>, <a class="code" href="Enumerations_8H.html#ae793aa65307884c2ad99893508d844f2" title="One of the function keys; use FL_F + n for function key n.">FL_F</a>+3, <a class="code" href="Fl__Type_8cxx.html#acc87b15c6b66f0960e4c6c27c046dd91">later_cb</a>},
<a name="l01628"></a>01628   {<span class="stringliteral">&quot;&amp;Group&quot;</span>, <a class="code" href="Enumerations_8H.html#ae793aa65307884c2ad99893508d844f2" title="One of the function keys; use FL_F + n for function key n.">FL_F</a>+7, <a class="code" href="Fl__Group__Type_8cxx.html#a711956b4fcb15ffb138bba6e791c2812">group_cb</a>},
<a name="l01629"></a>01629   {<span class="stringliteral">&quot;Ung&amp;roup&quot;</span>, <a class="code" href="Enumerations_8H.html#ae793aa65307884c2ad99893508d844f2" title="One of the function keys; use FL_F + n for function key n.">FL_F</a>+8, <a class="code" href="Fl__Group__Type_8cxx.html#a67d149f1515b939e1490fc67e117a853">ungroup_cb</a>,0, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01630"></a>01630   {<span class="stringliteral">&quot;Hide O&amp;verlays&quot;</span>,<a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+FL_SHIFT+<span class="charliteral">&#39;o&#39;</span>,<a class="code" href="Fl__Widget__Type_8cxx.html#acc812b9e286cddb13de4218c1bea1fe4">toggle_overlays</a>},
<a name="l01631"></a>01631   {<span class="stringliteral">&quot;Show Widget &amp;Bin...&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;b&#39;</span>,<a class="code" href="fluid_8cxx.html#aa3f0f184cbc92d787193312456a7860e">toggle_widgetbin_cb</a>},
<a name="l01632"></a>01632   {<span class="stringliteral">&quot;Show Source Code...&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+FL_SHIFT+<span class="charliteral">&#39;s&#39;</span>, (<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a>*)<a class="code" href="fluid_8cxx.html#a6febb02ce135d88eef15bfbde26c1f56">toggle_sourceview_cb</a>, 0, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01633"></a>01633   {<span class="stringliteral">&quot;Pro&amp;ject Settings...&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;p&#39;</span>,<a class="code" href="Fl__Window__Type_8cxx.html#a55c2e66b09c105b42fbe4804eace293b">show_project_cb</a>},
<a name="l01634"></a>01634   {<span class="stringliteral">&quot;GU&amp;I Settings...&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+FL_SHIFT+<span class="charliteral">&#39;p&#39;</span>,<a class="code" href="Fl__Window__Type_8cxx.html#a665349c1186c35718ff95a16b1a2e2f7">show_settings_cb</a>,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01635"></a>01635   {<span class="stringliteral">&quot;Global &amp;FLTK Settings...&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+FL_SHIFT+<span class="charliteral">&#39;g&#39;</span>,<a class="code" href="Fl__Window__Type_8cxx.html#a54af0c66154ab749a9e407ded0458f04">show_global_settings_cb</a>},
<a name="l01636"></a>01636   {0},
<a name="l01637"></a>01637 {<span class="stringliteral">&quot;&amp;New&quot;</span>, 0, 0, (<span class="keywordtype">void</span> *)New_Menu, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57aa6dad0dc73339fdb1a9ae9d3079f8659" title="Indicates user_data() is a pointer to another menu array.">FL_SUBMENU_POINTER</a>},
<a name="l01638"></a>01638 {<span class="stringliteral">&quot;&amp;Layout&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01639"></a>01639   {<span class="stringliteral">&quot;&amp;Align&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01640"></a>01640     {<span class="stringliteral">&quot;&amp;Left&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)10},
<a name="l01641"></a>01641     {<span class="stringliteral">&quot;&amp;Center&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)11},
<a name="l01642"></a>01642     {<span class="stringliteral">&quot;&amp;Right&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)12},
<a name="l01643"></a>01643     {<span class="stringliteral">&quot;&amp;Top&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)13},
<a name="l01644"></a>01644     {<span class="stringliteral">&quot;&amp;Middle&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)14},
<a name="l01645"></a>01645     {<span class="stringliteral">&quot;&amp;Bottom&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)15},
<a name="l01646"></a>01646     {0},
<a name="l01647"></a>01647   {<span class="stringliteral">&quot;&amp;Space Evenly&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01648"></a>01648     {<span class="stringliteral">&quot;&amp;Across&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)20},
<a name="l01649"></a>01649     {<span class="stringliteral">&quot;&amp;Down&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)21},
<a name="l01650"></a>01650     {0},
<a name="l01651"></a>01651   {<span class="stringliteral">&quot;&amp;Make Same Size&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01652"></a>01652     {<span class="stringliteral">&quot;&amp;Width&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)30},
<a name="l01653"></a>01653     {<span class="stringliteral">&quot;&amp;Height&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)31},
<a name="l01654"></a>01654     {<span class="stringliteral">&quot;&amp;Both&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)32},
<a name="l01655"></a>01655     {0},
<a name="l01656"></a>01656   {<span class="stringliteral">&quot;&amp;Center In Group&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01657"></a>01657     {<span class="stringliteral">&quot;&amp;Horizontal&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)40},
<a name="l01658"></a>01658     {<span class="stringliteral">&quot;&amp;Vertical&quot;</span>,0,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#a3f0729513df589bbe3cfce6915bf8ed1">align_widget_cb</a>,(<span class="keywordtype">void</span>*)41},
<a name="l01659"></a>01659     {0},
<a name="l01660"></a>01660   {<span class="stringliteral">&quot;Set &amp;Widget Size&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>|<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01661"></a>01661     {<span class="stringliteral">&quot;&amp;Tiny&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;1&#39;</span>,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#aac4c08af936f108913596517b746e15b">widget_size_cb</a>,(<span class="keywordtype">void</span>*)8,0,<a class="code" href="Enumerations_8H.html#ad5774781d33328b82990ff9e25dfd61ba81ddb843b9f43f73446ea7d6d7d8cc84" title="draws the text (0)">FL_NORMAL_LABEL</a>,<a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>,8},
<a name="l01662"></a>01662     {<span class="stringliteral">&quot;&amp;Small&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;2&#39;</span>,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#aac4c08af936f108913596517b746e15b">widget_size_cb</a>,(<span class="keywordtype">void</span>*)11,0,<a class="code" href="Enumerations_8H.html#ad5774781d33328b82990ff9e25dfd61ba81ddb843b9f43f73446ea7d6d7d8cc84" title="draws the text (0)">FL_NORMAL_LABEL</a>,<a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>,11},
<a name="l01663"></a>01663     {<span class="stringliteral">&quot;&amp;Normal&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;3&#39;</span>,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#aac4c08af936f108913596517b746e15b">widget_size_cb</a>,(<span class="keywordtype">void</span>*)14,0,<a class="code" href="Enumerations_8H.html#ad5774781d33328b82990ff9e25dfd61ba81ddb843b9f43f73446ea7d6d7d8cc84" title="draws the text (0)">FL_NORMAL_LABEL</a>,<a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>,14},
<a name="l01664"></a>01664     {<span class="stringliteral">&quot;&amp;Medium&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;4&#39;</span>,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#aac4c08af936f108913596517b746e15b">widget_size_cb</a>,(<span class="keywordtype">void</span>*)18,0,<a class="code" href="Enumerations_8H.html#ad5774781d33328b82990ff9e25dfd61ba81ddb843b9f43f73446ea7d6d7d8cc84" title="draws the text (0)">FL_NORMAL_LABEL</a>,<a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>,18},
<a name="l01665"></a>01665     {<span class="stringliteral">&quot;&amp;Large&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;5&#39;</span>,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#aac4c08af936f108913596517b746e15b">widget_size_cb</a>,(<span class="keywordtype">void</span>*)24,0,<a class="code" href="Enumerations_8H.html#ad5774781d33328b82990ff9e25dfd61ba81ddb843b9f43f73446ea7d6d7d8cc84" title="draws the text (0)">FL_NORMAL_LABEL</a>,<a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>,24},
<a name="l01666"></a>01666     {<span class="stringliteral">&quot;&amp;Huge&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;6&#39;</span>,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="align__widget_8cxx.html#aac4c08af936f108913596517b746e15b">widget_size_cb</a>,(<span class="keywordtype">void</span>*)32,0,<a class="code" href="Enumerations_8H.html#ad5774781d33328b82990ff9e25dfd61ba81ddb843b9f43f73446ea7d6d7d8cc84" title="draws the text (0)">FL_NORMAL_LABEL</a>,<a class="code" href="Enumerations_8H.html#a74d2c443f7ab53a6ce5d4ca0c7461bc9" title="Helvetica (or Arial) normal (0)">FL_HELVETICA</a>,32},
<a name="l01667"></a>01667     {0},
<a name="l01668"></a>01668   {<span class="stringliteral">&quot;&amp;Grid and Size Settings...&quot;</span>,<a class="code" href="Enumerations_8H.html#a5d4011c75b1fe25d9ef36e8ae9e2995c" title="An alias for FL_CTRL on WIN32 and X11, or FL_META on MacOS X.">FL_COMMAND</a>+<span class="charliteral">&#39;g&#39;</span>,<a class="code" href="Fl__Window__Type_8cxx.html#aba785b6d08766b51bd736661597efedd">show_grid_cb</a>},
<a name="l01669"></a>01669   {0},
<a name="l01670"></a>01670 {<span class="stringliteral">&quot;&amp;Shell&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01671"></a>01671   {<span class="stringliteral">&quot;Execute &amp;Command...&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;x&#39;</span>,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="fluid_8cxx.html#a6965f54617edc2d93f763e5112658efd">show_shell_window</a>},
<a name="l01672"></a>01672   {<span class="stringliteral">&quot;Execute &amp;Again...&quot;</span>,<a class="code" href="Enumerations_8H.html#a58b1ac5446b292c77043f99558eb07cb" title="One of the alt keys is down.">FL_ALT</a>+<span class="charliteral">&#39;g&#39;</span>,(<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a> *)<a class="code" href="alignment__panel_8h.html#a79d07333519e3c5e9d0ad265f40f5e05">do_shell_command</a>},
<a name="l01673"></a>01673   {0},
<a name="l01674"></a>01674 {<span class="stringliteral">&quot;&amp;Help&quot;</span>,0,0,0,<a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a1b4924fb8a5172e5d8defa98dba6b7ef" title="This item is a submenu to other items.">FL_SUBMENU</a>},
<a name="l01675"></a>01675   {<span class="stringliteral">&quot;&amp;Rapid development with FLUID...&quot;</span>,0,<a class="code" href="fluid_8cxx.html#a1151118e3544af988678134a667f4d19">help_cb</a>},
<a name="l01676"></a>01676   {<span class="stringliteral">&quot;&amp;FLTK Programmers Manual...&quot;</span>,0,<a class="code" href="fluid_8cxx.html#ae06172bee3d69d56c7d6acdc03438c1c">manual_cb</a>, 0, <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>},
<a name="l01677"></a>01677   {<span class="stringliteral">&quot;&amp;About FLUID...&quot;</span>,0,<a class="code" href="fluid_8cxx.html#a082c06a638ac407b52237bf2e631d72c">about_cb</a>},
<a name="l01678"></a>01678   {0},
<a name="l01679"></a>01679 {0}};
<a name="l01680"></a>01680 
<a name="l01681"></a><a class="code" href="fluid_8cxx.html#abaf9d9e85bec56cad21391d44438accc">01681</a> <span class="preprocessor">#define BROWSERWIDTH 300</span>
<a name="l01682"></a><a class="code" href="fluid_8cxx.html#a5e51193e5a482c3b46cd18c85c2d3e14">01682</a> <span class="preprocessor"></span><span class="preprocessor">#define BROWSERHEIGHT 500</span>
<a name="l01683"></a><a class="code" href="fluid_8cxx.html#a11f4dfc213e40297e143dad1795f31e3">01683</a> <span class="preprocessor"></span><span class="preprocessor">#define WINWIDTH 300</span>
<a name="l01684"></a><a class="code" href="fluid_8cxx.html#a070d0b6cdc7723ce795dca91146cb1b5">01684</a> <span class="preprocessor"></span><span class="preprocessor">#define MENUHEIGHT 25</span>
<a name="l01685"></a><a class="code" href="fluid_8cxx.html#a557f442fde48886e586513ced4464366">01685</a> <span class="preprocessor"></span><span class="preprocessor">#define WINHEIGHT (BROWSERHEIGHT+MENUHEIGHT)</span>
<a name="l01686"></a>01686 <span class="preprocessor"></span>
<a name="l01687"></a>01687 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="factory_8cxx.html#aebcfa49e52f72499640966fbf16b1793">fill_in_New_Menu</a>();
<a name="l01688"></a>01688 
<a name="l01689"></a><a class="code" href="fluid_8cxx.html#aec23c540aaa22d0896b65b345e008724">01689</a> <span class="keywordtype">void</span> <a class="code" href="alignment__panel_8cxx.html#aec23c540aaa22d0896b65b345e008724">scheme_cb</a>(<a class="code" href="classFl__Choice.html" title="A button that is used to pop up a menu.">Fl_Choice</a> *, <span class="keywordtype">void</span> *) {
<a name="l01690"></a>01690   <span class="keywordflow">if</span> (compile_only)
<a name="l01691"></a>01691     <span class="keywordflow">return</span>;
<a name="l01692"></a>01692 
<a name="l01693"></a>01693   <span class="keywordflow">switch</span> (<a class="code" href="alignment__panel_8cxx.html#ab28fdd321fa0aff077051e366162f6cc">scheme_choice</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>()) {
<a name="l01694"></a>01694     <span class="keywordflow">case</span> 0 : <span class="comment">// Default</span>
<a name="l01695"></a>01695       <a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01696"></a>01696       <span class="keywordflow">break</span>;
<a name="l01697"></a>01697     <span class="keywordflow">case</span> 1 : <span class="comment">// None</span>
<a name="l01698"></a>01698       <a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>(<span class="stringliteral">&quot;none&quot;</span>);
<a name="l01699"></a>01699       <span class="keywordflow">break</span>;
<a name="l01700"></a>01700     <span class="keywordflow">case</span> 2 : <span class="comment">// Plastic</span>
<a name="l01701"></a>01701       <a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>(<span class="stringliteral">&quot;plastic&quot;</span>);
<a name="l01702"></a>01702       <span class="keywordflow">break</span>;
<a name="l01703"></a>01703     <span class="keywordflow">case</span> 3 : <span class="comment">// GTK+</span>
<a name="l01704"></a>01704       <a class="code" href="classFl.html#a48e0d5ea99335d7e4cdcf45d8dbe68b7">Fl::scheme</a>(<span class="stringliteral">&quot;gtk+&quot;</span>);
<a name="l01705"></a>01705       <span class="keywordflow">break</span>;
<a name="l01706"></a>01706   }
<a name="l01707"></a>01707 
<a name="l01708"></a>01708   <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>(<span class="stringliteral">&quot;scheme&quot;</span>, <a class="code" href="alignment__panel_8cxx.html#ab28fdd321fa0aff077051e366162f6cc">scheme_choice</a>-&gt;<a class="code" href="classFl__Choice.html#a64519ad1b5b987e4a8167dba894c8dad">value</a>());
<a name="l01709"></a>01709 }
<a name="l01710"></a>01710 
<a name="l01711"></a><a class="code" href="function__panel_8cxx.html#aa3f0f184cbc92d787193312456a7860e">01711</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#aa3f0f184cbc92d787193312456a7860e">toggle_widgetbin_cb</a>(<a class="code" href="classFl__Widget.html">Fl_Widget</a> *, <span class="keywordtype">void</span> *) {
<a name="l01712"></a>01712   <span class="keywordflow">if</span> (!<a class="code" href="function__panel_8cxx.html#a7a3ec739e0139e5d8746207581220e01">widgetbin_panel</a>) {
<a name="l01713"></a>01713     <a class="code" href="function__panel_8cxx.html#a299ec2053addab26df8f15ed55fb0f79">make_widgetbin</a>();
<a name="l01714"></a>01714     <span class="keywordflow">if</span> (!<a class="code" href="fluid_8cxx.html#adbc9b0521a04cefacc1f3f50547061b3">position_window</a>(<a class="code" href="function__panel_8cxx.html#a7a3ec739e0139e5d8746207581220e01">widgetbin_panel</a>,<span class="stringliteral">&quot;widgetbin_pos&quot;</span>, 1, 320, 30)) <span class="keywordflow">return</span>;
<a name="l01715"></a>01715   }
<a name="l01716"></a>01716 
<a name="l01717"></a>01717   <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a7a3ec739e0139e5d8746207581220e01">widgetbin_panel</a>-&gt;<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>()) {
<a name="l01718"></a>01718     <a class="code" href="function__panel_8cxx.html#a7a3ec739e0139e5d8746207581220e01">widgetbin_panel</a>-&gt;<a class="code" href="classFl__Window.html#acd69a335bdc69f5624301f267ca7f94e">hide</a>();
<a name="l01719"></a>01719     widgetbin_item-&gt;<a class="code" href="structFl__Menu__Item.html#ab7a334e6bf9d8ead1c8f1f20a70b0296">label</a>(<span class="stringliteral">&quot;Show Widget &amp;Bin...&quot;</span>);
<a name="l01720"></a>01720   } <span class="keywordflow">else</span> {
<a name="l01721"></a>01721     <a class="code" href="function__panel_8cxx.html#a7a3ec739e0139e5d8746207581220e01">widgetbin_panel</a>-&gt;<a class="code" href="classFl__Window.html#afc4d3796226dfd4620b4d7cf29c287c9">show</a>();
<a name="l01722"></a>01722     widgetbin_item-&gt;<a class="code" href="structFl__Menu__Item.html#ab7a334e6bf9d8ead1c8f1f20a70b0296">label</a>(<span class="stringliteral">&quot;Hide Widget &amp;Bin&quot;</span>);
<a name="l01723"></a>01723   }
<a name="l01724"></a>01724 }
<a name="l01725"></a>01725 
<a name="l01726"></a>01726 
<a name="l01727"></a><a class="code" href="function__panel_8h.html#a6febb02ce135d88eef15bfbde26c1f56">01727</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a6febb02ce135d88eef15bfbde26c1f56">toggle_sourceview_cb</a>(<a class="code" href="classFl__Double__Window.html">Fl_Double_Window</a> *, <span class="keywordtype">void</span> *) {
<a name="l01728"></a>01728   <span class="keywordflow">if</span> (!<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>) {
<a name="l01729"></a>01729     <a class="code" href="function__panel_8cxx.html#a0f272b8b812ab49d5acd1e066874fb23">make_sourceview</a>();
<a name="l01730"></a>01730     <a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>-&gt;<a class="code" href="classFl__Widget.html#aa19d0dccbebc8aa2763af265c6597607">callback</a>((<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a>*)<a class="code" href="fluid_8cxx.html#a6febb02ce135d88eef15bfbde26c1f56">toggle_sourceview_cb</a>);
<a name="l01731"></a>01731     <a class="code" href="classFl__Preferences.html" title="Fl_Preferences provides methods to store user settings between application starts.">Fl_Preferences</a> svp(<a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>, <span class="stringliteral">&quot;sourceview&quot;</span>);
<a name="l01732"></a>01732     <span class="keywordtype">int</span> autorefresh;
<a name="l01733"></a>01733     svp.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;autorefresh&quot;</span>, autorefresh, 1);
<a name="l01734"></a>01734     <a class="code" href="function__panel_8cxx.html#a3e341cc2793c5dc3b18ce42f65c8eed7">sv_autorefresh</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>(autorefresh);
<a name="l01735"></a>01735     <span class="keywordtype">int</span> autoposition;
<a name="l01736"></a>01736     svp.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;autoposition&quot;</span>, autoposition, 1);
<a name="l01737"></a>01737     <a class="code" href="function__panel_8cxx.html#a0a51d1f1a2d428a33731600fe900a33f">sv_autoposition</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>(autoposition);
<a name="l01738"></a>01738     <span class="keywordtype">int</span> tab;
<a name="l01739"></a>01739     svp.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;tab&quot;</span>, tab, 0);
<a name="l01740"></a>01740     <span class="keywordflow">if</span> (tab&gt;=0 &amp;&amp; tab&lt;sv_tab-&gt;children()) <a class="code" href="function__panel_8cxx.html#a580b1bd56496c60e2c72d757622a6dbb">sv_tab</a>-&gt;<a class="code" href="classFl__Tabs.html#aa76c3a292bf992a319849dec3beaa825">value</a>(<a class="code" href="function__panel_8cxx.html#a580b1bd56496c60e2c72d757622a6dbb">sv_tab</a>-&gt;<a class="code" href="classFl__Group.html#abcdcba775394de0527aa9aa4157f0b4d">child</a>(tab));
<a name="l01741"></a>01741     <span class="keywordflow">if</span> (!<a class="code" href="fluid_8cxx.html#adbc9b0521a04cefacc1f3f50547061b3">position_window</a>(<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>,<span class="stringliteral">&quot;sourceview_pos&quot;</span>, 0, 320, 120, 550, 500)) <span class="keywordflow">return</span>;
<a name="l01742"></a>01742   }
<a name="l01743"></a>01743 
<a name="l01744"></a>01744   <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>-&gt;<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>()) {
<a name="l01745"></a>01745     <a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>-&gt;<a class="code" href="classFl__Double__Window.html#acc0edc55a9d27e4e276e8a5b78deeeef">hide</a>();
<a name="l01746"></a>01746     sourceview_item-&gt;<a class="code" href="structFl__Menu__Item.html#ab7a334e6bf9d8ead1c8f1f20a70b0296">label</a>(<span class="stringliteral">&quot;Show Source Code...&quot;</span>);
<a name="l01747"></a>01747   } <span class="keywordflow">else</span> {
<a name="l01748"></a>01748     <a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>-&gt;<a class="code" href="classFl__Double__Window.html#a4d1c3cbb1184c6785df7465b0c657025">show</a>();
<a name="l01749"></a>01749     sourceview_item-&gt;<a class="code" href="structFl__Menu__Item.html#ab7a334e6bf9d8ead1c8f1f20a70b0296">label</a>(<span class="stringliteral">&quot;Hide Source Code...&quot;</span>);
<a name="l01750"></a>01750     <a class="code" href="fluid_8cxx.html#a68a1b777b2bf0adde28b1fe978480aba">update_sourceview_cb</a>(0,0);
<a name="l01751"></a>01751   }
<a name="l01752"></a>01752 }
<a name="l01753"></a>01753 
<a name="l01754"></a><a class="code" href="function__panel_8h.html#a6c6cf0a99dbdd63591df7c1bca0edea1">01754</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a6c6cf0a99dbdd63591df7c1bca0edea1">toggle_sourceview_b_cb</a>(<a class="code" href="classFl__Button.html" title="Buttons generate callbacks when they are clicked by the user.">Fl_Button</a>*, <span class="keywordtype">void</span> *) {
<a name="l01755"></a>01755   <a class="code" href="fluid_8cxx.html#a6febb02ce135d88eef15bfbde26c1f56">toggle_sourceview_cb</a>(0,0);
<a name="l01756"></a>01756 }
<a name="l01757"></a>01757 
<a name="l01758"></a><a class="code" href="fluid_8cxx.html#a57b111f2496f2afa6688ce0cab773634">01758</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a57b111f2496f2afa6688ce0cab773634">make_main_window</a>() {
<a name="l01759"></a>01759   <span class="keywordflow">if</span> (!compile_only) {
<a name="l01760"></a>01760     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;snap&quot;</span>, <a class="code" href="Fl__Window__Type_8cxx.html#a965b906c8fc9bb5596167a229d53d3e5">snap</a>, 1);
<a name="l01761"></a>01761     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;gridx&quot;</span>, <a class="code" href="Fl__Widget__Type_8cxx.html#aea7a16a3db8cab79bfcc6fcfb2715d08">gridx</a>, 5);
<a name="l01762"></a>01762     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;gridy&quot;</span>, <a class="code" href="Fl__Widget__Type_8cxx.html#aecd27836708382115b8882d43870c1f2">gridy</a>, 5);
<a name="l01763"></a>01763     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;show_guides&quot;</span>, <a class="code" href="Fl__Window__Type_8cxx.html#a768e737fb16279a5cc49defae2c6b92b">show_guides</a>, 0);
<a name="l01764"></a>01764     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;widget_size&quot;</span>, <a class="code" href="classFl__Widget__Type.html#ac89911d7228e97ee38616dd800bf1408">Fl_Widget_Type::default_size</a>, 14);
<a name="l01765"></a>01765     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;show_comments&quot;</span>, <a class="code" href="alignment__panel_8h.html#a3dc085cfbb8c763efe846750692c305f">show_comments</a>, 1);
<a name="l01766"></a>01766     <a class="code" href="alignment__panel_8cxx.html#a6bd89603e2e6040a0e157e06f9248319">make_layout_window</a>();
<a name="l01767"></a>01767     <a class="code" href="alignment__panel_8cxx.html#a78df43abe8c4537e4b1f55ba14569ea3">make_shell_window</a>();
<a name="l01768"></a>01768   }
<a name="l01769"></a>01769 
<a name="l01770"></a>01770   <span class="keywordflow">if</span> (!main_window) {
<a name="l01771"></a>01771     <a class="code" href="classFl__Widget.html">Fl_Widget</a> *o;
<a name="l01772"></a>01772     main_window = <span class="keyword">new</span> <a class="code" href="classFl__Double__Window.html">Fl_Double_Window</a>(<a class="code" href="fluid_8cxx.html#a11f4dfc213e40297e143dad1795f31e3">WINWIDTH</a>,<a class="code" href="fluid_8cxx.html#a557f442fde48886e586513ced4464366">WINHEIGHT</a>,<span class="stringliteral">&quot;fluid&quot;</span>);
<a name="l01773"></a>01773     main_window-&gt;<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>(<a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca48e3b4ff6e390359376e79a8a6bc05c1" title="nothing is drawn at all, this box is invisible">FL_NO_BOX</a>);
<a name="l01774"></a>01774     o = <a class="code" href="Fl__Type_8cxx.html#a6b4e30ba8df38e3db9da00c64363a0a6">make_widget_browser</a>(0,<a class="code" href="fluid_8cxx.html#a070d0b6cdc7723ce795dca91146cb1b5">MENUHEIGHT</a>,<a class="code" href="fluid_8cxx.html#abaf9d9e85bec56cad21391d44438accc">BROWSERWIDTH</a>,<a class="code" href="fluid_8cxx.html#a5e51193e5a482c3b46cd18c85c2d3e14">BROWSERHEIGHT</a>);
<a name="l01775"></a>01775     o-&gt;<a class="code" href="classFl__Widget.html#a991d448d9a42fb926819defc9de90999">box</a>(<a class="code" href="Enumerations_8H.html#ae48bf9070f8541de17829f54ccacc6bca6ab2938fe5cb8e5c1ac67da87b6153e6" title="a flat box">FL_FLAT_BOX</a>);
<a name="l01776"></a>01776     o-&gt;<a class="code" href="classFl__Widget.html#a41d417d5350306a6fb2154300b73d436">tooltip</a>(<span class="stringliteral">&quot;Double-click to view or change an item.&quot;</span>);
<a name="l01777"></a>01777     main_window-&gt;<a class="code" href="classFl__Group.html#ab0ed0d1974d7185594687849f386c5f3">resizable</a>(o);
<a name="l01778"></a>01778     main_menubar = <span class="keyword">new</span> <a class="code" href="classFl__Menu__Bar.html">Fl_Menu_Bar</a>(0,0,<a class="code" href="fluid_8cxx.html#abaf9d9e85bec56cad21391d44438accc">BROWSERWIDTH</a>,<a class="code" href="fluid_8cxx.html#a070d0b6cdc7723ce795dca91146cb1b5">MENUHEIGHT</a>);
<a name="l01779"></a>01779     main_menubar-&gt;<a class="code" href="classFl__Menu__.html#a44b0dd7371022c6df07fda0e9aa0e293">menu</a>(Main_Menu);
<a name="l01780"></a>01780     <span class="comment">// quick access to all dynamic menu items</span>
<a name="l01781"></a>01781     save_item = (<a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>*)main_menubar-&gt;<a class="code" href="classFl__Menu__.html#a83e66d9b948df288e9f36d812093e922">find_item</a>(save_cb);
<a name="l01782"></a>01782     history_item = (<a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>*)main_menubar-&gt;<a class="code" href="classFl__Menu__.html#a83e66d9b948df288e9f36d812093e922">find_item</a>(<a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>);
<a name="l01783"></a>01783     widgetbin_item = (<a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>*)main_menubar-&gt;<a class="code" href="classFl__Menu__.html#a83e66d9b948df288e9f36d812093e922">find_item</a>(<a class="code" href="fluid_8cxx.html#aa3f0f184cbc92d787193312456a7860e">toggle_widgetbin_cb</a>);
<a name="l01784"></a>01784     sourceview_item = (<a class="code" href="structFl__Menu__Item.html">Fl_Menu_Item</a>*)main_menubar-&gt;<a class="code" href="classFl__Menu__.html#a83e66d9b948df288e9f36d812093e922">find_item</a>((<a class="code" href="Fl__Widget_8H.html#ab6406a5102af4ed276b6e050ad16ea05">Fl_Callback</a>*)<a class="code" href="fluid_8cxx.html#a6febb02ce135d88eef15bfbde26c1f56">toggle_sourceview_cb</a>);
<a name="l01785"></a>01785     main_menubar-&gt;<a class="code" href="classFl__Menu__.html#aea0c7fce644de6b8703a6d8fff1941c0">global</a>();
<a name="l01786"></a>01786     <a class="code" href="factory_8cxx.html#aebcfa49e52f72499640966fbf16b1793">fill_in_New_Menu</a>();
<a name="l01787"></a>01787     main_window-&gt;<a class="code" href="classFl__Group.html#a029653337efa0cb2ec52852519293ba8">end</a>();
<a name="l01788"></a>01788   }
<a name="l01789"></a>01789 
<a name="l01790"></a>01790   <span class="keywordflow">if</span> (!compile_only) {
<a name="l01791"></a>01791     <a class="code" href="alignment__panel_8h.html#a430dfdf5895b99b13d24f0cd542eda06">load_history</a>();
<a name="l01792"></a>01792     <a class="code" href="alignment__panel_8cxx.html#ad699dfeb8fd3669e622f007694ff872e">make_settings_window</a>();
<a name="l01793"></a>01793     <a class="code" href="alignment__panel_8cxx.html#a6ed387bbb62a29bfe0efae3d896eb84d">make_global_settings_window</a>();
<a name="l01794"></a>01794   }
<a name="l01795"></a>01795 }
<a name="l01796"></a>01796 
<a name="l01797"></a>01797 <span class="comment">// Load file history from preferences...</span>
<a name="l01798"></a><a class="code" href="fluid_8cxx.html#a430dfdf5895b99b13d24f0cd542eda06">01798</a> <span class="keywordtype">void</span> <a class="code" href="alignment__panel_8h.html#a430dfdf5895b99b13d24f0cd542eda06">load_history</a>() {
<a name="l01799"></a>01799   <span class="keywordtype">int</span>   <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;              <span class="comment">// Looping var</span>
<a name="l01800"></a>01800   <span class="keywordtype">int</span>   max_files;
<a name="l01801"></a>01801 
<a name="l01802"></a>01802 
<a name="l01803"></a>01803   <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;recent_files&quot;</span>, max_files, 5);
<a name="l01804"></a>01804   <span class="keywordflow">if</span> (max_files &gt; 10) max_files = 10;
<a name="l01805"></a>01805 
<a name="l01806"></a>01806   <span class="keywordflow">for</span> (i = 0; i &lt; max_files; i ++) {
<a name="l01807"></a>01807     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>( <a class="code" href="classFl__Preferences_1_1Name.html">Fl_Preferences::Name</a>(<span class="stringliteral">&quot;file%d&quot;</span>, i), <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[i], <span class="stringliteral">&quot;&quot;</span>, <span class="keyword">sizeof</span>(<a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[i]));
<a name="l01808"></a>01808     <span class="keywordflow">if</span> (<a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[i][0]) {
<a name="l01809"></a>01809       <span class="comment">// Make a relative version of the filename for the menu...</span>
<a name="l01810"></a>01810       <a class="code" href="group__filenames.html#gaf0cfb5d9ee6743caf9ede70032bd2a9b">fl_filename_relative</a>(<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[i], <span class="keyword">sizeof</span>(<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[i]),
<a name="l01811"></a>01811                            <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[i]);
<a name="l01812"></a>01812 
<a name="l01813"></a>01813       <span class="keywordflow">if</span> (i == 9) history_item[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> = <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>;
<a name="l01814"></a>01814       <span class="keywordflow">else</span> history_item[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> = 0;
<a name="l01815"></a>01815     } <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
<a name="l01816"></a>01816   }
<a name="l01817"></a>01817 
<a name="l01818"></a>01818   <span class="keywordflow">for</span> (; i &lt; 10; i ++) {
<a name="l01819"></a>01819     <span class="keywordflow">if</span> (i) history_item[i-1].<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> |= <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>;
<a name="l01820"></a>01820     history_item[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structFl__Menu__Item.html#a9121119645436fd7bd3323e3c6d75a59">hide</a>();
<a name="l01821"></a>01821   }
<a name="l01822"></a>01822 }
<a name="l01823"></a>01823 
<a name="l01824"></a>01824 <span class="comment">// Update file history from preferences...</span>
<a name="l01825"></a><a class="code" href="fluid_8cxx.html#aec5ea22adaffdb7c81cd1f6346287c22">01825</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#aec5ea22adaffdb7c81cd1f6346287c22">update_history</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *flname) {
<a name="l01826"></a>01826   <span class="keywordtype">int</span>   <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>;              <span class="comment">// Looping var</span>
<a name="l01827"></a>01827   <span class="keywordtype">char</span>  absolute[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l01828"></a>01828   <span class="keywordtype">int</span>   max_files;
<a name="l01829"></a>01829 
<a name="l01830"></a>01830 
<a name="l01831"></a>01831   <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a0991a0bea2800ce5cd362ff6a778c0d3">get</a>(<span class="stringliteral">&quot;recent_files&quot;</span>, max_files, 5);
<a name="l01832"></a>01832   <span class="keywordflow">if</span> (max_files &gt; 10) max_files = 10;
<a name="l01833"></a>01833 
<a name="l01834"></a>01834   <a class="code" href="group__filenames.html#ga501ffe4287dfd36c8cb56a42c9c4b34c">fl_filename_absolute</a>(absolute, <span class="keyword">sizeof</span>(absolute), flname);
<a name="l01835"></a>01835 
<a name="l01836"></a>01836   <span class="keywordflow">for</span> (i = 0; i &lt; max_files; i ++)
<a name="l01837"></a>01837 #<span class="keywordflow">if</span> defined(WIN32) || defined(__APPLE__)
<a name="l01838"></a>01838     <span class="keywordflow">if</span> (!strcasecmp(absolute, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[i])) <span class="keywordflow">break</span>;
<a name="l01839"></a>01839 <span class="preprocessor">#else</span>
<a name="l01840"></a>01840 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (!strcmp(absolute, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[i])) <span class="keywordflow">break</span>;
<a name="l01841"></a>01841 <span class="preprocessor">#endif // WIN32 || __APPLE__</span>
<a name="l01842"></a>01842 <span class="preprocessor"></span>
<a name="l01843"></a>01843   <span class="keywordflow">if</span> (i == 0) <span class="keywordflow">return</span>;
<a name="l01844"></a>01844 
<a name="l01845"></a>01845   <span class="keywordflow">if</span> (i &gt;= max_files) i = max_files - 1;
<a name="l01846"></a>01846 
<a name="l01847"></a>01847   <span class="comment">// Move the other flnames down in the list...</span>
<a name="l01848"></a>01848   memmove(<a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a> + 1, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>,
<a name="l01849"></a>01849           i * <span class="keyword">sizeof</span>(<a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[0]));
<a name="l01850"></a>01850   memmove(<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a> + 1, <a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>,
<a name="l01851"></a>01851           i * <span class="keyword">sizeof</span>(<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[0]));
<a name="l01852"></a>01852 
<a name="l01853"></a>01853   <span class="comment">// Put the new file at the top...</span>
<a name="l01854"></a>01854   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(<a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[0], absolute, <span class="keyword">sizeof</span>(<a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[0]));
<a name="l01855"></a>01855 
<a name="l01856"></a>01856   <a class="code" href="group__filenames.html#gaf0cfb5d9ee6743caf9ede70032bd2a9b">fl_filename_relative</a>(<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[0], <span class="keyword">sizeof</span>(<a class="code" href="fluid_8cxx.html#a851d4da0257c970c1db8b70a378e6c96">relative_history</a>[0]),
<a name="l01857"></a>01857                        <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[0]);
<a name="l01858"></a>01858 
<a name="l01859"></a>01859   <span class="comment">// Update the menu items as needed...</span>
<a name="l01860"></a>01860   <span class="keywordflow">for</span> (i = 0; i &lt; max_files; i ++) {
<a name="l01861"></a>01861     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>( <a class="code" href="classFl__Preferences_1_1Name.html">Fl_Preferences::Name</a>(<span class="stringliteral">&quot;file%d&quot;</span>, i), <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[i]);
<a name="l01862"></a>01862     <span class="keywordflow">if</span> (<a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[i][0]) {
<a name="l01863"></a>01863       <span class="keywordflow">if</span> (i == 9) history_item[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> = <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>;
<a name="l01864"></a>01864       <span class="keywordflow">else</span> history_item[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> = 0;
<a name="l01865"></a>01865     } <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
<a name="l01866"></a>01866   }
<a name="l01867"></a>01867 
<a name="l01868"></a>01868   <span class="keywordflow">for</span> (; i &lt; 10; i ++) {
<a name="l01869"></a>01869     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#a1928e8ca3f21f66304951b757f24d70a">set</a>( <a class="code" href="classFl__Preferences_1_1Name.html">Fl_Preferences::Name</a>(<span class="stringliteral">&quot;file%d&quot;</span>, i), <span class="stringliteral">&quot;&quot;</span>);
<a name="l01870"></a>01870     <span class="keywordflow">if</span> (i) history_item[i-1].<a class="code" href="structFl__Menu__Item.html#aae6ba303ffaf74a0267c978ae8ec475f" title="menu item flags like FL_MENU_TOGGLE, FL_MENU_RADIO">flags</a> |= <a class="code" href="Fl__Menu__Item_8H.html#ab04a0655cd1e3bcac5e8f48c18df1a57a4e221192c48b090c3c3a0a6fb716faae" title="Creates divider line below this item. Also ends a group of radio buttons.">FL_MENU_DIVIDER</a>;
<a name="l01871"></a>01871     history_item[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>].<a class="code" href="structFl__Menu__Item.html#a9121119645436fd7bd3323e3c6d75a59">hide</a>();
<a name="l01872"></a>01872   }
<a name="l01873"></a>01873 }
<a name="l01874"></a>01874 
<a name="l01875"></a>01875 <span class="comment">// ********** portable process class definition **********</span>
<a name="l01876"></a>01876 
<a name="l01877"></a><a class="code" href="classFl__Process.html">01877</a> <span class="keyword">class </span><a class="code" href="classFl__Process.html">Fl_Process</a> {
<a name="l01878"></a>01878 <span class="keyword">public</span>:
<a name="l01879"></a>01879   <span class="comment">// construction / destruction</span>
<a name="l01880"></a><a class="code" href="classFl__Process.html#a582f92433f1d73af4bf4a292a8898891">01880</a>   <a class="code" href="classFl__Process.html#a582f92433f1d73af4bf4a292a8898891">Fl_Process</a>() {<a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>= <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;}
<a name="l01881"></a><a class="code" href="classFl__Process.html#a2025840af26b8bff6ceb7eb8d49c84e6">01881</a>   <a class="code" href="classFl__Process.html#a2025840af26b8bff6ceb7eb8d49c84e6">~Fl_Process</a>() {<span class="keywordflow">if</span> (<a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>) <a class="code" href="classFl__Process.html#aaff25da69601036e4ddccf1bc1daa455">close</a>();}
<a name="l01882"></a>01882 
<a name="l01883"></a>01883   <span class="comment">// FIXME: popen needs the utf8 equivalen fl_popen</span>
<a name="l01884"></a>01884   FILE * <a class="code" href="classFl__Process.html#aaf463c6a6bdb7af9d2d5a1c596729a3f">popen</a>  (<span class="keyword">const</span> <span class="keywordtype">char</span> *cmd, <span class="keyword">const</span> <span class="keywordtype">char</span> *mode=<span class="stringliteral">&quot;r&quot;</span>);
<a name="l01885"></a>01885   <span class="comment">//not necessary here: FILE * fl_fopen (const char *file, const char *mode=&quot;r&quot;);</span>
<a name="l01886"></a>01886   <span class="keywordtype">int</span>  <a class="code" href="classFl__Process.html#aaff25da69601036e4ddccf1bc1daa455">close</a>();
<a name="l01887"></a>01887 
<a name="l01888"></a><a class="code" href="classFl__Process.html#a50b687b8b8225d6399b5dd06c23cfc07">01888</a>   FILE * <a class="code" href="classFl__Process.html#a50b687b8b8225d6399b5dd06c23cfc07">desc</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>;} <span class="comment">// non null if file is open</span>
<a name="l01889"></a><a class="code" href="classFl__Process.html#a3a24ac3f225186cc1d25148423b530ec">01889</a>   <span class="keywordtype">char</span> * <a class="code" href="classFl__Process.html#a3a24ac3f225186cc1d25148423b530ec">get_line</a>(<span class="keywordtype">char</span> * line, <span class="keywordtype">size_t</span> s)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a> ? fgets(line, s, <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>) : <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;}
<a name="l01890"></a>01890 
<a name="l01891"></a>01891 <span class="preprocessor">#if defined(WIN32)  &amp;&amp; !defined(__CYGWIN__)</span>
<a name="l01892"></a>01892 <span class="preprocessor"></span><span class="keyword">protected</span>:
<a name="l01893"></a>01893   HANDLE pin[2], pout[2], perr[2];
<a name="l01894"></a>01894   <span class="keywordtype">char</span> ptmode;
<a name="l01895"></a>01895   PROCESS_INFORMATION pi;
<a name="l01896"></a>01896   STARTUPINFO si;
<a name="l01897"></a>01897 
<a name="l01898"></a>01898   <span class="keyword">static</span> <span class="keywordtype">bool</span> createPipe(HANDLE * h, BOOL bInheritHnd=<a class="code" href="forms_8H-2.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);
<a name="l01899"></a>01899 
<a name="l01900"></a>01900 <span class="keyword">private</span>:
<a name="l01901"></a>01901   FILE * freeHandles()  {
<a name="l01902"></a>01902     clean_close(pin[0]);    clean_close(pin[1]);
<a name="l01903"></a>01903     clean_close(pout[0]);   clean_close(pout[1]);
<a name="l01904"></a>01904     clean_close(perr[0]);   clean_close(perr[1]);
<a name="l01905"></a>01905     <span class="keywordflow">return</span> <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">// convenient for error management</span>
<a name="l01906"></a>01906   }
<a name="l01907"></a>01907   <span class="keyword">static</span> <span class="keywordtype">void</span> clean_close(HANDLE&amp; h);
<a name="l01908"></a>01908 <span class="preprocessor">#endif</span>
<a name="l01909"></a>01909 <span class="preprocessor"></span>
<a name="l01910"></a>01910 <span class="keyword">protected</span>:
<a name="l01911"></a><a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">01911</a>   FILE * <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>;
<a name="l01912"></a>01912 };
<a name="l01913"></a>01913 
<a name="l01914"></a>01914 <span class="preprocessor">#if defined(WIN32)  &amp;&amp; !defined(__CYGWIN__)</span>
<a name="l01915"></a>01915 <span class="preprocessor"></span><span class="keywordtype">bool</span> Fl_Process::createPipe(HANDLE * h, BOOL bInheritHnd) {
<a name="l01916"></a>01916   SECURITY_ATTRIBUTES sa;
<a name="l01917"></a>01917   sa.nLength = <span class="keyword">sizeof</span>(sa);
<a name="l01918"></a>01918   sa.lpSecurityDescriptor = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01919"></a>01919   sa.bInheritHandle = bInheritHnd;
<a name="l01920"></a>01920   <span class="keywordflow">return</span> CreatePipe (&amp;h[0],&amp;h[1],&amp;sa,0) ? <span class="keyword">true</span> : <span class="keyword">false</span>;
<a name="l01921"></a>01921 }
<a name="l01922"></a>01922 <span class="preprocessor">#endif</span>
<a name="l01923"></a>01923 <span class="preprocessor"></span><span class="comment">// portable open process:</span>
<a name="l01924"></a><a class="code" href="classFl__Process.html#aaf463c6a6bdb7af9d2d5a1c596729a3f">01924</a> FILE * <a class="code" href="classFl__Process.html#aaf463c6a6bdb7af9d2d5a1c596729a3f">Fl_Process::popen</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *cmd, <span class="keyword">const</span> <span class="keywordtype">char</span> *mode) {
<a name="l01925"></a>01925 <span class="preprocessor">#if defined(WIN32)  &amp;&amp; !defined(__CYGWIN__)</span>
<a name="l01926"></a>01926 <span class="preprocessor"></span>  <span class="comment">// PRECONDITIONS</span>
<a name="l01927"></a>01927   <span class="keywordflow">if</span> (!mode || !*mode || (*mode!=<span class="charliteral">&#39;r&#39;</span> &amp;&amp; *mode!=<span class="charliteral">&#39;w&#39;</span>) ) <span class="keywordflow">return</span> <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01928"></a>01928   <span class="keywordflow">if</span> (<a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>) <a class="code" href="classFl__Process.html#aaff25da69601036e4ddccf1bc1daa455">close</a>(); <span class="comment">// close first before reuse</span>
<a name="l01929"></a>01929 
<a name="l01930"></a>01930   ptmode = *mode;
<a name="l01931"></a>01931   pin[0] = pin[1] = pout[0] = pout[1] = perr[0] = perr[1] = INVALID_HANDLE_VALUE;
<a name="l01932"></a>01932   <span class="comment">// stderr to stdout wanted ?</span>
<a name="l01933"></a>01933   <span class="keywordtype">int</span> fusion = (strstr(cmd,<span class="stringliteral">&quot;2&gt;&amp;1&quot;</span>) !=<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);
<a name="l01934"></a>01934 
<a name="l01935"></a>01935   <span class="comment">// Create windows pipes</span>
<a name="l01936"></a>01936   <span class="keywordflow">if</span> (!createPipe(pin) || !createPipe(pout) || (!fusion &amp;&amp; !createPipe(perr) ) )
<a name="l01937"></a>01937         <span class="keywordflow">return</span> freeHandles(); <span class="comment">// error</span>
<a name="l01938"></a>01938 
<a name="l01939"></a>01939   <span class="comment">// Initialize Startup Info</span>
<a name="l01940"></a>01940   ZeroMemory(&amp;si, <span class="keyword">sizeof</span>(STARTUPINFO));
<a name="l01941"></a>01941   si.cb           = <span class="keyword">sizeof</span>(STARTUPINFO);
<a name="l01942"></a>01942   si.dwFlags    = STARTF_USESTDHANDLES;
<a name="l01943"></a>01943   si.hStdInput    = pin[0];
<a name="l01944"></a>01944   si.hStdOutput   = pout[1];
<a name="l01945"></a>01945   si.hStdError  = fusion ? pout[1] : perr [1];
<a name="l01946"></a>01946 
<a name="l01947"></a>01947   <span class="keywordflow">if</span> ( CreateProcess(<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, (LPTSTR) cmd,<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="code" href="forms_8H-2.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,
<a name="l01948"></a>01948                      DETACHED_PROCESS,<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;si, &amp;pi)) {
<a name="l01949"></a>01949     <span class="comment">// don&#39;t need theses handles inherited by child process:</span>
<a name="l01950"></a>01950     clean_close(pin[0]); clean_close(pout[1]); clean_close(perr[1]);
<a name="l01951"></a>01951     HANDLE &amp; h = *mode == <span class="charliteral">&#39;r&#39;</span> ? pout[0] : pin[1];
<a name="l01952"></a>01952     <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a> = _fdopen(_open_osfhandle((<a class="code" href="Fl__Widget_8H.html#a6c7d27e81f16857f18da5e4ce097de75">fl_intptr_t</a>) h,_O_BINARY),mode);
<a name="l01953"></a>01953     h= INVALID_HANDLE_VALUE;  <span class="comment">// reset the handle pointer that is shared</span>
<a name="l01954"></a>01954     <span class="comment">// with _fpt so we don&#39;t free it twice</span>
<a name="l01955"></a>01955   }
<a name="l01956"></a>01956 
<a name="l01957"></a>01957   <span class="keywordflow">if</span> (!<a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>)  freeHandles();
<a name="l01958"></a>01958   <span class="keywordflow">return</span> <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>;
<a name="l01959"></a>01959 <span class="preprocessor">#else</span>
<a name="l01960"></a>01960 <span class="preprocessor"></span>  <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>=<a class="code" href="classFl__Process.html#aaf463c6a6bdb7af9d2d5a1c596729a3f">::popen</a>(cmd,mode);
<a name="l01961"></a>01961   <span class="keywordflow">return</span> <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>;
<a name="l01962"></a>01962 <span class="preprocessor">#endif</span>
<a name="l01963"></a>01963 <span class="preprocessor"></span>}
<a name="l01964"></a>01964 
<a name="l01965"></a><a class="code" href="classFl__Process.html#aaff25da69601036e4ddccf1bc1daa455">01965</a> <span class="keywordtype">int</span> <a class="code" href="classFl__Process.html#aaff25da69601036e4ddccf1bc1daa455">Fl_Process::close</a>() {
<a name="l01966"></a>01966 <span class="preprocessor">#if defined(WIN32)  &amp;&amp; !defined(__CYGWIN__)</span>
<a name="l01967"></a>01967 <span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>) {
<a name="l01968"></a>01968     fclose(<a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>);
<a name="l01969"></a>01969     clean_close(perr[0]);
<a name="l01970"></a>01970     clean_close(pin[1]);
<a name="l01971"></a>01971     clean_close(pout[0]);
<a name="l01972"></a>01972     <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a> = <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01973"></a>01973     <span class="keywordflow">return</span> 0;
<a name="l01974"></a>01974   }
<a name="l01975"></a>01975   <span class="keywordflow">return</span> -1;
<a name="l01976"></a>01976 <span class="preprocessor">#else</span>
<a name="l01977"></a>01977 <span class="preprocessor"></span>  <span class="keywordtype">int</span> ret = ::pclose(<a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>);
<a name="l01978"></a>01978   <a class="code" href="classFl__Process.html#af3ee4b54d411dc2ce3307c8dcaa36e34">_fpt</a>=<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l01979"></a>01979   <span class="keywordflow">return</span> ret;
<a name="l01980"></a>01980 <span class="preprocessor">#endif</span>
<a name="l01981"></a>01981 <span class="preprocessor"></span>}
<a name="l01982"></a>01982 
<a name="l01983"></a>01983 <span class="preprocessor">#if defined(WIN32)  &amp;&amp; !defined(__CYGWIN__)</span>
<a name="l01984"></a>01984 <span class="preprocessor"></span><span class="keywordtype">void</span> Fl_Process::clean_close(HANDLE&amp; h) {
<a name="l01985"></a>01985   <span class="keywordflow">if</span> (h!= INVALID_HANDLE_VALUE) CloseHandle(h);
<a name="l01986"></a>01986   h = INVALID_HANDLE_VALUE;
<a name="l01987"></a>01987 }
<a name="l01988"></a>01988 <span class="preprocessor">#endif</span>
<a name="l01989"></a>01989 <span class="preprocessor"></span><span class="comment">// ********** Fl_Process class end **********</span>
<a name="l01990"></a>01990 
<a name="l01991"></a>01991 <span class="keyword">static</span> <a class="code" href="classFl__Process.html">Fl_Process</a> s_proc;
<a name="l01992"></a>01992 
<a name="l01993"></a>01993 <span class="comment">// Shell command support...</span>
<a name="l01994"></a>01994 
<a name="l01995"></a>01995 <span class="keyword">static</span> <span class="keywordtype">bool</span> prepare_shell_command(<span class="keyword">const</span> <span class="keywordtype">char</span> * &amp;command)  { <span class="comment">// common pre-shell command code all platforms</span>
<a name="l01996"></a>01996   <a class="code" href="alignment__panel_8cxx.html#a39f319b69c48e2935cb04bc168736d0c">shell_window</a>-&gt;<a class="code" href="classFl__Double__Window.html#acc0edc55a9d27e4e276e8a5b78deeeef">hide</a>();
<a name="l01997"></a>01997   <span class="keywordflow">if</span> (s_proc.<a class="code" href="classFl__Process.html#a50b687b8b8225d6399b5dd06c23cfc07">desc</a>()) {
<a name="l01998"></a>01998     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Previous shell command still running!&quot;</span>);
<a name="l01999"></a>01999     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02000"></a>02000   }
<a name="l02001"></a>02001   <span class="keywordflow">if</span> ((command = <a class="code" href="alignment__panel_8cxx.html#ad91d85c91fe94c63872ffcd343e4eee5">shell_command_input</a>-&gt;<a class="code" href="classFl__Input__.html#aaccaca04083dc6d2f1c1a4fa273d9048">value</a>()) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || !*command) {
<a name="l02002"></a>02002     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;No shell command entered!&quot;</span>);
<a name="l02003"></a>02003     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02004"></a>02004   }
<a name="l02005"></a>02005   <span class="keywordflow">if</span> (<a class="code" href="alignment__panel_8cxx.html#a045f4929c66293f31225170be956810f">shell_savefl_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l02006"></a>02006     <a class="code" href="fluid_8cxx.html#a4755873f5909c6ead4005508902dcb63">save_cb</a>(0, 0);
<a name="l02007"></a>02007   }
<a name="l02008"></a>02008   <span class="keywordflow">if</span> (<a class="code" href="alignment__panel_8cxx.html#af1924a25f5cdc4c0e07207f2431cfe4c">shell_writecode_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l02009"></a>02009     compile_only = 1;
<a name="l02010"></a>02010     <a class="code" href="fluid_8cxx.html#a8e952052b4225f043f44665b398a5616">write_cb</a>(0, 0);
<a name="l02011"></a>02011     compile_only = 0;
<a name="l02012"></a>02012   }
<a name="l02013"></a>02013   <span class="keywordflow">if</span> (<a class="code" href="alignment__panel_8cxx.html#a019ac90cd76ab7e03945592548bf694e">shell_writemsgs_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l02014"></a>02014     compile_only = 1;
<a name="l02015"></a>02015     <a class="code" href="fluid_8cxx.html#a08316bbde185907c026f03ae7364c150">write_strings_cb</a>(0, 0);
<a name="l02016"></a>02016     compile_only = 0;
<a name="l02017"></a>02017   }
<a name="l02018"></a>02018   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02019"></a>02019 }
<a name="l02020"></a>02020 
<a name="l02021"></a>02021 <span class="preprocessor">#if !defined(__MWERKS__)</span>
<a name="l02022"></a>02022 <span class="preprocessor"></span><span class="comment">// Support the full piped shell command...</span>
<a name="l02023"></a>02023 <span class="keywordtype">void</span>
<a name="l02024"></a><a class="code" href="fluid_8cxx.html#a1389f4de31299b45f169bbf6a7cd1792">02024</a> <a class="code" href="fluid_8cxx.html#a1389f4de31299b45f169bbf6a7cd1792">shell_pipe_cb</a>(<span class="keywordtype">int</span>, <span class="keywordtype">void</span>*) {
<a name="l02025"></a>02025   <span class="keywordtype">char</span>  line[1024]=<span class="stringliteral">&quot;&quot;</span>;          <span class="comment">// Line from command output...</span>
<a name="l02026"></a>02026 
<a name="l02027"></a>02027   <span class="keywordflow">if</span> (s_proc.<a class="code" href="classFl__Process.html#a3a24ac3f225186cc1d25148423b530ec">get_line</a>(line, <span class="keyword">sizeof</span>(line)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l02028"></a>02028     <span class="comment">// Add the line to the output list...</span>
<a name="l02029"></a>02029     <a class="code" href="alignment__panel_8cxx.html#aea5ce7652625cb82652583fcbe1df6e0">shell_run_buffer</a>-&gt;<a class="code" href="classFl__Text__Buffer.html#a09a2ce59b5b88c2eb4bcbcd737825063">append</a>(line);
<a name="l02030"></a>02030   } <span class="keywordflow">else</span> {
<a name="l02031"></a>02031     <span class="comment">// End of file; tell the parent...</span>
<a name="l02032"></a>02032     <a class="code" href="classFl.html#a71e75c1a559e3415c5304c37235af831">Fl::remove_fd</a>(fileno(s_proc.<a class="code" href="classFl__Process.html#a50b687b8b8225d6399b5dd06c23cfc07">desc</a>()));
<a name="l02033"></a>02033     s_proc.<a class="code" href="classFl__Process.html#aaff25da69601036e4ddccf1bc1daa455">close</a>();
<a name="l02034"></a>02034     <a class="code" href="alignment__panel_8cxx.html#aea5ce7652625cb82652583fcbe1df6e0">shell_run_buffer</a>-&gt;<a class="code" href="classFl__Text__Buffer.html#a09a2ce59b5b88c2eb4bcbcd737825063">append</a>(<span class="stringliteral">&quot;... END SHELL COMMAND ...\n&quot;</span>);
<a name="l02035"></a>02035   }
<a name="l02036"></a>02036 
<a name="l02037"></a>02037   <a class="code" href="alignment__panel_8cxx.html#a083b12aab260fb874533b555e023f546">shell_run_display</a>-&gt;<a class="code" href="classFl__Text__Display.html#aa6705c216c0626763f3f34d3e318d465" title="Scrolls the current buffer to start at the specified line and column.">scroll</a>(<a class="code" href="alignment__panel_8cxx.html#a083b12aab260fb874533b555e023f546">shell_run_display</a>-&gt;<a class="code" href="classFl__Text__Display.html#a4e72304db704275f1d9df60407d366c5" title="Count the number of lines between two positions.">count_lines</a>(0,
<a name="l02038"></a>02038                             <a class="code" href="alignment__panel_8cxx.html#aea5ce7652625cb82652583fcbe1df6e0">shell_run_buffer</a>-&gt;<a class="code" href="classFl__Text__Buffer.html#a5afecd40b3dd915ca39a8543a16fa042" title="Returns the number of bytes in the buffer.">length</a>(), 1), 0);
<a name="l02039"></a>02039 }
<a name="l02040"></a>02040 
<a name="l02041"></a>02041 <span class="keywordtype">void</span>
<a name="l02042"></a><a class="code" href="fluid_8cxx.html#a79d07333519e3c5e9d0ad265f40f5e05">02042</a> <a class="code" href="alignment__panel_8h.html#a79d07333519e3c5e9d0ad265f40f5e05">do_shell_command</a>(<a class="code" href="classFl__Return__Button.html">Fl_Return_Button</a>*, <span class="keywordtype">void</span>*) {
<a name="l02043"></a>02043   <span class="keyword">const</span> <span class="keywordtype">char</span>    *command=<a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;  <span class="comment">// Command to run</span>
<a name="l02044"></a>02044 
<a name="l02045"></a>02045   <span class="keywordflow">if</span> (!prepare_shell_command(command)) <span class="keywordflow">return</span>;
<a name="l02046"></a>02046 
<a name="l02047"></a>02047   <span class="comment">// Show the output window and clear things...</span>
<a name="l02048"></a>02048   <a class="code" href="alignment__panel_8cxx.html#aea5ce7652625cb82652583fcbe1df6e0">shell_run_buffer</a>-&gt;<a class="code" href="classFl__Text__Buffer.html#a369f91f178ebd9347c508922c4f3c4c6" title="Get a copy of the entire contents of the text buffer. Memory is allocated to contain the returned str...">text</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l02049"></a>02049   <a class="code" href="alignment__panel_8cxx.html#aea5ce7652625cb82652583fcbe1df6e0">shell_run_buffer</a>-&gt;<a class="code" href="classFl__Text__Buffer.html#a09a2ce59b5b88c2eb4bcbcd737825063">append</a>(command);
<a name="l02050"></a>02050   <a class="code" href="alignment__panel_8cxx.html#aea5ce7652625cb82652583fcbe1df6e0">shell_run_buffer</a>-&gt;<a class="code" href="classFl__Text__Buffer.html#a09a2ce59b5b88c2eb4bcbcd737825063">append</a>(<span class="stringliteral">&quot;\n&quot;</span>);
<a name="l02051"></a>02051   <a class="code" href="alignment__panel_8cxx.html#a99e4bb0f50556384d67953eef29b5924">shell_run_window</a>-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>(<span class="stringliteral">&quot;Shell Command Running...&quot;</span>);
<a name="l02052"></a>02052 
<a name="l02053"></a>02053   <span class="keywordflow">if</span> (s_proc.<a class="code" href="classFl__Process.html#aaf463c6a6bdb7af9d2d5a1c596729a3f">popen</a>((<span class="keywordtype">char</span> *)command) == <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l02054"></a>02054     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Unable to run shell command: %s&quot;</span>, strerror(errno));
<a name="l02055"></a>02055     <span class="keywordflow">return</span>;
<a name="l02056"></a>02056   }
<a name="l02057"></a>02057 
<a name="l02058"></a>02058   <a class="code" href="alignment__panel_8cxx.html#aed0ff58e6bf51e773874c717225adfd0">shell_run_button</a>-&gt;<a class="code" href="classFl__Widget.html#a2eb3d2eebe8ba623c4007d4f8e66a1ee">deactivate</a>();
<a name="l02059"></a>02059   <a class="code" href="alignment__panel_8cxx.html#a99e4bb0f50556384d67953eef29b5924">shell_run_window</a>-&gt;<a class="code" href="classFl__Window.html#adbe55edbed0b87026b12a8b78a27f083">hotspot</a>(<a class="code" href="alignment__panel_8cxx.html#a083b12aab260fb874533b555e023f546">shell_run_display</a>);
<a name="l02060"></a>02060   <a class="code" href="alignment__panel_8cxx.html#a99e4bb0f50556384d67953eef29b5924">shell_run_window</a>-&gt;<a class="code" href="classFl__Double__Window.html#a4d1c3cbb1184c6785df7465b0c657025">show</a>();
<a name="l02061"></a>02061 
<a name="l02062"></a>02062   <a class="code" href="classFl.html#a799b8278326b3c2db15687c43c11aaf6">Fl::add_fd</a>(fileno(s_proc.<a class="code" href="classFl__Process.html#a50b687b8b8225d6399b5dd06c23cfc07">desc</a>()), <a class="code" href="fluid_8cxx.html#a1389f4de31299b45f169bbf6a7cd1792">shell_pipe_cb</a>);
<a name="l02063"></a>02063 
<a name="l02064"></a>02064   <span class="keywordflow">while</span> (s_proc.<a class="code" href="classFl__Process.html#a50b687b8b8225d6399b5dd06c23cfc07">desc</a>()) <a class="code" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait</a>();
<a name="l02065"></a>02065 
<a name="l02066"></a>02066   <a class="code" href="alignment__panel_8cxx.html#aed0ff58e6bf51e773874c717225adfd0">shell_run_button</a>-&gt;<a class="code" href="classFl__Widget.html#ae0ca5f7159aceba7d813c81167e684bb">activate</a>();
<a name="l02067"></a>02067   <a class="code" href="alignment__panel_8cxx.html#a99e4bb0f50556384d67953eef29b5924">shell_run_window</a>-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>(<span class="stringliteral">&quot;Shell Command Complete&quot;</span>);
<a name="l02068"></a>02068   <a class="code" href="group__group__comdlg.html#ga7df367b297d2b2d1af087e1adbf3c265">fl_beep</a>();
<a name="l02069"></a>02069 
<a name="l02070"></a>02070   <span class="keywordflow">while</span> (<a class="code" href="alignment__panel_8cxx.html#a99e4bb0f50556384d67953eef29b5924">shell_run_window</a>-&gt;<a class="code" href="classFl__Window.html#aa09300542b2d8b49fc69a037bdd3b742">shown</a>()) <a class="code" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait</a>();
<a name="l02071"></a>02071 }
<a name="l02072"></a>02072 <span class="preprocessor">#else</span>
<a name="l02073"></a>02073 <span class="preprocessor"></span><span class="comment">// Just do basic shell command stuff, no status window...</span>
<a name="l02074"></a>02074 <span class="keywordtype">void</span>
<a name="l02075"></a>02075 <a class="code" href="alignment__panel_8h.html#a79d07333519e3c5e9d0ad265f40f5e05">do_shell_command</a>(<a class="code" href="classFl__Return__Button.html">Fl_Return_Button</a>*, <span class="keywordtype">void</span>*) {
<a name="l02076"></a>02076   <span class="keyword">const</span> <span class="keywordtype">char</span>    *command;       <span class="comment">// Command to run</span>
<a name="l02077"></a>02077   <span class="keywordtype">int</span>           status;         <span class="comment">// Status from command...</span>
<a name="l02078"></a>02078 
<a name="l02079"></a>02079   <span class="keywordflow">if</span> (!prepare_shell_command(command)) <span class="keywordflow">return</span>;
<a name="l02080"></a>02080 
<a name="l02081"></a>02081   <span class="keywordflow">if</span> ((status = system(command)) != 0) {
<a name="l02082"></a>02082     <a class="code" href="fl__ask_8H.html#a44ce8540fd801b6adaaf5e499c2fc66e">fl_alert</a>(<span class="stringliteral">&quot;Shell command returned status %d!&quot;</span>, status);
<a name="l02083"></a>02083   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="alignment__panel_8cxx.html#abc0eac728316ac6829459f1dbbb5d00c">completion_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()) {
<a name="l02084"></a>02084     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Shell command completed successfully!&quot;</span>);
<a name="l02085"></a>02085   }
<a name="l02086"></a>02086 }
<a name="l02087"></a>02087 <span class="preprocessor">#endif // !__MWERKS__</span>
<a name="l02088"></a>02088 <span class="preprocessor"></span>
<a name="l02089"></a>02089 <span class="keywordtype">void</span>
<a name="l02090"></a><a class="code" href="fluid_8cxx.html#a6965f54617edc2d93f763e5112658efd">02090</a> <a class="code" href="fluid_8cxx.html#a6965f54617edc2d93f763e5112658efd">show_shell_window</a>() {
<a name="l02091"></a>02091   <a class="code" href="alignment__panel_8cxx.html#a39f319b69c48e2935cb04bc168736d0c">shell_window</a>-&gt;<a class="code" href="classFl__Window.html#adbe55edbed0b87026b12a8b78a27f083">hotspot</a>(<a class="code" href="alignment__panel_8cxx.html#ad91d85c91fe94c63872ffcd343e4eee5">shell_command_input</a>);
<a name="l02092"></a>02092   <a class="code" href="alignment__panel_8cxx.html#a39f319b69c48e2935cb04bc168736d0c">shell_window</a>-&gt;<a class="code" href="classFl__Double__Window.html#a4d1c3cbb1184c6785df7465b0c657025">show</a>();
<a name="l02093"></a>02093 }
<a name="l02094"></a>02094 
<a name="l02095"></a><a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">02095</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">set_filename</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *c) {
<a name="l02096"></a>02096   <span class="keywordflow">if</span> (filename) free((<span class="keywordtype">void</span> *)filename);
<a name="l02097"></a>02097   filename = c ? strdup(c) : <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l02098"></a>02098 
<a name="l02099"></a>02099   <span class="keywordflow">if</span> (filename) <a class="code" href="fluid_8cxx.html#aec5ea22adaffdb7c81cd1f6346287c22">update_history</a>(filename);
<a name="l02100"></a>02100 
<a name="l02101"></a>02101   <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>);
<a name="l02102"></a>02102 }
<a name="l02103"></a>02103 
<a name="l02104"></a>02104 <span class="comment">//</span>
<a name="l02105"></a>02105 <span class="comment">// The Source View system offers an immediate preview of the code</span>
<a name="l02106"></a>02106 <span class="comment">// files that will be generated by FLUID. It also marks the code</span>
<a name="l02107"></a>02107 <span class="comment">// generated for the last selected item in the header and the source</span>
<a name="l02108"></a>02108 <span class="comment">// file.</span>
<a name="l02109"></a>02109 <span class="comment">//</span>
<a name="l02110"></a>02110 <span class="comment">// Can we patent this?  ;-)  - Matt, mm@matthiasm.com</span>
<a name="l02111"></a>02111 <span class="comment">//</span>
<a name="l02112"></a>02112 
<a name="l02113"></a>02113 <span class="comment">//</span>
<a name="l02114"></a>02114 <span class="comment">// Update the header and source code highlighting depending on the</span>
<a name="l02115"></a>02115 <span class="comment">// currently selected object</span>
<a name="l02116"></a>02116 <span class="comment">//</span>
<a name="l02117"></a><a class="code" href="fluid_8cxx.html#a0585fddb83b192c71ff317281590237a">02117</a> <span class="keywordtype">void</span> <a class="code" href="Fl__Widget__Type_8cxx.html#a0585fddb83b192c71ff317281590237a">update_sourceview_position</a>()
<a name="l02118"></a>02118 {
<a name="l02119"></a>02119   <span class="keywordflow">if</span> (!<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a> || !<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>-&gt;<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>())
<a name="l02120"></a>02120     <span class="keywordflow">return</span>;
<a name="l02121"></a>02121   <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a0a51d1f1a2d428a33731600fe900a33f">sv_autoposition</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>()==0)
<a name="l02122"></a>02122     <span class="keywordflow">return</span>;
<a name="l02123"></a>02123   <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a> &amp;&amp; <a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>-&gt;<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>() &amp;&amp; <a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>) {
<a name="l02124"></a>02124     <span class="keywordtype">int</span> pos0, pos1;
<a name="l02125"></a>02125     <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a15fcdc0f2f60c238c8b917abcfec6345">sv_source</a>-&gt;<a class="code" href="classFl__Widget.html#a8e786561b8670afd0b4a582de5087905">visible_r</a>()) {
<a name="l02126"></a>02126       pos0 = <a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>-&gt;<a class="code" href="classFl__Type.html#a0b70e96c7df2d11c9508383357e36738">code_position</a>;
<a name="l02127"></a>02127       pos1 = <a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>-&gt;<a class="code" href="classFl__Type.html#abda2defcf2e11138f16fde9b01af934f">code_position_end</a>;
<a name="l02128"></a>02128       <span class="keywordflow">if</span> (pos0&gt;=0) {
<a name="l02129"></a>02129         <span class="keywordflow">if</span> (pos1&lt;pos0)
<a name="l02130"></a>02130           pos1 = pos0;
<a name="l02131"></a>02131         <a class="code" href="function__panel_8cxx.html#a15fcdc0f2f60c238c8b917abcfec6345">sv_source</a>-&gt;<a class="code" href="classFl__Text__Display.html#a0244a43078c78af8f528f933a6719490">buffer</a>()-&gt;highlight(pos0, pos1);
<a name="l02132"></a>02132         <span class="keywordtype">int</span> line = <a class="code" href="function__panel_8cxx.html#a15fcdc0f2f60c238c8b917abcfec6345">sv_source</a>-&gt;<a class="code" href="classFl__Text__Display.html#a0244a43078c78af8f528f933a6719490">buffer</a>()-&gt;count_lines(0, pos0);
<a name="l02133"></a>02133         <a class="code" href="function__panel_8cxx.html#a15fcdc0f2f60c238c8b917abcfec6345">sv_source</a>-&gt;<a class="code" href="classFl__Text__Display.html#aa6705c216c0626763f3f34d3e318d465" title="Scrolls the current buffer to start at the specified line and column.">scroll</a>(line, 0);
<a name="l02134"></a>02134       }
<a name="l02135"></a>02135     }
<a name="l02136"></a>02136     <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a5f0732c9fec01be1869aff62c26d29b8">sv_header</a>-&gt;<a class="code" href="classFl__Widget.html#a8e786561b8670afd0b4a582de5087905">visible_r</a>()) {
<a name="l02137"></a>02137       pos0 = <a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>-&gt;<a class="code" href="classFl__Type.html#a9a3dcf2ec938c7022c53da788806cd62">header_position</a>;
<a name="l02138"></a>02138       pos1 = <a class="code" href="classFl__Type.html#acee4557fd7430b66a9ef09c456874149">Fl_Type::current</a>-&gt;<a class="code" href="classFl__Type.html#ac0de8a77f6a6ec20df91d55f8b8fc988">header_position_end</a>;
<a name="l02139"></a>02139       <span class="keywordflow">if</span> (pos0&gt;=0) {
<a name="l02140"></a>02140         <span class="keywordflow">if</span> (pos1&lt;pos0)
<a name="l02141"></a>02141           pos1 = pos0;
<a name="l02142"></a>02142         <a class="code" href="function__panel_8cxx.html#a5f0732c9fec01be1869aff62c26d29b8">sv_header</a>-&gt;<a class="code" href="classFl__Text__Display.html#a0244a43078c78af8f528f933a6719490">buffer</a>()-&gt;highlight(pos0, pos1);
<a name="l02143"></a>02143         <span class="keywordtype">int</span> line = <a class="code" href="function__panel_8cxx.html#a5f0732c9fec01be1869aff62c26d29b8">sv_header</a>-&gt;<a class="code" href="classFl__Text__Display.html#a0244a43078c78af8f528f933a6719490">buffer</a>()-&gt;count_lines(0, pos0);
<a name="l02144"></a>02144         <a class="code" href="function__panel_8cxx.html#a5f0732c9fec01be1869aff62c26d29b8">sv_header</a>-&gt;<a class="code" href="classFl__Text__Display.html#aa6705c216c0626763f3f34d3e318d465" title="Scrolls the current buffer to start at the specified line and column.">scroll</a>(line, 0);
<a name="l02145"></a>02145       }
<a name="l02146"></a>02146     }
<a name="l02147"></a>02147   }
<a name="l02148"></a>02148 }
<a name="l02149"></a>02149 
<a name="l02150"></a><a class="code" href="function__panel_8h.html#aff42c86bcb14161d8de934315fb577d5">02150</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#aff42c86bcb14161d8de934315fb577d5">update_sourceview_position_cb</a>(<a class="code" href="classFl__Tabs.html">Fl_Tabs</a>*, <span class="keywordtype">void</span>*)
<a name="l02151"></a>02151 {
<a name="l02152"></a>02152   <a class="code" href="Fl__Widget__Type_8cxx.html#a0585fddb83b192c71ff317281590237a">update_sourceview_position</a>();
<a name="l02153"></a>02153 }
<a name="l02154"></a>02154 
<a name="l02155"></a>02155 <span class="keyword">static</span> <span class="keywordtype">char</span> *sv_source_filename = 0;
<a name="l02156"></a>02156 <span class="keyword">static</span> <span class="keywordtype">char</span> *sv_header_filename = 0;
<a name="l02157"></a>02157 
<a name="l02158"></a>02158 <span class="comment">//</span>
<a name="l02159"></a>02159 <span class="comment">// Generate a header and source file in a temporary directory and</span>
<a name="l02160"></a>02160 <span class="comment">// load those into the Code Viewer widgets.</span>
<a name="l02161"></a>02161 <span class="comment">//</span>
<a name="l02162"></a><a class="code" href="function__panel_8h.html#a68a1b777b2bf0adde28b1fe978480aba">02162</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a68a1b777b2bf0adde28b1fe978480aba">update_sourceview_cb</a>(<a class="code" href="classFl__Button.html" title="Buttons generate callbacks when they are clicked by the user.">Fl_Button</a>*, <span class="keywordtype">void</span>*)
<a name="l02163"></a>02163 {
<a name="l02164"></a>02164   <span class="keywordflow">if</span> (!<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a> || !<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>-&gt;<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>())
<a name="l02165"></a>02165     <span class="keywordflow">return</span>;
<a name="l02166"></a>02166   <span class="comment">// generate space for the source and header file filenames</span>
<a name="l02167"></a>02167   <span class="keywordflow">if</span> (!sv_source_filename) {
<a name="l02168"></a>02168     sv_source_filename = (<span class="keywordtype">char</span>*)malloc(<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>);
<a name="l02169"></a>02169     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#acf3c545a4006ef50b091ed45b6f7ce2a" title="Creates a path that is related to the preferences file and that is usable for additional application ...">getUserdataPath</a>(sv_source_filename, <a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>);
<a name="l02170"></a>02170     <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(sv_source_filename, <span class="stringliteral">&quot;source_view_tmp.cxx&quot;</span>, <a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>);
<a name="l02171"></a>02171   }
<a name="l02172"></a>02172   <span class="keywordflow">if</span> (!sv_header_filename) {
<a name="l02173"></a>02173     sv_header_filename = (<span class="keywordtype">char</span>*)malloc(<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>);
<a name="l02174"></a>02174     <a class="code" href="alignment__panel_8h.html#abf80c94ef93718fb09cc1093fef9df11">fluid_prefs</a>.<a class="code" href="classFl__Preferences.html#acf3c545a4006ef50b091ed45b6f7ce2a" title="Creates a path that is related to the preferences file and that is usable for additional application ...">getUserdataPath</a>(sv_header_filename, <a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>);
<a name="l02175"></a>02175     <a class="code" href="flstring_8h.html#a86dd23d247c7f6620c8a769bc202c71c">strlcat</a>(sv_header_filename, <span class="stringliteral">&quot;source_view_tmp.h&quot;</span>, <a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>);
<a name="l02176"></a>02176   }
<a name="l02177"></a>02177 
<a name="l02178"></a>02178   <a class="code" href="flstring_8h.html#a61ae5a0c7536d81d0fb52661f75254cb">strlcpy</a>(i18n_program, <a class="code" href="group__filenames.html#ga0ac0f44a1709c6ff94f56a8954dc8fd6">fl_filename_name</a>(sv_source_filename), <span class="keyword">sizeof</span>(i18n_program));
<a name="l02179"></a>02179   <a class="code" href="group__filenames.html#ga957325ab216ec3290693a737ac8881a3">fl_filename_setext</a>(i18n_program, <span class="keyword">sizeof</span>(i18n_program), <span class="stringliteral">&quot;&quot;</span>);
<a name="l02180"></a>02180   <span class="keyword">const</span> <span class="keywordtype">char</span> *code_file_name_bak = <a class="code" href="file_8cxx.html#ab206f3bb486783a62ccd3225e4f56363">code_file_name</a>;
<a name="l02181"></a>02181   code_file_name = sv_source_filename;
<a name="l02182"></a>02182   <span class="keyword">const</span> <span class="keywordtype">char</span> *header_file_name_bak = <a class="code" href="code_8cxx.html#a2439435a3813bc1c7f294303fec38efd">header_file_name</a>;
<a name="l02183"></a>02183   header_file_name = sv_header_filename;
<a name="l02184"></a>02184 
<a name="l02185"></a>02185   <span class="comment">// generate the code and load the files</span>
<a name="l02186"></a>02186   <a class="code" href="code_8cxx.html#a86c51a60fb88fa59370b6aa011215ed8">write_sourceview</a> = 1;
<a name="l02187"></a>02187   <span class="comment">// generate files</span>
<a name="l02188"></a>02188   <span class="keywordflow">if</span> (<a class="code" href="code_8cxx.html#a3e1266f68106f46fd13061bf8924e0a4">write_code</a>(sv_source_filename, sv_header_filename))
<a name="l02189"></a>02189   {
<a name="l02190"></a>02190     <span class="comment">// load file into source editor</span>
<a name="l02191"></a>02191     <span class="keywordtype">int</span> pos = <a class="code" href="function__panel_8cxx.html#a15fcdc0f2f60c238c8b917abcfec6345">sv_source</a>-&gt;<a class="code" href="classCodeEditor.html#ae3b5f0e39caf71cd9b2b3912c45baa04">top_line</a>();
<a name="l02192"></a>02192     <a class="code" href="function__panel_8cxx.html#a15fcdc0f2f60c238c8b917abcfec6345">sv_source</a>-&gt;<a class="code" href="classFl__Text__Display.html#a0244a43078c78af8f528f933a6719490">buffer</a>()-&gt;loadfile(sv_source_filename);
<a name="l02193"></a>02193     <a class="code" href="function__panel_8cxx.html#a15fcdc0f2f60c238c8b917abcfec6345">sv_source</a>-&gt;<a class="code" href="classFl__Text__Display.html#aa6705c216c0626763f3f34d3e318d465" title="Scrolls the current buffer to start at the specified line and column.">scroll</a>(pos, 0);
<a name="l02194"></a>02194     <span class="comment">// load file into header editor</span>
<a name="l02195"></a>02195     pos = <a class="code" href="function__panel_8cxx.html#a5f0732c9fec01be1869aff62c26d29b8">sv_header</a>-&gt;<a class="code" href="classCodeEditor.html#ae3b5f0e39caf71cd9b2b3912c45baa04">top_line</a>();
<a name="l02196"></a>02196     <a class="code" href="function__panel_8cxx.html#a5f0732c9fec01be1869aff62c26d29b8">sv_header</a>-&gt;<a class="code" href="classFl__Text__Display.html#a0244a43078c78af8f528f933a6719490">buffer</a>()-&gt;loadfile(sv_header_filename);
<a name="l02197"></a>02197     <a class="code" href="function__panel_8cxx.html#a5f0732c9fec01be1869aff62c26d29b8">sv_header</a>-&gt;<a class="code" href="classFl__Text__Display.html#aa6705c216c0626763f3f34d3e318d465" title="Scrolls the current buffer to start at the specified line and column.">scroll</a>(pos, 0);
<a name="l02198"></a>02198     <span class="comment">// update the source code highlighting</span>
<a name="l02199"></a>02199     <a class="code" href="Fl__Widget__Type_8cxx.html#a0585fddb83b192c71ff317281590237a">update_sourceview_position</a>();
<a name="l02200"></a>02200   }
<a name="l02201"></a>02201   <a class="code" href="code_8cxx.html#a86c51a60fb88fa59370b6aa011215ed8">write_sourceview</a> = 0;
<a name="l02202"></a>02202 
<a name="l02203"></a>02203   code_file_name = code_file_name_bak;
<a name="l02204"></a>02204   header_file_name = header_file_name_bak;
<a name="l02205"></a>02205 }
<a name="l02206"></a>02206 
<a name="l02207"></a><a class="code" href="fluid_8cxx.html#a17f9b64dd70c7d5b8e082f401db17a13">02207</a> <span class="keywordtype">void</span> <a class="code" href="fluid_8cxx.html#a17f9b64dd70c7d5b8e082f401db17a13">update_sourceview_timer</a>(<span class="keywordtype">void</span>*)
<a name="l02208"></a>02208 {
<a name="l02209"></a>02209   <a class="code" href="fluid_8cxx.html#a68a1b777b2bf0adde28b1fe978480aba">update_sourceview_cb</a>(0,0);
<a name="l02210"></a>02210 }
<a name="l02211"></a>02211 
<a name="l02212"></a>02212 <span class="comment">// Set the &quot;modified&quot; flag and update the title of the main window...</span>
<a name="l02213"></a><a class="code" href="fluid_8cxx.html#ae86fd9585d69f83d114883b2ad97ed8f">02213</a> <span class="keywordtype">void</span> <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(<span class="keywordtype">int</span> mf) {
<a name="l02214"></a>02214   <span class="keyword">const</span> <span class="keywordtype">char</span>    *basename;
<a name="l02215"></a>02215   <span class="keyword">static</span> <span class="keywordtype">char</span>   title[<a class="code" href="group__filenames.html#ga29253083ed9918c2f9d532bd5ed89cc3">FL_PATH_MAX</a>];
<a name="l02216"></a>02216 
<a name="l02217"></a>02217   <a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a> = mf;
<a name="l02218"></a>02218 
<a name="l02219"></a>02219   <span class="keywordflow">if</span> (main_window) {
<a name="l02220"></a>02220     <span class="keywordflow">if</span> (!filename) basename = <span class="stringliteral">&quot;Untitled.fl&quot;</span>;
<a name="l02221"></a>02221     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((basename = strrchr(filename, <span class="charliteral">&#39;/&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) basename ++;
<a name="l02222"></a>02222 <span class="preprocessor">#if defined(WIN32) || defined(__EMX__)</span>
<a name="l02223"></a>02223 <span class="preprocessor"></span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((basename = strrchr(filename, <span class="charliteral">&#39;\\&#39;</span>)) != <a class="code" href="forms_8H-2.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) basename ++;
<a name="l02224"></a>02224 <span class="preprocessor">#endif // WIN32 || __EMX__</span>
<a name="l02225"></a>02225 <span class="preprocessor"></span>    <span class="keywordflow">else</span> basename = filename;
<a name="l02226"></a>02226 
<a name="l02227"></a>02227     <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) {
<a name="l02228"></a>02228       <a class="code" href="flstring_8h.html#aa367b75c5aed883fef5befbdf04835a4">snprintf</a>(title, <span class="keyword">sizeof</span>(title), <span class="stringliteral">&quot;%s (modified)&quot;</span>, basename);
<a name="l02229"></a>02229       main_window-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>(title);
<a name="l02230"></a>02230     } <span class="keywordflow">else</span> main_window-&gt;<a class="code" href="classFl__Window.html#a51a6665c988138e426fc12b4bf138f7b">label</a>(basename);
<a name="l02231"></a>02231   }
<a name="l02232"></a>02232   <span class="comment">// if the UI was modified in any way, update the Source View panel</span>
<a name="l02233"></a>02233   <span class="keywordflow">if</span> (<a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a> &amp;&amp; <a class="code" href="function__panel_8cxx.html#a2369cd15c4c29c9a85ea108f78fb05b7">sourceview_panel</a>-&gt;<a class="code" href="classFl__Widget.html#ac0b2f353f8d142156ffb27b76a2e9628">visible</a>() &amp;&amp; <a class="code" href="function__panel_8cxx.html#a3e341cc2793c5dc3b18ce42f65c8eed7">sv_autorefresh</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>())
<a name="l02234"></a>02234   {
<a name="l02235"></a>02235     <span class="comment">// we will only update ealiest 0.5 seconds after the last change, and only</span>
<a name="l02236"></a>02236     <span class="comment">// if no other change was made, so dragging a widget will not generate any</span>
<a name="l02237"></a>02237     <span class="comment">// CPU load</span>
<a name="l02238"></a>02238     <a class="code" href="classFl.html#a9a950f0585de6416eb4fee2365a1578f">Fl::remove_timeout</a>(<a class="code" href="fluid_8cxx.html#a17f9b64dd70c7d5b8e082f401db17a13">update_sourceview_timer</a>, 0);
<a name="l02239"></a>02239     <a class="code" href="classFl.html#a23e63eb7cec3a27fa360e66c6e2b2e52">Fl::add_timeout</a>(0.5, <a class="code" href="fluid_8cxx.html#a17f9b64dd70c7d5b8e082f401db17a13">update_sourceview_timer</a>, 0);
<a name="l02240"></a>02240   }
<a name="l02241"></a>02241 
<a name="l02242"></a>02242   <span class="comment">// Enable/disable the Save menu item...</span>
<a name="l02243"></a>02243   <span class="keywordflow">if</span> (<a class="code" href="Fl__Type_8h.html#aec0f4b7eb93b050a62b0b978b2612ff8">modflag</a>) save_item-&gt;<a class="code" href="structFl__Menu__Item.html#adb1b888c6b17f642f6b7ab52422f3f3f">activate</a>();
<a name="l02244"></a>02244   <span class="keywordflow">else</span> save_item-&gt;<a class="code" href="structFl__Menu__Item.html#a3d531242e84a7bf8ee27482052f673a5">deactivate</a>();
<a name="l02245"></a>02245 }
<a name="l02246"></a>02246 
<a name="l02248"></a>02248 
<a name="l02249"></a>02249 <span class="keyword">static</span> <span class="keywordtype">int</span> arg(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv, <span class="keywordtype">int</span>&amp; <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>) {
<a name="l02250"></a>02250   <span class="keywordflow">if</span> (argv[i][1] == <span class="charliteral">&#39;c&#39;</span> &amp;&amp; !argv[i][2]) {compile_only = 1; i++; <span class="keywordflow">return</span> 1;}
<a name="l02251"></a>02251   <span class="keywordflow">if</span> (argv[i][1] == <span class="charliteral">&#39;c&#39;</span> &amp;&amp; argv[i][2] == <span class="charliteral">&#39;s&#39;</span> &amp;&amp; !argv[i][3]) {compile_only = 1; compile_strings = 1; i++; <span class="keywordflow">return</span> 1;}
<a name="l02252"></a>02252   <span class="keywordflow">if</span> (argv[i][1] == <span class="charliteral">&#39;o&#39;</span> &amp;&amp; !argv[i][2] &amp;&amp; i+1 &lt; argc) {
<a name="l02253"></a>02253     code_file_name = argv[i+1];
<a name="l02254"></a>02254     code_file_set  = 1;
<a name="l02255"></a>02255     i += 2;
<a name="l02256"></a>02256     <span class="keywordflow">return</span> 2;
<a name="l02257"></a>02257   }
<a name="l02258"></a>02258   <span class="keywordflow">if</span> (argv[i][1] == <span class="charliteral">&#39;h&#39;</span> &amp;&amp; !argv[i][2]) {
<a name="l02259"></a>02259     header_file_name = argv[i+1];
<a name="l02260"></a>02260     header_file_set  = 1;
<a name="l02261"></a>02261     i += 2;
<a name="l02262"></a>02262     <span class="keywordflow">return</span> 2;
<a name="l02263"></a>02263   }
<a name="l02264"></a>02264   <a class="code" href="classFl__Plugin__Manager.html" title="Fl_Plugin_Manager manages link-time and run-time plugin binaries.">Fl_Plugin_Manager</a> pm(<span class="stringliteral">&quot;commandline&quot;</span>);
<a name="l02265"></a>02265   <span class="keywordtype">int</span> j, n = pm.plugins();
<a name="l02266"></a>02266   <span class="keywordflow">for</span> (j=0; j&lt;n; j++) {
<a name="l02267"></a>02267     <a class="code" href="classFl__Commandline__Plugin.html">Fl_Commandline_Plugin</a> *pi = (<a class="code" href="classFl__Commandline__Plugin.html">Fl_Commandline_Plugin</a>*)pm.plugin(j);
<a name="l02268"></a>02268     <span class="keywordtype">int</span> r = pi-&gt;<a class="code" href="classFl__Commandline__Plugin.html#a112b5b2e494537e18e50a56bb372b2da">arg</a>(argc, argv, i);
<a name="l02269"></a>02269     <span class="keywordflow">if</span> (r) <span class="keywordflow">return</span> r;
<a name="l02270"></a>02270   }
<a name="l02271"></a>02271   <span class="keywordflow">return</span> 0;
<a name="l02272"></a>02272 }
<a name="l02273"></a>02273 
<a name="l02274"></a>02274 <span class="preprocessor">#if ! (defined(WIN32) &amp;&amp; !defined (__CYGWIN__))</span>
<a name="l02275"></a>02275 <span class="preprocessor"></span>
<a name="l02276"></a><a class="code" href="fluid_8cxx.html#a2eb3a925d078699c87789018eaedaf4a">02276</a> <span class="keywordtype">int</span> <a class="code" href="fluid_8cxx.html#a2eb3a925d078699c87789018eaedaf4a">quit_flag</a> = 0;
<a name="l02277"></a>02277 <span class="preprocessor">#include &lt;signal.h&gt;</span>
<a name="l02278"></a>02278 <span class="preprocessor">#ifdef _sigargs</span>
<a name="l02279"></a>02279 <span class="preprocessor"></span><span class="preprocessor">#define SIGARG _sigargs</span>
<a name="l02280"></a>02280 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l02281"></a>02281 <span class="preprocessor"></span><span class="preprocessor">#ifdef __sigargs</span>
<a name="l02282"></a>02282 <span class="preprocessor"></span><span class="preprocessor">#define SIGARG __sigargs</span>
<a name="l02283"></a>02283 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l02284"></a><a class="code" href="fluid_8cxx.html#a4455812314f1c4640836ff5f1c4b7b50">02284</a> <span class="preprocessor"></span><span class="preprocessor">#define SIGARG int // you may need to fix this for older systems</span>
<a name="l02285"></a>02285 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02286"></a>02286 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02287"></a>02287 <span class="preprocessor"></span>
<a name="l02288"></a>02288 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {
<a name="l02289"></a>02289 <span class="keyword">static</span> <span class="keywordtype">void</span> sigint(<a class="code" href="fluid_8cxx.html#a4455812314f1c4640836ff5f1c4b7b50">SIGARG</a>) {
<a name="l02290"></a>02290   signal(SIGINT,sigint);
<a name="l02291"></a>02291   quit_flag = 1;
<a name="l02292"></a>02292 }
<a name="l02293"></a>02293 }
<a name="l02294"></a>02294 <span class="preprocessor">#endif</span>
<a name="l02295"></a>02295 <span class="preprocessor"></span>
<a name="l02296"></a>02296 
<a name="l02297"></a><a class="code" href="fluid_8cxx.html#a3c04138a5bfe5d72780bb7e82a18e627">02297</a> <span class="keywordtype">int</span> <a class="code" href="posixScandir_8cxx.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>(<span class="keywordtype">int</span> argc,<span class="keywordtype">char</span> **argv) {
<a name="l02298"></a>02298   <span class="keywordtype">int</span> i = 1;
<a name="l02299"></a>02299   
<a name="l02300"></a>02300   <span class="keywordflow">if</span> (!<a class="code" href="classFl.html#a115903daf3593748cdd36a5e78e74534">Fl::args</a>(argc,argv,i,arg) || i &lt; argc-1) {
<a name="l02301"></a>02301     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *msg = 
<a name="l02302"></a>02302       <span class="stringliteral">&quot;usage: %s &lt;switches&gt; name.fl\n&quot;</span>
<a name="l02303"></a>02303       <span class="stringliteral">&quot; -c : write .cxx and .h and exit\n&quot;</span>
<a name="l02304"></a>02304       <span class="stringliteral">&quot; -cs : write .cxx and .h and strings and exit\n&quot;</span>
<a name="l02305"></a>02305       <span class="stringliteral">&quot; -o &lt;name&gt; : .cxx output filename, or extension if &lt;name&gt; starts with &#39;.&#39;\n&quot;</span>
<a name="l02306"></a>02306       <span class="stringliteral">&quot; -h &lt;name&gt; : .h output filename, or extension if &lt;name&gt; starts with &#39;.&#39;\n&quot;</span>;
<a name="l02307"></a>02307     <span class="keywordtype">int</span> len = strlen(msg) + strlen(argv[0]) + strlen(<a class="code" href="classFl.html#a64d41edd7d962116d86a9db810210f7b">Fl::help</a>);
<a name="l02308"></a>02308     <a class="code" href="classFl__Plugin__Manager.html" title="Fl_Plugin_Manager manages link-time and run-time plugin binaries.">Fl_Plugin_Manager</a> pm(<span class="stringliteral">&quot;commandline&quot;</span>);
<a name="l02309"></a>02309     <span class="keywordtype">int</span> <a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>, n = pm.<a class="code" href="classFl__Plugin__Manager.html#a4c454afe90d1f532a12d0a9db7de27fe" title="Return the number of plugins in the klass.">plugins</a>();
<a name="l02310"></a>02310     <span class="keywordflow">for</span> (i=0; i&lt;n; i++) {
<a name="l02311"></a>02311       <a class="code" href="classFl__Commandline__Plugin.html">Fl_Commandline_Plugin</a> *pi = (<a class="code" href="classFl__Commandline__Plugin.html">Fl_Commandline_Plugin</a>*)pm.<a class="code" href="classFl__Plugin__Manager.html#a011f00cd299954fd229fc0d3fbcffca5" title="Return the address of a plugin by index.">plugin</a>(i);
<a name="l02312"></a>02312       <span class="keywordflow">if</span> (pi) len += strlen(pi-&gt;<a class="code" href="classFl__Commandline__Plugin.html#a2d1efed24197735c062802aa5b1c86c1">help</a>());
<a name="l02313"></a>02313     }
<a name="l02314"></a>02314     <span class="keywordtype">char</span> *<a class="code" href="png_8h.html#a9843c7a2b7309da8f96021b45fec0d70">buf</a> = (<span class="keywordtype">char</span>*)malloc(len+1);
<a name="l02315"></a>02315     sprintf(buf, msg, argv[0]);
<a name="l02316"></a>02316     <span class="keywordflow">for</span> (i=0; i&lt;n; i++) {
<a name="l02317"></a>02317       <a class="code" href="classFl__Commandline__Plugin.html">Fl_Commandline_Plugin</a> *pi = (<a class="code" href="classFl__Commandline__Plugin.html">Fl_Commandline_Plugin</a>*)pm.<a class="code" href="classFl__Plugin__Manager.html#a011f00cd299954fd229fc0d3fbcffca5" title="Return the address of a plugin by index.">plugin</a>(i);
<a name="l02318"></a>02318       <span class="keywordflow">if</span> (pi) strcat(buf, pi-&gt;<a class="code" href="classFl__Commandline__Plugin.html#a2d1efed24197735c062802aa5b1c86c1">help</a>());
<a name="l02319"></a>02319     }
<a name="l02320"></a>02320     strcat(buf, <a class="code" href="classFl.html#a64d41edd7d962116d86a9db810210f7b">Fl::help</a>);
<a name="l02321"></a>02321 <span class="preprocessor">#ifdef _MSC_VER</span>
<a name="l02322"></a>02322 <span class="preprocessor"></span>    <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, buf);
<a name="l02323"></a>02323 <span class="preprocessor">#else</span>
<a name="l02324"></a>02324 <span class="preprocessor"></span>    fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, buf);
<a name="l02325"></a>02325 <span class="preprocessor">#endif</span>
<a name="l02326"></a>02326 <span class="preprocessor"></span>    free(buf);
<a name="l02327"></a>02327     <span class="keywordflow">return</span> 1;
<a name="l02328"></a>02328   }
<a name="l02329"></a>02329   <span class="keywordflow">if</span> (exit_early)
<a name="l02330"></a>02330     exit(0);
<a name="l02331"></a>02331   
<a name="l02332"></a>02332   <span class="keyword">const</span> <span class="keywordtype">char</span> *c = argv[<a class="code" href="png_8h.html#ac8936188af0c1d2f8b9d0cd25fde43b2">i</a>];
<a name="l02333"></a>02333 
<a name="l02334"></a>02334   <a class="code" href="Fl__Shared__Image_8H.html#a5c361cb2fdac6c22f6259f5e044657f4" title="Register the image formats.">fl_register_images</a>();
<a name="l02335"></a>02335 
<a name="l02336"></a>02336   <a class="code" href="fluid_8cxx.html#a57b111f2496f2afa6688ce0cab773634">make_main_window</a>();
<a name="l02337"></a>02337 
<a name="l02338"></a>02338 
<a name="l02339"></a>02339   <span class="keywordflow">if</span> (c) <a class="code" href="fluid_8cxx.html#a6d69964bb621a0a6b7c83b7bfa250709">set_filename</a>(c);
<a name="l02340"></a>02340   <span class="keywordflow">if</span> (!compile_only) {
<a name="l02341"></a>02341 <span class="preprocessor">#ifdef __APPLE__</span>
<a name="l02342"></a>02342 <span class="preprocessor"></span>    <a class="code" href="group__group__macosx.html#ga0702a54934d10f5b72157137cf291296" title="Register a function called for each file dropped onto an application icon.">fl_open_callback</a>(apple_open_cb);
<a name="l02343"></a>02343 <span class="preprocessor">#endif // __APPLE__</span>
<a name="l02344"></a>02344 <span class="preprocessor"></span>    <a class="code" href="classFl.html#a6d6deb3d4f76b538d508b36700dfb6b0">Fl::visual</a>((<a class="code" href="Enumerations_8H.html#aae982ff3b1a082b1a512b216b98061e0">Fl_Mode</a>)(<a class="code" href="Enumerations_8H.html#aae982ff3b1a082b1a512b216b98061e0a77de126af21a8b581c890c59e0e0a88f">FL_DOUBLE</a>|<a class="code" href="Enumerations_8H.html#aae982ff3b1a082b1a512b216b98061e0a90f0c69fd007454b2ff005387fc43efd">FL_INDEX</a>));
<a name="l02345"></a>02345     <a class="code" href="classFl__File__Icon.html#a8295738f311fee8611990192d5c8ae15">Fl_File_Icon::load_system_icons</a>();
<a name="l02346"></a>02346     main_window-&gt;<a class="code" href="classFl__Widget.html#aa19d0dccbebc8aa2763af265c6597607">callback</a>(<a class="code" href="fluid_8cxx.html#acbffe6f8d55cda6a39766dc92d2e9a9c">exit_cb</a>);
<a name="l02347"></a>02347     <a class="code" href="fluid_8cxx.html#adbc9b0521a04cefacc1f3f50547061b3">position_window</a>(main_window,<span class="stringliteral">&quot;main_window_pos&quot;</span>, 1, 10, 30, <a class="code" href="fluid_8cxx.html#a11f4dfc213e40297e143dad1795f31e3">WINWIDTH</a>, <a class="code" href="fluid_8cxx.html#a557f442fde48886e586513ced4464366">WINHEIGHT</a> );
<a name="l02348"></a>02348     main_window-&gt;<a class="code" href="classFl__Window.html#afc4d3796226dfd4620b4d7cf29c287c9">show</a>(argc,argv);
<a name="l02349"></a>02349     <a class="code" href="fluid_8cxx.html#aa3f0f184cbc92d787193312456a7860e">toggle_widgetbin_cb</a>(0,0);
<a name="l02350"></a>02350     <a class="code" href="fluid_8cxx.html#a6febb02ce135d88eef15bfbde26c1f56">toggle_sourceview_cb</a>(0,0);
<a name="l02351"></a>02351     <span class="keywordflow">if</span> (!c &amp;&amp; <a class="code" href="alignment__panel_8cxx.html#a60f7722b60ca72cfb0fae178f7d228ef">openlast_button</a>-&gt;<a class="code" href="classFl__Button.html#aceffc03f6b14f180a1639e26c91f9a4a">value</a>() &amp;&amp; <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[0][0]) {
<a name="l02352"></a>02352       <span class="comment">// Open previous file when no file specified...</span>
<a name="l02353"></a>02353       <a class="code" href="fluid_8cxx.html#a34f6f03285648e029bca93f9083b9b17">open_history_cb</a>(0, <a class="code" href="fluid_8cxx.html#ae14cff7d49880262dcfd8f1e0dea0157">absolute_history</a>[0]);
<a name="l02354"></a>02354     }
<a name="l02355"></a>02355   }
<a name="l02356"></a>02356   <a class="code" href="undo_8cxx.html#a8673de1da64d8951a7c48ea452ff214f">undo_suspend</a>();
<a name="l02357"></a>02357   <span class="keywordflow">if</span> (c &amp;&amp; !<a class="code" href="file_8cxx.html#aa6bae841a135e1cb4ec189d21afb3df9">read_file</a>(c,0)) {
<a name="l02358"></a>02358     <span class="keywordflow">if</span> (compile_only) {
<a name="l02359"></a>02359       fprintf(stderr,<span class="stringliteral">&quot;%s : %s\n&quot;</span>, c, strerror(errno));
<a name="l02360"></a>02360       exit(1);
<a name="l02361"></a>02361     }
<a name="l02362"></a>02362     <a class="code" href="fl__ask_8H.html#a39c7e2361ffcf61722c22aadbf2b96ab">fl_message</a>(<span class="stringliteral">&quot;Can&#39;t read %s: %s&quot;</span>, c, strerror(errno));
<a name="l02363"></a>02363   }
<a name="l02364"></a>02364   <a class="code" href="undo_8cxx.html#a3c696bc1df68709b06480dcf835d4f85">undo_resume</a>();
<a name="l02365"></a>02365   <span class="keywordflow">if</span> (compile_only) {
<a name="l02366"></a>02366     <span class="keywordflow">if</span> (compile_strings) <a class="code" href="fluid_8cxx.html#a08316bbde185907c026f03ae7364c150">write_strings_cb</a>(0,0);
<a name="l02367"></a>02367     <a class="code" href="fluid_8cxx.html#a8e952052b4225f043f44665b398a5616">write_cb</a>(0,0);
<a name="l02368"></a>02368     exit(0);
<a name="l02369"></a>02369   }
<a name="l02370"></a>02370   <a class="code" href="Fl__Type_8h.html#ae86fd9585d69f83d114883b2ad97ed8f">set_modflag</a>(0);
<a name="l02371"></a>02371   <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l02372"></a>02372 <span class="preprocessor">#ifndef WIN32</span>
<a name="l02373"></a>02373 <span class="preprocessor"></span>  signal(SIGINT,sigint);
<a name="l02374"></a>02374 <span class="preprocessor">#endif</span>
<a name="l02375"></a>02375 <span class="preprocessor"></span>
<a name="l02376"></a>02376   <a class="code" href="alignment__panel_8h.html#aed2fec1e7b79f0be7e618952dcdb6096">grid_cb</a>(<a class="code" href="alignment__panel_8cxx.html#acb5e16dd68f8c7779325b99edfe8b489">horizontal_input</a>, 0); <span class="comment">// Makes sure that windows get snap params...</span>
<a name="l02377"></a>02377 
<a name="l02378"></a>02378 <span class="preprocessor">#ifdef WIN32</span>
<a name="l02379"></a>02379 <span class="preprocessor"></span>  <a class="code" href="classFl.html#a7a3b1236b41800d24267288c564b187a">Fl::run</a>();
<a name="l02380"></a>02380 <span class="preprocessor">#else</span>
<a name="l02381"></a>02381 <span class="preprocessor"></span>  <span class="keywordflow">while</span> (!quit_flag) <a class="code" href="classFl.html#a108a84216f0b3fa1cb0c46ab7449a312">Fl::wait</a>();
<a name="l02382"></a>02382 
<a name="l02383"></a>02383   <span class="keywordflow">if</span> (quit_flag) <a class="code" href="fluid_8cxx.html#acbffe6f8d55cda6a39766dc92d2e9a9c">exit_cb</a>(0,0);
<a name="l02384"></a>02384 <span class="preprocessor">#endif // WIN32</span>
<a name="l02385"></a>02385 <span class="preprocessor"></span>
<a name="l02386"></a>02386   <a class="code" href="undo_8cxx.html#ab113565d0a6413aa8a846527b470e1b2">undo_clear</a>();
<a name="l02387"></a>02387 
<a name="l02388"></a>02388   <span class="keywordflow">return</span> (0);
<a name="l02389"></a>02389 }
<a name="l02390"></a>02390 
<a name="l02391"></a>02391 <span class="comment">//</span>
<a name="l02392"></a>02392 <span class="comment">// End of &quot;$Id: fluid.cxx 8202 2011-01-06 21:36:04Z matt $&quot;.</span>
<a name="l02393"></a>02393 <span class="comment">//</span>
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="fluid_8cxx.html">fluid.cxx</a>      </li>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="#" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3</small></address>
</body>

<!-- Mirrored from dox.sfr-fresh.com/fltk-1.3.0rc3-source/fluid_8cxx_source.html by HTTrack Website Copier/3.x [XR&CO'2010], Wed, 16 Feb 2011 23:37:54 GMT -->
</html>
